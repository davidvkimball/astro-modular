/*
THIS IS A GENERATED/BUNDLED FILE BY ESBUILD
if you want to view the source, please visit the github repository of this plugin
*/

"use strict";
var __create = Object.create;
var __defProp = Object.defineProperty;
var __getOwnPropDesc = Object.getOwnPropertyDescriptor;
var __getOwnPropNames = Object.getOwnPropertyNames;
var __getProtoOf = Object.getPrototypeOf;
var __hasOwnProp = Object.prototype.hasOwnProperty;
var __export = (target, all) => {
  for (var name in all)
    __defProp(target, name, { get: all[name], enumerable: true });
};
var __copyProps = (to, from, except, desc) => {
  if (from && typeof from === "object" || typeof from === "function") {
    for (let key of __getOwnPropNames(from))
      if (!__hasOwnProp.call(to, key) && key !== except)
        __defProp(to, key, { get: () => from[key], enumerable: !(desc = __getOwnPropDesc(from, key)) || desc.enumerable });
  }
  return to;
};
var __toESM = (mod, isNodeMode, target) => (target = mod != null ? __create(__getProtoOf(mod)) : {}, __copyProps(
  // If the importer is in node compatibility mode or this is not an ESM
  // file that has been converted to a CommonJS file using a Babel-
  // compatible transform (i.e. "__esModule" has not been set), then set
  // "default" to the CommonJS "module.exports" for node compatibility.
  isNodeMode || !mod || !mod.__esModule ? __defProp(target, "default", { value: mod, enumerable: true }) : target,
  mod
));
var __toCommonJS = (mod) => __copyProps(__defProp({}, "__esModule", { value: true }), mod);

// src/main.ts
var main_exports = {};
__export(main_exports, {
  default: () => ZenMode
});
module.exports = __toCommonJS(main_exports);
var import_obsidian3 = require("obsidian");

// src/settings.ts
var DEFAULT_SETTINGS = {
  zenMode: false,
  leftSidebar: false,
  rightSidebar: false,
  fullscreen: false,
  exitButtonVisibility: "always",
  autoHideButtonOnDesktop: false,
  hideProperties: false,
  hideInlineTitle: false,
  topPadding: 0,
  bottomPadding: 0,
  focusedFileMode: false,
  hideStatusBar: false
};

// src/settings-tab.ts
var import_obsidian2 = require("obsidian");

// src/utils/settings-compat.ts
var import_obsidian = require("obsidian");
var ObsidianModule = __toESM(require("obsidian"), 1);
function createSettingsGroup(containerEl, heading, manifestId) {
  if ((0, import_obsidian.requireApiVersion)("1.11.0")) {
    const SettingGroupClass = ObsidianModule.SettingGroup;
    if (SettingGroupClass) {
      const group = heading ? new SettingGroupClass(containerEl).setHeading(heading) : new SettingGroupClass(containerEl);
      return {
        addSetting(cb) {
          group.addSetting(cb);
        }
      };
    }
  }
  if (manifestId) {
    containerEl.addClass(`${manifestId}-settings-compat`);
  }
  {
    if (heading) {
      const headingEl = containerEl.createDiv("setting-group-heading");
      headingEl.createEl("h3", { text: heading });
    }
    return {
      addSetting(cb) {
        const setting = new import_obsidian.Setting(containerEl);
        cb(setting);
      }
    };
  }
}

// src/settings-tab.ts
var ZenModeSettingTab = class extends import_obsidian2.PluginSettingTab {
  /**
   * Creates a new settings tab instance.
   * @param app - The Obsidian app instance
   * @param plugin - The Zen Mode plugin instance
   */
  constructor(app, plugin) {
    super(app, plugin);
    this.plugin = plugin;
  }
  /**
   * Displays the settings tab UI.
   * Creates all setting controls and registers change handlers.
   */
  display() {
    const { containerEl } = this;
    containerEl.empty();
    const generalGroup = createSettingsGroup(
      containerEl,
      void 0,
      "zenmode"
    );
    generalGroup.addSetting((setting) => {
      setting.setName("Full screen").setDesc(
        "Automatically enter fullscreen when enabling zen mode."
      ).addToggle(
        (toggle) => toggle.setValue(this.plugin.settings.fullscreen).onChange((value) => {
          this.plugin.settings.fullscreen = value;
          void this.plugin.saveSettings();
        })
      );
    });
    generalGroup.addSetting((setting) => {
      setting.setName("Show zen mode exit button").setDesc(
        "When to show the exit button in zen mode. You can also exit via the command palette, by pressing esc, or by assigning a hotkey to the 'toggle zen mode' command."
      ).addDropdown(
        (dropdown) => dropdown.addOption("always", "Always show").addOption("mobile-only", "Mobile only").addOption("never", "Never show").setValue(this.plugin.settings.exitButtonVisibility).onChange((value) => {
          this.plugin.settings.exitButtonVisibility = value;
          void this.plugin.saveSettings();
          this.plugin.refresh();
        })
      );
    });
    generalGroup.addSetting((setting) => {
      setting.setName("Auto-hide zen mode exit button on desktop").setDesc(
        "When enabled, the exit button is hidden on desktop but reveals itself on hover as long as the zen mode exit button is on."
      ).addToggle(
        (toggle) => toggle.setValue(this.plugin.settings.autoHideButtonOnDesktop).onChange((value) => {
          this.plugin.settings.autoHideButtonOnDesktop = value;
          void this.plugin.saveSettings();
          this.plugin.refresh();
        })
      );
    });
    generalGroup.addSetting((setting) => {
      setting.setName("Hide properties in zen mode").setDesc("Hide properties when zen mode is active.").addToggle(
        (toggle) => toggle.setValue(this.plugin.settings.hideProperties).onChange((value) => {
          this.plugin.settings.hideProperties = value;
          void this.plugin.saveSettings();
          this.plugin.refresh();
        })
      );
    });
    generalGroup.addSetting((setting) => {
      setting.setName("Hide inline title in zen mode").setDesc(
        "Hide the inline title (note title) when zen mode is active."
      ).addToggle(
        (toggle) => toggle.setValue(this.plugin.settings.hideInlineTitle).onChange((value) => {
          this.plugin.settings.hideInlineTitle = value;
          void this.plugin.saveSettings();
          this.plugin.refresh();
        })
      );
    });
    generalGroup.addSetting((setting) => {
      setting.setName("Hide status bar in zen mode").setDesc("Hide the status bar when zen mode is active.").addToggle(
        (toggle) => toggle.setValue(this.plugin.settings.hideStatusBar).onChange((value) => {
          this.plugin.settings.hideStatusBar = value;
          void this.plugin.saveSettings();
          this.plugin.refresh();
        })
      );
    });
    generalGroup.addSetting((setting) => {
      setting.setName("Top padding").setDesc("Top padding in pixels (0-100).").addSlider(
        (slider) => slider.setLimits(0, 100, 1).setValue(this.plugin.settings.topPadding).setDynamicTooltip().onChange((value) => {
          this.plugin.settings.topPadding = value;
          void this.plugin.saveSettings();
          this.plugin.refresh();
        })
      );
    });
    generalGroup.addSetting((setting) => {
      setting.setName("Bottom padding").setDesc("Bottom padding in pixels (0-100).").addSlider(
        (slider) => slider.setLimits(0, 100, 1).setValue(this.plugin.settings.bottomPadding).setDynamicTooltip().onChange((value) => {
          this.plugin.settings.bottomPadding = value;
          void this.plugin.saveSettings();
          this.plugin.refresh();
        })
      );
    });
    generalGroup.addSetting((setting) => {
      setting.setName("Focused file mode").setDesc(
        "Only show the active file in zen mode, hide all other panes."
      ).addToggle(
        (toggle) => toggle.setValue(this.plugin.settings.focusedFileMode).onChange((value) => {
          this.plugin.settings.focusedFileMode = value;
          void this.plugin.saveSettings();
          this.plugin.refresh();
        })
      );
    });
  }
};

// src/utils/helpers.ts
function setCssProps(element, props) {
  Object.entries(props).forEach(([key, value]) => {
    const cssKey = key.replace(/([a-z])([A-Z])/g, "$1-$2").toLowerCase();
    element.style.setProperty(cssKey, value);
  });
}

// src/main.ts
var ZenMode = class extends import_obsidian3.Plugin {
  constructor() {
    super(...arguments);
    // Safe: always initialized in onload
    this.hasButton = false;
    this._isTogglingZen = false;
    this.visualViewportResizeHandler = null;
    this._hasShownInitialHighlight = false;
    this._highlightTimeouts = [];
    /**
     * Refreshes the plugin state after settings changes.
     * Updates styles, sidebar visibility, button visibility, and focused file mode.
     */
    this.refresh = () => {
      this.updateStyle();
      this.setSidebarVisibility();
      this.setButtonVisibility();
      void this.updateFocusedFileMode();
    };
    /**
     * Updates CSS classes and data attributes based on current zen mode settings.
     * Applies zen mode styling, padding, and feature flags to the document body.
     */
    this.updateStyle = () => {
      document.body.classList.toggle("zenmode-active", this.settings.zenMode);
      document.documentElement.style.setProperty(
        "--zen-mode-top-padding",
        `${this.settings.topPadding}px`
      );
      document.documentElement.style.setProperty(
        "--zen-mode-bottom-padding",
        `${this.settings.bottomPadding}px`
      );
      if (this.settings.zenMode) {
        document.body.classList.toggle(
          "zenmode-hide-properties",
          this.settings.hideProperties
        );
      } else {
        document.body.classList.remove("zenmode-hide-properties");
      }
      if (this.settings.zenMode) {
        document.body.setAttribute(
          "data-zen-hide-inline-title",
          this.settings.hideInlineTitle.toString()
        );
        document.body.setAttribute(
          "data-zen-focused-file",
          this.settings.focusedFileMode.toString()
        );
        document.body.setAttribute(
          "data-zen-hide-status-bar",
          this.settings.hideStatusBar.toString()
        );
      } else {
        document.body.removeAttribute("data-zen-hide-inline-title");
        document.body.removeAttribute("data-zen-focused-file");
        document.body.removeAttribute("data-zen-hide-status-bar");
      }
    };
  }
  /**
   * Called when the plugin is loaded.
   * Initializes settings, registers commands, ribbon icon, and event handlers.
   */
  async onload() {
    await this.loadSettings();
    this.addSettingTab(new ZenModeSettingTab(this.app, this));
    this.addCommand({
      id: "toggle-zen-mode",
      name: "Toggle",
      callback: () => {
        void this.toggleZenMode();
      }
    });
    this.addRibbonIcon("expand", "Toggle zen mode", () => {
      void this.toggleZenMode();
    });
    this.registerEvent(
      this.app.workspace.on("active-leaf-change", () => {
        void this.updateFocusedFileMode();
      })
    );
    this.registerDomEvent(document, "keydown", (evt) => {
      var _a;
      if (evt.key === "Escape" && this.settings.zenMode) {
        const target = evt.target;
        if (target) {
          const cmEditor = target.closest(".cm-editor");
          if (cmEditor) {
            const vault = this.app.vault;
            if (((_a = vault.config) == null ? void 0 : _a.vimMode) === true) {
              return;
            }
          }
          if (target instanceof HTMLTextAreaElement && target.className && target.className.includes("excalidraw")) {
            return;
          }
        }
        const activeModal = document.querySelector(".modal");
        if (!activeModal) {
          void this.toggleZenMode();
          evt.preventDefault();
        }
      }
    });
    this.refresh();
  }
  /**
   * Called when the plugin is unloaded.
   * Cleans up event listeners, timeouts, and removes the exit button.
   */
  onunload() {
    this._highlightTimeouts.forEach((id) => clearTimeout(id));
    if (this.buttonContainer) {
      this.buttonContainer.remove();
    }
    if (this.visualViewportResizeHandler && window.visualViewport) {
      window.visualViewport.removeEventListener(
        "resize",
        this.visualViewportResizeHandler
      );
    }
  }
  /**
   * Loads settings from disk, merging with default settings.
   */
  async loadSettings() {
    const loadedData = await this.loadData();
    this.settings = { ...DEFAULT_SETTINGS, ...loadedData };
  }
  /**
   * Saves current settings to disk.
   */
  async saveSettings() {
    await this.saveData(this.settings);
  }
  /**
   * Manages sidebar visibility based on zen mode state.
   * When entering zen mode, saves current sidebar state and collapses sidebars.
   * When exiting zen mode, restores sidebars to their previous state.
   */
  setSidebarVisibility() {
    const app = this.app;
    if (app.workspace.leftSplit == void 0 || app.workspace.rightSplit == void 0) {
      return;
    }
    if (!this.settings.zenMode) {
      if (!this.settings.leftSidebar) {
        app.workspace.leftSplit.expand();
      }
      if (!this.settings.rightSidebar) {
        app.workspace.rightSplit.expand();
      }
    } else {
      this.settings.rightSidebar = this.app.workspace.rightSplit.collapsed;
      this.settings.leftSidebar = this.app.workspace.leftSplit.collapsed;
      if (app.workspace.leftSplit.collapsed != this.settings.zenMode) {
        app.workspace.leftSplit.collapse();
      }
      if (app.workspace.rightSplit.collapsed != this.settings.zenMode) {
        app.workspace.rightSplit.collapse();
      }
    }
  }
  /**
   * Creates the zen mode exit button and registers event listeners for positioning.
   * The button allows users to exit zen mode and adjusts position for mobile navigation bars.
   */
  createButton() {
    this.buttonContainer = document.createElement("div");
    this.buttonContainer.classList.add("zenmode-button");
    this.button = new import_obsidian3.ButtonComponent(this.buttonContainer);
    this.button.setIcon("shrink");
    this.button.onClick(() => {
      void this.toggleZenMode();
    });
    document.body.appendChild(this.buttonContainer);
    this.adjustButtonPosition();
    this.registerDomEvent(window, "resize", () => {
      this.adjustButtonPosition();
    });
    if (window.visualViewport) {
      this.visualViewportResizeHandler = () => {
        this.adjustButtonPosition();
      };
      window.visualViewport.addEventListener(
        "resize",
        this.visualViewportResizeHandler
      );
    }
  }
  /**
   * Adjusts the exit button position on mobile devices to account for navigation bars.
   * Calculates safe bottom offset using visual viewport API to handle Android navigation bars
   * that may not be detected by CSS safe-area-inset.
   */
  adjustButtonPosition() {
    var _a;
    if (!this.buttonContainer || !document.body.classList.contains("is-mobile")) {
      return;
    }
    const viewportHeight = ((_a = window.visualViewport) == null ? void 0 : _a.height) || window.innerHeight;
    const windowHeight = window.outerHeight;
    const navigationBarHeight = Math.max(0, windowHeight - viewportHeight);
    const minBottomOffset = 60;
    const calculatedOffset = Math.max(
      minBottomOffset,
      navigationBarHeight + 10
    );
    setCssProps(this.buttonContainer, { bottom: `${calculatedOffset}px` });
  }
  /**
   * Controls the visibility of the zen mode exit button based on settings.
   * Handles button creation, auto-hide behavior on desktop, and initial highlight animation.
   */
  setButtonVisibility() {
    const isMobile = document.body.classList.contains("is-mobile");
    const shouldShow = this.settings.zenMode && (this.settings.exitButtonVisibility === "always" || this.settings.exitButtonVisibility === "mobile-only" && isMobile);
    if (shouldShow) {
      if (!this.hasButton) {
        this.createButton();
        this.hasButton = true;
      }
      this.buttonContainer.classList.add("zenmode-button-visible");
      if (this.settings.autoHideButtonOnDesktop && !isMobile && this.settings.exitButtonVisibility === "always") {
        this.buttonContainer.classList.add("zenmode-button-auto-hide");
        if (!this._hasShownInitialHighlight) {
          this.buttonContainer.classList.add(
            "zenmode-button-initial-highlight"
          );
          this._hasShownInitialHighlight = true;
          const timeout1 = window.setTimeout(() => {
            if (this.buttonContainer) {
              this.buttonContainer.classList.remove(
                "zenmode-button-initial-highlight"
              );
              const timeout2 = window.setTimeout(() => {
                if (this.buttonContainer) {
                  this.buttonContainer.classList.add(
                    "zenmode-button-fade-out"
                  );
                }
              }, 300);
              this._highlightTimeouts.push(timeout2);
            }
          }, 1500);
          this._highlightTimeouts.push(timeout1);
        }
      } else {
        this.buttonContainer.classList.remove(
          "zenmode-button-auto-hide"
        );
        this.buttonContainer.classList.remove(
          "zenmode-button-initial-highlight"
        );
        this.buttonContainer.classList.remove(
          "zenmode-button-fade-out"
        );
      }
      this.adjustButtonPosition();
    } else {
      if (this.hasButton) {
        this.buttonContainer.classList.remove(
          "zenmode-button-visible"
        );
      }
    }
  }
  /**
   * Helper function to get the tab container from a workspace leaf.
   * Returns null if the leaf doesn't have a valid container or tab container.
   */
  getTabContainerFromLeaf(leaf) {
    var _a;
    if (!leaf) return null;
    const leafWithContainer = leaf;
    const leafContainer = (_a = leafWithContainer.containerEl) != null ? _a : null;
    if (!leafContainer) return null;
    const tabContainer = leafContainer.closest(".workspace-tabs");
    if (!tabContainer || !(tabContainer instanceof HTMLElement))
      return null;
    return tabContainer;
  }
  /**
   * Finds and reveals a pinned tab if one exists.
   * This should be called BEFORE entering zen mode to prevent new tabs from being created.
   */
  async revealPinnedTabIfExists() {
    var _a;
    try {
      const markdownLeaves = this.app.workspace.getLeavesOfType("markdown");
      for (const leaf of markdownLeaves) {
        const leafWithPinned = leaf;
        let isPinned = false;
        if (leafWithPinned.pinned === true) {
          isPinned = true;
        } else if ((_a = leafWithPinned.view) == null ? void 0 : _a.getState) {
          const state = leafWithPinned.view.getState();
          if (state.pinned === true) {
            isPinned = true;
          }
        }
        const leafWithContainer = leaf;
        if (leafWithContainer.containerEl) {
          const tabHeader = leafWithContainer.containerEl.querySelector(
            ".workspace-tab-header"
          );
          if (tabHeader && tabHeader instanceof HTMLElement) {
            if (tabHeader.classList.contains("is-pinned") || tabHeader.hasAttribute("data-pinned")) {
              isPinned = true;
            }
          }
        }
        if (isPinned) {
          void this.app.workspace.revealLeaf(leaf);
          await new Promise((resolve) => {
            requestAnimationFrame(() => {
              requestAnimationFrame(() => resolve());
            });
          });
          return;
        }
      }
    } catch (e) {
    }
  }
  /**
   * Helper function to find the active tab container by checking the DOM.
   * Looks for tabs with the 'is-active' class or visible active tab headers.
   */
  findActiveTabContainerFromDOM() {
    const activeTabHeader = document.querySelector(
      ".workspace-tab-header.is-active"
    );
    if (activeTabHeader) {
      const tabContainer = activeTabHeader.closest(".workspace-tabs");
      if (tabContainer && tabContainer instanceof HTMLElement) {
        return tabContainer;
      }
    }
    const allTabContainers = Array.from(
      document.querySelectorAll(".workspace-tabs")
    );
    for (const container of allTabContainers) {
      const el = container;
      if (el.offsetParent !== null && !el.classList.contains("zenmode-tab-hidden")) {
        return el;
      }
    }
    return null;
  }
  /**
   * Updates focused file mode visibility.
   * When enabled, hides all workspace tab containers except the one containing the active leaf,
   * showing only the currently focused file. When disabled, restores all tab containers.
   * Uses multiple fallback methods to handle pinned tabs and edge cases.
   */
  async updateFocusedFileMode() {
    if (!this.settings.zenMode || !this.settings.focusedFileMode) {
      const allTabContainers2 = document.querySelectorAll(".workspace-tabs");
      allTabContainers2.forEach((container) => {
        const el = container;
        el.classList.remove("zenmode-tab-hidden");
        el.classList.remove("zenmode-tab-active");
        setCssProps(el, { display: "", width: "", flex: "" });
      });
      return;
    }
    await this.revealPinnedTabIfExists();
    const allTabContainers = Array.from(
      document.querySelectorAll(".workspace-tabs")
    );
    let activeTabContainer = null;
    for (const container of allTabContainers) {
      const el = container;
      const pinnedTabs = Array.from(
        el.querySelectorAll(
          ".workspace-tab-header.is-pinned, .workspace-tab-header[data-pinned='true']"
        )
      );
      if (pinnedTabs.length > 0) {
        activeTabContainer = el;
        break;
      }
    }
    if (!activeTabContainer) {
      const mostRecentLeaf = this.app.workspace.getMostRecentLeaf();
      if (mostRecentLeaf) {
        activeTabContainer = this.getTabContainerFromLeaf(mostRecentLeaf);
      }
    }
    if (!activeTabContainer) {
      const activeTabFromDOM = this.findActiveTabContainerFromDOM();
      if (activeTabFromDOM) {
        activeTabContainer = activeTabFromDOM;
      }
    }
    if (!activeTabContainer) {
      return;
    }
    allTabContainers.forEach((tabContainer) => {
      const el = tabContainer;
      if (tabContainer === activeTabContainer) {
        el.classList.remove("zenmode-tab-hidden");
        setCssProps(el, {
          display: "",
          width: "100%",
          flex: "1 1 100%"
        });
      } else {
        el.classList.add("zenmode-tab-hidden");
        setCssProps(el, { display: "none" });
      }
    });
  }
  /**
   * Toggles zen mode on or off.
   * Handles fullscreen entry/exit if enabled, updates settings, and refreshes the UI.
   * Includes guard against concurrent invocations to prevent race conditions.
   */
  async toggleZenMode() {
    if (this._isTogglingZen) {
      return;
    }
    this._isTogglingZen = true;
    try {
      const enteringZenMode = !this.settings.zenMode;
      if (!enteringZenMode) {
        this._hasShownInitialHighlight = false;
      }
      if (enteringZenMode) {
        if (this.settings.focusedFileMode) {
          await this.revealPinnedTabIfExists();
        }
        if (this.settings.fullscreen && document.documentElement.requestFullscreen) {
          try {
            await document.documentElement.requestFullscreen();
            await new Promise(
              (resolve) => requestAnimationFrame(resolve)
            );
          } catch (e) {
          }
        }
        this.settings.zenMode = true;
        await this.saveSettings();
        this.refresh();
      } else {
        if (document.fullscreenElement && document.exitFullscreen) {
          try {
            await document.exitFullscreen();
            await new Promise(
              (resolve) => requestAnimationFrame(resolve)
            );
          } catch (e) {
          }
        }
        this.settings.zenMode = false;
        await this.saveSettings();
        this.refresh();
      }
    } finally {
      this._isTogglingZen = false;
    }
  }
};
//# sourceMappingURL=data:application/json;base64,ewogICJ2ZXJzaW9uIjogMywKICAic291cmNlcyI6IFsic3JjL21haW4udHMiLCAic3JjL3NldHRpbmdzLnRzIiwgInNyYy9zZXR0aW5ncy10YWIudHMiLCAic3JjL3V0aWxzL3NldHRpbmdzLWNvbXBhdC50cyIsICJzcmMvdXRpbHMvaGVscGVycy50cyJdLAogICJzb3VyY2VzQ29udGVudCI6IFsiaW1wb3J0IHsgQnV0dG9uQ29tcG9uZW50LCBQbHVnaW4sIFdvcmtzcGFjZUxlYWYgfSBmcm9tIFwib2JzaWRpYW5cIjtcbmltcG9ydCB7IERFRkFVTFRfU0VUVElOR1MsIHR5cGUgWmVuTW9kZVNldHRpbmdzIH0gZnJvbSBcIi4vc2V0dGluZ3NcIjtcbmltcG9ydCB7IFplbk1vZGVTZXR0aW5nVGFiIH0gZnJvbSBcIi4vc2V0dGluZ3MtdGFiXCI7XG5pbXBvcnQgeyBzZXRDc3NQcm9wcyB9IGZyb20gXCIuL3V0aWxzL2hlbHBlcnNcIjtcblxuLyoqXG4gKiBaZW4gTW9kZSBwbHVnaW4gZm9yIE9ic2lkaWFuLlxuICogSGlkZXMgbW9zdCBVSSBlbGVtZW50cyB0byBlbmFibGUgZm9jdXNlZCBjb250ZW50IGNvbnN1bXB0aW9uIGFuZCBwcmVzZW50YXRpb25zLlxuICogUHJvdmlkZXMgYSBcInplbiBtb2RlXCIgdGhhdCBoaWRlcyBhbGwgVUkgZWxlbWVudHMgZXhjZXB0IHRoZSBjdXJyZW50IHRleHQgZmlsZSBvciBkb2N1bWVudCxcbiAqIGxlYXZpbmcgb25seSBhIHNpbmdsZSBidXR0b24gdG8gcmVzdG9yZSBhbGwgVUkuIE9uIGRlc2t0b3AsIGl0IGFsc28gY29sbGFwc2VzIGFuZCByZXN0b3Jlc1xuICogc2lkZWJhcnMgd2hlbiB0b2dnbGVkLCBhbGxvd2luZyBxdWljayBzd2l0Y2hpbmcgZnJvbSBhbiBlZGl0aW5nLWZyaWVuZGx5IGV4cGVyaWVuY2UgdG9cbiAqIGEgdmlld2luZy1mcmllbmRseSBleHBlcmllbmNlLlxuICovXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBaZW5Nb2RlIGV4dGVuZHMgUGx1Z2luIHtcblx0c2V0dGluZ3MhOiBaZW5Nb2RlU2V0dGluZ3M7IC8vIFNhZmU6IGFsd2F5cyBpbml0aWFsaXplZCBpbiBvbmxvYWRcblx0aGFzQnV0dG9uOiBib29sZWFuID0gZmFsc2U7XG5cdHByaXZhdGUgYnV0dG9uPzogQnV0dG9uQ29tcG9uZW50O1xuXHRwcml2YXRlIGJ1dHRvbkNvbnRhaW5lcj86IEhUTUxEaXZFbGVtZW50O1xuXHRwcml2YXRlIF9pc1RvZ2dsaW5nWmVuOiBib29sZWFuID0gZmFsc2U7XG5cdHByaXZhdGUgdmlzdWFsVmlld3BvcnRSZXNpemVIYW5kbGVyOiAoKCkgPT4gdm9pZCkgfCBudWxsID0gbnVsbDtcblx0cHJpdmF0ZSBfaGFzU2hvd25Jbml0aWFsSGlnaGxpZ2h0OiBib29sZWFuID0gZmFsc2U7XG5cdHByaXZhdGUgX2hpZ2hsaWdodFRpbWVvdXRzOiBudW1iZXJbXSA9IFtdO1xuXG5cdC8qKlxuXHQgKiBDYWxsZWQgd2hlbiB0aGUgcGx1Z2luIGlzIGxvYWRlZC5cblx0ICogSW5pdGlhbGl6ZXMgc2V0dGluZ3MsIHJlZ2lzdGVycyBjb21tYW5kcywgcmliYm9uIGljb24sIGFuZCBldmVudCBoYW5kbGVycy5cblx0ICovXG5cdGFzeW5jIG9ubG9hZCgpIHtcblx0XHQvLyBsb2FkIHNldHRpbmdzXG5cdFx0YXdhaXQgdGhpcy5sb2FkU2V0dGluZ3MoKTtcblxuXHRcdC8vIGFkZCB0aGUgc2V0dGluZ3MgdGFiXG5cdFx0dGhpcy5hZGRTZXR0aW5nVGFiKG5ldyBaZW5Nb2RlU2V0dGluZ1RhYih0aGlzLmFwcCwgdGhpcykpO1xuXHRcdC8vIGFkZCB0aGUgdG9nZ2xlIG9uL29mZiBjb21tYW5kXG5cblx0XHR0aGlzLmFkZENvbW1hbmQoe1xuXHRcdFx0aWQ6IFwidG9nZ2xlLXplbi1tb2RlXCIsXG5cdFx0XHRuYW1lOiBcIlRvZ2dsZVwiLFxuXHRcdFx0Y2FsbGJhY2s6ICgpID0+IHtcblx0XHRcdFx0dm9pZCB0aGlzLnRvZ2dsZVplbk1vZGUoKTtcblx0XHRcdH0sXG5cdFx0fSk7XG5cblx0XHR0aGlzLmFkZFJpYmJvbkljb24oXCJleHBhbmRcIiwgXCJUb2dnbGUgemVuIG1vZGVcIiwgKCkgPT4ge1xuXHRcdFx0dm9pZCB0aGlzLnRvZ2dsZVplbk1vZGUoKTtcblx0XHR9KTtcblxuXHRcdC8vIFJlZ2lzdGVyIGV2ZW50IGxpc3RlbmVyIGZvciBhY3RpdmUgbGVhZiBjaGFuZ2VzIChmb3IgZm9jdXNlZCBmaWxlIG1vZGUpXG5cdFx0dGhpcy5yZWdpc3RlckV2ZW50KFxuXHRcdFx0dGhpcy5hcHAud29ya3NwYWNlLm9uKFwiYWN0aXZlLWxlYWYtY2hhbmdlXCIsICgpID0+IHtcblx0XHRcdFx0dm9pZCB0aGlzLnVwZGF0ZUZvY3VzZWRGaWxlTW9kZSgpO1xuXHRcdFx0fSlcblx0XHQpO1xuXG5cdFx0Ly8gUmVnaXN0ZXIgRVNDIGtleSB0byBleGl0IFplbiBtb2RlXG5cdFx0dGhpcy5yZWdpc3RlckRvbUV2ZW50KGRvY3VtZW50LCBcImtleWRvd25cIiwgKGV2dDogS2V5Ym9hcmRFdmVudCkgPT4ge1xuXHRcdFx0aWYgKGV2dC5rZXkgPT09IFwiRXNjYXBlXCIgJiYgdGhpcy5zZXR0aW5ncy56ZW5Nb2RlKSB7XG5cdFx0XHRcdC8vIERvbid0IGludGVyZmVyZSBpZiB2aW0gbW9kZSBpcyBhY3RpdmUgKHZpbSB1c2VzIEVTQyBmcmVxdWVudGx5KVxuXHRcdFx0XHQvLyBDaGVjayBpZiB0aGUgZXZlbnQgdGFyZ2V0IGlzIHdpdGhpbiBhIENvZGVNaXJyb3IgZWRpdG9yIHdpdGggdmltIGVuYWJsZWRcblx0XHRcdFx0Y29uc3QgdGFyZ2V0ID0gZXZ0LnRhcmdldCBhcyBIVE1MRWxlbWVudDtcblx0XHRcdFx0aWYgKHRhcmdldCkge1xuXHRcdFx0XHRcdGNvbnN0IGNtRWRpdG9yID0gdGFyZ2V0LmNsb3Nlc3QoXCIuY20tZWRpdG9yXCIpO1xuXHRcdFx0XHRcdGlmIChjbUVkaXRvcikge1xuXHRcdFx0XHRcdFx0Ly8gQ2hlY2sgaWYgdmltIG1vZGUgaXMgZW5hYmxlZCBpbiBPYnNpZGlhbiBzZXR0aW5nc1xuXHRcdFx0XHRcdFx0Ly8gTm90ZTogdmF1bHQuY29uZmlnIGlzIG5vdCBpbiBwdWJsaWMgQVBJIHR5cGVzLCBidXQgZXhpc3RzIGF0IHJ1bnRpbWVcblx0XHRcdFx0XHRcdGNvbnN0IHZhdWx0ID0gdGhpcy5hcHBcblx0XHRcdFx0XHRcdFx0LnZhdWx0IGFzIHR5cGVvZiB0aGlzLmFwcC52YXVsdCAmIHtcblx0XHRcdFx0XHRcdFx0Y29uZmlnPzogeyB2aW1Nb2RlPzogYm9vbGVhbiB9O1xuXHRcdFx0XHRcdFx0fTtcblx0XHRcdFx0XHRcdGlmICh2YXVsdC5jb25maWc/LnZpbU1vZGUgPT09IHRydWUpIHtcblx0XHRcdFx0XHRcdFx0Ly8gVmltIG1vZGUgaXMgZW5hYmxlZCwgZG9uJ3QgaW50ZXJmZXJlIHdpdGggRVNDXG5cdFx0XHRcdFx0XHRcdHJldHVybjtcblx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHR9XG5cblx0XHRcdFx0XHQvLyBEb24ndCBleGl0IGNvbXBhY3QgbW9kZSB3aXRoIGVzY2FwZSBpbiBhbiBleGNhbGlkcmF3IHRleHRib3hlcyBhcyB0aGV5IHVzZSB0aGUgZXNjYXBlIGhvdGtleSB0byBsZWF2ZSBvdXQgb2YgaXRzZWxmLlxuXHRcdFx0XHRcdC8vIFRoZSByZXN1bHRpbmcgYmVoYXZpb3VyIGlzIHZlcnkgY29uZnVzaW5nLiAoVGV4dGJveCBpcyBzdGlsbCBmb2N1cyBidXQgdGhlIHplbm1vZGUgZGlzYWJsZXMpXG5cdFx0XHRcdFx0aWYgKFxuXHRcdFx0XHRcdFx0dGFyZ2V0IGluc3RhbmNlb2YgSFRNTFRleHRBcmVhRWxlbWVudCAmJlxuXHRcdFx0XHRcdFx0dGFyZ2V0LmNsYXNzTmFtZSAmJlxuXHRcdFx0XHRcdFx0dGFyZ2V0LmNsYXNzTmFtZS5pbmNsdWRlcyhcImV4Y2FsaWRyYXdcIilcblx0XHRcdFx0XHQpIHtcblx0XHRcdFx0XHRcdHJldHVybjtcblx0XHRcdFx0XHR9XG5cdFx0XHRcdH1cblx0XHRcdFx0Ly8gT25seSBleGl0IGlmIG5vIG1vZGFsIGlzIG9wZW4gKHRvIGF2b2lkIGludGVyZmVyaW5nIHdpdGggT2JzaWRpYW4gbW9kYWxzKVxuXHRcdFx0XHRjb25zdCBhY3RpdmVNb2RhbCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIubW9kYWxcIik7XG5cdFx0XHRcdGlmICghYWN0aXZlTW9kYWwpIHtcblx0XHRcdFx0XHR2b2lkIHRoaXMudG9nZ2xlWmVuTW9kZSgpO1xuXHRcdFx0XHRcdGV2dC5wcmV2ZW50RGVmYXVsdCgpO1xuXHRcdFx0XHR9XG5cdFx0XHR9XG5cdFx0fSk7XG5cblx0XHR0aGlzLnJlZnJlc2goKTtcblx0fVxuXG5cdC8qKlxuXHQgKiBDYWxsZWQgd2hlbiB0aGUgcGx1Z2luIGlzIHVubG9hZGVkLlxuXHQgKiBDbGVhbnMgdXAgZXZlbnQgbGlzdGVuZXJzLCB0aW1lb3V0cywgYW5kIHJlbW92ZXMgdGhlIGV4aXQgYnV0dG9uLlxuXHQgKi9cblx0b251bmxvYWQoKSB7XG5cdFx0Ly8gQ2xlYXIgYW55IHBlbmRpbmcgYW5pbWF0aW9uIHRpbWVvdXRzXG5cdFx0dGhpcy5faGlnaGxpZ2h0VGltZW91dHMuZm9yRWFjaCgoaWQpID0+IGNsZWFyVGltZW91dChpZCkpO1xuXHRcdGlmICh0aGlzLmJ1dHRvbkNvbnRhaW5lcikge1xuXHRcdFx0dGhpcy5idXR0b25Db250YWluZXIucmVtb3ZlKCk7XG5cdFx0fVxuXHRcdC8vIENsZWFuIHVwIHZpc3VhbFZpZXdwb3J0IGV2ZW50IGxpc3RlbmVyXG5cdFx0aWYgKHRoaXMudmlzdWFsVmlld3BvcnRSZXNpemVIYW5kbGVyICYmIHdpbmRvdy52aXN1YWxWaWV3cG9ydCkge1xuXHRcdFx0d2luZG93LnZpc3VhbFZpZXdwb3J0LnJlbW92ZUV2ZW50TGlzdGVuZXIoXG5cdFx0XHRcdFwicmVzaXplXCIsXG5cdFx0XHRcdHRoaXMudmlzdWFsVmlld3BvcnRSZXNpemVIYW5kbGVyXG5cdFx0XHQpO1xuXHRcdH1cblx0fVxuXG5cdC8qKlxuXHQgKiBMb2FkcyBzZXR0aW5ncyBmcm9tIGRpc2ssIG1lcmdpbmcgd2l0aCBkZWZhdWx0IHNldHRpbmdzLlxuXHQgKi9cblx0YXN5bmMgbG9hZFNldHRpbmdzKCkge1xuXHRcdGNvbnN0IGxvYWRlZERhdGEgPVxuXHRcdFx0KGF3YWl0IHRoaXMubG9hZERhdGEoKSkgYXMgUGFydGlhbDxaZW5Nb2RlU2V0dGluZ3M+IHwgbnVsbDtcblx0XHR0aGlzLnNldHRpbmdzID0geyAuLi5ERUZBVUxUX1NFVFRJTkdTLCAuLi5sb2FkZWREYXRhIH07XG5cdH1cblxuXHQvKipcblx0ICogU2F2ZXMgY3VycmVudCBzZXR0aW5ncyB0byBkaXNrLlxuXHQgKi9cblx0YXN5bmMgc2F2ZVNldHRpbmdzKCkge1xuXHRcdGF3YWl0IHRoaXMuc2F2ZURhdGEodGhpcy5zZXR0aW5ncyk7XG5cdH1cblxuXHQvKipcblx0ICogUmVmcmVzaGVzIHRoZSBwbHVnaW4gc3RhdGUgYWZ0ZXIgc2V0dGluZ3MgY2hhbmdlcy5cblx0ICogVXBkYXRlcyBzdHlsZXMsIHNpZGViYXIgdmlzaWJpbGl0eSwgYnV0dG9uIHZpc2liaWxpdHksIGFuZCBmb2N1c2VkIGZpbGUgbW9kZS5cblx0ICovXG5cdHJlZnJlc2ggPSAoKSA9PiB7XG5cdFx0Ly8gcmUtbG9hZCB0aGUgc3R5bGVcblx0XHR0aGlzLnVwZGF0ZVN0eWxlKCk7XG5cdFx0dGhpcy5zZXRTaWRlYmFyVmlzaWJpbGl0eSgpO1xuXHRcdHRoaXMuc2V0QnV0dG9uVmlzaWJpbGl0eSgpO1xuXHRcdHZvaWQgdGhpcy51cGRhdGVGb2N1c2VkRmlsZU1vZGUoKTtcblx0fTtcblxuXHQvKipcblx0ICogTWFuYWdlcyBzaWRlYmFyIHZpc2liaWxpdHkgYmFzZWQgb24gemVuIG1vZGUgc3RhdGUuXG5cdCAqIFdoZW4gZW50ZXJpbmcgemVuIG1vZGUsIHNhdmVzIGN1cnJlbnQgc2lkZWJhciBzdGF0ZSBhbmQgY29sbGFwc2VzIHNpZGViYXJzLlxuXHQgKiBXaGVuIGV4aXRpbmcgemVuIG1vZGUsIHJlc3RvcmVzIHNpZGViYXJzIHRvIHRoZWlyIHByZXZpb3VzIHN0YXRlLlxuXHQgKi9cblx0c2V0U2lkZWJhclZpc2liaWxpdHkoKSB7XG5cdFx0Ly9jb2xsYXBzZSBzaWRlYmFycyBpZiB6ZW4gbW9kZSBpcyBhY3RpdmVcblx0XHRjb25zdCBhcHAgPSB0aGlzLmFwcDtcblxuXHRcdGlmIChcblx0XHRcdGFwcC53b3Jrc3BhY2UubGVmdFNwbGl0ID09IHVuZGVmaW5lZCB8fFxuXHRcdFx0YXBwLndvcmtzcGFjZS5yaWdodFNwbGl0ID09IHVuZGVmaW5lZFxuXHRcdCkge1xuXHRcdFx0cmV0dXJuO1xuXHRcdH1cblxuXHRcdGlmICghdGhpcy5zZXR0aW5ncy56ZW5Nb2RlKSB7XG5cdFx0XHRpZiAoIXRoaXMuc2V0dGluZ3MubGVmdFNpZGViYXIpIHtcblx0XHRcdFx0YXBwLndvcmtzcGFjZS5sZWZ0U3BsaXQuZXhwYW5kKCk7XG5cdFx0XHR9XG5cdFx0XHRpZiAoIXRoaXMuc2V0dGluZ3MucmlnaHRTaWRlYmFyKSB7XG5cdFx0XHRcdGFwcC53b3Jrc3BhY2UucmlnaHRTcGxpdC5leHBhbmQoKTtcblx0XHRcdH1cblx0XHR9IGVsc2Uge1xuXHRcdFx0dGhpcy5zZXR0aW5ncy5yaWdodFNpZGViYXIgPVxuXHRcdFx0XHR0aGlzLmFwcC53b3Jrc3BhY2UucmlnaHRTcGxpdC5jb2xsYXBzZWQ7XG5cdFx0XHR0aGlzLnNldHRpbmdzLmxlZnRTaWRlYmFyID0gdGhpcy5hcHAud29ya3NwYWNlLmxlZnRTcGxpdC5jb2xsYXBzZWQ7XG5cblx0XHRcdGlmIChhcHAud29ya3NwYWNlLmxlZnRTcGxpdC5jb2xsYXBzZWQgIT0gdGhpcy5zZXR0aW5ncy56ZW5Nb2RlKSB7XG5cdFx0XHRcdGFwcC53b3Jrc3BhY2UubGVmdFNwbGl0LmNvbGxhcHNlKCk7XG5cdFx0XHR9XG5cblx0XHRcdGlmIChhcHAud29ya3NwYWNlLnJpZ2h0U3BsaXQuY29sbGFwc2VkICE9IHRoaXMuc2V0dGluZ3MuemVuTW9kZSkge1xuXHRcdFx0XHRhcHAud29ya3NwYWNlLnJpZ2h0U3BsaXQuY29sbGFwc2UoKTtcblx0XHRcdH1cblx0XHR9XG5cdH1cblxuXHQvKipcblx0ICogVXBkYXRlcyBDU1MgY2xhc3NlcyBhbmQgZGF0YSBhdHRyaWJ1dGVzIGJhc2VkIG9uIGN1cnJlbnQgemVuIG1vZGUgc2V0dGluZ3MuXG5cdCAqIEFwcGxpZXMgemVuIG1vZGUgc3R5bGluZywgcGFkZGluZywgYW5kIGZlYXR1cmUgZmxhZ3MgdG8gdGhlIGRvY3VtZW50IGJvZHkuXG5cdCAqL1xuXHR1cGRhdGVTdHlsZSA9ICgpID0+IHtcblx0XHRkb2N1bWVudC5ib2R5LmNsYXNzTGlzdC50b2dnbGUoXCJ6ZW5tb2RlLWFjdGl2ZVwiLCB0aGlzLnNldHRpbmdzLnplbk1vZGUpO1xuXG5cdFx0Ly8gU2V0IENTUyBjdXN0b20gcHJvcGVydGllcyBmb3IgcGFkZGluZ1xuXHRcdGRvY3VtZW50LmRvY3VtZW50RWxlbWVudC5zdHlsZS5zZXRQcm9wZXJ0eShcblx0XHRcdFwiLS16ZW4tbW9kZS10b3AtcGFkZGluZ1wiLFxuXHRcdFx0YCR7dGhpcy5zZXR0aW5ncy50b3BQYWRkaW5nfXB4YFxuXHRcdCk7XG5cdFx0ZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50LnN0eWxlLnNldFByb3BlcnR5KFxuXHRcdFx0XCItLXplbi1tb2RlLWJvdHRvbS1wYWRkaW5nXCIsXG5cdFx0XHRgJHt0aGlzLnNldHRpbmdzLmJvdHRvbVBhZGRpbmd9cHhgXG5cdFx0KTtcblxuXHRcdC8vIFVzZSBjbGFzcyB0b2dnbGUgZm9yIHByb3BlcnRpZXMgaGlkaW5nIChsaWtlIEhpZGVyIHBsdWdpbilcblx0XHQvLyBUb2dnbGUgdGhlIGNsYXNzIGJhc2VkIG9uIHNldHRpbmcgKG9ubHkgd2hlbiB6ZW4gbW9kZSBpcyBhY3RpdmUpXG5cdFx0aWYgKHRoaXMuc2V0dGluZ3MuemVuTW9kZSkge1xuXHRcdFx0ZG9jdW1lbnQuYm9keS5jbGFzc0xpc3QudG9nZ2xlKFxuXHRcdFx0XHRcInplbm1vZGUtaGlkZS1wcm9wZXJ0aWVzXCIsXG5cdFx0XHRcdHRoaXMuc2V0dGluZ3MuaGlkZVByb3BlcnRpZXNcblx0XHRcdCk7XG5cdFx0fSBlbHNlIHtcblx0XHRcdGRvY3VtZW50LmJvZHkuY2xhc3NMaXN0LnJlbW92ZShcInplbm1vZGUtaGlkZS1wcm9wZXJ0aWVzXCIpO1xuXHRcdH1cblxuXHRcdGlmICh0aGlzLnNldHRpbmdzLnplbk1vZGUpIHtcblx0XHRcdGRvY3VtZW50LmJvZHkuc2V0QXR0cmlidXRlKFxuXHRcdFx0XHRcImRhdGEtemVuLWhpZGUtaW5saW5lLXRpdGxlXCIsXG5cdFx0XHRcdHRoaXMuc2V0dGluZ3MuaGlkZUlubGluZVRpdGxlLnRvU3RyaW5nKClcblx0XHRcdCk7XG5cdFx0XHRkb2N1bWVudC5ib2R5LnNldEF0dHJpYnV0ZShcblx0XHRcdFx0XCJkYXRhLXplbi1mb2N1c2VkLWZpbGVcIixcblx0XHRcdFx0dGhpcy5zZXR0aW5ncy5mb2N1c2VkRmlsZU1vZGUudG9TdHJpbmcoKVxuXHRcdFx0KTtcblx0XHRcdGRvY3VtZW50LmJvZHkuc2V0QXR0cmlidXRlKFxuXHRcdFx0XHRcImRhdGEtemVuLWhpZGUtc3RhdHVzLWJhclwiLFxuXHRcdFx0XHR0aGlzLnNldHRpbmdzLmhpZGVTdGF0dXNCYXIudG9TdHJpbmcoKVxuXHRcdFx0KTtcblx0XHR9IGVsc2Uge1xuXHRcdFx0Ly8gUmVtb3ZlIGRhdGEgYXR0cmlidXRlcyB3aGVuIHplbiBtb2RlIGlzIG9mZlxuXHRcdFx0ZG9jdW1lbnQuYm9keS5yZW1vdmVBdHRyaWJ1dGUoXCJkYXRhLXplbi1oaWRlLWlubGluZS10aXRsZVwiKTtcblx0XHRcdGRvY3VtZW50LmJvZHkucmVtb3ZlQXR0cmlidXRlKFwiZGF0YS16ZW4tZm9jdXNlZC1maWxlXCIpO1xuXHRcdFx0ZG9jdW1lbnQuYm9keS5yZW1vdmVBdHRyaWJ1dGUoXCJkYXRhLXplbi1oaWRlLXN0YXR1cy1iYXJcIik7XG5cdFx0fVxuXHR9O1xuXG5cdC8qKlxuXHQgKiBDcmVhdGVzIHRoZSB6ZW4gbW9kZSBleGl0IGJ1dHRvbiBhbmQgcmVnaXN0ZXJzIGV2ZW50IGxpc3RlbmVycyBmb3IgcG9zaXRpb25pbmcuXG5cdCAqIFRoZSBidXR0b24gYWxsb3dzIHVzZXJzIHRvIGV4aXQgemVuIG1vZGUgYW5kIGFkanVzdHMgcG9zaXRpb24gZm9yIG1vYmlsZSBuYXZpZ2F0aW9uIGJhcnMuXG5cdCAqL1xuXHRjcmVhdGVCdXR0b24oKSB7XG5cdFx0dGhpcy5idXR0b25Db250YWluZXIgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO1xuXHRcdHRoaXMuYnV0dG9uQ29udGFpbmVyLmNsYXNzTGlzdC5hZGQoXCJ6ZW5tb2RlLWJ1dHRvblwiKTtcblxuXHRcdHRoaXMuYnV0dG9uID0gbmV3IEJ1dHRvbkNvbXBvbmVudCh0aGlzLmJ1dHRvbkNvbnRhaW5lcik7XG5cdFx0dGhpcy5idXR0b24uc2V0SWNvbihcInNocmlua1wiKTtcblx0XHR0aGlzLmJ1dHRvbi5vbkNsaWNrKCgpID0+IHtcblx0XHRcdHZvaWQgdGhpcy50b2dnbGVaZW5Nb2RlKCk7XG5cdFx0fSk7XG5cblx0XHRkb2N1bWVudC5ib2R5LmFwcGVuZENoaWxkKHRoaXMuYnV0dG9uQ29udGFpbmVyKTtcblxuXHRcdC8vIEFkanVzdCBidXR0b24gcG9zaXRpb24gZm9yIG1vYmlsZSBuYXZpZ2F0aW9uIGJhclxuXHRcdHRoaXMuYWRqdXN0QnV0dG9uUG9zaXRpb24oKTtcblxuXHRcdC8vIExpc3RlbiBmb3IgcmVzaXplIGV2ZW50cyB0byBhZGp1c3QgcG9zaXRpb24gd2hlbiBuYXZpZ2F0aW9uIGJhciBhcHBlYXJzL2Rpc2FwcGVhcnNcblx0XHR0aGlzLnJlZ2lzdGVyRG9tRXZlbnQod2luZG93LCBcInJlc2l6ZVwiLCAoKSA9PiB7XG5cdFx0XHR0aGlzLmFkanVzdEJ1dHRvblBvc2l0aW9uKCk7XG5cdFx0fSk7XG5cblx0XHQvLyBBbHNvIGxpc3RlbiB0byB2aXN1YWxWaWV3cG9ydCByZXNpemUgZm9yIGJldHRlciBtb2JpbGUgc3VwcG9ydFxuXHRcdGlmICh3aW5kb3cudmlzdWFsVmlld3BvcnQpIHtcblx0XHRcdHRoaXMudmlzdWFsVmlld3BvcnRSZXNpemVIYW5kbGVyID0gKCkgPT4ge1xuXHRcdFx0XHR0aGlzLmFkanVzdEJ1dHRvblBvc2l0aW9uKCk7XG5cdFx0XHR9O1xuXHRcdFx0d2luZG93LnZpc3VhbFZpZXdwb3J0LmFkZEV2ZW50TGlzdGVuZXIoXG5cdFx0XHRcdFwicmVzaXplXCIsXG5cdFx0XHRcdHRoaXMudmlzdWFsVmlld3BvcnRSZXNpemVIYW5kbGVyXG5cdFx0XHQpO1xuXHRcdH1cblx0fVxuXG5cdC8qKlxuXHQgKiBBZGp1c3RzIHRoZSBleGl0IGJ1dHRvbiBwb3NpdGlvbiBvbiBtb2JpbGUgZGV2aWNlcyB0byBhY2NvdW50IGZvciBuYXZpZ2F0aW9uIGJhcnMuXG5cdCAqIENhbGN1bGF0ZXMgc2FmZSBib3R0b20gb2Zmc2V0IHVzaW5nIHZpc3VhbCB2aWV3cG9ydCBBUEkgdG8gaGFuZGxlIEFuZHJvaWQgbmF2aWdhdGlvbiBiYXJzXG5cdCAqIHRoYXQgbWF5IG5vdCBiZSBkZXRlY3RlZCBieSBDU1Mgc2FmZS1hcmVhLWluc2V0LlxuXHQgKi9cblx0YWRqdXN0QnV0dG9uUG9zaXRpb24oKSB7XG5cdFx0aWYgKFxuXHRcdFx0IXRoaXMuYnV0dG9uQ29udGFpbmVyIHx8XG5cdFx0XHQhZG9jdW1lbnQuYm9keS5jbGFzc0xpc3QuY29udGFpbnMoXCJpcy1tb2JpbGVcIilcblx0XHQpIHtcblx0XHRcdHJldHVybjtcblx0XHR9XG5cblx0XHQvLyBDYWxjdWxhdGUgc2FmZSBib3R0b20gb2Zmc2V0IGZvciBtb2JpbGUgZGV2aWNlc1xuXHRcdC8vIFRoaXMgYWNjb3VudHMgZm9yIEFuZHJvaWQgbmF2aWdhdGlvbiBiYXJzIHRoYXQgbWF5IG5vdCBiZSBkZXRlY3RlZCBieSBDU1Mgc2FmZS1hcmVhLWluc2V0XG5cdFx0Y29uc3Qgdmlld3BvcnRIZWlnaHQgPVxuXHRcdFx0d2luZG93LnZpc3VhbFZpZXdwb3J0Py5oZWlnaHQgfHwgd2luZG93LmlubmVySGVpZ2h0O1xuXHRcdGNvbnN0IHdpbmRvd0hlaWdodCA9IHdpbmRvdy5vdXRlckhlaWdodDtcblx0XHRjb25zdCBuYXZpZ2F0aW9uQmFySGVpZ2h0ID0gTWF0aC5tYXgoMCwgd2luZG93SGVpZ2h0IC0gdmlld3BvcnRIZWlnaHQpO1xuXG5cdFx0Ly8gVXNlIGEgbWluaW11bSBvZmZzZXQgdG8gZW5zdXJlIGJ1dHRvbiBpcyBhbHdheXMgYWNjZXNzaWJsZVxuXHRcdC8vIDYwcHggc2hvdWxkIGJlIGVub3VnaCB0byBjbGVhciBtb3N0IG5hdmlnYXRpb24gYmFyc1xuXHRcdGNvbnN0IG1pbkJvdHRvbU9mZnNldCA9IDYwO1xuXHRcdGNvbnN0IGNhbGN1bGF0ZWRPZmZzZXQgPSBNYXRoLm1heChcblx0XHRcdG1pbkJvdHRvbU9mZnNldCxcblx0XHRcdG5hdmlnYXRpb25CYXJIZWlnaHQgKyAxMFxuXHRcdCk7XG5cblx0XHQvLyBBcHBseSB0aGUgb2Zmc2V0XG5cdFx0c2V0Q3NzUHJvcHModGhpcy5idXR0b25Db250YWluZXIsIHsgYm90dG9tOiBgJHtjYWxjdWxhdGVkT2Zmc2V0fXB4YCB9KTtcblx0fVxuXG5cdC8qKlxuXHQgKiBDb250cm9scyB0aGUgdmlzaWJpbGl0eSBvZiB0aGUgemVuIG1vZGUgZXhpdCBidXR0b24gYmFzZWQgb24gc2V0dGluZ3MuXG5cdCAqIEhhbmRsZXMgYnV0dG9uIGNyZWF0aW9uLCBhdXRvLWhpZGUgYmVoYXZpb3Igb24gZGVza3RvcCwgYW5kIGluaXRpYWwgaGlnaGxpZ2h0IGFuaW1hdGlvbi5cblx0ICovXG5cdHNldEJ1dHRvblZpc2liaWxpdHkoKSB7XG5cdFx0Y29uc3QgaXNNb2JpbGUgPSBkb2N1bWVudC5ib2R5LmNsYXNzTGlzdC5jb250YWlucyhcImlzLW1vYmlsZVwiKTtcblx0XHRjb25zdCBzaG91bGRTaG93ID1cblx0XHRcdHRoaXMuc2V0dGluZ3MuemVuTW9kZSAmJlxuXHRcdFx0KHRoaXMuc2V0dGluZ3MuZXhpdEJ1dHRvblZpc2liaWxpdHkgPT09IFwiYWx3YXlzXCIgfHxcblx0XHRcdFx0KHRoaXMuc2V0dGluZ3MuZXhpdEJ1dHRvblZpc2liaWxpdHkgPT09IFwibW9iaWxlLW9ubHlcIiAmJlxuXHRcdFx0XHRcdGlzTW9iaWxlKSk7XG5cblx0XHRpZiAoc2hvdWxkU2hvdykge1xuXHRcdFx0aWYgKCF0aGlzLmhhc0J1dHRvbikge1xuXHRcdFx0XHR0aGlzLmNyZWF0ZUJ1dHRvbigpO1xuXHRcdFx0XHR0aGlzLmhhc0J1dHRvbiA9IHRydWU7XG5cdFx0XHR9XG5cdFx0XHR0aGlzLmJ1dHRvbkNvbnRhaW5lciEuY2xhc3NMaXN0LmFkZChcInplbm1vZGUtYnV0dG9uLXZpc2libGVcIik7XG5cblx0XHRcdC8vIEFwcGx5IGF1dG8taGlkZSBjbGFzcyBmb3IgZGVza3RvcCBob3ZlciBiZWhhdmlvclxuXHRcdFx0Ly8gT25seSBhcHBsaWVzIHdoZW4gZXhpdEJ1dHRvblZpc2liaWxpdHkgaXMgXCJhbHdheXNcIiBhbmQgb24gZGVza3RvcFxuXHRcdFx0aWYgKFxuXHRcdFx0XHR0aGlzLnNldHRpbmdzLmF1dG9IaWRlQnV0dG9uT25EZXNrdG9wICYmXG5cdFx0XHRcdCFpc01vYmlsZSAmJlxuXHRcdFx0XHR0aGlzLnNldHRpbmdzLmV4aXRCdXR0b25WaXNpYmlsaXR5ID09PSBcImFsd2F5c1wiXG5cdFx0XHQpIHtcblx0XHRcdFx0dGhpcy5idXR0b25Db250YWluZXIhLmNsYXNzTGlzdC5hZGQoXCJ6ZW5tb2RlLWJ1dHRvbi1hdXRvLWhpZGVcIik7XG5cblx0XHRcdFx0Ly8gU2hvdyBpbml0aWFsIGhpZ2hsaWdodCBhbmltYXRpb24gb24gZmlyc3QgZW50cnkgdG8gWmVuIG1vZGVcblx0XHRcdFx0aWYgKCF0aGlzLl9oYXNTaG93bkluaXRpYWxIaWdobGlnaHQpIHtcblx0XHRcdFx0XHR0aGlzLmJ1dHRvbkNvbnRhaW5lciEuY2xhc3NMaXN0LmFkZChcblx0XHRcdFx0XHRcdFwiemVubW9kZS1idXR0b24taW5pdGlhbC1oaWdobGlnaHRcIlxuXHRcdFx0XHRcdCk7XG5cdFx0XHRcdFx0dGhpcy5faGFzU2hvd25Jbml0aWFsSGlnaGxpZ2h0ID0gdHJ1ZTtcblxuXHRcdFx0XHRcdC8vIFJlbW92ZSBoaWdobGlnaHQgY2xhc3MgYWZ0ZXIgYW5pbWF0aW9uIGNvbXBsZXRlcywgdGhlbiBmYWRlIG91dFxuXHRcdFx0XHRcdGNvbnN0IHRpbWVvdXQxID0gd2luZG93LnNldFRpbWVvdXQoKCkgPT4ge1xuXHRcdFx0XHRcdFx0aWYgKHRoaXMuYnV0dG9uQ29udGFpbmVyKSB7XG5cdFx0XHRcdFx0XHRcdHRoaXMuYnV0dG9uQ29udGFpbmVyLmNsYXNzTGlzdC5yZW1vdmUoXG5cdFx0XHRcdFx0XHRcdFx0XCJ6ZW5tb2RlLWJ1dHRvbi1pbml0aWFsLWhpZ2hsaWdodFwiXG5cdFx0XHRcdFx0XHRcdCk7XG5cdFx0XHRcdFx0XHRcdC8vIFNtYWxsIGRlbGF5IGJlZm9yZSBmYWRpbmcgb3V0XG5cdFx0XHRcdFx0XHRcdGNvbnN0IHRpbWVvdXQyID0gd2luZG93LnNldFRpbWVvdXQoKCkgPT4ge1xuXHRcdFx0XHRcdFx0XHRcdGlmICh0aGlzLmJ1dHRvbkNvbnRhaW5lcikge1xuXHRcdFx0XHRcdFx0XHRcdFx0dGhpcy5idXR0b25Db250YWluZXIuY2xhc3NMaXN0LmFkZChcblx0XHRcdFx0XHRcdFx0XHRcdFx0XCJ6ZW5tb2RlLWJ1dHRvbi1mYWRlLW91dFwiXG5cdFx0XHRcdFx0XHRcdFx0XHQpO1xuXHRcdFx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHRcdFx0fSwgMzAwKTtcblx0XHRcdFx0XHRcdFx0dGhpcy5faGlnaGxpZ2h0VGltZW91dHMucHVzaCh0aW1lb3V0Mik7XG5cdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0fSwgMTUwMCk7XG5cdFx0XHRcdFx0dGhpcy5faGlnaGxpZ2h0VGltZW91dHMucHVzaCh0aW1lb3V0MSk7XG5cdFx0XHRcdH1cblx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdHRoaXMuYnV0dG9uQ29udGFpbmVyIS5jbGFzc0xpc3QucmVtb3ZlKFxuXHRcdFx0XHRcdFwiemVubW9kZS1idXR0b24tYXV0by1oaWRlXCJcblx0XHRcdFx0KTtcblx0XHRcdFx0dGhpcy5idXR0b25Db250YWluZXIhLmNsYXNzTGlzdC5yZW1vdmUoXG5cdFx0XHRcdFx0XCJ6ZW5tb2RlLWJ1dHRvbi1pbml0aWFsLWhpZ2hsaWdodFwiXG5cdFx0XHRcdCk7XG5cdFx0XHRcdHRoaXMuYnV0dG9uQ29udGFpbmVyIS5jbGFzc0xpc3QucmVtb3ZlKFxuXHRcdFx0XHRcdFwiemVubW9kZS1idXR0b24tZmFkZS1vdXRcIlxuXHRcdFx0XHQpO1xuXHRcdFx0fVxuXG5cdFx0XHQvLyBBZGp1c3QgcG9zaXRpb24gd2hlbiBidXR0b24gYmVjb21lcyB2aXNpYmxlXG5cdFx0XHR0aGlzLmFkanVzdEJ1dHRvblBvc2l0aW9uKCk7XG5cdFx0fSBlbHNlIHtcblx0XHRcdGlmICh0aGlzLmhhc0J1dHRvbikge1xuXHRcdFx0XHR0aGlzLmJ1dHRvbkNvbnRhaW5lciEuY2xhc3NMaXN0LnJlbW92ZShcblx0XHRcdFx0XHRcInplbm1vZGUtYnV0dG9uLXZpc2libGVcIlxuXHRcdFx0XHQpO1xuXHRcdFx0fVxuXHRcdH1cblx0fVxuXG5cdC8qKlxuXHQgKiBIZWxwZXIgZnVuY3Rpb24gdG8gZ2V0IHRoZSB0YWIgY29udGFpbmVyIGZyb20gYSB3b3Jrc3BhY2UgbGVhZi5cblx0ICogUmV0dXJucyBudWxsIGlmIHRoZSBsZWFmIGRvZXNuJ3QgaGF2ZSBhIHZhbGlkIGNvbnRhaW5lciBvciB0YWIgY29udGFpbmVyLlxuXHQgKi9cblx0cHJpdmF0ZSBnZXRUYWJDb250YWluZXJGcm9tTGVhZihcblx0XHRsZWFmOiBXb3Jrc3BhY2VMZWFmIHwgbnVsbFxuXHQpOiBIVE1MRWxlbWVudCB8IG51bGwge1xuXHRcdGlmICghbGVhZikgcmV0dXJuIG51bGw7XG5cblx0XHQvLyBGaW5kIHRoZSB3b3Jrc3BhY2UtdGFicyBjb250YWluZXIgdGhhdCBob2xkcyB0aGUgbGVhZlxuXHRcdC8vIE5vdGU6IGNvbnRhaW5lckVsIGlzIGFuIGludGVybmFsIE9ic2lkaWFuIEFQSSBwcm9wZXJ0eSwgbm90IGV4cG9zZWQgaW4gcHVibGljIHR5cGVzXG5cdFx0aW50ZXJmYWNlIFdvcmtzcGFjZUxlYWZXaXRoQ29udGFpbmVyIHtcblx0XHRcdGNvbnRhaW5lckVsPzogSFRNTEVsZW1lbnQ7XG5cdFx0fVxuXHRcdGNvbnN0IGxlYWZXaXRoQ29udGFpbmVyID0gbGVhZiBhcyBXb3Jrc3BhY2VMZWFmV2l0aENvbnRhaW5lcjtcblx0XHRjb25zdCBsZWFmQ29udGFpbmVyID0gbGVhZldpdGhDb250YWluZXIuY29udGFpbmVyRWwgPz8gbnVsbDtcblx0XHRpZiAoIWxlYWZDb250YWluZXIpIHJldHVybiBudWxsO1xuXG5cdFx0Y29uc3QgdGFiQ29udGFpbmVyID0gbGVhZkNvbnRhaW5lci5jbG9zZXN0KFwiLndvcmtzcGFjZS10YWJzXCIpO1xuXHRcdGlmICghdGFiQ29udGFpbmVyIHx8ICEodGFiQ29udGFpbmVyIGluc3RhbmNlb2YgSFRNTEVsZW1lbnQpKVxuXHRcdFx0cmV0dXJuIG51bGw7XG5cblx0XHRyZXR1cm4gdGFiQ29udGFpbmVyO1xuXHR9XG5cblx0LyoqXG5cdCAqIEZpbmRzIGFuZCByZXZlYWxzIGEgcGlubmVkIHRhYiBpZiBvbmUgZXhpc3RzLlxuXHQgKiBUaGlzIHNob3VsZCBiZSBjYWxsZWQgQkVGT1JFIGVudGVyaW5nIHplbiBtb2RlIHRvIHByZXZlbnQgbmV3IHRhYnMgZnJvbSBiZWluZyBjcmVhdGVkLlxuXHQgKi9cblx0cHJpdmF0ZSBhc3luYyByZXZlYWxQaW5uZWRUYWJJZkV4aXN0cygpOiBQcm9taXNlPHZvaWQ+IHtcblx0XHR0cnkge1xuXHRcdFx0Ly8gVXNlIE9ic2lkaWFuIEFQSSB0byBmaW5kIHBpbm5lZCBsZWF2ZXNcblx0XHRcdC8vIENoZWNrIGFsbCBtYXJrZG93biBsZWF2ZXMgYW5kIHNlZSBpZiBhbnkgYXJlIHBpbm5lZFxuXHRcdFx0Y29uc3QgbWFya2Rvd25MZWF2ZXMgPVxuXHRcdFx0XHR0aGlzLmFwcC53b3Jrc3BhY2UuZ2V0TGVhdmVzT2ZUeXBlKFwibWFya2Rvd25cIik7XG5cblx0XHRcdC8vIENoZWNrIGVhY2ggbGVhZiB0byBzZWUgaWYgaXQncyBwaW5uZWRcblx0XHRcdC8vIFBpbm5lZCBzdGF0ZSBtaWdodCBiZSBpbiB0aGUgdmlldyBzdGF0ZSBvciBsZWFmIHByb3BlcnRpZXNcblx0XHRcdGZvciAoY29uc3QgbGVhZiBvZiBtYXJrZG93bkxlYXZlcykge1xuXHRcdFx0XHRpbnRlcmZhY2UgV29ya3NwYWNlTGVhZldpdGhQaW5uZWQge1xuXHRcdFx0XHRcdHBpbm5lZD86IGJvb2xlYW47XG5cdFx0XHRcdFx0dmlldz86IHtcblx0XHRcdFx0XHRcdGdldFN0YXRlPzogKCkgPT4geyBwaW5uZWQ/OiBib29sZWFuIH07XG5cdFx0XHRcdFx0fTtcblx0XHRcdFx0fVxuXHRcdFx0XHRjb25zdCBsZWFmV2l0aFBpbm5lZCA9IGxlYWYgYXMgV29ya3NwYWNlTGVhZldpdGhQaW5uZWQ7XG5cblx0XHRcdFx0Ly8gVHJ5IG11bHRpcGxlIHdheXMgdG8gY2hlY2sgaWYgbGVhZiBpcyBwaW5uZWRcblx0XHRcdFx0bGV0IGlzUGlubmVkID0gZmFsc2U7XG5cdFx0XHRcdGlmIChsZWFmV2l0aFBpbm5lZC5waW5uZWQgPT09IHRydWUpIHtcblx0XHRcdFx0XHRpc1Bpbm5lZCA9IHRydWU7XG5cdFx0XHRcdH0gZWxzZSBpZiAobGVhZldpdGhQaW5uZWQudmlldz8uZ2V0U3RhdGUpIHtcblx0XHRcdFx0XHRjb25zdCBzdGF0ZSA9IGxlYWZXaXRoUGlubmVkLnZpZXcuZ2V0U3RhdGUoKTtcblx0XHRcdFx0XHRpZiAoKHN0YXRlIGFzIHsgcGlubmVkPzogYm9vbGVhbiB9KS5waW5uZWQgPT09IHRydWUpIHtcblx0XHRcdFx0XHRcdGlzUGlubmVkID0gdHJ1ZTtcblx0XHRcdFx0XHR9XG5cdFx0XHRcdH1cblxuXHRcdFx0XHQvLyBBbHNvIGNoZWNrIHRoZSBET00gZm9yIHBpbm5lZCBpbmRpY2F0b3Igb24gdGhpcyBsZWFmJ3MgY29udGFpbmVyXG5cdFx0XHRcdGludGVyZmFjZSBXb3Jrc3BhY2VMZWFmV2l0aENvbnRhaW5lciB7XG5cdFx0XHRcdFx0Y29udGFpbmVyRWw/OiBIVE1MRWxlbWVudDtcblx0XHRcdFx0fVxuXHRcdFx0XHRjb25zdCBsZWFmV2l0aENvbnRhaW5lciA9IGxlYWYgYXMgV29ya3NwYWNlTGVhZldpdGhDb250YWluZXI7XG5cdFx0XHRcdGlmIChsZWFmV2l0aENvbnRhaW5lci5jb250YWluZXJFbCkge1xuXHRcdFx0XHRcdGNvbnN0IHRhYkhlYWRlciA9XG5cdFx0XHRcdFx0XHRsZWFmV2l0aENvbnRhaW5lci5jb250YWluZXJFbC5xdWVyeVNlbGVjdG9yKFxuXHRcdFx0XHRcdFx0XHRcIi53b3Jrc3BhY2UtdGFiLWhlYWRlclwiXG5cdFx0XHRcdFx0XHQpO1xuXHRcdFx0XHRcdGlmICh0YWJIZWFkZXIgJiYgdGFiSGVhZGVyIGluc3RhbmNlb2YgSFRNTEVsZW1lbnQpIHtcblx0XHRcdFx0XHRcdC8vIENoZWNrIGlmIHRhYiBoYXMgcGlubmVkIGNsYXNzIG9yIGF0dHJpYnV0ZVxuXHRcdFx0XHRcdFx0aWYgKFxuXHRcdFx0XHRcdFx0XHR0YWJIZWFkZXIuY2xhc3NMaXN0LmNvbnRhaW5zKFwiaXMtcGlubmVkXCIpIHx8XG5cdFx0XHRcdFx0XHRcdHRhYkhlYWRlci5oYXNBdHRyaWJ1dGUoXCJkYXRhLXBpbm5lZFwiKVxuXHRcdFx0XHRcdFx0KSB7XG5cdFx0XHRcdFx0XHRcdGlzUGlubmVkID0gdHJ1ZTtcblx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHR9XG5cdFx0XHRcdH1cblxuXHRcdFx0XHRpZiAoaXNQaW5uZWQpIHtcblx0XHRcdFx0XHQvLyBFeHBsaWNpdGx5IHJldmVhbCB0aGlzIGxlYWYgdG8gbWFrZSBpdCBhY3RpdmVcblx0XHRcdFx0XHR2b2lkIHRoaXMuYXBwLndvcmtzcGFjZS5yZXZlYWxMZWFmKGxlYWYpO1xuXHRcdFx0XHRcdC8vIFdhaXQgZm9yIHRoZSByZXZlYWwgdG8gdGFrZSBlZmZlY3QgdXNpbmcgcmVxdWVzdEFuaW1hdGlvbkZyYW1lIGZvciBiZXR0ZXIgdGltaW5nXG5cdFx0XHRcdFx0YXdhaXQgbmV3IFByb21pc2U8dm9pZD4oKHJlc29sdmUpID0+IHtcblx0XHRcdFx0XHRcdHJlcXVlc3RBbmltYXRpb25GcmFtZSgoKSA9PiB7XG5cdFx0XHRcdFx0XHRcdHJlcXVlc3RBbmltYXRpb25GcmFtZSgoKSA9PiByZXNvbHZlKCkpO1xuXHRcdFx0XHRcdFx0fSk7XG5cdFx0XHRcdFx0fSk7XG5cdFx0XHRcdFx0cmV0dXJuO1xuXHRcdFx0XHR9XG5cdFx0XHR9XG5cdFx0fSBjYXRjaCB7XG5cdFx0XHQvLyBTaWxlbnRseSBoYW5kbGUgZXJyb3JzXG5cdFx0fVxuXHR9XG5cblx0LyoqXG5cdCAqIEhlbHBlciBmdW5jdGlvbiB0byBmaW5kIHRoZSBhY3RpdmUgdGFiIGNvbnRhaW5lciBieSBjaGVja2luZyB0aGUgRE9NLlxuXHQgKiBMb29rcyBmb3IgdGFicyB3aXRoIHRoZSAnaXMtYWN0aXZlJyBjbGFzcyBvciB2aXNpYmxlIGFjdGl2ZSB0YWIgaGVhZGVycy5cblx0ICovXG5cdHByaXZhdGUgZmluZEFjdGl2ZVRhYkNvbnRhaW5lckZyb21ET00oKTogSFRNTEVsZW1lbnQgfCBudWxsIHtcblx0XHQvLyBUcnkgdG8gZmluZCBhbiBhY3RpdmUgdGFiIGhlYWRlclxuXHRcdGNvbnN0IGFjdGl2ZVRhYkhlYWRlciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXG5cdFx0XHRcIi53b3Jrc3BhY2UtdGFiLWhlYWRlci5pcy1hY3RpdmVcIlxuXHRcdCk7XG5cdFx0aWYgKGFjdGl2ZVRhYkhlYWRlcikge1xuXHRcdFx0Y29uc3QgdGFiQ29udGFpbmVyID0gYWN0aXZlVGFiSGVhZGVyLmNsb3Nlc3QoXCIud29ya3NwYWNlLXRhYnNcIik7XG5cdFx0XHRpZiAodGFiQ29udGFpbmVyICYmIHRhYkNvbnRhaW5lciBpbnN0YW5jZW9mIEhUTUxFbGVtZW50KSB7XG5cdFx0XHRcdHJldHVybiB0YWJDb250YWluZXI7XG5cdFx0XHR9XG5cdFx0fVxuXG5cdFx0Ly8gRmFsbGJhY2s6IGZpbmQgYW55IHZpc2libGUgdGFiIGNvbnRhaW5lciAocHJlZmVyIHRoZSBmaXJzdCBvbmUpXG5cdFx0Ly8gVGhpcyBoYW5kbGVzIGVkZ2UgY2FzZXMgd2hlcmUgbm8gdGFiIGlzIG1hcmtlZCBhcyBhY3RpdmVcblx0XHRjb25zdCBhbGxUYWJDb250YWluZXJzID0gQXJyYXkuZnJvbShcblx0XHRcdGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoXCIud29ya3NwYWNlLXRhYnNcIilcblx0XHQpO1xuXHRcdGZvciAoY29uc3QgY29udGFpbmVyIG9mIGFsbFRhYkNvbnRhaW5lcnMpIHtcblx0XHRcdGNvbnN0IGVsID0gY29udGFpbmVyIGFzIEhUTUxFbGVtZW50O1xuXHRcdFx0Ly8gQ2hlY2sgaWYgdGhlIGNvbnRhaW5lciBpcyB2aXNpYmxlIChub3QgYWxyZWFkeSBoaWRkZW4pXG5cdFx0XHRpZiAoXG5cdFx0XHRcdGVsLm9mZnNldFBhcmVudCAhPT0gbnVsbCAmJlxuXHRcdFx0XHQhZWwuY2xhc3NMaXN0LmNvbnRhaW5zKFwiemVubW9kZS10YWItaGlkZGVuXCIpXG5cdFx0XHQpIHtcblx0XHRcdFx0cmV0dXJuIGVsO1xuXHRcdFx0fVxuXHRcdH1cblxuXHRcdHJldHVybiBudWxsO1xuXHR9XG5cblx0LyoqXG5cdCAqIFVwZGF0ZXMgZm9jdXNlZCBmaWxlIG1vZGUgdmlzaWJpbGl0eS5cblx0ICogV2hlbiBlbmFibGVkLCBoaWRlcyBhbGwgd29ya3NwYWNlIHRhYiBjb250YWluZXJzIGV4Y2VwdCB0aGUgb25lIGNvbnRhaW5pbmcgdGhlIGFjdGl2ZSBsZWFmLFxuXHQgKiBzaG93aW5nIG9ubHkgdGhlIGN1cnJlbnRseSBmb2N1c2VkIGZpbGUuIFdoZW4gZGlzYWJsZWQsIHJlc3RvcmVzIGFsbCB0YWIgY29udGFpbmVycy5cblx0ICogVXNlcyBtdWx0aXBsZSBmYWxsYmFjayBtZXRob2RzIHRvIGhhbmRsZSBwaW5uZWQgdGFicyBhbmQgZWRnZSBjYXNlcy5cblx0ICovXG5cdGFzeW5jIHVwZGF0ZUZvY3VzZWRGaWxlTW9kZSgpIHtcblx0XHRpZiAoIXRoaXMuc2V0dGluZ3MuemVuTW9kZSB8fCAhdGhpcy5zZXR0aW5ncy5mb2N1c2VkRmlsZU1vZGUpIHtcblx0XHRcdC8vIFJlc3RvcmUgYWxsIHRhYiBjb250YWluZXJzIHdoZW4gZm9jdXNlZCBmaWxlIG1vZGUgaXMgb2ZmXG5cdFx0XHRjb25zdCBhbGxUYWJDb250YWluZXJzID1cblx0XHRcdFx0ZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbChcIi53b3Jrc3BhY2UtdGFic1wiKTtcblx0XHRcdGFsbFRhYkNvbnRhaW5lcnMuZm9yRWFjaCgoY29udGFpbmVyKSA9PiB7XG5cdFx0XHRcdGNvbnN0IGVsID0gY29udGFpbmVyIGFzIEhUTUxFbGVtZW50O1xuXHRcdFx0XHRlbC5jbGFzc0xpc3QucmVtb3ZlKFwiemVubW9kZS10YWItaGlkZGVuXCIpO1xuXHRcdFx0XHRlbC5jbGFzc0xpc3QucmVtb3ZlKFwiemVubW9kZS10YWItYWN0aXZlXCIpO1xuXHRcdFx0XHQvLyBDbGVhciBhbnkgaW5saW5lIHN0eWxlcyB0byByZXN0b3JlIGRlZmF1bHQgc3RhdGVcblx0XHRcdFx0c2V0Q3NzUHJvcHMoZWwsIHsgZGlzcGxheTogXCJcIiwgd2lkdGg6IFwiXCIsIGZsZXg6IFwiXCIgfSk7XG5cdFx0XHR9KTtcblx0XHRcdHJldHVybjtcblx0XHR9XG5cblx0XHQvLyBDUklUSUNBTDogQmVmb3JlIGNhbGxpbmcgZ2V0TGVhZihmYWxzZSksIGNoZWNrIGZvciBwaW5uZWQgdGFicyBhbmQgcmV2ZWFsIHRoZW1cblx0XHQvLyBUaGlzIHByZXZlbnRzIGdldExlYWYoZmFsc2UpIGZyb20gY3JlYXRpbmcgYSBuZXcgdGFiXG5cdFx0YXdhaXQgdGhpcy5yZXZlYWxQaW5uZWRUYWJJZkV4aXN0cygpO1xuXG5cdFx0Y29uc3QgYWxsVGFiQ29udGFpbmVycyA9IEFycmF5LmZyb20oXG5cdFx0XHRkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKFwiLndvcmtzcGFjZS10YWJzXCIpXG5cdFx0KTtcblxuXHRcdC8vIFRyeSBtdWx0aXBsZSBtZXRob2RzIHRvIGZpbmQgdGhlIGFjdGl2ZSB0YWIgY29udGFpbmVyXG5cdFx0bGV0IGFjdGl2ZVRhYkNvbnRhaW5lcjogSFRNTEVsZW1lbnQgfCBudWxsID0gbnVsbDtcblxuXHRcdC8vIE1ldGhvZCAwOiBQUklPUklUWSAtIENoZWNrIEFMTCBjb250YWluZXJzIGZvciBwaW5uZWQgdGFicyBGSVJTVFxuXHRcdC8vIElmIGEgcGlubmVkIHRhYiBleGlzdHMsIHdlIE1VU1QgdXNlIGl0cyBjb250YWluZXIsIG5vdCB0aGUgXCJhY3RpdmVcIiBvbmVcblx0XHRmb3IgKGNvbnN0IGNvbnRhaW5lciBvZiBhbGxUYWJDb250YWluZXJzKSB7XG5cdFx0XHRjb25zdCBlbCA9IGNvbnRhaW5lciBhcyBIVE1MRWxlbWVudDtcblx0XHRcdC8vIENoZWNrIGFsbCB0YWIgaGVhZGVycyBpbiB0aGlzIGNvbnRhaW5lciBmb3IgcGlubmVkIHN0YXRlXG5cdFx0XHQvLyBVc2UgU1RSSUNUIGNoZWNrcyBvbmx5IC0gY2xhc3MgXCJpcy1waW5uZWRcIiBvciBkYXRhLXBpbm5lZD1cInRydWVcIiBhdHRyaWJ1dGVcblx0XHRcdGNvbnN0IHBpbm5lZFRhYnMgPSBBcnJheS5mcm9tKFxuXHRcdFx0XHRlbC5xdWVyeVNlbGVjdG9yQWxsKFxuXHRcdFx0XHRcdFwiLndvcmtzcGFjZS10YWItaGVhZGVyLmlzLXBpbm5lZCwgLndvcmtzcGFjZS10YWItaGVhZGVyW2RhdGEtcGlubmVkPSd0cnVlJ11cIlxuXHRcdFx0XHQpXG5cdFx0XHQpO1xuXG5cdFx0XHRpZiAocGlubmVkVGFicy5sZW5ndGggPiAwKSB7XG5cdFx0XHRcdGFjdGl2ZVRhYkNvbnRhaW5lciA9IGVsO1xuXHRcdFx0XHRicmVhaztcblx0XHRcdH1cblx0XHR9XG5cblx0XHQvLyBNZXRob2QgMTogVXNlIGdldE1vc3RSZWNlbnRMZWFmKCkgZm9yIG5vbi1waW5uZWQgdGFicyAoc2FmZXIgdGhhbiBnZXRMZWFmKGZhbHNlKSlcblx0XHQvLyBUaGlzIGF2b2lkcyBjcmVhdGluZyBuZXcgdGFicyB3aGlsZSBzdGlsbCBmaW5kaW5nIHRoZSBhY3RpdmUgdGFiXG5cdFx0aWYgKCFhY3RpdmVUYWJDb250YWluZXIpIHtcblx0XHRcdGNvbnN0IG1vc3RSZWNlbnRMZWFmID0gdGhpcy5hcHAud29ya3NwYWNlLmdldE1vc3RSZWNlbnRMZWFmKCk7XG5cdFx0XHRpZiAobW9zdFJlY2VudExlYWYpIHtcblx0XHRcdFx0YWN0aXZlVGFiQ29udGFpbmVyID1cblx0XHRcdFx0XHR0aGlzLmdldFRhYkNvbnRhaW5lckZyb21MZWFmKG1vc3RSZWNlbnRMZWFmKTtcblx0XHRcdH1cblx0XHR9XG5cblx0XHQvLyBNZXRob2QgMWI6IEZhbGxiYWNrIHRvIERPTS1iYXNlZCBkZXRlY3Rpb24gaWYgZ2V0TW9zdFJlY2VudExlYWYoKSBmYWlsZWRcblx0XHRpZiAoIWFjdGl2ZVRhYkNvbnRhaW5lcikge1xuXHRcdFx0Y29uc3QgYWN0aXZlVGFiRnJvbURPTSA9IHRoaXMuZmluZEFjdGl2ZVRhYkNvbnRhaW5lckZyb21ET00oKTtcblx0XHRcdGlmIChhY3RpdmVUYWJGcm9tRE9NKSB7XG5cdFx0XHRcdGFjdGl2ZVRhYkNvbnRhaW5lciA9IGFjdGl2ZVRhYkZyb21ET007XG5cdFx0XHR9XG5cdFx0fVxuXG5cdFx0Ly8gSWYgd2Ugc3RpbGwgY2FuJ3QgZmluZCBhIHZhbGlkIHRhYiBjb250YWluZXIsIGdpdmUgdXBcblx0XHRpZiAoIWFjdGl2ZVRhYkNvbnRhaW5lcikge1xuXHRcdFx0cmV0dXJuO1xuXHRcdH1cblxuXHRcdC8vIEhpZGUgYWxsIHdvcmtzcGFjZS10YWJzIGNvbnRhaW5lcnMgZXhjZXB0IHRoZSBvbmUgY29udGFpbmluZyB0aGUgYWN0aXZlIGxlYWZcblx0XHRhbGxUYWJDb250YWluZXJzLmZvckVhY2goKHRhYkNvbnRhaW5lcikgPT4ge1xuXHRcdFx0Y29uc3QgZWwgPSB0YWJDb250YWluZXIgYXMgSFRNTEVsZW1lbnQ7XG5cdFx0XHRpZiAodGFiQ29udGFpbmVyID09PSBhY3RpdmVUYWJDb250YWluZXIpIHtcblx0XHRcdFx0Ly8gU2hvdyBhbmQgZXhwYW5kIHRoZSBhY3RpdmUgdGFiIGNvbnRhaW5lclxuXHRcdFx0XHRlbC5jbGFzc0xpc3QucmVtb3ZlKFwiemVubW9kZS10YWItaGlkZGVuXCIpO1xuXHRcdFx0XHRzZXRDc3NQcm9wcyhlbCwge1xuXHRcdFx0XHRcdGRpc3BsYXk6IFwiXCIsXG5cdFx0XHRcdFx0d2lkdGg6IFwiMTAwJVwiLFxuXHRcdFx0XHRcdGZsZXg6IFwiMSAxIDEwMCVcIixcblx0XHRcdFx0fSk7XG5cdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHQvLyBIaWRlIG5vbi1hY3RpdmUgdGFiIGNvbnRhaW5lcnNcblx0XHRcdFx0ZWwuY2xhc3NMaXN0LmFkZChcInplbm1vZGUtdGFiLWhpZGRlblwiKTtcblx0XHRcdFx0c2V0Q3NzUHJvcHMoZWwsIHsgZGlzcGxheTogXCJub25lXCIgfSk7XG5cdFx0XHR9XG5cdFx0fSk7XG5cdH1cblxuXHQvKipcblx0ICogVG9nZ2xlcyB6ZW4gbW9kZSBvbiBvciBvZmYuXG5cdCAqIEhhbmRsZXMgZnVsbHNjcmVlbiBlbnRyeS9leGl0IGlmIGVuYWJsZWQsIHVwZGF0ZXMgc2V0dGluZ3MsIGFuZCByZWZyZXNoZXMgdGhlIFVJLlxuXHQgKiBJbmNsdWRlcyBndWFyZCBhZ2FpbnN0IGNvbmN1cnJlbnQgaW52b2NhdGlvbnMgdG8gcHJldmVudCByYWNlIGNvbmRpdGlvbnMuXG5cdCAqL1xuXHRhc3luYyB0b2dnbGVaZW5Nb2RlKCkge1xuXHRcdC8vIEd1YXJkIGFnYWluc3QgY29uY3VycmVudCBpbnZvY2F0aW9uc1xuXHRcdGlmICh0aGlzLl9pc1RvZ2dsaW5nWmVuKSB7XG5cdFx0XHRyZXR1cm47XG5cdFx0fVxuXG5cdFx0dGhpcy5faXNUb2dnbGluZ1plbiA9IHRydWU7XG5cblx0XHR0cnkge1xuXHRcdFx0Y29uc3QgZW50ZXJpbmdaZW5Nb2RlID0gIXRoaXMuc2V0dGluZ3MuemVuTW9kZTtcblxuXHRcdFx0Ly8gUmVzZXQgaGlnaGxpZ2h0IGZsYWcgd2hlbiBleGl0aW5nIFplbiBtb2RlXG5cdFx0XHRpZiAoIWVudGVyaW5nWmVuTW9kZSkge1xuXHRcdFx0XHR0aGlzLl9oYXNTaG93bkluaXRpYWxIaWdobGlnaHQgPSBmYWxzZTtcblx0XHRcdH1cblxuXHRcdFx0aWYgKGVudGVyaW5nWmVuTW9kZSkge1xuXHRcdFx0XHQvLyBDUklUSUNBTDogSWYgZm9jdXNlZCBmaWxlIG1vZGUgaXMgZW5hYmxlZCwgZmluZCBhbmQgcmV2ZWFsIHBpbm5lZCB0YWIgQkVGT1JFIGFueXRoaW5nIGVsc2Vcblx0XHRcdFx0Ly8gVGhpcyBwcmV2ZW50cyBPYnNpZGlhbiBmcm9tIGNyZWF0aW5nIGEgbmV3IHRhYiB3aGVuIGdldExlYWYoZmFsc2UpIGlzIGNhbGxlZFxuXHRcdFx0XHRpZiAodGhpcy5zZXR0aW5ncy5mb2N1c2VkRmlsZU1vZGUpIHtcblx0XHRcdFx0XHRhd2FpdCB0aGlzLnJldmVhbFBpbm5lZFRhYklmRXhpc3RzKCk7XG5cdFx0XHRcdH1cblxuXHRcdFx0XHQvLyBFbnRlciBmdWxsc2NyZWVuIGZpcnN0IGlmIHNldHRpbmcgaXMgZW5hYmxlZFxuXHRcdFx0XHRpZiAoXG5cdFx0XHRcdFx0dGhpcy5zZXR0aW5ncy5mdWxsc2NyZWVuICYmXG5cdFx0XHRcdFx0ZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50LnJlcXVlc3RGdWxsc2NyZWVuXG5cdFx0XHRcdCkge1xuXHRcdFx0XHRcdHRyeSB7XG5cdFx0XHRcdFx0XHRhd2FpdCBkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQucmVxdWVzdEZ1bGxzY3JlZW4oKTtcblx0XHRcdFx0XHRcdC8vIFdhaXQgZm9yIG5leHQgZnJhbWUgdG8gZW5zdXJlIGZ1bGxzY3JlZW4gdHJhbnNpdGlvbiBpcyBzbW9vdGhcblx0XHRcdFx0XHRcdGF3YWl0IG5ldyBQcm9taXNlKChyZXNvbHZlKSA9PlxuXHRcdFx0XHRcdFx0XHRyZXF1ZXN0QW5pbWF0aW9uRnJhbWUocmVzb2x2ZSlcblx0XHRcdFx0XHRcdCk7XG5cdFx0XHRcdFx0fSBjYXRjaCB7XG5cdFx0XHRcdFx0XHQvLyBGdWxsc2NyZWVuIG1pZ2h0IGZhaWwgKGUuZy4sIHVzZXIgY2FuY2VsbGVkKSwgY29udGludWUgYW55d2F5XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHR9XG5cblx0XHRcdFx0Ly8gVXBkYXRlIHplbiBtb2RlIHN0YXRlIGFmdGVyIGZ1bGxzY3JlZW4gb3BlcmF0aW9uIGNvbXBsZXRlc1xuXHRcdFx0XHR0aGlzLnNldHRpbmdzLnplbk1vZGUgPSB0cnVlO1xuXHRcdFx0XHRhd2FpdCB0aGlzLnNhdmVTZXR0aW5ncygpO1xuXHRcdFx0XHR0aGlzLnJlZnJlc2goKTtcblx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdC8vIEV4aXQgZnVsbHNjcmVlbiBmaXJzdCBpZiBhY3RpdmVcblx0XHRcdFx0aWYgKGRvY3VtZW50LmZ1bGxzY3JlZW5FbGVtZW50ICYmIGRvY3VtZW50LmV4aXRGdWxsc2NyZWVuKSB7XG5cdFx0XHRcdFx0dHJ5IHtcblx0XHRcdFx0XHRcdGF3YWl0IGRvY3VtZW50LmV4aXRGdWxsc2NyZWVuKCk7XG5cdFx0XHRcdFx0XHQvLyBXYWl0IGZvciBET00gdXBkYXRlcyB0byBjb21wbGV0ZVxuXHRcdFx0XHRcdFx0YXdhaXQgbmV3IFByb21pc2UoKHJlc29sdmUpID0+XG5cdFx0XHRcdFx0XHRcdHJlcXVlc3RBbmltYXRpb25GcmFtZShyZXNvbHZlKVxuXHRcdFx0XHRcdFx0KTtcblx0XHRcdFx0XHR9IGNhdGNoIHtcblx0XHRcdFx0XHRcdC8vIEZ1bGxzY3JlZW4gZXhpdCBtaWdodCBmYWlsLCBjb250aW51ZSBhbnl3YXlcblx0XHRcdFx0XHR9XG5cdFx0XHRcdH1cblxuXHRcdFx0XHQvLyBVcGRhdGUgemVuIG1vZGUgc3RhdGUgYWZ0ZXIgZnVsbHNjcmVlbiBvcGVyYXRpb24gY29tcGxldGVzXG5cdFx0XHRcdHRoaXMuc2V0dGluZ3MuemVuTW9kZSA9IGZhbHNlO1xuXHRcdFx0XHRhd2FpdCB0aGlzLnNhdmVTZXR0aW5ncygpO1xuXHRcdFx0XHR0aGlzLnJlZnJlc2goKTtcblx0XHRcdH1cblx0XHR9IGZpbmFsbHkge1xuXHRcdFx0Ly8gQWx3YXlzIGNsZWFyIHRoZSBsb2NrLCBldmVuIGlmIGFuIGVycm9yIG9jY3Vyc1xuXHRcdFx0dGhpcy5faXNUb2dnbGluZ1plbiA9IGZhbHNlO1xuXHRcdH1cblx0fVxufVxuIiwgIi8qKlxuICogU2V0dGluZ3MgaW50ZXJmYWNlIGZvciB0aGUgWmVuIE1vZGUgcGx1Z2luLlxuICovXG5leHBvcnQgaW50ZXJmYWNlIFplbk1vZGVTZXR0aW5ncyB7XG5cdC8qKiBXaGV0aGVyIHplbiBtb2RlIGlzIGN1cnJlbnRseSBhY3RpdmUuICovXG5cdHplbk1vZGU6IGJvb2xlYW47XG5cdC8qKiBXaGV0aGVyIHRoZSBsZWZ0IHNpZGViYXIgd2FzIGNvbGxhcHNlZCBiZWZvcmUgZW50ZXJpbmcgemVuIG1vZGUuICovXG5cdGxlZnRTaWRlYmFyOiBib29sZWFuO1xuXHQvKiogV2hldGhlciB0aGUgcmlnaHQgc2lkZWJhciB3YXMgY29sbGFwc2VkIGJlZm9yZSBlbnRlcmluZyB6ZW4gbW9kZS4gKi9cblx0cmlnaHRTaWRlYmFyOiBib29sZWFuO1xuXHQvKiogV2hldGhlciB0byBhdXRvbWF0aWNhbGx5IGVudGVyIGZ1bGxzY3JlZW4gd2hlbiBlbmFibGluZyB6ZW4gbW9kZS4gKi9cblx0ZnVsbHNjcmVlbjogYm9vbGVhbjtcblx0LyoqIFdoZW4gdG8gc2hvdyB0aGUgemVuIG1vZGUgZXhpdCBidXR0b24uICovXG5cdGV4aXRCdXR0b25WaXNpYmlsaXR5OiBcIm1vYmlsZS1vbmx5XCIgfCBcImFsd2F5c1wiIHwgXCJuZXZlclwiO1xuXHQvKiogV2hldGhlciB0byBhdXRvLWhpZGUgdGhlIGV4aXQgYnV0dG9uIG9uIGRlc2t0b3AgKHJldmVhbHMgb24gaG92ZXIpLiAqL1xuXHRhdXRvSGlkZUJ1dHRvbk9uRGVza3RvcDogYm9vbGVhbjtcblx0LyoqIFdoZXRoZXIgdG8gaGlkZSBwcm9wZXJ0aWVzIHdoZW4gemVuIG1vZGUgaXMgYWN0aXZlLiAqL1xuXHRoaWRlUHJvcGVydGllczogYm9vbGVhbjtcblx0LyoqIFdoZXRoZXIgdG8gaGlkZSB0aGUgaW5saW5lIHRpdGxlIChub3RlIHRpdGxlKSB3aGVuIHplbiBtb2RlIGlzIGFjdGl2ZS4gKi9cblx0aGlkZUlubGluZVRpdGxlOiBib29sZWFuO1xuXHQvKiogVG9wIHBhZGRpbmcgaW4gcGl4ZWxzICgwLTEwMCkuICovXG5cdHRvcFBhZGRpbmc6IG51bWJlcjtcblx0LyoqIEJvdHRvbSBwYWRkaW5nIGluIHBpeGVscyAoMC0xMDApLiAqL1xuXHRib3R0b21QYWRkaW5nOiBudW1iZXI7XG5cdC8qKiBXaGV0aGVyIHRvIHNob3cgb25seSB0aGUgYWN0aXZlIGZpbGUsIGhpZGluZyBhbGwgb3RoZXIgcGFuZXMuICovXG5cdGZvY3VzZWRGaWxlTW9kZTogYm9vbGVhbjtcblx0LyoqIFdoZXRoZXIgdG8gaGlkZSB0aGUgc3RhdHVzIGJhciB3aGVuIHplbiBtb2RlIGlzIGFjdGl2ZS4gKi9cblx0aGlkZVN0YXR1c0JhcjogYm9vbGVhbjtcbn1cblxuLyoqXG4gKiBEZWZhdWx0IHNldHRpbmdzIGZvciB0aGUgWmVuIE1vZGUgcGx1Z2luLlxuICovXG5leHBvcnQgY29uc3QgREVGQVVMVF9TRVRUSU5HUzogWmVuTW9kZVNldHRpbmdzID0ge1xuXHR6ZW5Nb2RlOiBmYWxzZSxcblx0bGVmdFNpZGViYXI6IGZhbHNlLFxuXHRyaWdodFNpZGViYXI6IGZhbHNlLFxuXHRmdWxsc2NyZWVuOiBmYWxzZSxcblx0ZXhpdEJ1dHRvblZpc2liaWxpdHk6IFwiYWx3YXlzXCIsXG5cdGF1dG9IaWRlQnV0dG9uT25EZXNrdG9wOiBmYWxzZSxcblx0aGlkZVByb3BlcnRpZXM6IGZhbHNlLFxuXHRoaWRlSW5saW5lVGl0bGU6IGZhbHNlLFxuXHR0b3BQYWRkaW5nOiAwLFxuXHRib3R0b21QYWRkaW5nOiAwLFxuXHRmb2N1c2VkRmlsZU1vZGU6IGZhbHNlLFxuXHRoaWRlU3RhdHVzQmFyOiBmYWxzZSxcbn07XG4iLCAiaW1wb3J0IHsgQXBwLCBQbHVnaW5TZXR0aW5nVGFiIH0gZnJvbSBcIm9ic2lkaWFuXCI7XG5pbXBvcnQgeyBjcmVhdGVTZXR0aW5nc0dyb3VwIH0gZnJvbSBcIi4vdXRpbHMvc2V0dGluZ3MtY29tcGF0XCI7XG5pbXBvcnQgdHlwZSBaZW5Nb2RlIGZyb20gXCIuL21haW5cIjtcblxuLyoqXG4gKiBTZXR0aW5ncyB0YWIgZm9yIHRoZSBaZW4gTW9kZSBwbHVnaW4uXG4gKiBQcm92aWRlcyBVSSBmb3IgY29uZmlndXJpbmcgYWxsIHBsdWdpbiBzZXR0aW5ncy5cbiAqL1xuZXhwb3J0IGNsYXNzIFplbk1vZGVTZXR0aW5nVGFiIGV4dGVuZHMgUGx1Z2luU2V0dGluZ1RhYiB7XG5cdHBsdWdpbjogWmVuTW9kZTtcblx0LyoqXG5cdCAqIENyZWF0ZXMgYSBuZXcgc2V0dGluZ3MgdGFiIGluc3RhbmNlLlxuXHQgKiBAcGFyYW0gYXBwIC0gVGhlIE9ic2lkaWFuIGFwcCBpbnN0YW5jZVxuXHQgKiBAcGFyYW0gcGx1Z2luIC0gVGhlIFplbiBNb2RlIHBsdWdpbiBpbnN0YW5jZVxuXHQgKi9cblx0Y29uc3RydWN0b3IoYXBwOiBBcHAsIHBsdWdpbjogWmVuTW9kZSkge1xuXHRcdHN1cGVyKGFwcCwgcGx1Z2luKTtcblx0XHR0aGlzLnBsdWdpbiA9IHBsdWdpbjtcblx0fVxuXG5cdC8qKlxuXHQgKiBEaXNwbGF5cyB0aGUgc2V0dGluZ3MgdGFiIFVJLlxuXHQgKiBDcmVhdGVzIGFsbCBzZXR0aW5nIGNvbnRyb2xzIGFuZCByZWdpc3RlcnMgY2hhbmdlIGhhbmRsZXJzLlxuXHQgKi9cblx0ZGlzcGxheSgpOiB2b2lkIHtcblx0XHRjb25zdCB7IGNvbnRhaW5lckVsIH0gPSB0aGlzO1xuXG5cdFx0Y29udGFpbmVyRWwuZW1wdHkoKTtcblxuXHRcdC8vIENyZWF0ZSBzZXR0aW5ncyBncm91cCAobm8gaGVhZGluZyAtIGFsbCBzZXR0aW5ncyBhcmUgZ2VuZXJhbClcblx0XHRjb25zdCBnZW5lcmFsR3JvdXAgPSBjcmVhdGVTZXR0aW5nc0dyb3VwKFxuXHRcdFx0Y29udGFpbmVyRWwsXG5cdFx0XHR1bmRlZmluZWQsXG5cdFx0XHRcInplbm1vZGVcIlxuXHRcdCk7XG5cblx0XHRnZW5lcmFsR3JvdXAuYWRkU2V0dGluZygoc2V0dGluZykgPT4ge1xuXHRcdFx0c2V0dGluZ1xuXHRcdFx0XHQuc2V0TmFtZShcIkZ1bGwgc2NyZWVuXCIpXG5cdFx0XHRcdC5zZXREZXNjKFxuXHRcdFx0XHRcdFwiQXV0b21hdGljYWxseSBlbnRlciBmdWxsc2NyZWVuIHdoZW4gZW5hYmxpbmcgemVuIG1vZGUuXCJcblx0XHRcdFx0KVxuXHRcdFx0XHQuYWRkVG9nZ2xlKCh0b2dnbGUpID0+XG5cdFx0XHRcdFx0dG9nZ2xlXG5cdFx0XHRcdFx0XHQuc2V0VmFsdWUodGhpcy5wbHVnaW4uc2V0dGluZ3MuZnVsbHNjcmVlbilcblx0XHRcdFx0XHRcdC5vbkNoYW5nZSgodmFsdWUpID0+IHtcblx0XHRcdFx0XHRcdFx0dGhpcy5wbHVnaW4uc2V0dGluZ3MuZnVsbHNjcmVlbiA9IHZhbHVlO1xuXHRcdFx0XHRcdFx0XHR2b2lkIHRoaXMucGx1Z2luLnNhdmVTZXR0aW5ncygpO1xuXHRcdFx0XHRcdFx0fSlcblx0XHRcdFx0KTtcblx0XHR9KTtcblxuXHRcdGdlbmVyYWxHcm91cC5hZGRTZXR0aW5nKChzZXR0aW5nKSA9PiB7XG5cdFx0XHRzZXR0aW5nXG5cdFx0XHRcdC5zZXROYW1lKFwiU2hvdyB6ZW4gbW9kZSBleGl0IGJ1dHRvblwiKVxuXHRcdFx0XHQuc2V0RGVzYyhcblx0XHRcdFx0XHRcIldoZW4gdG8gc2hvdyB0aGUgZXhpdCBidXR0b24gaW4gemVuIG1vZGUuIFlvdSBjYW4gYWxzbyBleGl0IHZpYSB0aGUgY29tbWFuZCBwYWxldHRlLCBieSBwcmVzc2luZyBlc2MsIG9yIGJ5IGFzc2lnbmluZyBhIGhvdGtleSB0byB0aGUgJ3RvZ2dsZSB6ZW4gbW9kZScgY29tbWFuZC5cIlxuXHRcdFx0XHQpXG5cdFx0XHRcdC5hZGREcm9wZG93bigoZHJvcGRvd24pID0+XG5cdFx0XHRcdFx0ZHJvcGRvd25cblx0XHRcdFx0XHRcdC5hZGRPcHRpb24oXCJhbHdheXNcIiwgXCJBbHdheXMgc2hvd1wiKVxuXHRcdFx0XHRcdFx0LmFkZE9wdGlvbihcIm1vYmlsZS1vbmx5XCIsIFwiTW9iaWxlIG9ubHlcIilcblx0XHRcdFx0XHRcdC5hZGRPcHRpb24oXCJuZXZlclwiLCBcIk5ldmVyIHNob3dcIilcblx0XHRcdFx0XHRcdC5zZXRWYWx1ZSh0aGlzLnBsdWdpbi5zZXR0aW5ncy5leGl0QnV0dG9uVmlzaWJpbGl0eSlcblx0XHRcdFx0XHRcdC5vbkNoYW5nZSgodmFsdWU6IHN0cmluZykgPT4ge1xuXHRcdFx0XHRcdFx0XHR0aGlzLnBsdWdpbi5zZXR0aW5ncy5leGl0QnV0dG9uVmlzaWJpbGl0eSA9XG5cdFx0XHRcdFx0XHRcdFx0dmFsdWUgYXMgXCJtb2JpbGUtb25seVwiIHwgXCJhbHdheXNcIiB8IFwibmV2ZXJcIjtcblx0XHRcdFx0XHRcdFx0dm9pZCB0aGlzLnBsdWdpbi5zYXZlU2V0dGluZ3MoKTtcblx0XHRcdFx0XHRcdFx0dGhpcy5wbHVnaW4ucmVmcmVzaCgpO1xuXHRcdFx0XHRcdFx0fSlcblx0XHRcdFx0KTtcblx0XHR9KTtcblxuXHRcdGdlbmVyYWxHcm91cC5hZGRTZXR0aW5nKChzZXR0aW5nKSA9PiB7XG5cdFx0XHRzZXR0aW5nXG5cdFx0XHRcdC5zZXROYW1lKFwiQXV0by1oaWRlIHplbiBtb2RlIGV4aXQgYnV0dG9uIG9uIGRlc2t0b3BcIilcblx0XHRcdFx0LnNldERlc2MoXG5cdFx0XHRcdFx0XCJXaGVuIGVuYWJsZWQsIHRoZSBleGl0IGJ1dHRvbiBpcyBoaWRkZW4gb24gZGVza3RvcCBidXQgcmV2ZWFscyBpdHNlbGYgb24gaG92ZXIgYXMgbG9uZyBhcyB0aGUgemVuIG1vZGUgZXhpdCBidXR0b24gaXMgb24uXCJcblx0XHRcdFx0KVxuXHRcdFx0XHQuYWRkVG9nZ2xlKCh0b2dnbGUpID0+XG5cdFx0XHRcdFx0dG9nZ2xlXG5cdFx0XHRcdFx0XHQuc2V0VmFsdWUodGhpcy5wbHVnaW4uc2V0dGluZ3MuYXV0b0hpZGVCdXR0b25PbkRlc2t0b3ApXG5cdFx0XHRcdFx0XHQub25DaGFuZ2UoKHZhbHVlKSA9PiB7XG5cdFx0XHRcdFx0XHRcdHRoaXMucGx1Z2luLnNldHRpbmdzLmF1dG9IaWRlQnV0dG9uT25EZXNrdG9wID1cblx0XHRcdFx0XHRcdFx0XHR2YWx1ZTtcblx0XHRcdFx0XHRcdFx0dm9pZCB0aGlzLnBsdWdpbi5zYXZlU2V0dGluZ3MoKTtcblx0XHRcdFx0XHRcdFx0dGhpcy5wbHVnaW4ucmVmcmVzaCgpO1xuXHRcdFx0XHRcdFx0fSlcblx0XHRcdFx0KTtcblx0XHR9KTtcblxuXHRcdGdlbmVyYWxHcm91cC5hZGRTZXR0aW5nKChzZXR0aW5nKSA9PiB7XG5cdFx0XHRzZXR0aW5nXG5cdFx0XHRcdC5zZXROYW1lKFwiSGlkZSBwcm9wZXJ0aWVzIGluIHplbiBtb2RlXCIpXG5cdFx0XHRcdC5zZXREZXNjKFwiSGlkZSBwcm9wZXJ0aWVzIHdoZW4gemVuIG1vZGUgaXMgYWN0aXZlLlwiKVxuXHRcdFx0XHQuYWRkVG9nZ2xlKCh0b2dnbGUpID0+XG5cdFx0XHRcdFx0dG9nZ2xlXG5cdFx0XHRcdFx0XHQuc2V0VmFsdWUodGhpcy5wbHVnaW4uc2V0dGluZ3MuaGlkZVByb3BlcnRpZXMpXG5cdFx0XHRcdFx0XHQub25DaGFuZ2UoKHZhbHVlKSA9PiB7XG5cdFx0XHRcdFx0XHRcdHRoaXMucGx1Z2luLnNldHRpbmdzLmhpZGVQcm9wZXJ0aWVzID0gdmFsdWU7XG5cdFx0XHRcdFx0XHRcdHZvaWQgdGhpcy5wbHVnaW4uc2F2ZVNldHRpbmdzKCk7XG5cdFx0XHRcdFx0XHRcdHRoaXMucGx1Z2luLnJlZnJlc2goKTtcblx0XHRcdFx0XHRcdH0pXG5cdFx0XHRcdCk7XG5cdFx0fSk7XG5cblx0XHRnZW5lcmFsR3JvdXAuYWRkU2V0dGluZygoc2V0dGluZykgPT4ge1xuXHRcdFx0c2V0dGluZ1xuXHRcdFx0XHQuc2V0TmFtZShcIkhpZGUgaW5saW5lIHRpdGxlIGluIHplbiBtb2RlXCIpXG5cdFx0XHRcdC5zZXREZXNjKFxuXHRcdFx0XHRcdFwiSGlkZSB0aGUgaW5saW5lIHRpdGxlIChub3RlIHRpdGxlKSB3aGVuIHplbiBtb2RlIGlzIGFjdGl2ZS5cIlxuXHRcdFx0XHQpXG5cdFx0XHRcdC5hZGRUb2dnbGUoKHRvZ2dsZSkgPT5cblx0XHRcdFx0XHR0b2dnbGVcblx0XHRcdFx0XHRcdC5zZXRWYWx1ZSh0aGlzLnBsdWdpbi5zZXR0aW5ncy5oaWRlSW5saW5lVGl0bGUpXG5cdFx0XHRcdFx0XHQub25DaGFuZ2UoKHZhbHVlKSA9PiB7XG5cdFx0XHRcdFx0XHRcdHRoaXMucGx1Z2luLnNldHRpbmdzLmhpZGVJbmxpbmVUaXRsZSA9IHZhbHVlO1xuXHRcdFx0XHRcdFx0XHR2b2lkIHRoaXMucGx1Z2luLnNhdmVTZXR0aW5ncygpO1xuXHRcdFx0XHRcdFx0XHR0aGlzLnBsdWdpbi5yZWZyZXNoKCk7XG5cdFx0XHRcdFx0XHR9KVxuXHRcdFx0XHQpO1xuXHRcdH0pO1xuXG5cdFx0Z2VuZXJhbEdyb3VwLmFkZFNldHRpbmcoKHNldHRpbmcpID0+IHtcblx0XHRcdHNldHRpbmdcblx0XHRcdFx0LnNldE5hbWUoXCJIaWRlIHN0YXR1cyBiYXIgaW4gemVuIG1vZGVcIilcblx0XHRcdFx0LnNldERlc2MoXCJIaWRlIHRoZSBzdGF0dXMgYmFyIHdoZW4gemVuIG1vZGUgaXMgYWN0aXZlLlwiKVxuXHRcdFx0XHQuYWRkVG9nZ2xlKCh0b2dnbGUpID0+XG5cdFx0XHRcdFx0dG9nZ2xlXG5cdFx0XHRcdFx0XHQuc2V0VmFsdWUodGhpcy5wbHVnaW4uc2V0dGluZ3MuaGlkZVN0YXR1c0Jhcilcblx0XHRcdFx0XHRcdC5vbkNoYW5nZSgodmFsdWUpID0+IHtcblx0XHRcdFx0XHRcdFx0dGhpcy5wbHVnaW4uc2V0dGluZ3MuaGlkZVN0YXR1c0JhciA9IHZhbHVlO1xuXHRcdFx0XHRcdFx0XHR2b2lkIHRoaXMucGx1Z2luLnNhdmVTZXR0aW5ncygpO1xuXHRcdFx0XHRcdFx0XHR0aGlzLnBsdWdpbi5yZWZyZXNoKCk7XG5cdFx0XHRcdFx0XHR9KVxuXHRcdFx0XHQpO1xuXHRcdH0pO1xuXG5cdFx0Z2VuZXJhbEdyb3VwLmFkZFNldHRpbmcoKHNldHRpbmcpID0+IHtcblx0XHRcdHNldHRpbmdcblx0XHRcdFx0LnNldE5hbWUoXCJUb3AgcGFkZGluZ1wiKVxuXHRcdFx0XHQuc2V0RGVzYyhcIlRvcCBwYWRkaW5nIGluIHBpeGVscyAoMC0xMDApLlwiKVxuXHRcdFx0XHQuYWRkU2xpZGVyKChzbGlkZXIpID0+XG5cdFx0XHRcdFx0c2xpZGVyXG5cdFx0XHRcdFx0XHQuc2V0TGltaXRzKDAsIDEwMCwgMSlcblx0XHRcdFx0XHRcdC5zZXRWYWx1ZSh0aGlzLnBsdWdpbi5zZXR0aW5ncy50b3BQYWRkaW5nKVxuXHRcdFx0XHRcdFx0LnNldER5bmFtaWNUb29sdGlwKClcblx0XHRcdFx0XHRcdC5vbkNoYW5nZSgodmFsdWUpID0+IHtcblx0XHRcdFx0XHRcdFx0dGhpcy5wbHVnaW4uc2V0dGluZ3MudG9wUGFkZGluZyA9IHZhbHVlO1xuXHRcdFx0XHRcdFx0XHR2b2lkIHRoaXMucGx1Z2luLnNhdmVTZXR0aW5ncygpO1xuXHRcdFx0XHRcdFx0XHR0aGlzLnBsdWdpbi5yZWZyZXNoKCk7XG5cdFx0XHRcdFx0XHR9KVxuXHRcdFx0XHQpO1xuXHRcdH0pO1xuXG5cdFx0Z2VuZXJhbEdyb3VwLmFkZFNldHRpbmcoKHNldHRpbmcpID0+IHtcblx0XHRcdHNldHRpbmdcblx0XHRcdFx0LnNldE5hbWUoXCJCb3R0b20gcGFkZGluZ1wiKVxuXHRcdFx0XHQuc2V0RGVzYyhcIkJvdHRvbSBwYWRkaW5nIGluIHBpeGVscyAoMC0xMDApLlwiKVxuXHRcdFx0XHQuYWRkU2xpZGVyKChzbGlkZXIpID0+XG5cdFx0XHRcdFx0c2xpZGVyXG5cdFx0XHRcdFx0XHQuc2V0TGltaXRzKDAsIDEwMCwgMSlcblx0XHRcdFx0XHRcdC5zZXRWYWx1ZSh0aGlzLnBsdWdpbi5zZXR0aW5ncy5ib3R0b21QYWRkaW5nKVxuXHRcdFx0XHRcdFx0LnNldER5bmFtaWNUb29sdGlwKClcblx0XHRcdFx0XHRcdC5vbkNoYW5nZSgodmFsdWUpID0+IHtcblx0XHRcdFx0XHRcdFx0dGhpcy5wbHVnaW4uc2V0dGluZ3MuYm90dG9tUGFkZGluZyA9IHZhbHVlO1xuXHRcdFx0XHRcdFx0XHR2b2lkIHRoaXMucGx1Z2luLnNhdmVTZXR0aW5ncygpO1xuXHRcdFx0XHRcdFx0XHR0aGlzLnBsdWdpbi5yZWZyZXNoKCk7XG5cdFx0XHRcdFx0XHR9KVxuXHRcdFx0XHQpO1xuXHRcdH0pO1xuXG5cdFx0Z2VuZXJhbEdyb3VwLmFkZFNldHRpbmcoKHNldHRpbmcpID0+IHtcblx0XHRcdHNldHRpbmdcblx0XHRcdFx0LnNldE5hbWUoXCJGb2N1c2VkIGZpbGUgbW9kZVwiKVxuXHRcdFx0XHQuc2V0RGVzYyhcblx0XHRcdFx0XHRcIk9ubHkgc2hvdyB0aGUgYWN0aXZlIGZpbGUgaW4gemVuIG1vZGUsIGhpZGUgYWxsIG90aGVyIHBhbmVzLlwiXG5cdFx0XHRcdClcblx0XHRcdFx0LmFkZFRvZ2dsZSgodG9nZ2xlKSA9PlxuXHRcdFx0XHRcdHRvZ2dsZVxuXHRcdFx0XHRcdFx0LnNldFZhbHVlKHRoaXMucGx1Z2luLnNldHRpbmdzLmZvY3VzZWRGaWxlTW9kZSlcblx0XHRcdFx0XHRcdC5vbkNoYW5nZSgodmFsdWUpID0+IHtcblx0XHRcdFx0XHRcdFx0dGhpcy5wbHVnaW4uc2V0dGluZ3MuZm9jdXNlZEZpbGVNb2RlID0gdmFsdWU7XG5cdFx0XHRcdFx0XHRcdHZvaWQgdGhpcy5wbHVnaW4uc2F2ZVNldHRpbmdzKCk7XG5cdFx0XHRcdFx0XHRcdHRoaXMucGx1Z2luLnJlZnJlc2goKTtcblx0XHRcdFx0XHRcdH0pXG5cdFx0XHRcdCk7XG5cdFx0fSk7XG5cdH1cbn1cbiIsICIvKipcbiAqIENvbXBhdGliaWxpdHkgdXRpbGl0aWVzIGZvciBzZXR0aW5nc1xuICogUHJvdmlkZXMgYmFja3dhcmQgY29tcGF0aWJpbGl0eSBmb3IgU2V0dGluZ0dyb3VwIChyZXF1aXJlcyBBUEkgMS4xMS4wKylcbiAqL1xuXG5pbXBvcnQgeyBTZXR0aW5nLCByZXF1aXJlQXBpVmVyc2lvbiB9IGZyb20gXCJvYnNpZGlhblwiO1xuaW1wb3J0ICogYXMgT2JzaWRpYW5Nb2R1bGUgZnJvbSBcIm9ic2lkaWFuXCI7XG5cbi8qKlxuICogSW50ZXJmYWNlIHRoYXQgd29ya3Mgd2l0aCBib3RoIFNldHRpbmdHcm91cCBhbmQgZmFsbGJhY2sgY29udGFpbmVyXG4gKi9cbmV4cG9ydCBpbnRlcmZhY2UgU2V0dGluZ3NDb250YWluZXIge1xuXHRhZGRTZXR0aW5nKGNiOiAoc2V0dGluZzogU2V0dGluZykgPT4gdm9pZCk6IHZvaWQ7XG59XG5cbi8qKlxuICogQ3JlYXRlcyBhIHNldHRpbmdzIGNvbnRhaW5lciB0aGF0IHVzZXMgU2V0dGluZ0dyb3VwIGlmIGF2YWlsYWJsZSAoQVBJIDEuMTEuMCspLFxuICogb3RoZXJ3aXNlIGZhbGxzIGJhY2sgdG8gY3JlYXRpbmcgYSBoZWFkaW5nIGFuZCB1c2luZyB0aGUgY29udGFpbmVyIGRpcmVjdGx5LlxuICpcbiAqIFVzZXMgcmVxdWlyZUFwaVZlcnNpb24oJzEuMTEuMCcpIHRvIGNoZWNrIGlmIFNldHRpbmdHcm91cCBpcyBhdmFpbGFibGUuXG4gKiBUaGlzIGlzIHRoZSBvZmZpY2lhbCBPYnNpZGlhbiBBUEkgbWV0aG9kIGZvciB2ZXJzaW9uIGNoZWNraW5nLlxuICpcbiAqIEBwYXJhbSBjb250YWluZXJFbCAtIFRoZSBjb250YWluZXIgZWxlbWVudCBmb3Igc2V0dGluZ3NcbiAqIEBwYXJhbSBoZWFkaW5nIC0gVGhlIGhlYWRpbmcgdGV4dCBmb3IgdGhlIHNldHRpbmdzIGdyb3VwIChvcHRpb25hbClcbiAqIEBwYXJhbSBtYW5pZmVzdElkIC0gVGhlIHBsdWdpbidzIG1hbmlmZXN0IElEIGZvciBDU1Mgc2NvcGluZyAocmVxdWlyZWQgZm9yIGZhbGxiYWNrIG1vZGUpXG4gKiBAcmV0dXJucyBBIGNvbnRhaW5lciB0aGF0IGNhbiBiZSB1c2VkIHRvIGFkZCBzZXR0aW5nc1xuICovXG5leHBvcnQgZnVuY3Rpb24gY3JlYXRlU2V0dGluZ3NHcm91cChcblx0Y29udGFpbmVyRWw6IEhUTUxFbGVtZW50LFxuXHRoZWFkaW5nPzogc3RyaW5nLFxuXHRtYW5pZmVzdElkPzogc3RyaW5nXG4pOiBTZXR0aW5nc0NvbnRhaW5lciB7XG5cdC8vIENoZWNrIGlmIFNldHRpbmdHcm91cCBpcyBhdmFpbGFibGUgKEFQSSAxLjExLjArKVxuXHQvLyByZXF1aXJlQXBpVmVyc2lvbiBpcyB0aGUgb2ZmaWNpYWwgT2JzaWRpYW4gQVBJIG1ldGhvZCBmb3IgdmVyc2lvbiBjaGVja2luZ1xuXHRpZiAocmVxdWlyZUFwaVZlcnNpb24oXCIxLjExLjBcIikpIHtcblx0XHQvLyBVc2UgU2V0dGluZ0dyb3VwIC0gaXQncyBndWFyYW50ZWVkIHRvIGV4aXN0IGlmIHJlcXVpcmVBcGlWZXJzaW9uIHJldHVybnMgdHJ1ZVxuXHRcdC8vIEFjY2VzcyBTZXR0aW5nR3JvdXAgdmlhIHR5cGUgYXNzZXJ0aW9uIHNpbmNlIGl0IG1heSBub3QgYmUgaW4gdHlwZSBkZWZpbml0aW9uc1xuXHRcdC8vIGZvciBvbGRlciBUeXBlU2NyaXB0IHZlcnNpb25zLCBidXQgZXhpc3RzIGF0IHJ1bnRpbWUgaW4gT2JzaWRpYW4gMS4xMS4wK1xuXHRcdC8vIFVzaW5nIHVua25vd24gaW5zdGVhZCBvZiBhbnkgdG8gc2F0aXNmeSBlc2xpbnQgd2hpbGUgbWFpbnRhaW5pbmcgdHlwZSBzYWZldHlcblx0XHRjb25zdCBTZXR0aW5nR3JvdXBDbGFzcyA9IChcblx0XHRcdE9ic2lkaWFuTW9kdWxlIGFzIHVua25vd24gYXMge1xuXHRcdFx0XHRTZXR0aW5nR3JvdXA/OiBuZXcgKGNvbnRhaW5lckVsOiBIVE1MRWxlbWVudCkgPT4ge1xuXHRcdFx0XHRcdHNldEhlYWRpbmcoaGVhZGluZzogc3RyaW5nKToge1xuXHRcdFx0XHRcdFx0YWRkU2V0dGluZyhjYjogKHNldHRpbmc6IFNldHRpbmcpID0+IHZvaWQpOiB2b2lkO1xuXHRcdFx0XHRcdH07XG5cdFx0XHRcdFx0YWRkU2V0dGluZyhjYjogKHNldHRpbmc6IFNldHRpbmcpID0+IHZvaWQpOiB2b2lkO1xuXHRcdFx0XHR9O1xuXHRcdFx0fVxuXHRcdCkuU2V0dGluZ0dyb3VwO1xuXG5cdFx0aWYgKFNldHRpbmdHcm91cENsYXNzKSB7XG5cdFx0XHRjb25zdCBncm91cCA9IGhlYWRpbmdcblx0XHRcdFx0PyBuZXcgU2V0dGluZ0dyb3VwQ2xhc3MoY29udGFpbmVyRWwpLnNldEhlYWRpbmcoaGVhZGluZylcblx0XHRcdFx0OiBuZXcgU2V0dGluZ0dyb3VwQ2xhc3MoY29udGFpbmVyRWwpO1xuXHRcdFx0cmV0dXJuIHtcblx0XHRcdFx0YWRkU2V0dGluZyhjYjogKHNldHRpbmc6IFNldHRpbmcpID0+IHZvaWQpIHtcblx0XHRcdFx0XHRncm91cC5hZGRTZXR0aW5nKGNiKTtcblx0XHRcdFx0fSxcblx0XHRcdH07XG5cdFx0fVxuXHR9XG5cblx0Ly8gRmFsbGJhY2sgcGF0aCAoZWl0aGVyIEFQSSA8IDEuMTEuMCBvciBTZXR0aW5nR3JvdXAgbm90IGZvdW5kKVxuXHQvLyBBZGQgc2NvcGluZyBjbGFzcyB0byBjb250YWluZXJFbCB0byBzY29wZSBDU1MgdG8gb25seSB0aGlzIHBsdWdpbidzIHNldHRpbmdzXG5cdGlmIChtYW5pZmVzdElkKSB7XG5cdFx0Y29udGFpbmVyRWwuYWRkQ2xhc3MoYCR7bWFuaWZlc3RJZH0tc2V0dGluZ3MtY29tcGF0YCk7XG5cdH1cblxuXHR7XG5cdFx0Ly8gRmFsbGJhY2s6IENyZWF0ZSBhIGhlYWRpbmcgbWFudWFsbHkgZm9yIG9sZGVyIEFQSSB2ZXJzaW9uc1xuXHRcdC8vIE5vdGU6IFdoaWxlIGJlc3QgcHJhY3RpY2UgcHJlZmVycyBTZXR0aW5nLnNldEhlYWRpbmcoKSwgdGhlIGZhbGxiYWNrIHBhdGhcblx0XHQvLyBpcyBmb3IgdmVyc2lvbnMgdGhhdCBtYXkgbm90IHN1cHBvcnQgaXQsIHNvIG1hbnVhbCBoZWFkaW5nIGlzIGFwcHJvcHJpYXRlIGhlcmVcblx0XHRpZiAoaGVhZGluZykge1xuXHRcdFx0Y29uc3QgaGVhZGluZ0VsID0gY29udGFpbmVyRWwuY3JlYXRlRGl2KFwic2V0dGluZy1ncm91cC1oZWFkaW5nXCIpO1xuXHRcdFx0aGVhZGluZ0VsLmNyZWF0ZUVsKFwiaDNcIiwgeyB0ZXh0OiBoZWFkaW5nIH0pO1xuXHRcdH1cblxuXHRcdHJldHVybiB7XG5cdFx0XHRhZGRTZXR0aW5nKGNiOiAoc2V0dGluZzogU2V0dGluZykgPT4gdm9pZCkge1xuXHRcdFx0XHRjb25zdCBzZXR0aW5nID0gbmV3IFNldHRpbmcoY29udGFpbmVyRWwpO1xuXHRcdFx0XHRjYihzZXR0aW5nKTtcblx0XHRcdH0sXG5cdFx0fTtcblx0fVxufVxuIiwgIi8qKlxuICogSGVscGVyIGZ1bmN0aW9uIHRvIHNldCBDU1MgcHJvcGVydGllcyBvbiBhbiBlbGVtZW50LlxuICogQ29udmVydHMgY2FtZWxDYXNlIHByb3BlcnR5IG5hbWVzIHRvIGtlYmFiLWNhc2UgZm9yIENTUy5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIHNldENzc1Byb3BzKFxuXHRlbGVtZW50OiBIVE1MRWxlbWVudCxcblx0cHJvcHM6IFJlY29yZDxzdHJpbmcsIHN0cmluZz5cbik6IHZvaWQge1xuXHRPYmplY3QuZW50cmllcyhwcm9wcykuZm9yRWFjaCgoW2tleSwgdmFsdWVdKSA9PiB7XG5cdFx0Y29uc3QgY3NzS2V5ID0ga2V5LnJlcGxhY2UoLyhbYS16XSkoW0EtWl0pL2csIFwiJDEtJDJcIikudG9Mb3dlckNhc2UoKTtcblx0XHRlbGVtZW50LnN0eWxlLnNldFByb3BlcnR5KGNzc0tleSwgdmFsdWUpO1xuXHR9KTtcbn1cbiJdLAogICJtYXBwaW5ncyI6ICI7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7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QUNELFNBQVE7QUFBQSxVQUVSO0FBQUEsUUFDRDtBQUdBLGFBQUssU0FBUyxVQUFVO0FBQ3hCLGNBQU0sS0FBSyxhQUFhO0FBQ3hCLGFBQUssUUFBUTtBQUFBLE1BQ2QsT0FBTztBQUVOLFlBQUksU0FBUyxxQkFBcUIsU0FBUyxnQkFBZ0I7QUFDMUQsY0FBSTtBQUNILGtCQUFNLFNBQVMsZUFBZTtBQUU5QixrQkFBTSxJQUFJO0FBQUEsY0FBUSxDQUFDLFlBQ2xCLHNCQUFzQixPQUFPO0FBQUEsWUFDOUI7QUFBQSxVQUNELFNBQVE7QUFBQSxVQUVSO0FBQUEsUUFDRDtBQUdBLGFBQUssU0FBUyxVQUFVO0FBQ3hCLGNBQU0sS0FBSyxhQUFhO0FBQ3hCLGFBQUssUUFBUTtBQUFBLE1BQ2Q7QUFBQSxJQUNELFVBQUU7QUFFRCxXQUFLLGlCQUFpQjtBQUFBLElBQ3ZCO0FBQUEsRUFDRDtBQUNEOyIsCiAgIm5hbWVzIjogWyJpbXBvcnRfb2JzaWRpYW4iLCAiaW1wb3J0X29ic2lkaWFuIiwgImFsbFRhYkNvbnRhaW5lcnMiXQp9Cg==
