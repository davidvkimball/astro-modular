/*
THIS IS A GENERATED/BUNDLED FILE BY ESBUILD
if you want to view the source, please visit the github repository of this plugin
*/

var __create = Object.create;
var __defProp = Object.defineProperty;
var __getOwnPropDesc = Object.getOwnPropertyDescriptor;
var __getOwnPropNames = Object.getOwnPropertyNames;
var __getProtoOf = Object.getPrototypeOf;
var __hasOwnProp = Object.prototype.hasOwnProperty;
var __export = (target, all) => {
  for (var name in all)
    __defProp(target, name, { get: all[name], enumerable: true });
};
var __copyProps = (to, from, except, desc) => {
  if (from && typeof from === "object" || typeof from === "function") {
    for (let key of __getOwnPropNames(from))
      if (!__hasOwnProp.call(to, key) && key !== except)
        __defProp(to, key, { get: () => from[key], enumerable: !(desc = __getOwnPropDesc(from, key)) || desc.enumerable });
  }
  return to;
};
var __toESM = (mod, isNodeMode, target) => (target = mod != null ? __create(__getProtoOf(mod)) : {}, __copyProps(
  // If the importer is in node compatibility mode or this is not an ESM
  // file that has been converted to a CommonJS file using a Babel-
  // compatible transform (i.e. "__esModule" has not been set), then set
  // "default" to the CommonJS "module.exports" for node compatibility.
  isNodeMode || !mod || !mod.__esModule ? __defProp(target, "default", { value: mod, enumerable: true }) : target,
  mod
));
var __toCommonJS = (mod) => __copyProps(__defProp({}, "__esModule", { value: true }), mod);

// src/main.ts
var main_exports = {};
__export(main_exports, {
  default: () => UITweakerPlugin
});
module.exports = __toCommonJS(main_exports);
var import_obsidian15 = require("obsidian");

// src/settings.ts
var DEFAULT_SETTINGS = {
  // Auto-hide elements
  titleBar: "show",
  fileExplorerNavHeader: "show",
  otherNavHeaders: "show",
  leftTabHeaders: "show",
  rightTabHeaders: "show",
  ribbonRevealOnHover: false,
  vaultSwitcher: "show",
  helpButton: "show",
  settingsButton: "show",
  // Simple toggles
  tabBar: false,
  enableWindowDragging: false,
  newNoteButton: false,
  newFolderButton: false,
  sortOrderButton: false,
  autoRevealButton: false,
  collapseAllButton: false,
  readingModeButton: false,
  searchSettingsButton: false,
  tabListIcon: "show",
  newTabIcon: "show",
  tabCloseButton: "show",
  statusBar: false,
  scrollBars: "show",
  leftSidebarToggleButton: "show",
  rightSidebarToggleButton: "show",
  tooltips: false,
  searchSuggestions: false,
  searchTermCounts: false,
  propertiesInReadingView: false,
  propertiesInHeading: false,
  addPropertyButton: false,
  instructions: false,
  // Mobile-specific
  mobileChevronsIcon: false,
  navigateBackButton: false,
  navigateForwardButton: false,
  quickSwitcherButton: false,
  mobileNewTabButton: false,
  openTabButton: false,
  ribbonMenuButton: false,
  swapMobileNewTabIcon: false,
  hideMobileTitle: false,
  hideMobileSyncIcon: false,
  // Mobile navigation menu positions
  navigateButtonPosition: "1",
  navigationButtonPosition: "2",
  quickSwitcherPosition: "3",
  newTabPosition: "4",
  openTabsPosition: "5",
  ribbonMenuPosition: "6",
  // Advanced
  vaultSwitcherBackgroundTransparency: 0.98,
  helpButtonReplacement: {
    enabled: false,
    commandId: "",
    iconId: "wrench"
  },
  syncButtonReplacement: {
    enabled: false,
    commandId: "",
    iconId: "wrench"
  },
  // Tab Bar
  tabBarCommands: [],
  // Status Bar
  statusBarItems: [],
  // Explorer
  explorerCommands: [],
  explorerButtonItems: [],
  // Native explorer button colors
  nativeExplorerButtonColors: {
    newNote: void 0,
    newFolder: void 0,
    sortOrder: void 0,
    autoReveal: void 0,
    collapseAll: void 0
  },
  // Native explorer button icon overrides
  nativeExplorerButtonIcons: {
    newNote: void 0,
    newFolder: void 0,
    sortOrder: void 0,
    autoReveal: void 0,
    collapseAll: void 0
  }
};

// src/uiManager.ts
var import_obsidian = require("obsidian");
function setCssProps(el, props) {
  Object.entries(props).forEach(([key, value]) => {
    el.style.setProperty(key, String(value));
  });
}
var UIManager = class {
  constructor(settings) {
    this.revealListeners = /* @__PURE__ */ new Map();
    this.settings = settings;
  }
  updateSettings(settings) {
    this.settings = settings;
    this.applyStyles();
  }
  detectOS() {
    if (import_obsidian.Platform.isMacOS) {
      return "macos";
    }
    if (import_obsidian.Platform.isWin) {
      return "windows";
    }
    return "neutral";
  }
  applyStyles() {
    const body = document.body;
    this.applyVisibilityState(body, "auto-hide-title-bar", this.settings.titleBar, true);
    this.applyVisibilityState(body, "auto-hide-file-explorer-nav-header", this.settings.fileExplorerNavHeader);
    this.applyVisibilityState(body, "auto-hide-other-nav-headers", this.settings.otherNavHeaders);
    this.applyVisibilityState(body, "auto-hide-left-tab-headers", this.settings.leftTabHeaders);
    this.applyVisibilityState(body, "auto-hide-right-tab-headers", this.settings.rightTabHeaders);
    this.applyVisibilityState(body, "auto-hide-vault-switcher", this.settings.vaultSwitcher);
    this.applyVisibilityState(body, "hider-help-button", this.settings.helpButton);
    this.applyVisibilityState(body, "auto-hide-settings-button", this.settings.settingsButton);
    body.classList.toggle("auto-collapse-ribbon", this.settings.ribbonRevealOnHover);
    body.classList.toggle("hider-tabs", this.settings.tabBar);
    if (this.settings.tabBar && this.settings.enableWindowDragging) {
      const os = this.detectOS();
      body.classList.remove("enable-window-dragging-windows", "enable-window-dragging-macos", "enable-window-dragging-neutral");
      body.classList.add(`enable-window-dragging-${os}`);
    } else {
      body.classList.remove("enable-window-dragging-windows", "enable-window-dragging-macos", "enable-window-dragging-neutral");
    }
    body.classList.toggle("hide-button-new-note", this.settings.newNoteButton);
    body.classList.toggle("hide-button-new-folder", this.settings.newFolderButton);
    body.classList.toggle("hide-button-sort-order", this.settings.sortOrderButton);
    body.classList.toggle("hide-button-auto-reveal", this.settings.autoRevealButton);
    body.classList.toggle("hide-button-collapse-all", this.settings.collapseAllButton);
    body.classList.toggle("hide-button-reading-mode", this.settings.readingModeButton);
    body.classList.toggle("hide-button-search-settings", this.settings.searchSettingsButton);
    this.applyVisibilityState(body, "hide-tab-list-icon", this.settings.tabListIcon);
    this.applyVisibilityState(body, "hide-new-tab-icon", this.settings.newTabIcon);
    this.applyVisibilityState(body, "hide-tab-close-button", this.settings.tabCloseButton);
    body.classList.toggle("hider-status", this.settings.statusBar);
    this.applyVisibilityState(body, "hider-scroll", this.settings.scrollBars);
    if (this.settings.scrollBars === "reveal") {
      this.setupScrollbarRevealListeners();
    } else {
      this.removeScrollbarRevealListeners();
    }
    this.applyVisibilityState(body, "hider-left-sidebar-button", this.settings.leftSidebarToggleButton);
    this.applyVisibilityState(body, "hider-right-sidebar-button", this.settings.rightSidebarToggleButton);
    body.classList.toggle("hider-tooltips", this.settings.tooltips);
    body.classList.toggle("hider-search-suggestions", this.settings.searchSuggestions);
    body.classList.toggle("hider-search-counts", this.settings.searchTermCounts);
    body.classList.toggle("hider-meta", this.settings.propertiesInReadingView);
    body.classList.toggle("metadata-heading-off", this.settings.propertiesInHeading);
    body.classList.toggle("metadata-add-property-off", this.settings.addPropertyButton);
    body.classList.toggle("hider-instructions", this.settings.instructions);
    body.classList.toggle("hide-icon-mobile-chevrons", this.settings.mobileChevronsIcon);
    body.classList.toggle("hide-button-mobile-navbar-action-back", this.settings.navigateBackButton);
    body.classList.toggle("hide-button-mobile-navbar-action-forward", this.settings.navigateForwardButton);
    body.classList.toggle("hide-button-mobile-navbar-action-quick-switcher", this.settings.quickSwitcherButton);
    body.classList.toggle("hide-button-mobile-navbar-action-new-tab", this.settings.mobileNewTabButton);
    body.classList.toggle("hide-button-mobile-navbar-action-tabs", this.settings.openTabButton);
    body.classList.toggle("hide-button-mobile-navbar-action-menu", this.settings.ribbonMenuButton);
    body.classList.toggle("swap-mobile-new-tab-icon", this.settings.swapMobileNewTabIcon);
    body.classList.toggle("hide-mobile-title", this.settings.hideMobileTitle);
    body.classList.toggle("hide-mobile-sync-icon", this.settings.hideMobileSyncIcon);
    const orderClasses = Array.from(body.classList).filter(
      (cls) => cls.startsWith("order-navbar-button-nth-child-")
    );
    orderClasses.forEach((cls) => body.classList.remove(cls));
    body.classList.add(`order-navbar-button-nth-child-1-${this.settings.navigateButtonPosition}`);
    body.classList.add(`order-navbar-button-nth-child-2-${this.settings.navigationButtonPosition}`);
    body.classList.add(`order-navbar-button-nth-child-3-${this.settings.quickSwitcherPosition}`);
    body.classList.add(`order-navbar-button-nth-child-4-${this.settings.newTabPosition}`);
    body.classList.add(`order-navbar-button-nth-child-5-${this.settings.openTabsPosition}`);
    body.classList.add(`order-navbar-button-nth-child-6-${this.settings.ribbonMenuPosition}`);
    const maskValue = this.settings.vaultSwitcherBackgroundTransparency >= 1 ? "none" : "linear-gradient(to top, hsl(0, 0%, 0%) 0%, hsla(0, 0%, 0%, 0.99) 18.4%, hsla(0, 0%, 0%, 0.963) 33.7%, hsla(0, 0%, 0%, 0.92) 46.4%, hsla(0, 0%, 0%, 0.864) 56.7%, hsla(0, 0%, 0%, 0.796) 64.8%, hsla(0, 0%, 0%, 0.72) 71.2%, hsla(0, 0%, 0%, 0.637) 76.1%, hsla(0, 0%, 0%, 0.55) 79.9%, hsla(0, 0%, 0%, 0.46) 82.8%, hsla(0, 0%, 0%, 0.37) 85.2%, hsla(0, 0%, 0%, 0.283) 87.3%, hsla(0, 0%, 0%, 0.2) 89.6%, hsla(0, 0%, 0%, 0.124) 92.3%, hsla(0, 0%, 0%, 0.056) 95.6%, hsla(0, 0%, 0%, 0) 100%)";
    setCssProps(body, {
      "--auto-hide-vault-switcher-bg-transparency": String(this.settings.vaultSwitcherBackgroundTransparency),
      "--auto-hide-vault-switcher-mask": maskValue
    });
  }
  applyVisibilityState(body, className, state, useAlwaysShow = false) {
    if (useAlwaysShow) {
      body.classList.remove("always-show-title-bar", `${className}-hide`, `${className}-reveal`);
    } else {
      body.classList.remove(`${className}-show`, `${className}-hide`, `${className}-reveal`);
    }
    if (state === "show") {
      if (useAlwaysShow) {
        body.classList.add("always-show-title-bar");
      }
    } else if (state === "hide") {
      body.classList.add(`${className}-hide`);
    } else if (state === "reveal") {
      body.classList.add(`${className}-reveal`);
    }
  }
  setupScrollbarRevealListeners() {
    this.removeScrollbarRevealListeners();
    const isScrollable = (element) => {
      const style = window.getComputedStyle(element);
      const overflow = style.overflow + style.overflowY + style.overflowX;
      if (!overflow.includes("scroll") && !overflow.includes("auto")) {
        return false;
      }
      return element.scrollHeight > element.clientHeight || element.scrollWidth > element.clientWidth;
    };
    const hoveredElements = /* @__PURE__ */ new Set();
    const handleMouseMove = (e) => {
      const target = e.target;
      if (!target) return;
      hoveredElements.forEach((el) => {
        el.classList.remove("ui-tweaker-scrollbar-hover");
      });
      hoveredElements.clear();
      let element = target;
      while (element && element !== document.body && element !== document.documentElement) {
        if (isScrollable(element)) {
          const rect = element.getBoundingClientRect();
          const scrollbarArea = 25;
          const isInVerticalScrollbarArea = e.clientX >= rect.right - scrollbarArea && e.clientX <= rect.right;
          const isInHorizontalScrollbarArea = e.clientY >= rect.bottom - scrollbarArea && e.clientY <= rect.bottom;
          if (isInVerticalScrollbarArea || isInHorizontalScrollbarArea) {
            element.classList.add("ui-tweaker-scrollbar-hover");
            hoveredElements.add(element);
          }
        }
        element = element.parentElement;
      }
    };
    const handleMouseLeave = () => {
      hoveredElements.forEach((el) => {
        el.classList.remove("ui-tweaker-scrollbar-hover");
      });
      hoveredElements.clear();
    };
    document.addEventListener("mousemove", handleMouseMove, true);
    document.addEventListener("mouseleave", handleMouseLeave, true);
    this.revealListeners.set("scrollbar-reveal", () => {
      document.removeEventListener("mousemove", handleMouseMove, true);
      document.removeEventListener("mouseleave", handleMouseLeave, true);
      hoveredElements.forEach((el) => {
        el.classList.remove("ui-tweaker-scrollbar-hover");
      });
      hoveredElements.clear();
    });
  }
  removeScrollbarRevealListeners() {
    const cleanup = this.revealListeners.get("scrollbar-reveal");
    if (cleanup) {
      cleanup();
      this.revealListeners.delete("scrollbar-reveal");
    }
  }
  cleanup() {
    this.revealListeners.forEach((cleanup) => cleanup());
    this.revealListeners.clear();
    const body = document.body;
    const classesToRemove = [];
    body.classList.forEach((className) => {
      if (className.startsWith("ui-tweaker-") || className.startsWith("auto-hide-") || className.startsWith("hider-") || className.startsWith("hide-") || className.startsWith("metadata-") || className.startsWith("order-navbar-button-") || className.startsWith("enable-window-dragging-") || className === "auto-collapse-ribbon" || className === "swap-mobile-new-tab-icon" || className === "always-show-title-bar") {
        classesToRemove.push(className);
      }
    });
    classesToRemove.forEach((className) => body.classList.remove(className));
    body.style.removeProperty("--auto-hide-vault-switcher-bg-transparency");
    body.style.removeProperty("--auto-hide-vault-switcher-mask");
    body.style.removeProperty("--native-button-color-new-note");
    body.style.removeProperty("--native-button-color-new-folder");
    body.style.removeProperty("--native-button-color-sort-order");
    body.style.removeProperty("--native-button-color-auto-reveal");
    body.style.removeProperty("--native-button-color-collapse-all");
  }
};

// src/commands.ts
function registerCommands(context) {
  const { plugin, settings, saveSettings, refresh } = context;
  registerToggleCommand(plugin, "toggle-title-bar", "Toggle title bar", async () => {
    settings.titleBar = toggleVisibilityState(settings.titleBar);
    await saveSettings();
    refresh();
  });
  registerToggleCommand(plugin, "toggle-file-explorer-nav-header", "Toggle file explorer navigation header", async () => {
    settings.fileExplorerNavHeader = toggleVisibilityState(settings.fileExplorerNavHeader);
    await saveSettings();
    refresh();
  });
  registerToggleCommand(plugin, "toggle-other-nav-headers", "Toggle other navigation headers", async () => {
    settings.otherNavHeaders = toggleVisibilityState(settings.otherNavHeaders);
    await saveSettings();
    refresh();
  });
  registerToggleCommand(plugin, "toggle-left-tab-headers", "Toggle left tab headers", async () => {
    settings.leftTabHeaders = toggleVisibilityState(settings.leftTabHeaders);
    await saveSettings();
    refresh();
  });
  registerToggleCommand(plugin, "toggle-right-tab-headers", "Toggle right tab headers", async () => {
    settings.rightTabHeaders = toggleVisibilityState(settings.rightTabHeaders);
    await saveSettings();
    refresh();
  });
  registerToggleCommand(plugin, "toggle-vault-switcher", "Toggle vault switcher", async () => {
    settings.vaultSwitcher = toggleVisibilityState(settings.vaultSwitcher);
    await saveSettings();
    refresh();
  });
  registerToggleCommand(plugin, "toggle-help-button", "Toggle help button", async () => {
    settings.helpButton = toggleVisibilityState(settings.helpButton);
    await saveSettings();
    refresh();
  });
  registerToggleCommand(plugin, "toggle-settings-button", "Toggle settings button", async () => {
    settings.settingsButton = toggleVisibilityState(settings.settingsButton);
    await saveSettings();
    refresh();
  });
  plugin.addCommand({
    id: "open-settings",
    name: "Open settings",
    callback: () => {
      var _a, _b;
      const app = plugin.app;
      const settingApi = app.setting;
      if (settingApi) {
        (_a = settingApi.open) == null ? void 0 : _a.call(settingApi);
        const pluginInstance = plugin;
        if (((_b = pluginInstance.settingTab) == null ? void 0 : _b.id) && settingApi.openTabById) {
          settingApi.openTabById(pluginInstance.settingTab.id);
        }
      }
    }
  });
  registerToggleCommand(plugin, "toggle-tab-bar", "Toggle tab bar", async () => {
    settings.tabBar = !settings.tabBar;
    await saveSettings();
    refresh();
  });
  registerToggleCommand(plugin, "toggle-new-note-button", "Toggle new note button", async () => {
    settings.newNoteButton = !settings.newNoteButton;
    await saveSettings();
    refresh();
  });
  registerToggleCommand(plugin, "toggle-new-folder-button", "Toggle new folder button", async () => {
    settings.newFolderButton = !settings.newFolderButton;
    await saveSettings();
    refresh();
  });
  registerToggleCommand(plugin, "toggle-sort-order-button", "Toggle sort order button", async () => {
    settings.sortOrderButton = !settings.sortOrderButton;
    await saveSettings();
    refresh();
  });
  registerToggleCommand(plugin, "toggle-auto-reveal-button", "Toggle auto reveal button", async () => {
    settings.autoRevealButton = !settings.autoRevealButton;
    await saveSettings();
    refresh();
  });
  registerToggleCommand(plugin, "toggle-collapse-all-button", "Toggle collapse all button", async () => {
    settings.collapseAllButton = !settings.collapseAllButton;
    await saveSettings();
    refresh();
  });
  registerToggleCommand(plugin, "toggle-reading-mode-button", "Toggle reading mode button", async () => {
    settings.readingModeButton = !settings.readingModeButton;
    await saveSettings();
    refresh();
  });
  registerToggleCommand(plugin, "toggle-search-settings-button", "Toggle search settings button", async () => {
    settings.searchSettingsButton = !settings.searchSettingsButton;
    await saveSettings();
    refresh();
  });
  registerToggleCommand(plugin, "toggle-tab-list-icon", "Toggle tab list icon", async () => {
    settings.tabListIcon = toggleVisibilityState(settings.tabListIcon);
    await saveSettings();
    refresh();
  });
  registerToggleCommand(plugin, "toggle-new-tab-icon", "Toggle new tab icon", async () => {
    settings.newTabIcon = toggleVisibilityState(settings.newTabIcon);
    await saveSettings();
    refresh();
  });
  registerToggleCommand(plugin, "toggle-tab-close-button", "Toggle tab close button", async () => {
    settings.tabCloseButton = toggleVisibilityState(settings.tabCloseButton);
    await saveSettings();
    refresh();
  });
  registerToggleCommand(plugin, "toggle-status-bar", "Toggle status bar", async () => {
    settings.statusBar = !settings.statusBar;
    await saveSettings();
    refresh();
  });
  registerToggleCommand(plugin, "toggle-scroll-bars", "Toggle scroll bars", async () => {
    settings.scrollBars = toggleVisibilityState(settings.scrollBars);
    await saveSettings();
    refresh();
  });
  registerToggleCommand(plugin, "toggle-left-sidebar-toggle-button", "Toggle left sidebar toggle button", async () => {
    settings.leftSidebarToggleButton = toggleVisibilityState(settings.leftSidebarToggleButton);
    await saveSettings();
    refresh();
  });
  registerToggleCommand(plugin, "toggle-right-sidebar-toggle-button", "Toggle right sidebar toggle button", async () => {
    settings.rightSidebarToggleButton = toggleVisibilityState(settings.rightSidebarToggleButton);
    await saveSettings();
    refresh();
  });
  registerToggleCommand(plugin, "toggle-tooltips", "Toggle tooltips", async () => {
    settings.tooltips = !settings.tooltips;
    await saveSettings();
    refresh();
  });
  registerToggleCommand(plugin, "toggle-search-suggestions", "Toggle search suggestions", async () => {
    settings.searchSuggestions = !settings.searchSuggestions;
    await saveSettings();
    refresh();
  });
  registerToggleCommand(plugin, "toggle-search-term-counts", "Toggle search term counts", async () => {
    settings.searchTermCounts = !settings.searchTermCounts;
    await saveSettings();
    refresh();
  });
  registerToggleCommand(plugin, "toggle-properties-reading-view", "Toggle properties in Reading view", async () => {
    settings.propertiesInReadingView = !settings.propertiesInReadingView;
    await saveSettings();
    refresh();
  });
  registerToggleCommand(plugin, "toggle-properties-heading", "Toggle properties heading", async () => {
    settings.propertiesInHeading = !settings.propertiesInHeading;
    await saveSettings();
    refresh();
  });
  registerToggleCommand(plugin, "toggle-add-property-button", "Toggle add property button", async () => {
    settings.addPropertyButton = !settings.addPropertyButton;
    await saveSettings();
    refresh();
  });
  registerToggleCommand(plugin, "toggle-instructions", "Toggle instructions", async () => {
    settings.instructions = !settings.instructions;
    await saveSettings();
    refresh();
  });
  registerToggleCommand(plugin, "toggle-mobile-chevrons-icon", "Toggle mobile chevrons icon", async () => {
    settings.mobileChevronsIcon = !settings.mobileChevronsIcon;
    await saveSettings();
    refresh();
  });
  registerToggleCommand(plugin, "toggle-navigate-back-button", "Toggle navigate back button", async () => {
    settings.navigateBackButton = !settings.navigateBackButton;
    await saveSettings();
    refresh();
  });
  registerToggleCommand(plugin, "toggle-navigate-forward-button", "Toggle navigate forward button", async () => {
    settings.navigateForwardButton = !settings.navigateForwardButton;
    await saveSettings();
    refresh();
  });
  registerToggleCommand(plugin, "toggle-quick-switcher-button", "Toggle quick switcher button", async () => {
    settings.quickSwitcherButton = !settings.quickSwitcherButton;
    await saveSettings();
    refresh();
  });
  registerToggleCommand(plugin, "toggle-mobile-new-tab-button", "Toggle mobile new tab button", async () => {
    settings.mobileNewTabButton = !settings.mobileNewTabButton;
    await saveSettings();
    refresh();
  });
  registerToggleCommand(plugin, "toggle-open-tab-button", "Toggle open tab button", async () => {
    settings.openTabButton = !settings.openTabButton;
    await saveSettings();
    refresh();
  });
  registerToggleCommand(plugin, "toggle-ribbon-menu-button", "Toggle ribbon menu button", async () => {
    settings.ribbonMenuButton = !settings.ribbonMenuButton;
    await saveSettings();
    refresh();
  });
}
function registerToggleCommand(plugin, id, name, callback) {
  plugin.addCommand({
    id,
    name,
    callback
  });
}
function toggleVisibilityState(currentState) {
  if (currentState === "reveal") {
    return "hide";
  }
  return currentState === "show" ? "hide" : "show";
}

// src/ui/SettingsTab.ts
var import_obsidian10 = require("obsidian");

// src/ui/common/TabRenderer.ts
var import_obsidian2 = require("obsidian");
var TabRenderer = class {
  constructor(app, plugin) {
    this.app = app;
    this.plugin = plugin;
  }
  getSettings() {
    return this.plugin.settings;
  }
  async saveSettings() {
    await this.plugin.saveSettings();
    this.plugin.refresh();
  }
  createDropdownSetting(container, name, description, value, options, onChange) {
    return new import_obsidian2.Setting(container).setName(name).setDesc(description).addDropdown((dropdown) => {
      Object.entries(options).forEach(([key, label]) => {
        dropdown.addOption(key, label);
      });
      dropdown.setValue(value);
      dropdown.onChange(async (value2) => {
        onChange(value2);
        await this.saveSettings();
      });
      return dropdown;
    });
  }
  createToggleSetting(container, name, description, value, onChange) {
    return new import_obsidian2.Setting(container).setName(name).setDesc(description).addToggle((toggle) => {
      toggle.setValue(value);
      toggle.onChange(async (value2) => {
        onChange(value2);
        await this.saveSettings();
      });
      return toggle;
    });
  }
  createSliderSetting(container, name, description, value, min, max, step, onChange) {
    return new import_obsidian2.Setting(container).setName(name).setDesc(description).addSlider((slider) => {
      slider.setLimits(min, max, step).setValue(value).setDynamicTooltip().onChange(async (value2) => {
        onChange(value2);
        await this.saveSettings();
      });
      return slider;
    });
  }
};

// src/utils/settings-compat.ts
var import_obsidian3 = require("obsidian");
var ObsidianModule = __toESM(require("obsidian"), 1);
function createSettingsGroup(containerEl, heading, manifestId) {
  if ((0, import_obsidian3.requireApiVersion)("1.11.0")) {
    const SettingGroupClass = ObsidianModule.SettingGroup;
    if (SettingGroupClass) {
      const group = heading ? new SettingGroupClass(containerEl).setHeading(heading) : new SettingGroupClass(containerEl);
      return {
        addSetting(cb) {
          group.addSetting(cb);
        }
      };
    }
  }
  if (manifestId) {
    containerEl.addClass(`${manifestId}-settings-compat`);
  }
  {
    if (heading) {
      const headingEl = containerEl.createDiv("setting-group-heading");
      headingEl.createEl("h3", { text: heading });
    }
    return {
      addSetting(cb) {
        const setting = new import_obsidian3.Setting(containerEl);
        cb(setting);
      }
    };
  }
}

// src/modals/CommandPickerModal.ts
var import_obsidian4 = require("obsidian");
var CommandPickerModal = class extends import_obsidian4.FuzzySuggestModal {
  constructor(app, onSelect) {
    super(app);
    this.onSelect = onSelect;
  }
  getItems() {
    const commandRegistry = this.app.commands;
    const commandMap = /* @__PURE__ */ new Map();
    if (commandRegistry && typeof commandRegistry.listCommands === "function") {
      try {
        const commands = commandRegistry.listCommands();
        for (const command of commands) {
          if (command && command.id && command.name && !commandMap.has(command.id)) {
            commandMap.set(command.id, {
              id: command.id,
              name: command.name
            });
          }
        }
      } catch (e) {
      }
    }
    return Array.from(commandMap.values()).sort((a, b) => a.name.localeCompare(b.name));
  }
  getItemText(item) {
    return item.name;
  }
  onChooseItem(item, evt) {
    this.onSelect(item.id);
  }
};

// src/modals/IconPickerModal.ts
var import_obsidian5 = require("obsidian");
var getIconList = () => {
  if (import_obsidian5.requireApiVersion && (0, import_obsidian5.requireApiVersion)("1.7.3") && import_obsidian5.getIconIds) {
    try {
      return (0, import_obsidian5.getIconIds)();
    } catch (e) {
    }
  }
  return [
    "settings-2",
    "settings",
    "help-circle",
    "info",
    "star",
    "heart",
    "bookmark",
    "home",
    "search",
    "bell",
    "mail",
    "user",
    "users",
    "folder",
    "file",
    "file-text",
    "image",
    "video",
    "music",
    "calendar",
    "clock",
    "edit",
    "pencil",
    "trash",
    "copy",
    "cut",
    "paste",
    "download",
    "upload",
    "save",
    "share",
    "link",
    "external-link",
    "lock",
    "unlock",
    "eye",
    "eye-off",
    "key",
    "shield",
    "check",
    "x",
    "plus",
    "minus",
    "arrow-left",
    "arrow-right",
    "arrow-up",
    "arrow-down",
    "chevron-left",
    "chevron-right",
    "chevron-up",
    "chevron-down",
    "menu",
    "more-horizontal",
    "more-vertical",
    "grid",
    "list",
    "layout",
    "columns",
    "rows",
    "maximize",
    "minimize",
    "zoom-in",
    "zoom-out",
    "refresh-cw",
    "play",
    "pause",
    "stop",
    "sun",
    "moon",
    "cloud",
    "zap",
    "wand-2",
    "wand",
    "wand-sparkles",
    "palette",
    "brush",
    "sliders",
    "power",
    "wifi",
    "bluetooth",
    "monitor",
    "laptop",
    "smartphone",
    "camera",
    "mic",
    "headphones",
    "code",
    "terminal",
    "terminal-square",
    "github",
    "gitlab",
    "git-branch",
    "git-commit",
    "database",
    "server",
    "cloud-download",
    "cloud-upload",
    "tag",
    "tags",
    "flag",
    "pin",
    "map-pin",
    "compass",
    "globe",
    "rocket",
    "car",
    "bike",
    "robot",
    "apple",
    "windows",
    "linux",
    "chrome",
    "firefox",
    "safari",
    "credit-card",
    "wallet",
    "coins",
    "book",
    "book-open",
    "award",
    "trophy",
    "badge",
    "wrench",
    "tool",
    "package",
    "box",
    "archive",
    "send",
    "reply",
    "forward",
    "mail-open",
    "tag-plus",
    "tag-minus",
    "flag-off",
    "pin-off",
    "map-pin-off",
    "navigation",
    "map",
    "earth",
    "plane",
    "ship",
    "anchor",
    "helicopter",
    "drone",
    "android",
    "keyhole",
    "keys",
    "fingerprint",
    "scan",
    "qr-code",
    "barcode",
    "receipt",
    "piggy-bank",
    "banknote"
  ];
};
var LUCIDE_ICONS = getIconList().map((id) => ({
  id,
  name: id.replace(/^lucide-/, "").replace(/-/g, " ").replace(/(^\w{1})|(\s+\w{1})/g, (letter) => letter.toUpperCase())
})).sort((a, b) => a.name.localeCompare(b.name));
var IconPickerModal = class extends import_obsidian5.FuzzySuggestModal {
  constructor(app, onSelect) {
    super(app);
    this.onSelect = onSelect;
  }
  getItems() {
    return LUCIDE_ICONS;
  }
  getItemText(item) {
    return item.name;
  }
  onChooseItem(item, evt) {
    this.onSelect(item.id);
    this.close();
  }
  // Override to show icon preview
  renderSuggestion(match, el) {
    const item = match.item;
    el.addClass("mod-complex");
    const content = el.createDiv({ cls: "suggestion-content" });
    content.createDiv({ cls: "suggestion-title", text: item.name });
    const aux = el.createDiv({ cls: "suggestion-aux" });
    const iconSpan = aux.createSpan({ cls: "suggestion-flair ui-tweaker-icon-no-bg" });
    (0, import_obsidian5.setIcon)(iconSpan, item.id);
  }
};

// src/ui/tabs/HiderTab.ts
var HiderTab = class extends TabRenderer {
  render(container) {
    const generalGroup = createSettingsGroup(container, void 0, "ui-tweaker");
    this.addVisibilitySetting(
      generalGroup,
      "Title bar",
      "Hide title bar until hover. Turn off to always show.",
      "titleBar"
    );
    this.addVisibilitySetting(
      generalGroup,
      "File explorer nav header",
      "Hide file explorer navigation header until hover. Elegantly reveals on hover.",
      "fileExplorerNavHeader"
    );
    this.addVisibilitySetting(
      generalGroup,
      "Other nav headers",
      "Hide navigation headers for tag, backlinks, outgoing links, outline, and bookmarks panes until hover.",
      "otherNavHeaders"
    );
    this.addVisibilitySetting(
      generalGroup,
      "Left tab headers",
      "Hide left panel tab headers until hover. Elegantly reveals on hover.",
      "leftTabHeaders"
    );
    this.addVisibilitySetting(
      generalGroup,
      "Right tab headers",
      "Hide right panel tab headers until hover. Elegantly reveals on hover.",
      "rightTabHeaders"
    );
    generalGroup.addSetting((setting) => {
      setting.setName("Collapse ribbon").setDesc("Collapse the left ribbon to a thin strip until hover. Elegantly expands on hover.").addToggle(
        (toggle) => toggle.setValue(this.getSettings().ribbonRevealOnHover).onChange((value) => {
          this.getSettings().ribbonRevealOnHover = value;
          void this.saveSettings();
        })
      );
    });
    const navigationGroup = createSettingsGroup(container, "Navigation", "ui-tweaker");
    this.addToggleSetting(navigationGroup, "Hide tab bar", "Hides the tab container at the top of the window.", "tabBar");
    this.addToggleSetting(navigationGroup, "Make top of window draggable without tab bar", 'Enables window dragging from the top of the window when the tab bar is hidden. Only works when "Hide tab bar" is enabled.', "enableWindowDragging");
    this.addToggleSetting(navigationGroup, 'Hide "Reading mode" button', 'Hide "Reading mode" button in view headers.', "readingModeButton");
    this.addToggleSetting(navigationGroup, 'Hide "Search settings" button', 'Hide "Search settings" button in search pane.', "searchSettingsButton");
    const vaultProfileGroup = createSettingsGroup(container, "Vault profile area", "ui-tweaker");
    this.addVisibilitySetting(
      vaultProfileGroup,
      "Vault switcher",
      "Hide vault switcher until hover. Does not work when vault name is hidden.",
      "vaultSwitcher"
    );
    this.addVisibilitySetting(
      vaultProfileGroup,
      "Help button",
      "Hide help button until hover. Elegantly reveals on hover.",
      "helpButton"
    );
    this.renderHelpButtonReplacement(vaultProfileGroup);
    this.addVisibilitySetting(
      vaultProfileGroup,
      "Settings button",
      "Hide settings button until hover. Elegantly reveals on hover.",
      "settingsButton"
    );
    vaultProfileGroup.addSetting((setting) => {
      setting.setName("Vault switcher background transparency").setDesc("Adjust the transparency of the vault switcher background when hidden. Range: 0 (fully transparent) to 1 (fully opaque).").addSlider(
        (slider) => slider.setLimits(0, 1, 0.01).setValue(this.getSettings().vaultSwitcherBackgroundTransparency).setDynamicTooltip().onChange((value) => {
          this.getSettings().vaultSwitcherBackgroundTransparency = value;
          void this.saveSettings();
        })
      );
    });
    const tabIconsGroup = createSettingsGroup(container, "Tab icons", "ui-tweaker");
    this.addVisibilitySetting(
      tabIconsGroup,
      "Hide tab list icon",
      "Hides the tab list icon. You can still access tabs via other methods.",
      "tabListIcon"
    );
    this.addVisibilitySetting(
      tabIconsGroup,
      "Hide new tab icon",
      "Hides the new tab icon. You can still create new tabs with Ctrl+T (Cmd+T on Mac).",
      "newTabIcon"
    );
    this.addVisibilitySetting(
      tabIconsGroup,
      "Hide tab close button",
      "Hides the close button on tabs. You can still close tabs with middle click or other methods.",
      "tabCloseButton"
    );
    const statusUIGroup = createSettingsGroup(container, "Status & UI elements", "ui-tweaker");
    this.addToggleSetting(statusUIGroup, "Hide status bar", "Hides word count, character count and backlink count.", "statusBar");
    this.addVisibilitySetting(
      statusUIGroup,
      "Scroll bars",
      "Control scrollbar visibility. Reveal option hides scrollbars until hover.",
      "scrollBars"
    );
    this.addVisibilitySetting(
      statusUIGroup,
      "Hide left sidebar toggle button",
      "Hides the left sidebar toggle button.",
      "leftSidebarToggleButton"
    );
    this.addVisibilitySetting(
      statusUIGroup,
      "Hide right sidebar toggle button",
      "Hides the right sidebar toggle button.",
      "rightSidebarToggleButton"
    );
    this.addToggleSetting(statusUIGroup, "Hide tooltips", "Hides all tooltips.", "tooltips");
    this.addToggleSetting(statusUIGroup, "Hide instructions", "Hides instructional tips in modals.", "instructions");
    const searchGroup = createSettingsGroup(container, "Search", "ui-tweaker");
    this.addToggleSetting(searchGroup, "Hide search suggestions", "Hides suggestions in search pane.", "searchSuggestions");
    this.addToggleSetting(searchGroup, "Hide count of search term matches", "Hides the number of matches within each search result.", "searchTermCounts");
    const propertiesGroup = createSettingsGroup(container, "Properties", "ui-tweaker");
    this.addToggleSetting(propertiesGroup, "Hide properties in Reading view", "Hides the properties section in Reading view.", "propertiesInReadingView");
    this.addToggleSetting(propertiesGroup, "Hide properties heading", 'Hide "Properties" heading above properties.', "propertiesInHeading");
    this.addToggleSetting(propertiesGroup, 'Hide "Add property" button', 'Hide "Add property" button below properties.', "addPropertyButton");
  }
  addVisibilitySetting(group, name, desc, key) {
    group.addSetting((setting) => {
      setting.setName(name).setDesc(desc).addDropdown((dropdown) => {
        const currentValue = this.getSettings()[key];
        const stringValue = typeof currentValue === "string" ? currentValue : "show";
        dropdown.addOption("show", "Show").addOption("hide", "Hide").addOption("reveal", "Reveal").setValue(stringValue).onChange((value) => {
          this.getSettings()[key] = value;
          void this.saveSettings();
        });
      });
    });
  }
  addToggleSetting(group, name, desc, key) {
    group.addSetting((setting) => {
      setting.setName(name).setDesc(desc).addToggle(
        (toggle) => toggle.setValue(Boolean(this.getSettings()[key])).onChange((value) => {
          this.getSettings()[key] = value;
          void this.saveSettings();
        })
      );
    });
  }
  renderHelpButtonReplacement(group) {
    const settings = this.getSettings();
    if (!settings.helpButtonReplacement) {
      settings.helpButtonReplacement = {
        enabled: false,
        commandId: "",
        iconId: "wrench"
      };
    }
    group.addSetting((setting) => {
      setting.setName("Replace help button with custom action").setDesc("Replace the help button with a custom icon and command. This will hide the original help button and show your custom button instead.").addToggle(
        (toggle) => toggle.setValue(settings.helpButtonReplacement.enabled).onChange((value) => {
          if (!settings.helpButtonReplacement) {
            settings.helpButtonReplacement = {
              enabled: true,
              commandId: "",
              iconId: "wrench"
            };
          }
          settings.helpButtonReplacement.enabled = value;
          void this.saveSettings();
        })
      );
    });
    if (settings.helpButtonReplacement.enabled) {
      const getCommandName = (commandId) => {
        if (!commandId) return "Select command...";
        try {
          const commandRegistry = this.app.commands;
          if (commandRegistry && typeof commandRegistry.listCommands === "function") {
            const commands = commandRegistry.listCommands();
            const command = commands.find(
              (cmd) => cmd && cmd.name && (cmd.id === commandId || cmd.id === commandId.replace(/^ui-tweaker:+/g, "") || cmd.id === `ui-tweaker:${commandId.replace(/^ui-tweaker:+/g, "")}`)
            );
            if (command == null ? void 0 : command.name) {
              return command.name;
            }
          }
        } catch (e) {
        }
        return "Select command...";
      };
      const commandName = getCommandName(settings.helpButtonReplacement.commandId);
      group.addSetting((setting) => {
        setting.setName("Command").setDesc("Select the command to execute when the button is clicked").addButton(
          (button) => button.setButtonText(commandName || "Select command...").onClick(() => {
            const modal = new CommandPickerModal(this.app, (commandId) => {
              if (!settings.helpButtonReplacement) {
                settings.helpButtonReplacement = {
                  enabled: true,
                  commandId: "",
                  iconId: "wrench"
                };
              }
              settings.helpButtonReplacement.commandId = commandId;
              void this.saveSettings();
            });
            modal.open();
          })
        );
      });
      const getIconName = (iconId) => {
        if (!iconId) return "";
        return iconId.replace(/^lucide-/, "").split("-").map((word) => word.charAt(0).toUpperCase() + word.slice(1)).join(" ");
      };
      const iconName = getIconName(settings.helpButtonReplacement.iconId);
      group.addSetting((setting) => {
        setting.setName("Icon").setDesc("Select the icon to display on the button").addButton(
          (button) => button.setButtonText(iconName || "Select icon...").onClick(() => {
            const modal = new IconPickerModal(this.app, (iconId) => {
              if (!settings.helpButtonReplacement) {
                settings.helpButtonReplacement = {
                  enabled: true,
                  commandId: "open-settings",
                  iconId: "wrench"
                };
              }
              settings.helpButtonReplacement.iconId = iconId;
              void this.saveSettings();
            });
            modal.open();
          })
        );
      });
    }
  }
};

// src/ui/tabs/TabBarTab.ts
var import_obsidian7 = require("obsidian");

// src/modals/NamePickerModal.ts
var import_obsidian6 = require("obsidian");
var NamePickerModal = class extends import_obsidian6.Modal {
  constructor(app, defaultName, onSubmit) {
    super(app);
    this.defaultName = defaultName;
    this.onSubmit = onSubmit;
  }
  onOpen() {
    const { contentEl } = this;
    contentEl.empty();
    contentEl.createEl("h2", { text: "Enter name" });
    const inputContainer = contentEl.createDiv();
    const input = new import_obsidian6.TextComponent(inputContainer);
    input.setValue(this.defaultName);
    input.setPlaceholder("Enter custom name...");
    input.inputEl.addClass("ui-tweaker-name-input");
    input.inputEl.select();
    const buttonContainer = contentEl.createDiv({ cls: "modal-button-container" });
    const submitButton = buttonContainer.createEl("button", { text: "OK", cls: "mod-cta" });
    const cancelButton = buttonContainer.createEl("button", { text: "Cancel" });
    const handleSubmit = () => {
      const value = input.getValue().trim();
      if (value) {
        this.onSubmit(value);
        this.close();
      }
    };
    submitButton.addEventListener("click", handleSubmit);
    cancelButton.addEventListener("click", () => this.close());
    input.inputEl.addEventListener("keydown", (evt) => {
      if (evt.key === "Enter") {
        evt.preventDefault();
        handleSubmit();
      }
      if (evt.key === "Escape") {
        evt.preventDefault();
        this.close();
      }
    });
  }
  onClose() {
    const { contentEl } = this;
    contentEl.empty();
  }
};

// src/utils/chooseCommand.ts
async function chooseNewCommand(plugin) {
  return new Promise((resolve, reject) => {
    let commandSelected = false;
    let iconSelected = false;
    const commandModal = new CommandPickerModal(plugin.app, (commandId) => {
      var _a;
      commandSelected = true;
      const commands = plugin.app.commands;
      const command = (_a = commands == null ? void 0 : commands.commands) == null ? void 0 : _a[commandId];
      setTimeout(() => {
        commandModal.close();
      }, 0);
      const displayName = (command == null ? void 0 : command.name) || "Custom Command";
      const iconModal = new IconPickerModal(plugin.app, (iconId) => {
        iconSelected = true;
        iconModal.close();
        setTimeout(() => {
          let nameSelected = false;
          const nameModal = new NamePickerModal(plugin.app, displayName, (customName) => {
            nameSelected = true;
            nameModal.close();
            resolve({
              id: commandId,
              icon: iconId,
              name: customName,
              displayName,
              mode: "any"
            });
          });
          nameModal.onClose = () => {
            setTimeout(() => {
              if (!nameSelected && iconSelected && commandSelected) {
                reject(new Error("No name selected"));
              }
            }, 0);
          };
          nameModal.open();
        }, 100);
      });
      iconModal.onClose = () => {
        setTimeout(() => {
          if (!iconSelected && commandSelected) {
            reject(new Error("No icon selected"));
          }
        }, 0);
      };
      setTimeout(() => {
        iconModal.open();
      }, 100);
    });
    commandModal.onClose = () => {
      setTimeout(() => {
        if (!commandSelected) {
          reject(new Error("No command selected"));
        }
      }, 0);
    };
    commandModal.open();
  });
}

// src/ui/tabs/TabBarTab.ts
function arrayMoveMutable(array, from, to) {
  const item = array[from];
  array.splice(from, 1);
  array.splice(to, 0, item);
}
var TabBarTab = class extends TabRenderer {
  constructor() {
    super(...arguments);
    this.expandedStates = /* @__PURE__ */ new Map();
  }
  render(container) {
    container.empty();
    const settings = this.getSettings();
    if (!settings.tabBarCommands) {
      settings.tabBarCommands = [];
    }
    settings.tabBarCommands.forEach((pair, index) => {
      this.renderCommandItem(container, pair, index);
    });
    if (settings.tabBarCommands.length > 0) {
      container.createEl("hr");
    }
    const addGroup = createSettingsGroup(container, void 0, "ui-tweaker");
    addGroup.addSetting((setting) => {
      setting.setName("Add command").setDesc("Add a new command button to the tab bar").addButton((button) => {
        const buttonEl = button.buttonEl;
        const iconContainer = buttonEl.createSpan({ cls: "ui-tweaker-add-icon" });
        (0, import_obsidian7.setIcon)(iconContainer, "lucide-image-plus");
        buttonEl.insertBefore(iconContainer, buttonEl.firstChild);
        button.setButtonText("Add command").setCta().onClick(() => {
          void (async () => {
            var _a;
            try {
              const pair = await chooseNewCommand(this.plugin);
              await ((_a = this.plugin.tabBarManager) == null ? void 0 : _a.addCommand(pair));
              this.render(container);
            } catch (e) {
            }
          })();
        });
      });
    });
  }
  renderCommandItem(container, pair, index) {
    const settings = this.getSettings();
    const group = createSettingsGroup(container, void 0, "ui-tweaker");
    const otherSettings = [];
    const displayName = pair.displayName || pair.name;
    group.addSetting((setting) => {
      var _a;
      setting.settingEl.addEventListener("click", (e) => {
        const target = e.target;
        const isChevronClick = target.closest(".ui-tweaker-collapse-icon") !== null;
        const isExtraButton = target.closest(".extra-setting-button") !== null || target.closest(".clickable-icon.extra-setting-button") !== null;
        const isNameEdit = target.closest(".ui-tweaker-name-display") !== null || target.closest(".ui-tweaker-edit-icon") !== null || target.closest(".ui-tweaker-editable-name") !== null;
        if (!isChevronClick && !isExtraButton && !isNameEdit) {
          e.stopPropagation();
          e.stopImmediatePropagation();
          e.preventDefault();
          return false;
        }
      }, true);
      setting.settingEl.addEventListener("click", (e) => {
        const target = e.target;
        const isChevronClick = target.closest(".ui-tweaker-collapse-icon") !== null;
        const isExtraButton = target.closest(".extra-setting-button") !== null || target.closest(".clickable-icon.extra-setting-button") !== null;
        const isNameEdit = target.closest(".ui-tweaker-name-display") !== null || target.closest(".ui-tweaker-edit-icon") !== null || target.closest(".ui-tweaker-editable-name") !== null;
        if (!isChevronClick && !isExtraButton && !isNameEdit) {
          e.stopPropagation();
          e.stopImmediatePropagation();
          e.preventDefault();
          return false;
        }
      }, false);
      const nameEl = setting.nameEl;
      setCssProps(nameEl, { display: "flex", alignItems: "center", gap: "0.5rem", width: "100%" });
      const chevronContainer = document.createElement("div");
      chevronContainer.className = "ui-tweaker-collapse-icon";
      setCssProps(chevronContainer, {
        cursor: "default",
        background: "transparent",
        padding: "0",
        margin: "0",
        display: "inline-flex",
        alignItems: "center",
        justifyContent: "center"
      });
      nameEl.insertBefore(chevronContainer, nameEl.firstChild);
      let isExpanded = (_a = this.expandedStates.get(pair.id)) != null ? _a : false;
      (0, import_obsidian7.setIcon)(chevronContainer, isExpanded ? "chevrons-down-up" : "chevrons-up-down");
      chevronContainer.addEventListener("click", (e) => {
        e.stopPropagation();
        e.stopImmediatePropagation();
        e.preventDefault();
        isExpanded = !isExpanded;
        this.expandedStates.set(pair.id, isExpanded);
        (0, import_obsidian7.setIcon)(chevronContainer, isExpanded ? "chevrons-down-up" : "chevrons-up-down");
        otherSettings.forEach((settingEl) => {
          setCssProps(settingEl, { display: isExpanded ? "" : "none" });
        });
      });
      const nameContainer = nameEl.createDiv({ cls: "ui-tweaker-editable-name" });
      setCssProps(nameContainer, { display: "flex", alignItems: "center", gap: "0.5rem" });
      const createNameDisplay = (name) => {
        nameContainer.empty();
        const display = nameContainer.createSpan({
          text: name === displayName ? name : `${name} (${displayName})`,
          cls: "ui-tweaker-name-display"
        });
        const iconContainer = nameContainer.createDiv({ cls: "ui-tweaker-edit-icon" });
        setCssProps(iconContainer, { opacity: "0.6" });
        (0, import_obsidian7.setIcon)(iconContainer, "lucide-pencil-line");
        const startEdit = () => {
          const currentName = pair.name;
          nameContainer.empty();
          const nameInput = nameContainer.createEl("input", {
            type: "text",
            value: currentName
          });
          nameInput.addClass("mod-text-input");
          nameInput.focus();
          nameInput.select();
          const saveName = () => {
            var _a2;
            nameInput.removeEventListener("blur", saveName);
            let newName = nameInput.value.trim();
            if (!newName) {
              newName = currentName;
            }
            pair.name = newName;
            (_a2 = this.plugin.tabBarManager) == null ? void 0 : _a2.updateButtonNames();
            void (async () => {
              await this.saveSettings();
              this.render(container);
            })();
          };
          nameInput.addEventListener("keydown", (e) => {
            if (e.key === "Enter") {
              e.preventDefault();
              saveName();
            } else if (e.key === "Escape") {
              e.preventDefault();
              createNameDisplay(currentName);
            }
          });
          nameInput.addEventListener("blur", saveName);
        };
        display.addEventListener("click", startEdit);
        iconContainer.addEventListener("click", startEdit);
        iconContainer.addEventListener("mouseenter", () => {
          setCssProps(iconContainer, { opacity: "1" });
        });
        iconContainer.addEventListener("mouseleave", () => {
          setCssProps(iconContainer, { opacity: "0.6" });
        });
      };
      createNameDisplay(pair.name);
      setting.setDesc("").addExtraButton((button) => {
        const iconEl = button.extraSettingsEl;
        (0, import_obsidian7.setIcon)(iconEl, pair.icon);
        iconEl.setAttribute("data-command-id", pair.id);
        if (pair.color && pair.color !== "#000000") {
          setCssProps(iconEl, { color: pair.color });
        } else {
          iconEl.style.removeProperty("color");
        }
        button.setTooltip("Change icon");
        button.onClick(() => {
          const modal = new IconPickerModal(this.app, (iconId) => {
            void (async () => {
              var _a2;
              if (iconId && iconId !== pair.icon) {
                pair.icon = iconId;
                await this.saveSettings();
                (_a2 = this.plugin.tabBarManager) == null ? void 0 : _a2.reorder();
                this.render(container);
              }
            })();
          });
          modal.open();
        });
        button.extraSettingsEl.addEventListener("click", (e) => e.stopPropagation());
      }).addExtraButton((button) => {
        button.setIcon("chevron-up");
        if (index > 0) {
          button.setTooltip("Move up");
          button.onClick(() => {
            const scrollContainer = container.closest(".vertical-tab-content") || container.closest(".settings-content") || container.closest(".vertical-tab-content-container") || container;
            const scrollPos = scrollContainer.scrollTop;
            void (async () => {
              var _a2;
              arrayMoveMutable(settings.tabBarCommands, index, index - 1);
              await this.saveSettings();
              (_a2 = this.plugin.tabBarManager) == null ? void 0 : _a2.reorder();
              this.render(container);
              requestAnimationFrame(() => {
                scrollContainer.scrollTop = scrollPos;
                setTimeout(() => {
                  scrollContainer.scrollTop = scrollPos;
                  setTimeout(() => {
                    scrollContainer.scrollTop = scrollPos;
                  }, 50);
                }, 0);
              });
            })();
          });
        } else {
          button.setTooltip("Already at top");
          button.extraSettingsEl.addClass("ui-tweaker-disabled-button");
          setCssProps(button.extraSettingsEl, { pointerEvents: "none" });
        }
        button.extraSettingsEl.addEventListener("click", (e) => e.stopPropagation());
      }).addExtraButton((button) => {
        button.setIcon("chevron-down");
        if (index < settings.tabBarCommands.length - 1) {
          button.setTooltip("Move down");
          button.onClick(() => {
            const scrollContainer = container.closest(".vertical-tab-content") || container.closest(".settings-content") || container.closest(".vertical-tab-content-container") || container;
            const scrollPos = scrollContainer.scrollTop;
            void (async () => {
              var _a2;
              arrayMoveMutable(settings.tabBarCommands, index, index + 1);
              await this.saveSettings();
              (_a2 = this.plugin.tabBarManager) == null ? void 0 : _a2.reorder();
              this.render(container);
              requestAnimationFrame(() => {
                scrollContainer.scrollTop = scrollPos;
                setTimeout(() => {
                  scrollContainer.scrollTop = scrollPos;
                  setTimeout(() => {
                    scrollContainer.scrollTop = scrollPos;
                  }, 50);
                }, 0);
              });
            })();
          });
        } else {
          button.setTooltip("Already at bottom");
          button.extraSettingsEl.addClass("ui-tweaker-disabled-button");
          setCssProps(button.extraSettingsEl, { pointerEvents: "none" });
        }
        button.extraSettingsEl.addEventListener("click", (e) => e.stopPropagation());
      }).addExtraButton((button) => {
        button.setIcon("trash");
        button.setTooltip("Delete");
        button.extraSettingsEl.addClass("mod-warning");
        setCssProps(button.extraSettingsEl, { color: "var(--text-error)" });
        button.onClick(() => {
          void (async () => {
            var _a2;
            settings.tabBarCommands.splice(index, 1);
            await this.saveSettings();
            await ((_a2 = this.plugin.tabBarManager) == null ? void 0 : _a2.removeCommand(pair));
            this.render(container);
          })();
        });
        button.extraSettingsEl.addEventListener("click", (e) => e.stopPropagation());
      });
    });
    group.addSetting((setting) => {
      otherSettings.push(setting.settingEl);
      setting.setName("Device mode").setDesc("Choose which devices this command appears on").addDropdown((dropdown) => {
        const appId = this.app.appId || "this-device";
        dropdown.addOption("any", "All devices").addOption("desktop", "Desktop only").addOption("mobile", "Mobile only").addOption(appId, "This device");
        const currentValue = pair.mode === "any" || pair.mode === "desktop" || pair.mode === "mobile" ? pair.mode : appId;
        dropdown.setValue(currentValue);
        dropdown.onChange((value) => {
          void (async () => {
            var _a;
            pair.mode = value;
            await this.saveSettings();
            (_a = this.plugin.tabBarManager) == null ? void 0 : _a.reorder();
            this.render(container);
          })();
        });
        dropdown.selectEl.addEventListener("click", (e) => e.stopPropagation());
      });
    });
    group.addSetting((setting) => {
      otherSettings.push(setting.settingEl);
      const hasColor = pair.color !== void 0;
      setting.setName("Custom color").setDesc("Set a custom color for this icon").addColorPicker((colorPicker) => {
        var _a;
        const currentColor = (_a = pair.color) != null ? _a : "#000000";
        colorPicker.setValue(currentColor);
        const controlEl = setting.controlEl;
        controlEl.addEventListener("click", (e) => e.stopPropagation());
        setTimeout(() => {
          const colorInput = controlEl.querySelector('input[type="color"]');
          if (colorInput) {
            colorInput.addEventListener("click", (e) => e.stopPropagation());
          }
        }, 0);
        if (hasColor) {
          setTimeout(() => {
            const colorPickerEl = controlEl.querySelector(".color-picker") || controlEl.lastElementChild;
            const resetButton = controlEl.createEl("button", {
              cls: "clickable-icon ui-tweaker-color-reset",
              attr: { "aria-label": "Reset to default color" }
            });
            (0, import_obsidian7.setIcon)(resetButton, "lucide-rotate-cw");
            setCssProps(resetButton, { marginRight: "0.5rem" });
            resetButton.addEventListener("click", (e) => {
              e.stopPropagation();
              e.stopImmediatePropagation();
              e.preventDefault();
              void (async () => {
                var _a2;
                pair.color = void 0;
                const iconButton = container.querySelector(`[data-command-id="${pair.id}"]`);
                if (iconButton) {
                  iconButton.style.removeProperty("color");
                }
                await this.saveSettings();
                (_a2 = this.plugin.tabBarManager) == null ? void 0 : _a2.reorder();
                this.render(container);
              })();
            });
            if (colorPickerEl) {
              controlEl.insertBefore(resetButton, colorPickerEl);
            } else {
              controlEl.insertBefore(resetButton, controlEl.firstChild);
            }
          }, 0);
        }
        colorPicker.onChange((value) => {
          if (value === "#000000") {
            pair.color = void 0;
          } else {
            pair.color = value;
          }
          const iconButton = container.querySelector(`[data-command-id="${pair.id}"]`);
          if (iconButton) {
            if (pair.color && pair.color !== "#000000") {
              setCssProps(iconButton, { color: pair.color });
            } else {
              iconButton.style.removeProperty("color");
            }
          }
          void (async () => {
            var _a2;
            await this.saveSettings();
            (_a2 = this.plugin.tabBarManager) == null ? void 0 : _a2.reorder();
            this.render(container);
          })();
        });
      });
    });
    group.addSetting((setting) => {
      otherSettings.push(setting.settingEl);
      const hasToggleIcon = pair.toggleIcon !== void 0;
      setting.setName("Toggle icon").setDesc("Icon to show when command is toggled on (leave empty to disable toggle). Commands with check callback work automatically. See readme for plugin developer compatibility notes.").setTooltip("For plugin developers: Commands with checkCallback work automatically. See https://github.com/davidvkimball/obsidian-ui-tweaker#toggle-icon-feature-compatibility for details.").addButton((button) => {
        const currentToggleIcon = pair.toggleIcon || "None";
        button.setButtonText(currentToggleIcon === "None" ? "Set toggle icon..." : currentToggleIcon).onClick(() => {
          const modal = new IconPickerModal(this.app, (iconId) => {
            void (async () => {
              var _a;
              if (iconId) {
                pair.toggleIcon = iconId;
              } else {
                pair.toggleIcon = void 0;
              }
              await this.saveSettings();
              (_a = this.plugin.tabBarManager) == null ? void 0 : _a.reorder();
              this.render(container);
            })();
          });
          modal.open();
        });
        button.buttonEl.addEventListener("click", (e) => e.stopPropagation());
        if (hasToggleIcon) {
          setTimeout(() => {
            const controlEl = setting.controlEl;
            const buttonEl = controlEl.querySelector("button") || controlEl.lastElementChild;
            const resetButton = controlEl.createEl("button", {
              cls: "clickable-icon ui-tweaker-toggle-icon-reset",
              attr: { "aria-label": "Reset toggle icon" }
            });
            (0, import_obsidian7.setIcon)(resetButton, "lucide-rotate-cw");
            setCssProps(resetButton, { marginRight: "0.5rem" });
            resetButton.addEventListener("click", (e) => {
              e.stopPropagation();
              e.stopImmediatePropagation();
              e.preventDefault();
              const scrollContainer = container.closest(".vertical-tab-content") || container.closest(".settings-content") || container.closest(".vertical-tab-content-container") || container;
              const scrollPos = scrollContainer.scrollTop;
              void (async () => {
                var _a;
                pair.toggleIcon = void 0;
                await this.saveSettings();
                (_a = this.plugin.tabBarManager) == null ? void 0 : _a.reorder();
                this.render(container);
                requestAnimationFrame(() => {
                  scrollContainer.scrollTop = scrollPos;
                  setTimeout(() => {
                    scrollContainer.scrollTop = scrollPos;
                  }, 0);
                });
              })();
            });
            if (buttonEl) {
              controlEl.insertBefore(resetButton, buttonEl);
            } else {
              controlEl.insertBefore(resetButton, controlEl.firstChild);
            }
          }, 0);
        }
      });
    });
    group.addSetting((setting) => {
      otherSettings.push(setting.settingEl);
      setting.setName("Show only on these file types").setDesc('Show button only on specified file types or views. Enter comma-separated file extensions (like "md,mdx") or view types for views without files (like "{{graph}}"). Leave empty to show on all. Use {{graph}} for graph view and {{empty}} for blank/new tabs.').addText((text) => {
        var _a;
        text.setPlaceholder("md, mdx");
        text.setValue((_a = pair.showOnFileTypes) != null ? _a : "");
        text.onChange((value) => {
          void (async () => {
            var _a2;
            pair.showOnFileTypes = value.trim() || void 0;
            await this.saveSettings();
            (_a2 = this.plugin.tabBarManager) == null ? void 0 : _a2.reorder();
          })();
        });
        text.inputEl.addEventListener("click", (e) => e.stopPropagation());
        text.inputEl.addEventListener("focus", (e) => e.stopPropagation());
      });
    });
    group.addSetting((setting) => {
      otherSettings.push(setting.settingEl);
      setting.setName("Never show on these file types").setDesc('Hide button on specified file types or views. Enter comma-separated file extensions (like "jpg,png") or view types for views without files (like "{{graph}}"). Leave empty to allow all. Use {{graph}} for graph view and {{empty}} for blank/new tabs.').addText((text) => {
        var _a;
        text.setPlaceholder("{{graph}},{{empty}}");
        text.setValue((_a = pair.hideOnFileTypes) != null ? _a : "");
        text.onChange((value) => {
          void (async () => {
            var _a2;
            pair.hideOnFileTypes = value.trim() || void 0;
            await this.saveSettings();
            (_a2 = this.plugin.tabBarManager) == null ? void 0 : _a2.reorder();
          })();
        });
        text.inputEl.addEventListener("click", (e) => e.stopPropagation());
        text.inputEl.addEventListener("focus", (e) => e.stopPropagation());
      });
    });
    setTimeout(() => {
      var _a;
      const savedExpanded = (_a = this.expandedStates.get(pair.id)) != null ? _a : false;
      otherSettings.forEach((settingEl) => {
        setCssProps(settingEl, { display: savedExpanded ? "" : "none" });
      });
    }, 0);
  }
};

// src/ui/tabs/StatusBarTab.ts
var import_obsidian8 = require("obsidian");
function arrayMoveMutable2(array, from, to) {
  const item = array[from];
  array.splice(from, 1);
  array.splice(to, 0, item);
}
var dragging = false;
var StatusBarTab = class extends TabRenderer {
  render(container) {
    container.empty();
    const settings = this.getSettings();
    this.container = container;
    if (!settings.statusBarItems) {
      settings.statusBarItems = [];
    }
    const wrapper = container.createDiv("ui-tweaker-status-bar-rows-wrapper");
    const rowsContainer = wrapper.createDiv("ui-tweaker-status-bar-rows-container");
    settings.statusBarItems.forEach((item, index) => {
      if (item.type === "existing") {
        this.renderExistingRow(rowsContainer, item, settings, index, settings.statusBarItems.length);
      } else {
        this.renderCustomRow(rowsContainer, item, settings, index, settings.statusBarItems.length);
      }
    });
    if (settings.statusBarItems.length > 0) {
      container.createEl("hr");
    }
    const addGroup = createSettingsGroup(container, void 0, "ui-tweaker");
    addGroup.addSetting((setting) => {
      setting.setName("Add command").setDesc("Add a new command button to the status bar").addButton((button) => {
        const buttonEl = button.buttonEl;
        const iconContainer = buttonEl.createSpan({ cls: "ui-tweaker-add-icon" });
        (0, import_obsidian8.setIcon)(iconContainer, "lucide-image-plus");
        buttonEl.insertBefore(iconContainer, buttonEl.firstChild);
        button.setButtonText("Add command").setCta().onClick(() => {
          void (async () => {
            var _a;
            try {
              const pair = await chooseNewCommand(this.plugin);
              await ((_a = this.plugin.statusBarManager) == null ? void 0 : _a.addCustomCommand(pair));
              const scrollContainer = container.closest(".vertical-tab-content") || container.closest(".settings-content") || container.parentElement;
              const scrollTop = (scrollContainer == null ? void 0 : scrollContainer.scrollTop) || 0;
              this.render(container);
              requestAnimationFrame(() => {
                if (scrollContainer) {
                  scrollContainer.scrollTop = scrollTop;
                }
              });
            } catch (e) {
            }
          })();
        });
      });
    });
  }
  /**
   * Render an existing status bar item row (EXACTLY like Status Bar Organizer)
   */
  renderExistingRow(rowsContainer, item, settings, index, totalItems) {
    var _a;
    const statusBarContainer = (_a = this.plugin.app.statusBar) == null ? void 0 : _a.containerEl;
    const actualElement = statusBarContainer == null ? void 0 : statusBarContainer.querySelector(`[data-ui-tweaker-status-bar-id="${item.id}"]`);
    const exists = !!actualElement;
    const entry = rowsContainer.createDiv("ui-tweaker-status-bar-row");
    entry.addClass("ui-tweaker-row");
    if (!exists) entry.addClass("ui-tweaker-status-bar-row-disabled");
    if (item.hidden) entry.addClass("ui-tweaker-status-bar-row-hidden");
    entry.setAttribute("data-ui-tweaker-id", item.id);
    const handle = entry.createSpan("ui-tweaker-status-bar-row-handle");
    handle.addEventListener(
      "mousedown",
      (event) => this.handleMouseDown(event, rowsContainer, item, settings)
    );
    const titleSpan = entry.createSpan("ui-tweaker-status-bar-row-title");
    titleSpan.textContent = item.name;
    const previewSpan = entry.createSpan("ui-tweaker-status-bar-row-preview");
    if (exists && actualElement) {
      const cloned = actualElement.cloneNode(true);
      setCssProps(cloned, { display: "", visibility: "", opacity: "" });
      cloned.querySelectorAll("*").forEach((child) => {
        setCssProps(child, { display: "", visibility: "", opacity: "" });
      });
      previewSpan.appendChild(cloned);
    }
    entry.createSpan("ui-tweaker-status-bar-row-reset-color");
    entry.createSpan("ui-tweaker-status-bar-row-color-picker");
    entry.createSpan("ui-tweaker-status-bar-row-md-only");
    const lockSpan = entry.createSpan("ui-tweaker-status-bar-row-lock");
    lockSpan.setAttribute("aria-label", item.sticky ? `Locked to ${item.sticky}` : "Unlocked - click to lock position");
    lockSpan.addEventListener("click", (e) => {
      e.stopPropagation();
      this.toggleLock(item, lockSpan, index, totalItems, rowsContainer, settings);
    });
    (0, import_obsidian8.setIcon)(lockSpan, item.sticky ? "lock" : "unlock");
    if (item.sticky) {
      lockSpan.addClass("ui-tweaker-locked");
    }
    const visibilitySpan = entry.createSpan("ui-tweaker-status-bar-row-visibility");
    if (item.type === "custom") {
      visibilitySpan.setAttribute("aria-label", "Delete item");
      visibilitySpan.addClass("mod-warning");
      setCssProps(visibilitySpan, { color: "var(--text-error)" });
      visibilitySpan.addEventListener("click", () => {
        void this.removeItem(rowsContainer, item, settings);
      });
      (0, import_obsidian8.setIcon)(visibilitySpan, "trash-2");
    } else {
      visibilitySpan.setAttribute("aria-label", item.hidden ? "Hidden - click to show" : "Visible - click to hide");
      visibilitySpan.addEventListener("click", () => {
        this.toggleVisibility(item, visibilitySpan, entry);
      });
      (0, import_obsidian8.setIcon)(visibilitySpan, item.hidden ? "eye-off" : "eye");
    }
  }
  /**
   * Render a custom status bar item row (EXACTLY like Status Bar Organizer, but with editable name)
   */
  renderCustomRow(rowsContainer, item, settings, index, totalItems) {
    const entry = rowsContainer.createDiv("ui-tweaker-status-bar-row");
    entry.addClass("ui-tweaker-row");
    if (item.hidden) entry.addClass("ui-tweaker-status-bar-row-hidden");
    entry.setAttribute("data-ui-tweaker-id", item.id);
    const handle = entry.createSpan("ui-tweaker-status-bar-row-handle");
    handle.addEventListener(
      "mousedown",
      (event) => this.handleMouseDown(event, rowsContainer, item, settings)
    );
    const titleSpan = entry.createSpan("ui-tweaker-status-bar-row-title");
    const displayName = item.displayName || item.name;
    const nameText = item.name === displayName ? item.name : `${item.name} (${displayName})`;
    titleSpan.textContent = nameText;
    titleSpan.addEventListener("dblclick", () => {
      const currentName = item.name;
      const input = document.createElement("input");
      input.type = "text";
      input.value = currentName;
      input.addClass("mod-text-input");
      setCssProps(input, { width: "100%" });
      titleSpan.empty();
      titleSpan.appendChild(input);
      input.focus();
      input.select();
      const saveName = () => {
        var _a;
        let newName = input.value.trim();
        if (!newName) newName = currentName;
        item.name = newName;
        (_a = this.plugin.statusBarManager) == null ? void 0 : _a.updateButtonNames();
        titleSpan.textContent = newName === displayName ? newName : `${newName} (${displayName})`;
        void this.saveSettings();
      };
      input.addEventListener("keydown", (e) => {
        if (e.key === "Enter") {
          e.preventDefault();
          saveName();
        } else if (e.key === "Escape") {
          e.preventDefault();
          titleSpan.textContent = nameText;
        }
      });
      input.addEventListener("blur", saveName);
    });
    const previewSpan = entry.createSpan("ui-tweaker-status-bar-row-preview");
    if (item.icon) {
      const previewIcon = previewSpan.createSpan("status-bar-item clickable-icon");
      (0, import_obsidian8.setIcon)(previewIcon, item.icon);
      if (item.color && item.color !== "#000000") {
        setCssProps(previewIcon, { color: item.color });
      }
    }
    const resetColorContainer = entry.createSpan("ui-tweaker-status-bar-row-reset-color");
    if (item.color) {
      const resetButton = resetColorContainer.createEl("button", {
        cls: "clickable-icon ui-tweaker-color-reset",
        attr: { "aria-label": "Reset to default color" }
      });
      (0, import_obsidian8.setIcon)(resetButton, "rotate-cw");
      resetButton.addEventListener("click", (e) => {
        var _a;
        e.stopPropagation();
        item.color = void 0;
        const previewIcon = previewSpan.querySelector(".clickable-icon");
        if (previewIcon) {
          previewIcon.style.removeProperty("color");
        }
        (_a = this.plugin.statusBarManager) == null ? void 0 : _a.reorder();
        void this.saveSettings();
        if (this.container) {
          this.render(this.container);
        }
      });
    }
    const colorPickerContainer = entry.createSpan("ui-tweaker-status-bar-row-color-picker");
    const colorPickerEl = colorPickerContainer.createDiv();
    const colorPicker = new import_obsidian8.ColorComponent(colorPickerEl);
    colorPicker.setValue(item.color || "#000000");
    colorPicker.onChange((value) => {
      var _a;
      if (value === "#000000") {
        item.color = void 0;
      } else {
        item.color = value;
      }
      const previewIcon = previewSpan.querySelector(".clickable-icon");
      if (previewIcon) {
        if (item.color && item.color !== "#000000") {
          setCssProps(previewIcon, { color: item.color });
        } else {
          previewIcon.style.removeProperty("color");
        }
      }
      (_a = this.plugin.statusBarManager) == null ? void 0 : _a.reorder();
      void this.saveSettings();
      if (this.container) {
        this.render(this.container);
      }
    });
    const mdOnlySpan = entry.createSpan("ui-tweaker-status-bar-row-md-only");
    mdOnlySpan.setAttribute("aria-label", item.mdOnly ? "Only show on Markdown files (enabled)" : "Only show on Markdown files (disabled)");
    mdOnlySpan.addEventListener("click", (e) => {
      var _a;
      e.stopPropagation();
      item.mdOnly = !item.mdOnly;
      (0, import_obsidian8.setIcon)(mdOnlySpan, item.mdOnly ? "file-check" : "file-x");
      mdOnlySpan.setAttribute("aria-label", item.mdOnly ? "Only show on Markdown files (enabled)" : "Only show on Markdown files (disabled)");
      if (item.mdOnly) {
        mdOnlySpan.addClass("ui-tweaker-active");
      } else {
        mdOnlySpan.removeClass("ui-tweaker-active");
      }
      (_a = this.plugin.statusBarManager) == null ? void 0 : _a.reorder();
      void this.saveSettings();
    });
    (0, import_obsidian8.setIcon)(mdOnlySpan, item.mdOnly ? "file-check" : "file-x");
    if (item.mdOnly) {
      mdOnlySpan.addClass("ui-tweaker-active");
    }
    const lockSpan = entry.createSpan("ui-tweaker-status-bar-row-lock");
    lockSpan.setAttribute("aria-label", item.sticky ? `Locked to ${item.sticky}` : "Unlocked - click to lock position");
    lockSpan.addEventListener("click", (e) => {
      e.stopPropagation();
      this.toggleLock(item, lockSpan, index, totalItems, rowsContainer, settings);
    });
    (0, import_obsidian8.setIcon)(lockSpan, item.sticky ? "lock" : "unlock");
    if (item.sticky) {
      lockSpan.addClass("ui-tweaker-locked");
    }
    const visibilitySpan = entry.createSpan("ui-tweaker-status-bar-row-visibility");
    if (item.type === "custom") {
      visibilitySpan.setAttribute("aria-label", "Delete item");
      visibilitySpan.addClass("mod-warning");
      setCssProps(visibilitySpan, { color: "var(--text-error)" });
      visibilitySpan.addEventListener("click", () => {
        void this.removeItem(rowsContainer, item, settings);
      });
      (0, import_obsidian8.setIcon)(visibilitySpan, "trash-2");
    } else {
      visibilitySpan.setAttribute("aria-label", item.hidden ? "Hidden - click to show" : "Visible - click to hide");
      visibilitySpan.addEventListener("click", () => {
        this.toggleVisibility(item, visibilitySpan, entry);
      });
      (0, import_obsidian8.setIcon)(visibilitySpan, item.hidden ? "eye-off" : "eye");
    }
  }
  /**
   * Toggle lock position based on current position
   */
  toggleLock(item, lockSpan, currentIndex, totalItems, rowsContainer, settings) {
    var _a;
    if (item.sticky) {
      item.sticky = false;
      (0, import_obsidian8.setIcon)(lockSpan, "unlock");
      lockSpan.removeClass("ui-tweaker-locked");
      lockSpan.setAttribute("aria-label", "Unlocked - click to lock position");
    } else {
      if (currentIndex === 0 || currentIndex === 1) {
        item.sticky = "left";
      } else if (currentIndex === totalItems - 1 || currentIndex === totalItems - 2) {
        item.sticky = "right";
      } else {
        const distanceToStart = currentIndex;
        const distanceToEnd = totalItems - 1 - currentIndex;
        item.sticky = distanceToStart <= distanceToEnd ? "left" : "right";
      }
      (0, import_obsidian8.setIcon)(lockSpan, "lock");
      lockSpan.addClass("ui-tweaker-locked");
      lockSpan.setAttribute("aria-label", `Locked to ${item.sticky}`);
    }
    (_a = this.plugin.statusBarManager) == null ? void 0 : _a.reorder();
    void this.saveSettings();
  }
  /**
   * Toggle visibility (exactly like Status Bar Organizer)
   */
  toggleVisibility(item, visibilitySpan, entry) {
    var _a;
    item.hidden = !item.hidden;
    if (item.hidden) {
      entry.addClass("ui-tweaker-status-bar-row-hidden");
      (0, import_obsidian8.setIcon)(visibilitySpan, "eye-off");
      visibilitySpan.setAttribute("aria-label", "Hidden - click to show");
    } else {
      entry.removeClass("ui-tweaker-status-bar-row-hidden");
      (0, import_obsidian8.setIcon)(visibilitySpan, "eye");
      visibilitySpan.setAttribute("aria-label", "Visible - click to hide");
    }
    (_a = this.plugin.statusBarManager) == null ? void 0 : _a.reorder();
    void this.saveSettings();
  }
  /**
   * Remove item (exactly like Status Bar Organizer)
   */
  async removeItem(rowsContainer, item, settings) {
    var _a;
    const entry = rowsContainer.querySelector(`[data-ui-tweaker-id="${item.id}"]`);
    if (entry) {
      rowsContainer.removeChild(entry);
    }
    await ((_a = this.plugin.statusBarManager) == null ? void 0 : _a.removeItem(item));
    void this.saveSettings();
  }
  /**
   * Handle mouse down for dragging (exactly like Status Bar Organizer)
   */
  handleMouseDown(event, rowsContainer, item, settings) {
    var _a, _b;
    if (dragging) return;
    dragging = true;
    const entry = rowsContainer.querySelector(`[data-ui-tweaker-id="${item.id}"]`);
    if (!entry) return;
    const stationaryRow = entry;
    stationaryRow.addClass("ui-tweaker-status-bar-row-clone");
    const movableRow = document.createElement("div");
    movableRow.addClass("ui-tweaker-status-bar-row");
    movableRow.addClass("ui-tweaker-status-bar-row-drag");
    setCssProps(movableRow, {
      display: "grid",
      gridTemplateColumns: "1.25em 0.5fr 0.8fr 2em 2em 2em 2em 2em 2em"
    });
    if (item.hidden) movableRow.addClass("ui-tweaker-status-bar-row-hidden");
    if (item.type === "existing") {
      const statusBarContainer = (_a = this.plugin.app.statusBar) == null ? void 0 : _a.containerEl;
      const actualElement = statusBarContainer == null ? void 0 : statusBarContainer.querySelector(`[data-ui-tweaker-id="${item.id}"]`);
      if (!actualElement) movableRow.addClass("ui-tweaker-status-bar-row-disabled");
    }
    const wrapper = rowsContainer.closest(".ui-tweaker-status-bar-rows-wrapper") || rowsContainer.parentElement || rowsContainer;
    wrapper.appendChild(movableRow);
    const containerX = wrapper.getBoundingClientRect().left;
    const containerY = wrapper.getBoundingClientRect().top;
    const stationaryRect = stationaryRow.getBoundingClientRect();
    setCssProps(movableRow, {
      position: "absolute",
      left: stationaryRect.left - containerX + "px",
      top: stationaryRect.top - containerY + "px",
      width: stationaryRow.offsetWidth + "px"
    });
    movableRow.createSpan("ui-tweaker-status-bar-row-handle");
    const dragTitle = movableRow.createSpan("ui-tweaker-status-bar-row-title");
    dragTitle.textContent = item.name;
    const dragPreview = movableRow.createSpan("ui-tweaker-status-bar-row-preview");
    if (item.type === "existing") {
      const statusBarContainer = (_b = this.plugin.app.statusBar) == null ? void 0 : _b.containerEl;
      const actualElement = statusBarContainer == null ? void 0 : statusBarContainer.querySelector(`[data-ui-tweaker-status-bar-id="${item.id}"]`);
      if (actualElement) {
        const cloned = actualElement.cloneNode(true);
        cloned.removeAttribute("aria-label");
        cloned.removeAttribute("title");
        cloned.querySelectorAll("[aria-label], [title]").forEach((el) => {
          el.removeAttribute("aria-label");
          el.removeAttribute("title");
        });
        dragPreview.appendChild(cloned);
      }
    } else if (item.icon) {
      const previewIcon = dragPreview.createSpan("status-bar-item clickable-icon");
      (0, import_obsidian8.setIcon)(previewIcon, item.icon);
      previewIcon.removeAttribute("aria-label");
      previewIcon.removeAttribute("title");
      if (item.color && item.color !== "#000000") {
        setCssProps(previewIcon, { color: item.color });
      }
    }
    movableRow.createSpan("ui-tweaker-status-bar-row-reset-color");
    movableRow.createSpan("ui-tweaker-status-bar-row-color-picker");
    movableRow.createSpan("ui-tweaker-status-bar-row-md-only");
    const dragLock = movableRow.createSpan("ui-tweaker-status-bar-row-lock");
    (0, import_obsidian8.setIcon)(dragLock, item.sticky ? "lock" : "unlock");
    const dragVisibility = movableRow.createSpan("ui-tweaker-status-bar-row-visibility");
    (0, import_obsidian8.setIcon)(dragVisibility, item.hidden ? "eye-off" : "eye");
    let offsetX = event.clientX - movableRow.getBoundingClientRect().left;
    let offsetY = event.clientY - movableRow.getBoundingClientRect().top;
    offsetX = offsetX + containerX;
    offsetY = offsetY + containerY;
    let index = Array.from(rowsContainer.children).indexOf(stationaryRow);
    const handleMouseMove = (e) => {
      var _a2;
      setCssProps(movableRow, {
        left: e.clientX - offsetX + "px",
        top: e.clientY - offsetY + "px"
      });
      const dist = movableRow.getBoundingClientRect().top - stationaryRow.getBoundingClientRect().top;
      if (Math.abs(dist) > stationaryRow.offsetHeight * 0.75) {
        const dir = dist / Math.abs(dist);
        const newIndex = Math.max(0, Math.min(index + dir, rowsContainer.children.length - 1));
        if (newIndex !== index) {
          rowsContainer.removeChild(stationaryRow);
          if (newIndex < rowsContainer.children.length) {
            rowsContainer.insertBefore(stationaryRow, rowsContainer.children[newIndex]);
          } else {
            rowsContainer.appendChild(stationaryRow);
          }
          if (settings.statusBarItems) {
            const oldIndex = settings.statusBarItems.findIndex((i) => i.id === item.id);
            if (oldIndex !== -1 && oldIndex !== newIndex) {
              arrayMoveMutable2(settings.statusBarItems, oldIndex, newIndex);
              (_a2 = this.plugin.statusBarManager) == null ? void 0 : _a2.reorder();
            }
          }
          index = newIndex;
        }
      }
    };
    const handleMouseUp = () => {
      var _a2;
      stationaryRow.removeClass("ui-tweaker-status-bar-row-clone");
      if (movableRow.parentElement === wrapper) {
        wrapper.removeChild(movableRow);
      }
      dragging = false;
      window.removeEventListener("mousemove", handleMouseMove);
      window.removeEventListener("mouseup", handleMouseUp);
      (_a2 = this.plugin.statusBarManager) == null ? void 0 : _a2.reorder();
      void this.saveSettings();
    };
    window.addEventListener("mousemove", handleMouseMove);
    window.addEventListener("mouseup", handleMouseUp);
  }
};

// src/ui/tabs/ExplorerTab.ts
var import_obsidian9 = require("obsidian");
function arrayMoveMutable3(array, from, to) {
  const item = array[from];
  array.splice(from, 1);
  array.splice(to, 0, item);
}
var ExplorerTab = class extends TabRenderer {
  constructor() {
    super(...arguments);
    this.expandedStates = /* @__PURE__ */ new Map();
  }
  render(container) {
    container.empty();
    const settings = this.getSettings();
    if (!settings.explorerCommands) {
      settings.explorerCommands = [];
    }
    if (!settings.explorerButtonItems) {
      settings.explorerButtonItems = [];
    }
    if (!settings.nativeExplorerButtonColors) {
      settings.nativeExplorerButtonColors = {
        newNote: void 0,
        newFolder: void 0,
        sortOrder: void 0,
        autoReveal: void 0,
        collapseAll: void 0
      };
    }
    if (!settings.nativeExplorerButtonIcons) {
      settings.nativeExplorerButtonIcons = {
        newNote: void 0,
        newFolder: void 0,
        sortOrder: void 0,
        autoReveal: void 0,
        collapseAll: void 0
      };
    }
    settings.explorerButtonItems.forEach((item, index) => {
      this.renderButtonItem(container, item, index);
    });
    if (settings.explorerButtonItems.length > 0) {
      container.createEl("hr");
    }
    const addGroup = createSettingsGroup(container, void 0, "ui-tweaker");
    addGroup.addSetting((setting) => {
      setting.setName("Add command").setDesc("Add a new command button to the file explorer navigation area").addButton((button) => {
        const buttonEl = button.buttonEl;
        const iconContainer = buttonEl.createSpan({ cls: "ui-tweaker-add-icon" });
        (0, import_obsidian9.setIcon)(iconContainer, "lucide-image-plus");
        buttonEl.insertBefore(iconContainer, buttonEl.firstChild);
        button.setButtonText("Add command").setCta().onClick(() => {
          void (async () => {
            var _a;
            try {
              const pair = await chooseNewCommand(this.plugin);
              settings.explorerCommands.push(pair);
              const item = {
                id: `custom-${pair.id}`,
                name: pair.name,
                ariaLabel: pair.name,
                type: "custom",
                commandId: pair.id,
                icon: pair.icon,
                displayName: pair.displayName,
                mode: pair.mode,
                color: pair.color,
                showOnFileTypes: pair.showOnFileTypes,
                hideOnFileTypes: pair.hideOnFileTypes,
                toggleIcon: pair.toggleIcon,
                useActiveClass: pair.useActiveClass,
                hidden: false
              };
              settings.explorerButtonItems.push(item);
              await this.saveSettings();
              (_a = this.plugin.explorerManager) == null ? void 0 : _a.reorder();
              this.render(container);
            } catch (e) {
            }
          })();
        });
      });
    });
    const warningDiv = container.createEl("div", {
      cls: "callout",
      attr: { "data-callout": "warning" }
    });
    warningDiv.createEl("p", {
      text: "When clicking on a command in the explorer, the explorer view will become focused. This might interfere with commands that are supposed to be executed on an active file or explorer."
    });
  }
  renderNativeButtonControls(container, mainContainer) {
    container.empty();
    const settings = this.getSettings();
    const group = createSettingsGroup(container, "Native explorer buttons", "ui-tweaker");
    const scrollContainer = mainContainer || container;
    const renderNativeButton = (name, settingKey, colorKey) => {
      var _a, _b;
      const isHidden = settings[settingKey];
      const color = (_a = settings.nativeExplorerButtonColors) == null ? void 0 : _a[colorKey];
      const iconOverride = (_b = settings.nativeExplorerButtonIcons) == null ? void 0 : _b[colorKey];
      group.addSetting((setting) => {
        setting.setName(name).setDesc("").addExtraButton((button) => {
          const iconEl = button.extraSettingsEl;
          (0, import_obsidian9.setIcon)(iconEl, isHidden ? "eye-off" : "eye");
          button.setTooltip(isHidden ? "Show button" : "Hide button");
          button.onClick(() => {
            void (async () => {
              const currentValue = settings[settingKey];
              settings[settingKey] = !currentValue;
              await this.saveSettings();
              const newIsHidden = settings[settingKey];
              (0, import_obsidian9.setIcon)(iconEl, newIsHidden ? "eye-off" : "eye");
              button.setTooltip(newIsHidden ? "Show button" : "Hide button");
            })();
          });
          button.extraSettingsEl.addEventListener("click", (e) => e.stopPropagation());
        });
        if (color) {
          setting.addColorPicker((colorPicker) => {
            colorPicker.setValue(color);
            const controlEl = setting.controlEl;
            controlEl.addEventListener("click", (e) => e.stopPropagation());
            setTimeout(() => {
              const colorInput = controlEl.querySelector('input[type="color"]');
              if (colorInput) {
                colorInput.addEventListener("click", (e) => e.stopPropagation());
              }
            }, 0);
            setTimeout(() => {
              const colorPickerEl = controlEl.querySelector(".color-picker") || controlEl.lastElementChild;
              const resetButton = controlEl.createEl("button", {
                cls: "clickable-icon ui-tweaker-color-reset",
                attr: { "aria-label": "Reset to default color" }
              });
              (0, import_obsidian9.setIcon)(resetButton, "lucide-rotate-cw");
              setCssProps(resetButton, { marginRight: "0.5rem" });
              resetButton.addEventListener("click", (e) => {
                e.stopPropagation();
                e.stopImmediatePropagation();
                e.preventDefault();
                const scrollPos = scrollContainer.scrollTop;
                void (async () => {
                  var _a2;
                  if (!settings.nativeExplorerButtonColors) {
                    settings.nativeExplorerButtonColors = {};
                  }
                  settings.nativeExplorerButtonColors[colorKey] = void 0;
                  await this.saveSettings();
                  (_a2 = this.plugin.explorerManager) == null ? void 0 : _a2.applyNativeIconOverrides();
                  this.renderNativeButtonControls(container, mainContainer);
                  requestAnimationFrame(() => {
                    scrollContainer.scrollTop = scrollPos;
                  });
                })();
              });
              if (colorPickerEl) {
                controlEl.insertBefore(resetButton, colorPickerEl);
              } else {
                controlEl.insertBefore(resetButton, controlEl.firstChild);
              }
            }, 0);
            colorPicker.onChange((value) => {
              void (async () => {
                var _a2;
                if (!settings.nativeExplorerButtonColors) {
                  settings.nativeExplorerButtonColors = {};
                }
                settings.nativeExplorerButtonColors[colorKey] = value;
                await this.saveSettings();
                (_a2 = this.plugin.explorerManager) == null ? void 0 : _a2.applyNativeIconOverrides();
              })();
            });
          });
        } else {
          setting.addButton((button) => {
            button.setButtonText("Set color...").onClick(() => {
              const scrollPos = scrollContainer.scrollTop;
              if (!settings.nativeExplorerButtonColors) {
                settings.nativeExplorerButtonColors = {};
              }
              settings.nativeExplorerButtonColors[colorKey] = "#000000";
              void (async () => {
                var _a2;
                await this.saveSettings();
                (_a2 = this.plugin.explorerManager) == null ? void 0 : _a2.applyNativeIconOverrides();
                this.renderNativeButtonControls(container, mainContainer);
                requestAnimationFrame(() => {
                  scrollContainer.scrollTop = scrollPos;
                });
              })();
            });
            button.buttonEl.addEventListener("click", (e) => e.stopPropagation());
          });
        }
        setting.addButton((button) => {
          const currentIcon = iconOverride || "Default";
          button.setButtonText(currentIcon === "Default" ? "Set icon..." : currentIcon).onClick(() => {
            const modal = new IconPickerModal(this.app, (iconId) => {
              void (async () => {
                var _a2;
                const scrollPos = scrollContainer.scrollTop;
                if (!settings.nativeExplorerButtonIcons) {
                  settings.nativeExplorerButtonIcons = {};
                }
                if (iconId) {
                  settings.nativeExplorerButtonIcons[colorKey] = iconId;
                } else {
                  settings.nativeExplorerButtonIcons[colorKey] = void 0;
                }
                await this.saveSettings();
                (_a2 = this.plugin.explorerManager) == null ? void 0 : _a2.applyNativeIconOverrides();
                this.renderNativeButtonControls(container, mainContainer);
                requestAnimationFrame(() => {
                  scrollContainer.scrollTop = scrollPos;
                });
              })();
            });
            modal.open();
          });
          button.buttonEl.addEventListener("click", (e) => e.stopPropagation());
          if (iconOverride) {
            setTimeout(() => {
              const controlEl = setting.controlEl;
              const buttonEl = controlEl.querySelector("button") || controlEl.lastElementChild;
              const resetButton = controlEl.createEl("button", {
                cls: "clickable-icon ui-tweaker-icon-reset",
                attr: { "aria-label": "Reset to default icon" }
              });
              (0, import_obsidian9.setIcon)(resetButton, "lucide-rotate-cw");
              setCssProps(resetButton, { marginRight: "0.5rem" });
              resetButton.addEventListener("click", (e) => {
                e.stopPropagation();
                e.stopImmediatePropagation();
                e.preventDefault();
                const scrollPos = scrollContainer.scrollTop;
                void (async () => {
                  var _a2;
                  if (!settings.nativeExplorerButtonIcons) {
                    settings.nativeExplorerButtonIcons = {};
                  }
                  settings.nativeExplorerButtonIcons[colorKey] = void 0;
                  await this.saveSettings();
                  (_a2 = this.plugin.explorerManager) == null ? void 0 : _a2.applyNativeIconOverrides();
                  this.renderNativeButtonControls(container, mainContainer);
                  requestAnimationFrame(() => {
                    scrollContainer.scrollTop = scrollPos;
                  });
                })();
              });
              if (buttonEl) {
                controlEl.insertBefore(resetButton, buttonEl);
              } else {
                controlEl.insertBefore(resetButton, controlEl.firstChild);
              }
            }, 0);
          }
        });
      });
    };
    renderNativeButton("New note", "newNoteButton", "newNote");
    renderNativeButton("New folder", "newFolderButton", "newFolder");
    renderNativeButton("Sort order", "sortOrderButton", "sortOrder");
    renderNativeButton("Auto-reveal", "autoRevealButton", "autoReveal");
    renderNativeButton("Collapse all", "collapseAllButton", "collapseAll");
  }
  renderButtonItem(container, item, index) {
    var _a, _b;
    const settings = this.getSettings();
    const group = createSettingsGroup(container, void 0, "ui-tweaker");
    const otherSettings = [];
    const pair = item.type === "custom" && item.commandId ? settings.explorerCommands.find((c) => c.id === item.commandId) : null;
    const displayName = item.type === "custom" && pair ? pair.displayName || pair.name : item.name;
    const nativeButtonMap = {
      "native-newNote": { settingKey: "newNoteButton", colorKey: "newNote" },
      "native-newFolder": { settingKey: "newFolderButton", colorKey: "newFolder" },
      "native-sortOrder": { settingKey: "sortOrderButton", colorKey: "sortOrder" },
      "native-autoReveal": { settingKey: "autoRevealButton", colorKey: "autoReveal" },
      "native-collapseAll": { settingKey: "collapseAllButton", colorKey: "collapseAll" }
    };
    const nativeButtonInfo = item.type === "native" ? nativeButtonMap[item.id] : null;
    const isHidden = nativeButtonInfo ? settings[nativeButtonInfo.settingKey] : item.hidden;
    const color = nativeButtonInfo ? (_a = settings.nativeExplorerButtonColors) == null ? void 0 : _a[nativeButtonInfo.colorKey] : item.color && item.color !== "#000000" ? item.color : void 0;
    const iconOverride = nativeButtonInfo ? (_b = settings.nativeExplorerButtonIcons) == null ? void 0 : _b[nativeButtonInfo.colorKey] : item.icon || void 0;
    group.addSetting((setting) => {
      var _a2;
      if (item.type === "external") {
        setting.settingEl.addEventListener("click", (e) => {
          const target = e.target;
          const isExtraButton = target.closest(".extra-setting-button") !== null || target.closest(".clickable-icon.extra-setting-button") !== null;
          if (!isExtraButton) {
            e.stopPropagation();
            e.stopImmediatePropagation();
            e.preventDefault();
            return false;
          }
        }, true);
        setting.settingEl.addEventListener("click", (e) => {
          const target = e.target;
          const isExtraButton = target.closest(".extra-setting-button") !== null || target.closest(".clickable-icon.extra-setting-button") !== null;
          if (!isExtraButton) {
            e.stopPropagation();
            e.stopImmediatePropagation();
            e.preventDefault();
            return false;
          }
        }, false);
      } else {
        setting.settingEl.addEventListener("click", (e) => {
          const target = e.target;
          const isChevronClick = target.closest(".ui-tweaker-collapse-icon") !== null;
          const isExtraButton = target.closest(".extra-setting-button") !== null || target.closest(".clickable-icon.extra-setting-button") !== null;
          const isNameEdit = target.closest(".ui-tweaker-name-display") !== null || target.closest(".ui-tweaker-edit-icon") !== null || target.closest(".ui-tweaker-editable-name") !== null;
          if (!isChevronClick && !isExtraButton && !isNameEdit) {
            e.stopPropagation();
            e.stopImmediatePropagation();
            e.preventDefault();
            return false;
          }
        }, true);
        setting.settingEl.addEventListener("click", (e) => {
          const target = e.target;
          const isChevronClick = target.closest(".ui-tweaker-collapse-icon") !== null;
          const isExtraButton = target.closest(".extra-setting-button") !== null || target.closest(".clickable-icon.extra-setting-button") !== null;
          const isNameEdit = target.closest(".ui-tweaker-name-display") !== null || target.closest(".ui-tweaker-edit-icon") !== null || target.closest(".ui-tweaker-editable-name") !== null;
          if (!isChevronClick && !isExtraButton && !isNameEdit) {
            e.stopPropagation();
            e.stopImmediatePropagation();
            e.preventDefault();
            return false;
          }
        }, false);
      }
      const nameEl = setting.nameEl;
      setCssProps(nameEl, { display: "flex", alignItems: "center", gap: "0.5rem", width: "100%" });
      let chevronContainer = null;
      let isExpanded = false;
      if (item.type === "native" || item.type === "custom") {
        chevronContainer = document.createElement("div");
        chevronContainer.className = "ui-tweaker-collapse-icon";
        setCssProps(chevronContainer, {
          cursor: "default",
          background: "transparent",
          padding: "0",
          margin: "0",
          display: "inline-flex",
          alignItems: "center",
          justifyContent: "center"
        });
        nameEl.insertBefore(chevronContainer, nameEl.firstChild);
        isExpanded = (_a2 = this.expandedStates.get(item.id)) != null ? _a2 : false;
        (0, import_obsidian9.setIcon)(chevronContainer, isExpanded ? "chevrons-down-up" : "chevrons-up-down");
        chevronContainer.addEventListener("click", (e) => {
          e.stopPropagation();
          e.stopImmediatePropagation();
          e.preventDefault();
          isExpanded = !isExpanded;
          this.expandedStates.set(item.id, isExpanded);
          (0, import_obsidian9.setIcon)(chevronContainer, isExpanded ? "chevrons-down-up" : "chevrons-up-down");
          otherSettings.forEach((settingEl) => {
            setCssProps(settingEl, { display: isExpanded ? "" : "none" });
          });
        });
      }
      const nameContainer = nameEl.createDiv({ cls: "ui-tweaker-editable-name" });
      setCssProps(nameContainer, { display: "flex", alignItems: "center", gap: "0.5rem" });
      const createNameDisplay = (name) => {
        nameContainer.empty();
        const display = nameContainer.createSpan({
          text: name === displayName ? name : `${name} (${displayName})`,
          cls: "ui-tweaker-name-display"
        });
        if (item.type === "custom") {
          const iconContainer = nameContainer.createDiv({ cls: "ui-tweaker-edit-icon" });
          setCssProps(iconContainer, { opacity: "0.6" });
          (0, import_obsidian9.setIcon)(iconContainer, "lucide-pencil-line");
          const startEdit = () => {
            const currentName = item.name;
            nameContainer.empty();
            const nameInput = nameContainer.createEl("input", {
              type: "text",
              value: currentName
            });
            nameInput.addClass("mod-text-input");
            nameInput.focus();
            nameInput.select();
            const saveName = () => {
              var _a3;
              nameInput.removeEventListener("blur", saveName);
              let newName = nameInput.value.trim();
              if (!newName) {
                newName = currentName;
              }
              item.name = newName;
              if (pair) {
                pair.name = newName;
              }
              (_a3 = this.plugin.explorerManager) == null ? void 0 : _a3.updateButtonNames();
              void (async () => {
                await this.saveSettings();
                this.render(container);
              })();
            };
            nameInput.addEventListener("keydown", (e) => {
              if (e.key === "Enter") {
                e.preventDefault();
                saveName();
              } else if (e.key === "Escape") {
                e.preventDefault();
                createNameDisplay(currentName);
              }
            });
            nameInput.addEventListener("blur", saveName);
          };
          display.addEventListener("click", startEdit);
          iconContainer.addEventListener("click", startEdit);
          iconContainer.addEventListener("mouseenter", () => {
            setCssProps(iconContainer, { opacity: "1" });
          });
          iconContainer.addEventListener("mouseleave", () => {
            setCssProps(iconContainer, { opacity: "0.6" });
          });
        }
      };
      createNameDisplay(item.name);
      setting.setDesc("").addExtraButton((button) => {
        if (item.type === "custom" && pair) {
          const iconEl = button.extraSettingsEl;
          (0, import_obsidian9.setIcon)(iconEl, pair.icon);
          iconEl.setAttribute("data-explorer-command-id", pair.id);
          if (pair.color && pair.color !== "#000000") {
            setCssProps(iconEl, { color: pair.color });
          } else {
            iconEl.style.removeProperty("color");
          }
          button.setTooltip("Change icon");
          button.onClick(() => {
            const modal = new IconPickerModal(this.app, (iconId) => {
              void (async () => {
                var _a3;
                if (iconId && iconId !== pair.icon) {
                  pair.icon = iconId;
                  item.icon = iconId;
                  await this.saveSettings();
                  (_a3 = this.plugin.explorerManager) == null ? void 0 : _a3.reorder();
                  this.render(container);
                }
              })();
            });
            modal.open();
          });
        } else if (item.type === "native" && iconOverride) {
          const iconEl = button.extraSettingsEl;
          (0, import_obsidian9.setIcon)(iconEl, iconOverride);
          button.setTooltip("Change icon");
          button.onClick(() => {
            const modal = new IconPickerModal(this.app, (iconId) => {
              void (async () => {
                var _a3;
                if (!nativeButtonInfo) return;
                if (!settings.nativeExplorerButtonIcons) {
                  settings.nativeExplorerButtonIcons = {};
                }
                if (iconId) {
                  settings.nativeExplorerButtonIcons[nativeButtonInfo.colorKey] = iconId;
                } else {
                  settings.nativeExplorerButtonIcons[nativeButtonInfo.colorKey] = void 0;
                }
                await this.saveSettings();
                (_a3 = this.plugin.explorerManager) == null ? void 0 : _a3.applyNativeIconOverrides();
                this.render(container);
              })();
            });
            modal.open();
          });
        } else {
          setCssProps(button.extraSettingsEl, { display: "none" });
        }
        button.extraSettingsEl.addEventListener("mouseenter", (e) => e.stopPropagation());
        button.extraSettingsEl.addEventListener("mouseleave", (e) => e.stopPropagation());
        button.extraSettingsEl.addEventListener("click", (e) => e.stopPropagation());
      }).addExtraButton((button) => {
        button.setIcon("chevron-up");
        if (index > 0) {
          button.setTooltip("Move up");
          button.onClick(() => {
            const scrollContainer = container.closest(".vertical-tab-content") || container.closest(".settings-content") || container.closest(".vertical-tab-content-container") || container;
            const scrollPos = scrollContainer.scrollTop;
            void (async () => {
              var _a3;
              arrayMoveMutable3(settings.explorerButtonItems, index, index - 1);
              await this.saveSettings();
              (_a3 = this.plugin.explorerManager) == null ? void 0 : _a3.reorder();
              this.render(container);
              requestAnimationFrame(() => {
                scrollContainer.scrollTop = scrollPos;
                setTimeout(() => {
                  scrollContainer.scrollTop = scrollPos;
                  setTimeout(() => {
                    scrollContainer.scrollTop = scrollPos;
                  }, 50);
                }, 0);
              });
            })();
          });
        } else {
          button.setTooltip("Already at top");
          button.extraSettingsEl.addClass("ui-tweaker-disabled-button");
          setCssProps(button.extraSettingsEl, { pointerEvents: "none" });
        }
        button.extraSettingsEl.addEventListener("click", (e) => e.stopPropagation());
      }).addExtraButton((button) => {
        button.setIcon("chevron-down");
        if (index < settings.explorerButtonItems.length - 1) {
          button.setTooltip("Move down");
          button.onClick(() => {
            const scrollContainer = container.closest(".vertical-tab-content") || container.closest(".settings-content") || container.closest(".vertical-tab-content-container") || container;
            const scrollPos = scrollContainer.scrollTop;
            void (async () => {
              var _a3;
              arrayMoveMutable3(settings.explorerButtonItems, index, index + 1);
              await this.saveSettings();
              (_a3 = this.plugin.explorerManager) == null ? void 0 : _a3.reorder();
              this.render(container);
              requestAnimationFrame(() => {
                scrollContainer.scrollTop = scrollPos;
                setTimeout(() => {
                  scrollContainer.scrollTop = scrollPos;
                  setTimeout(() => {
                    scrollContainer.scrollTop = scrollPos;
                  }, 50);
                }, 0);
              });
            })();
          });
        } else {
          button.setTooltip("Already at bottom");
          button.extraSettingsEl.addClass("ui-tweaker-disabled-button");
          setCssProps(button.extraSettingsEl, { pointerEvents: "none" });
        }
        button.extraSettingsEl.addEventListener("click", (e) => e.stopPropagation());
      });
      if (item.type === "custom") {
        setting.addExtraButton((button) => {
          button.setIcon("trash");
          button.setTooltip("Delete");
          button.extraSettingsEl.addClass("mod-warning");
          setCssProps(button.extraSettingsEl, { color: "var(--text-error)" });
          button.onClick(() => {
            void (async () => {
              var _a3;
              const itemIdx = settings.explorerButtonItems.indexOf(item);
              if (itemIdx > -1) {
                settings.explorerButtonItems.splice(itemIdx, 1);
              }
              if (pair) {
                const cmdIdx = settings.explorerCommands.indexOf(pair);
                if (cmdIdx > -1) {
                  settings.explorerCommands.splice(cmdIdx, 1);
                }
              }
              await this.saveSettings();
              (_a3 = this.plugin.explorerManager) == null ? void 0 : _a3.reorder();
              this.render(container);
            })();
          });
          button.extraSettingsEl.addEventListener("click", (e) => e.stopPropagation());
        });
      }
      if (item.type === "native" && nativeButtonInfo || item.type === "external") {
        setting.addExtraButton((button) => {
          const iconEl = button.extraSettingsEl;
          (0, import_obsidian9.setIcon)(iconEl, isHidden ? "eye-off" : "eye");
          button.setTooltip(isHidden ? "Show button" : "Hide button");
          button.onClick(() => {
            void (async () => {
              var _a3;
              if (item.type === "native" && nativeButtonInfo) {
                settings[nativeButtonInfo.settingKey] = !settings[nativeButtonInfo.settingKey];
                item.hidden = settings[nativeButtonInfo.settingKey];
              } else if (item.type === "external") {
                item.hidden = !item.hidden;
              }
              await this.saveSettings();
              const newIsHidden = item.hidden;
              (0, import_obsidian9.setIcon)(iconEl, newIsHidden ? "eye-off" : "eye");
              button.setTooltip(newIsHidden ? "Show button" : "Hide button");
              (_a3 = this.plugin.explorerManager) == null ? void 0 : _a3.reorder();
            })();
          });
          button.extraSettingsEl.addEventListener("click", (e) => e.stopPropagation());
        });
      }
    });
    if (item.type === "native" || item.type === "custom") {
      if (item.type === "native" && nativeButtonInfo) {
        group.addSetting((setting) => {
          otherSettings.push(setting.settingEl);
          const hasColor = color !== void 0;
          setting.setName("Custom color").setDesc("Set a custom color for this icon").addColorPicker((colorPicker) => {
            const currentColor = color != null ? color : "#000000";
            colorPicker.setValue(currentColor);
            const controlEl = setting.controlEl;
            controlEl.addEventListener("click", (e) => e.stopPropagation());
            setTimeout(() => {
              const colorInput = controlEl.querySelector('input[type="color"]');
              if (colorInput) {
                colorInput.addEventListener("click", (e) => e.stopPropagation());
              }
            }, 0);
            if (hasColor) {
              setTimeout(() => {
                const colorPickerEl = controlEl.querySelector(".color-picker") || controlEl.lastElementChild;
                const resetButton = controlEl.createEl("button", {
                  cls: "clickable-icon ui-tweaker-color-reset",
                  attr: { "aria-label": "Reset to default color" }
                });
                (0, import_obsidian9.setIcon)(resetButton, "lucide-rotate-cw");
                setCssProps(resetButton, { marginRight: "0.5rem" });
                resetButton.addEventListener("click", (e) => {
                  e.stopPropagation();
                  e.stopImmediatePropagation();
                  e.preventDefault();
                  void (async () => {
                    var _a2;
                    if (!settings.nativeExplorerButtonColors) {
                      settings.nativeExplorerButtonColors = {};
                    }
                    settings.nativeExplorerButtonColors[nativeButtonInfo.colorKey] = void 0;
                    await this.saveSettings();
                    (_a2 = this.plugin.explorerManager) == null ? void 0 : _a2.applyNativeIconOverrides();
                    this.render(container);
                  })();
                });
                if (colorPickerEl) {
                  controlEl.insertBefore(resetButton, colorPickerEl);
                }
              }, 0);
            }
            colorPicker.onChange((value) => {
              void (async () => {
                var _a2;
                if (!settings.nativeExplorerButtonColors) {
                  settings.nativeExplorerButtonColors = {};
                }
                const newColor = value === "#000000" ? void 0 : value;
                settings.nativeExplorerButtonColors[nativeButtonInfo.colorKey] = newColor;
                await this.saveSettings();
                (_a2 = this.plugin.explorerManager) == null ? void 0 : _a2.applyNativeIconOverrides();
                const existingReset = controlEl.querySelector(".ui-tweaker-color-reset");
                if (newColor && !existingReset) {
                  const colorPickerEl = controlEl.querySelector(".color-picker") || controlEl.lastElementChild;
                  const resetButton = controlEl.createEl("button", {
                    cls: "clickable-icon ui-tweaker-color-reset",
                    attr: { "aria-label": "Reset to default color" }
                  });
                  (0, import_obsidian9.setIcon)(resetButton, "lucide-rotate-cw");
                  setCssProps(resetButton, { marginRight: "0.5rem" });
                  resetButton.addEventListener("click", (e) => {
                    e.stopPropagation();
                    e.stopImmediatePropagation();
                    e.preventDefault();
                    void (async () => {
                      var _a3;
                      if (!settings.nativeExplorerButtonColors) {
                        settings.nativeExplorerButtonColors = {};
                      }
                      settings.nativeExplorerButtonColors[nativeButtonInfo.colorKey] = void 0;
                      await this.saveSettings();
                      (_a3 = this.plugin.explorerManager) == null ? void 0 : _a3.applyNativeIconOverrides();
                      this.render(container);
                    })();
                  });
                  if (colorPickerEl) {
                    controlEl.insertBefore(resetButton, colorPickerEl);
                  }
                } else if (!newColor && existingReset) {
                  existingReset.remove();
                }
              })();
            });
          });
        });
        group.addSetting((setting) => {
          otherSettings.push(setting.settingEl);
          const hasIconOverride = iconOverride !== void 0;
          setting.setName("Icon override").setDesc("Override the default icon for this button").addButton((button) => {
            const currentIcon = iconOverride || "Default";
            button.setButtonText(currentIcon === "Default" ? "Set icon..." : currentIcon).onClick(() => {
              const modal = new IconPickerModal(this.app, (iconId) => {
                void (async () => {
                  var _a2;
                  if (!settings.nativeExplorerButtonIcons) {
                    settings.nativeExplorerButtonIcons = {};
                  }
                  if (iconId) {
                    settings.nativeExplorerButtonIcons[nativeButtonInfo.colorKey] = iconId;
                  } else {
                    settings.nativeExplorerButtonIcons[nativeButtonInfo.colorKey] = void 0;
                  }
                  await this.saveSettings();
                  (_a2 = this.plugin.explorerManager) == null ? void 0 : _a2.applyNativeIconOverrides();
                  this.render(container);
                })();
              });
              modal.open();
            });
            button.buttonEl.addEventListener("click", (e) => e.stopPropagation());
            if (hasIconOverride) {
              setTimeout(() => {
                const controlEl = setting.controlEl;
                const buttonEl = controlEl.querySelector("button") || controlEl.lastElementChild;
                const resetButton = controlEl.createEl("button", {
                  cls: "clickable-icon ui-tweaker-icon-override-reset",
                  attr: { "aria-label": "Reset icon override" }
                });
                (0, import_obsidian9.setIcon)(resetButton, "lucide-rotate-cw");
                setCssProps(resetButton, { marginRight: "0.5rem" });
                resetButton.addEventListener("click", (e) => {
                  e.stopPropagation();
                  e.stopImmediatePropagation();
                  e.preventDefault();
                  void (async () => {
                    var _a2;
                    if (!settings.nativeExplorerButtonIcons) {
                      settings.nativeExplorerButtonIcons = {};
                    }
                    settings.nativeExplorerButtonIcons[nativeButtonInfo.colorKey] = void 0;
                    await this.saveSettings();
                    (_a2 = this.plugin.explorerManager) == null ? void 0 : _a2.applyNativeIconOverrides();
                    this.render(container);
                  })();
                });
                if (buttonEl) {
                  controlEl.insertBefore(resetButton, buttonEl);
                } else {
                  controlEl.insertBefore(resetButton, controlEl.firstChild);
                }
              }, 0);
            }
          });
        });
      } else if (item.type === "custom" && pair) {
        group.addSetting((setting) => {
          otherSettings.push(setting.settingEl);
          setting.setName("Device mode").setDesc("Choose which devices this button appears on").addDropdown((dropdown) => {
            const appId = this.app.appId || "this-device";
            dropdown.addOption("any", "All devices").addOption("desktop", "Desktop only").addOption("mobile", "Mobile only").addOption(appId, "This device").setValue(pair.mode || "any").onChange((value) => {
              void (async () => {
                var _a2;
                pair.mode = value;
                item.mode = value;
                await this.saveSettings();
                (_a2 = this.plugin.explorerManager) == null ? void 0 : _a2.reorder();
                this.render(container);
              })();
            });
            dropdown.selectEl.addEventListener("click", (e) => e.stopPropagation());
          });
        });
        group.addSetting((setting) => {
          otherSettings.push(setting.settingEl);
          const hasColor = pair.color !== void 0;
          setting.setName("Custom color").setDesc("Set a custom color for this icon").addColorPicker((colorPicker) => {
            var _a2;
            const currentColor = (_a2 = pair.color) != null ? _a2 : "#000000";
            colorPicker.setValue(currentColor);
            const controlEl = setting.controlEl;
            controlEl.addEventListener("click", (e) => e.stopPropagation());
            setTimeout(() => {
              const colorInput = controlEl.querySelector('input[type="color"]');
              if (colorInput) {
                colorInput.addEventListener("click", (e) => e.stopPropagation());
              }
            }, 0);
            if (hasColor) {
              setTimeout(() => {
                const colorPickerEl = controlEl.querySelector(".color-picker") || controlEl.lastElementChild;
                const resetButton = controlEl.createEl("button", {
                  cls: "clickable-icon ui-tweaker-color-reset",
                  attr: { "aria-label": "Reset to default color" }
                });
                (0, import_obsidian9.setIcon)(resetButton, "lucide-rotate-cw");
                setCssProps(resetButton, { marginRight: "0.5rem" });
                resetButton.addEventListener("click", (e) => {
                  e.stopPropagation();
                  e.stopImmediatePropagation();
                  e.preventDefault();
                  void (async () => {
                    var _a3;
                    pair.color = void 0;
                    item.color = void 0;
                    await this.saveSettings();
                    (_a3 = this.plugin.explorerManager) == null ? void 0 : _a3.reorder();
                    this.render(container);
                  })();
                });
                if (colorPickerEl) {
                  controlEl.insertBefore(resetButton, colorPickerEl);
                }
              }, 0);
            }
            colorPicker.onChange((value) => {
              const newColor = value === "#000000" ? void 0 : value;
              pair.color = newColor;
              item.color = newColor;
              const iconButton = container.querySelector(`[data-explorer-command-id="${pair.id}"]`);
              if (iconButton) {
                if (newColor && newColor !== "#000000") {
                  setCssProps(iconButton, { color: newColor });
                } else {
                  iconButton.style.removeProperty("color");
                }
              }
              const controlEl2 = setting.controlEl;
              const existingReset = controlEl2.querySelector(".ui-tweaker-color-reset");
              if (newColor && !existingReset) {
                const colorPickerEl = controlEl2.querySelector(".color-picker") || controlEl2.lastElementChild;
                const resetButton = controlEl2.createEl("button", {
                  cls: "clickable-icon ui-tweaker-color-reset",
                  attr: { "aria-label": "Reset to default color" }
                });
                (0, import_obsidian9.setIcon)(resetButton, "lucide-rotate-cw");
                setCssProps(resetButton, { marginRight: "0.5rem" });
                resetButton.addEventListener("click", (e) => {
                  e.stopPropagation();
                  e.stopImmediatePropagation();
                  e.preventDefault();
                  void (async () => {
                    var _a3;
                    pair.color = void 0;
                    item.color = void 0;
                    await this.saveSettings();
                    (_a3 = this.plugin.explorerManager) == null ? void 0 : _a3.reorder();
                    this.render(container);
                  })();
                });
                if (colorPickerEl) {
                  controlEl2.insertBefore(resetButton, colorPickerEl);
                }
              } else if (!newColor && existingReset) {
                existingReset.remove();
              }
              void (async () => {
                var _a3;
                await this.saveSettings();
                (_a3 = this.plugin.explorerManager) == null ? void 0 : _a3.reorder();
              })();
            });
          });
        });
        group.addSetting((setting) => {
          otherSettings.push(setting.settingEl);
          setting.setName("Toggle icon").setDesc("Icon to show when command is toggled on (leave empty to disable toggle). Commands with check callback work automatically. See readme for plugin developer compatibility notes.").setTooltip("For plugin developers: Commands with checkCallback work automatically. See https://github.com/davidvkimball/obsidian-ui-tweaker#toggle-icon-feature-compatibility for details.").addButton((button) => {
            const currentToggleIcon = pair.toggleIcon || "None";
            button.setButtonText(currentToggleIcon === "None" ? "Set toggle icon..." : currentToggleIcon).onClick(() => {
              const modal = new IconPickerModal(this.app, (iconId) => {
                void (async () => {
                  var _a2;
                  if (iconId) {
                    pair.toggleIcon = iconId;
                    item.toggleIcon = iconId;
                  } else {
                    pair.toggleIcon = void 0;
                    item.toggleIcon = void 0;
                  }
                  await this.saveSettings();
                  (_a2 = this.plugin.explorerManager) == null ? void 0 : _a2.reorder();
                  this.render(container);
                })();
              });
              modal.open();
            });
            button.buttonEl.addEventListener("click", (e) => e.stopPropagation());
          });
        });
        group.addSetting((setting) => {
          otherSettings.push(setting.settingEl);
          setting.setName("Use active class instead of icon swap").setDesc("When toggled on, add is-active class instead of swapping icon (explorer only)").addToggle((toggle) => {
            var _a2;
            toggle.setValue((_a2 = pair.useActiveClass) != null ? _a2 : false);
            toggle.onChange((value) => {
              void (async () => {
                var _a3;
                pair.useActiveClass = value;
                item.useActiveClass = value;
                await this.saveSettings();
                (_a3 = this.plugin.explorerManager) == null ? void 0 : _a3.reorder();
                this.render(container);
              })();
            });
            toggle.toggleEl.addEventListener("click", (e) => e.stopPropagation());
          });
        });
      }
    }
    setTimeout(() => {
      var _a2;
      const savedExpanded = (_a2 = this.expandedStates.get(item.id)) != null ? _a2 : false;
      otherSettings.forEach((settingEl) => {
        setCssProps(settingEl, { display: savedExpanded ? "" : "none" });
      });
    }, 0);
  }
  renderCommandItem(container, pair, index) {
    const settings = this.getSettings();
    const group = createSettingsGroup(container, void 0, "ui-tweaker");
    const otherSettings = [];
    const displayName = pair.displayName || pair.name;
    group.addSetting((setting) => {
      var _a;
      setting.settingEl.addEventListener("click", (e) => {
        const target = e.target;
        const isChevronClick = target.closest(".ui-tweaker-collapse-icon") !== null;
        const isExtraButton = target.closest(".extra-setting-button") !== null || target.closest(".clickable-icon.extra-setting-button") !== null;
        const isNameEdit = target.closest(".ui-tweaker-name-display") !== null || target.closest(".ui-tweaker-edit-icon") !== null || target.closest(".ui-tweaker-editable-name") !== null;
        if (!isChevronClick && !isExtraButton && !isNameEdit) {
          e.stopPropagation();
          e.stopImmediatePropagation();
          e.preventDefault();
          return false;
        }
      }, true);
      setting.settingEl.addEventListener("click", (e) => {
        const target = e.target;
        const isChevronClick = target.closest(".ui-tweaker-collapse-icon") !== null;
        const isExtraButton = target.closest(".extra-setting-button") !== null || target.closest(".clickable-icon.extra-setting-button") !== null;
        const isNameEdit = target.closest(".ui-tweaker-name-display") !== null || target.closest(".ui-tweaker-edit-icon") !== null || target.closest(".ui-tweaker-editable-name") !== null;
        if (!isChevronClick && !isExtraButton && !isNameEdit) {
          e.stopPropagation();
          e.stopImmediatePropagation();
          e.preventDefault();
          return false;
        }
      }, false);
      const nameEl = setting.nameEl;
      setCssProps(nameEl, { display: "flex", alignItems: "center", gap: "0.5rem", width: "100%" });
      const chevronContainer = document.createElement("div");
      chevronContainer.className = "ui-tweaker-collapse-icon";
      setCssProps(chevronContainer, {
        cursor: "default",
        background: "transparent",
        padding: "0",
        margin: "0",
        display: "inline-flex",
        alignItems: "center",
        justifyContent: "center"
      });
      nameEl.insertBefore(chevronContainer, nameEl.firstChild);
      let isExpanded = (_a = this.expandedStates.get(pair.id)) != null ? _a : false;
      (0, import_obsidian9.setIcon)(chevronContainer, isExpanded ? "chevrons-down-up" : "chevrons-up-down");
      chevronContainer.addEventListener("click", (e) => {
        e.stopPropagation();
        e.stopImmediatePropagation();
        e.preventDefault();
        isExpanded = !isExpanded;
        this.expandedStates.set(pair.id, isExpanded);
        (0, import_obsidian9.setIcon)(chevronContainer, isExpanded ? "chevrons-down-up" : "chevrons-up-down");
        otherSettings.forEach((settingEl) => {
          setCssProps(settingEl, { display: isExpanded ? "" : "none" });
        });
      });
      const nameContainer = nameEl.createDiv({ cls: "ui-tweaker-editable-name" });
      setCssProps(nameContainer, { display: "flex", alignItems: "center", gap: "0.5rem" });
      const createNameDisplay = (name) => {
        nameContainer.empty();
        const display = nameContainer.createSpan({
          text: name === displayName ? name : `${name} (${displayName})`,
          cls: "ui-tweaker-name-display"
        });
        const iconContainer = nameContainer.createDiv({ cls: "ui-tweaker-edit-icon" });
        setCssProps(iconContainer, { opacity: "0.6" });
        (0, import_obsidian9.setIcon)(iconContainer, "lucide-pencil-line");
        const startEdit = () => {
          const currentName = pair.name;
          nameContainer.empty();
          const nameInput = nameContainer.createEl("input", {
            type: "text",
            value: currentName
          });
          nameInput.addClass("mod-text-input");
          nameInput.focus();
          nameInput.select();
          const saveName = () => {
            var _a2;
            nameInput.removeEventListener("blur", saveName);
            let newName = nameInput.value.trim();
            if (!newName) {
              newName = currentName;
            }
            pair.name = newName;
            (_a2 = this.plugin.explorerManager) == null ? void 0 : _a2.updateButtonNames();
            void (async () => {
              await this.saveSettings();
              this.render(container);
            })();
          };
          nameInput.addEventListener("keydown", (e) => {
            if (e.key === "Enter") {
              e.preventDefault();
              saveName();
            } else if (e.key === "Escape") {
              e.preventDefault();
              createNameDisplay(currentName);
            }
          });
          nameInput.addEventListener("blur", saveName);
        };
        display.addEventListener("click", startEdit);
        iconContainer.addEventListener("click", startEdit);
        iconContainer.addEventListener("mouseenter", () => {
          setCssProps(iconContainer, { opacity: "1" });
        });
        iconContainer.addEventListener("mouseleave", () => {
          setCssProps(iconContainer, { opacity: "0.6" });
        });
      };
      createNameDisplay(pair.name);
      setting.setDesc("").addExtraButton((button) => {
        const iconEl = button.extraSettingsEl;
        (0, import_obsidian9.setIcon)(iconEl, pair.icon);
        iconEl.setAttribute("data-explorer-command-id", pair.id);
        if (pair.color && pair.color !== "#000000") {
          setCssProps(iconEl, { color: pair.color });
        } else {
          iconEl.style.removeProperty("color");
        }
        button.setTooltip("Change icon");
        button.onClick(() => {
          const modal = new IconPickerModal(this.app, (iconId) => {
            void (async () => {
              var _a2;
              if (iconId && iconId !== pair.icon) {
                pair.icon = iconId;
                await this.saveSettings();
                (_a2 = this.plugin.explorerManager) == null ? void 0 : _a2.reorder();
                this.render(container);
              }
            })();
          });
          modal.open();
        });
        button.extraSettingsEl.addEventListener("click", (e) => e.stopPropagation());
      }).addExtraButton((button) => {
        button.setIcon("chevron-up");
        if (index > 0) {
          button.setTooltip("Move up");
          button.onClick(() => {
            const scrollContainer = container.closest(".vertical-tab-content") || container.closest(".settings-content") || container.closest(".vertical-tab-content-container") || container;
            const scrollPos = scrollContainer.scrollTop;
            void (async () => {
              var _a2;
              arrayMoveMutable3(settings.explorerCommands, index, index - 1);
              await this.saveSettings();
              (_a2 = this.plugin.explorerManager) == null ? void 0 : _a2.reorder();
              this.render(container);
              requestAnimationFrame(() => {
                scrollContainer.scrollTop = scrollPos;
                setTimeout(() => {
                  scrollContainer.scrollTop = scrollPos;
                  setTimeout(() => {
                    scrollContainer.scrollTop = scrollPos;
                  }, 50);
                }, 0);
              });
            })();
          });
        } else {
          button.setTooltip("Already at top");
          button.extraSettingsEl.addClass("ui-tweaker-disabled-button");
          setCssProps(button.extraSettingsEl, { pointerEvents: "none" });
        }
        button.extraSettingsEl.addEventListener("click", (e) => e.stopPropagation());
      }).addExtraButton((button) => {
        button.setIcon("chevron-down");
        if (index < settings.explorerCommands.length - 1) {
          button.setTooltip("Move down");
          button.onClick(() => {
            const scrollContainer = container.closest(".vertical-tab-content") || container.closest(".settings-content") || container.closest(".vertical-tab-content-container") || container;
            const scrollPos = scrollContainer.scrollTop;
            void (async () => {
              var _a2;
              arrayMoveMutable3(settings.explorerCommands, index, index + 1);
              await this.saveSettings();
              (_a2 = this.plugin.explorerManager) == null ? void 0 : _a2.reorder();
              this.render(container);
              requestAnimationFrame(() => {
                scrollContainer.scrollTop = scrollPos;
                setTimeout(() => {
                  scrollContainer.scrollTop = scrollPos;
                  setTimeout(() => {
                    scrollContainer.scrollTop = scrollPos;
                  }, 50);
                }, 0);
              });
            })();
          });
        } else {
          button.setTooltip("Already at bottom");
          button.extraSettingsEl.addClass("ui-tweaker-disabled-button");
          setCssProps(button.extraSettingsEl, { pointerEvents: "none" });
        }
        button.extraSettingsEl.addEventListener("click", (e) => e.stopPropagation());
      }).addExtraButton((button) => {
        button.setIcon("trash");
        button.setTooltip("Delete");
        button.extraSettingsEl.addClass("mod-warning");
        setCssProps(button.extraSettingsEl, { color: "var(--text-error)" });
        button.onClick(() => {
          void (async () => {
            var _a2;
            const idx = settings.explorerCommands.indexOf(pair);
            if (idx > -1) {
              settings.explorerCommands.splice(idx, 1);
              await this.saveSettings();
              (_a2 = this.plugin.explorerManager) == null ? void 0 : _a2.reorder();
              this.render(container);
            }
          })();
        });
        button.extraSettingsEl.addEventListener("click", (e) => e.stopPropagation());
      });
    });
    group.addSetting((setting) => {
      otherSettings.push(setting.settingEl);
      setting.setName("Device mode").setDesc("Choose which devices this button appears on").addDropdown((dropdown) => {
        const appId = this.app.appId || "this-device";
        dropdown.addOption("any", "All devices").addOption("desktop", "Desktop only").addOption("mobile", "Mobile only").addOption(appId, "This device").setValue(pair.mode || "any").onChange((value) => {
          void (async () => {
            var _a;
            pair.mode = value;
            await this.saveSettings();
            (_a = this.plugin.explorerManager) == null ? void 0 : _a.reorder();
            this.render(container);
          })();
        });
        dropdown.selectEl.addEventListener("click", (e) => e.stopPropagation());
      });
    });
    group.addSetting((setting) => {
      otherSettings.push(setting.settingEl);
      const hasColor = pair.color !== void 0;
      setting.setName("Custom color").setDesc("Set a custom color for this icon").addColorPicker((colorPicker) => {
        var _a;
        const currentColor = (_a = pair.color) != null ? _a : "#000000";
        colorPicker.setValue(currentColor);
        const controlEl = setting.controlEl;
        controlEl.addEventListener("click", (e) => e.stopPropagation());
        setTimeout(() => {
          const colorInput = controlEl.querySelector('input[type="color"]');
          if (colorInput) {
            colorInput.addEventListener("click", (e) => e.stopPropagation());
          }
        }, 0);
        if (hasColor) {
          setTimeout(() => {
            const colorPickerEl = controlEl.querySelector(".color-picker") || controlEl.lastElementChild;
            const resetButton = controlEl.createEl("button", {
              cls: "clickable-icon ui-tweaker-color-reset",
              attr: { "aria-label": "Reset to default color" }
            });
            (0, import_obsidian9.setIcon)(resetButton, "lucide-rotate-cw");
            setCssProps(resetButton, { marginRight: "0.5rem" });
            resetButton.addEventListener("click", (e) => {
              e.stopPropagation();
              e.stopImmediatePropagation();
              e.preventDefault();
              void (async () => {
                var _a2;
                pair.color = void 0;
                const iconButton = container.querySelector(`[data-explorer-command-id="${pair.id}"]`);
                if (iconButton) {
                  iconButton.style.removeProperty("color");
                }
                await this.saveSettings();
                (_a2 = this.plugin.explorerManager) == null ? void 0 : _a2.reorder();
                this.render(container);
              })();
            });
            if (colorPickerEl) {
              controlEl.insertBefore(resetButton, colorPickerEl);
            } else {
              controlEl.insertBefore(resetButton, controlEl.firstChild);
            }
          }, 0);
        }
        colorPicker.onChange((value) => {
          const newColor = value === "#000000" ? void 0 : value;
          pair.color = newColor;
          const iconButton = container.querySelector(`[data-explorer-command-id="${pair.id}"]`);
          if (iconButton) {
            if (newColor && newColor !== "#000000") {
              setCssProps(iconButton, { color: newColor });
            } else {
              iconButton.style.removeProperty("color");
            }
          }
          const controlEl2 = setting.controlEl;
          const existingReset = controlEl2.querySelector(".ui-tweaker-color-reset");
          if (newColor && !existingReset) {
            const colorPickerEl = controlEl2.querySelector(".color-picker") || controlEl2.lastElementChild;
            const resetButton = controlEl2.createEl("button", {
              cls: "clickable-icon ui-tweaker-color-reset",
              attr: { "aria-label": "Reset to default color" }
            });
            (0, import_obsidian9.setIcon)(resetButton, "lucide-rotate-cw");
            setCssProps(resetButton, { marginRight: "0.5rem" });
            resetButton.addEventListener("click", (e) => {
              e.stopPropagation();
              e.stopImmediatePropagation();
              e.preventDefault();
              void (async () => {
                var _a2;
                pair.color = void 0;
                const iconButton2 = container.querySelector(`[data-explorer-command-id="${pair.id}"]`);
                if (iconButton2) {
                  iconButton2.style.removeProperty("color");
                }
                await this.saveSettings();
                (_a2 = this.plugin.explorerManager) == null ? void 0 : _a2.reorder();
                this.render(container);
              })();
            });
            if (colorPickerEl) {
              controlEl2.insertBefore(resetButton, colorPickerEl);
            } else {
              controlEl2.insertBefore(resetButton, controlEl2.firstChild);
            }
          } else if (!newColor && existingReset) {
            existingReset.remove();
          }
          void (async () => {
            var _a2;
            await this.saveSettings();
            (_a2 = this.plugin.explorerManager) == null ? void 0 : _a2.reorder();
          })();
        });
      });
    });
    group.addSetting((setting) => {
      otherSettings.push(setting.settingEl);
      const hasToggleIcon = pair.toggleIcon !== void 0;
      setting.setName("Toggle icon").setDesc("Icon to show when command is toggled on (leave empty to disable toggle). Commands with check callback work automatically. See readme for plugin developer compatibility notes.").setTooltip("For plugin developers: Commands with checkCallback work automatically. See https://github.com/davidvkimball/obsidian-ui-tweaker#toggle-icon-feature-compatibility for details.").addButton((button) => {
        const currentToggleIcon = pair.toggleIcon || "None";
        button.setButtonText(currentToggleIcon === "None" ? "Set toggle icon..." : currentToggleIcon).onClick(() => {
          const modal = new IconPickerModal(this.app, (iconId) => {
            void (async () => {
              var _a;
              if (iconId) {
                pair.toggleIcon = iconId;
              } else {
                pair.toggleIcon = void 0;
              }
              await this.saveSettings();
              (_a = this.plugin.explorerManager) == null ? void 0 : _a.reorder();
              this.render(container);
            })();
          });
          modal.open();
        });
        button.buttonEl.addEventListener("click", (e) => e.stopPropagation());
        if (hasToggleIcon) {
          setTimeout(() => {
            const controlEl = setting.controlEl;
            const buttonEl = controlEl.querySelector("button") || controlEl.lastElementChild;
            const resetButton = controlEl.createEl("button", {
              cls: "clickable-icon ui-tweaker-toggle-icon-reset",
              attr: { "aria-label": "Reset toggle icon" }
            });
            (0, import_obsidian9.setIcon)(resetButton, "lucide-rotate-cw");
            setCssProps(resetButton, { marginRight: "0.5rem" });
            resetButton.addEventListener("click", (e) => {
              e.stopPropagation();
              e.stopImmediatePropagation();
              e.preventDefault();
              const scrollContainer = container.closest(".vertical-tab-content") || container.closest(".settings-content") || container.closest(".vertical-tab-content-container") || container;
              const scrollPos = scrollContainer.scrollTop;
              void (async () => {
                var _a;
                pair.toggleIcon = void 0;
                await this.saveSettings();
                (_a = this.plugin.explorerManager) == null ? void 0 : _a.reorder();
                this.render(container);
                requestAnimationFrame(() => {
                  scrollContainer.scrollTop = scrollPos;
                  setTimeout(() => {
                    scrollContainer.scrollTop = scrollPos;
                  }, 0);
                });
              })();
            });
            if (buttonEl) {
              controlEl.insertBefore(resetButton, buttonEl);
            } else {
              controlEl.insertBefore(resetButton, controlEl.firstChild);
            }
          }, 0);
        }
      });
    });
    group.addSetting((setting) => {
      otherSettings.push(setting.settingEl);
      setting.setName("Use active class instead of icon swap").setDesc("When toggled on, add is-active class instead of swapping icon (explorer only)").addToggle((toggle) => {
        var _a;
        toggle.setValue((_a = pair.useActiveClass) != null ? _a : false);
        toggle.onChange((value) => {
          void (async () => {
            var _a2;
            pair.useActiveClass = value;
            await this.saveSettings();
            (_a2 = this.plugin.explorerManager) == null ? void 0 : _a2.reorder();
            this.render(container);
          })();
        });
        toggle.toggleEl.addEventListener("click", (e) => e.stopPropagation());
      });
    });
    setTimeout(() => {
      var _a;
      const savedExpanded = (_a = this.expandedStates.get(pair.id)) != null ? _a : false;
      otherSettings.forEach((settingEl) => {
        setCssProps(settingEl, { display: savedExpanded ? "" : "none" });
      });
    }, 0);
  }
};

// src/ui/tabs/MobileTab.ts
var MobileTab = class extends TabRenderer {
  render(container) {
    const mobileGroup = createSettingsGroup(container, "Mobile", "ui-tweaker");
    this.addToggleSetting(mobileGroup, 'Hide "Mobile chevrons" icon', 'Hide "Mobile chevrons" icon (long-press flair) in mobile navbar.', "mobileChevronsIcon");
    this.addToggleSetting(mobileGroup, 'Hide "Navigate back" button', 'Hide "Navigate back" button in mobile navbar.', "navigateBackButton");
    this.addToggleSetting(mobileGroup, 'Hide "Navigate forward" button', 'Hide "Navigate forward" button in mobile navbar.', "navigateForwardButton");
    this.addToggleSetting(mobileGroup, 'Hide "Quick switcher" button', 'Hide "Quick switcher" button in mobile navbar.', "quickSwitcherButton");
    this.addToggleSetting(mobileGroup, 'Hide "New tab" button', 'Hide "New tab" button in mobile navbar.', "mobileNewTabButton");
    this.addToggleSetting(mobileGroup, 'Hide "Open tabs" button', 'Hide "Open tabs" button in mobile navbar.', "openTabButton");
    this.addToggleSetting(mobileGroup, 'Hide "Ribbon menu" button', 'Hide "Ribbon menu" button in mobile navbar.', "ribbonMenuButton");
    this.addToggleSetting(mobileGroup, "Swap mobile new tab icon", "Replace the new tab plus icon with a home button icon in mobile navbar.", "swapMobileNewTabIcon");
    this.addToggleSetting(mobileGroup, "Hide title", "Hide the title in mobile view headers.", "hideMobileTitle");
    this.addToggleSetting(mobileGroup, "Hide sync icon", "Hide sync status icons in mobile interface.", "hideMobileSyncIcon");
    this.renderSyncButtonReplacement(mobileGroup);
    const mobileNavGroup = createSettingsGroup(container, "Mobile navigation menu", "ui-tweaker");
    this.addPositionSetting(mobileNavGroup, '"Navigate back" button position', 'Select the position for the "Navigate back" button (default 1).', "navigateButtonPosition");
    this.addPositionSetting(mobileNavGroup, '"Navigate forward" button position', 'Select the position for the "Navigate forward" button (default 2).', "navigationButtonPosition");
    this.addPositionSetting(mobileNavGroup, '"Quick switcher" button position', 'Select the position for the "Quick switcher" button (default 3).', "quickSwitcherPosition");
    this.addPositionSetting(mobileNavGroup, '"New tab" button position', 'Select the position for the "New tab" button (default 4).', "newTabPosition");
    this.addPositionSetting(mobileNavGroup, '"Open tabs" button position', 'Select the position for the "Open tabs" button (default 5).', "openTabsPosition");
    this.addPositionSetting(mobileNavGroup, '"Ribbon menu" button position', 'Select the position for the "Ribbon menu" button (default 6).', "ribbonMenuPosition");
  }
  addToggleSetting(group, name, desc, key) {
    group.addSetting((setting) => {
      setting.setName(name).setDesc(desc).addToggle(
        (toggle) => toggle.setValue(Boolean(this.getSettings()[key])).onChange((value) => {
          this.getSettings()[key] = value;
          void this.saveSettings();
        })
      );
    });
  }
  addPositionSetting(group, name, desc, key) {
    group.addSetting((setting) => {
      setting.setName(name).setDesc(desc).addDropdown((dropdown) => {
        for (let i = 1; i <= 6; i++) {
          dropdown.addOption(String(i), String(i));
        }
        const currentValue = this.getSettings()[key];
        const stringValue = typeof currentValue === "string" ? currentValue : "1";
        dropdown.setValue(stringValue).onChange((value) => {
          this.getSettings()[key] = value;
          void this.saveSettings();
        });
      });
    });
  }
  renderSyncButtonReplacement(group) {
    const settings = this.getSettings();
    if (!settings.syncButtonReplacement) {
      settings.syncButtonReplacement = {
        enabled: false,
        commandId: "open-settings",
        iconId: "wrench"
      };
    }
    group.addSetting((setting) => {
      setting.setName("Replace sync button with custom action").setDesc("Replace the sync button in the mobile sidebar with a custom icon and command. This will hide the original sync button and show your custom button instead.").addToggle(
        (toggle) => toggle.setValue(settings.syncButtonReplacement.enabled).onChange((value) => {
          if (!settings.syncButtonReplacement) {
            settings.syncButtonReplacement = {
              enabled: true,
              commandId: "",
              iconId: "wrench"
            };
          }
          settings.syncButtonReplacement.enabled = value;
          void this.saveSettings();
        })
      );
    });
    if (settings.syncButtonReplacement.enabled) {
      const getCommandName = (commandId) => {
        if (!commandId) return "Select command...";
        try {
          const commandRegistry = this.app.commands;
          if (commandRegistry && typeof commandRegistry.listCommands === "function") {
            const commands = commandRegistry.listCommands();
            const command = commands.find(
              (cmd) => cmd && cmd.name && (cmd.id === commandId || cmd.id === commandId.replace(/^ui-tweaker:+/g, "") || cmd.id === `ui-tweaker:${commandId.replace(/^ui-tweaker:+/g, "")}`)
            );
            if (command == null ? void 0 : command.name) {
              return command.name;
            }
          }
        } catch (e) {
        }
        return "Select command...";
      };
      const commandName = getCommandName(settings.syncButtonReplacement.commandId);
      group.addSetting((setting) => {
        setting.setName("Command").setDesc("Select the command to execute when the button is clicked").addButton(
          (button) => button.setButtonText(commandName || "Select command...").onClick(() => {
            const modal = new CommandPickerModal(this.app, (commandId) => {
              if (!settings.syncButtonReplacement) {
                settings.syncButtonReplacement = {
                  enabled: true,
                  commandId: "",
                  iconId: "wrench"
                };
              }
              settings.syncButtonReplacement.commandId = commandId;
              void this.saveSettings();
            });
            modal.open();
          })
        );
      });
      const getIconName = (iconId) => {
        if (!iconId) return "";
        return iconId.replace(/^lucide-/, "").split("-").map((word) => word.charAt(0).toUpperCase() + word.slice(1)).join(" ");
      };
      const iconName = getIconName(settings.syncButtonReplacement.iconId);
      group.addSetting((setting) => {
        setting.setName("Icon").setDesc("Select the icon to display on the button").addButton(
          (button) => button.setButtonText(iconName || "Select icon...").onClick(() => {
            const modal = new IconPickerModal(this.app, (iconId) => {
              if (!settings.syncButtonReplacement) {
                settings.syncButtonReplacement = {
                  enabled: true,
                  commandId: "open-settings",
                  iconId: "wrench"
                };
              }
              settings.syncButtonReplacement.iconId = iconId;
              void this.saveSettings();
            });
            modal.open();
          })
        );
      });
    }
  }
};

// src/ui/SettingsTab.ts
var UITweakerSettingTab = class extends import_obsidian10.PluginSettingTab {
  constructor(app, plugin) {
    super(app, plugin);
    this.plugin = plugin;
  }
  display() {
    this.render();
  }
  render() {
    const { containerEl } = this;
    containerEl.empty();
    if (import_obsidian10.Platform.isMobile || document.body.classList.contains("is-mobile")) {
      const mobileTab = new MobileTab(this.app, this.plugin);
      void mobileTab.render(containerEl);
      return;
    }
    containerEl.addClass("ui-tweaker-settings");
    const tabContainer = containerEl.createDiv("tab-container");
    const tabNav = tabContainer.createDiv("tab-nav");
    const tabContent = tabContainer.createDiv("tab-content");
    const tabs = [
      {
        id: "hider",
        name: "Hider",
        renderer: new HiderTab(this.app, this.plugin)
      },
      {
        id: "status-bar",
        name: "Status bar",
        renderer: new StatusBarTab(this.app, this.plugin)
      },
      {
        id: "tab-bar",
        name: "Tab bar",
        renderer: new TabBarTab(this.app, this.plugin)
      },
      {
        id: "explorer",
        name: "Explorer",
        renderer: new ExplorerTab(this.app, this.plugin)
      },
      {
        id: "mobile",
        name: "Mobile",
        renderer: new MobileTab(this.app, this.plugin)
      }
    ];
    tabs.forEach((tab, index) => {
      const button = tabNav.createEl("button", {
        text: tab.name,
        cls: `tab-button ${index === 0 ? "active" : ""}`
      });
      button.addEventListener("click", () => {
        tabNav.querySelectorAll(".tab-button").forEach((btn) => btn.classList.remove("active"));
        button.classList.add("active");
        tabContent.empty();
        void tab.renderer.render(tabContent);
      });
    });
    void tabs[0].renderer.render(tabContent);
  }
};

// src/manager/TabBarManager.ts
var import_obsidian12 = require("obsidian");

// src/utils/commandUtils.ts
var import_obsidian11 = require("obsidian");
function isMarkdownView(leaf) {
  if (!(leaf == null ? void 0 : leaf.view)) return false;
  if (leaf.view instanceof import_obsidian11.MarkdownView) {
    const file = leaf.view.file;
    if (!file) return false;
    const ext = file.extension.toLowerCase();
    return ext === "md" || ext === "mdx";
  }
  return false;
}
function getFileExtension(leaf) {
  if (!(leaf == null ? void 0 : leaf.view)) return null;
  const view = leaf.view;
  const file = view.file;
  if (!file) return null;
  return file.extension.toLowerCase();
}
function getViewType(leaf) {
  if (!(leaf == null ? void 0 : leaf.view)) return null;
  const view = leaf.view;
  if (view.getViewType && typeof view.getViewType === "function") {
    return view.getViewType().toLowerCase();
  }
  if (leaf.view instanceof import_obsidian11.MarkdownView) {
    return "markdown";
  }
  const fileExt = getFileExtension(leaf);
  if (!fileExt) {
    return "empty";
  }
  return null;
}
function parseFileAndViewTypes(types) {
  const result = { fileTypes: [], viewTypes: [] };
  if (!types || !types.trim()) return result;
  const parts = types.split(",").map((p) => p.trim()).filter((p) => p);
  for (const part of parts) {
    const viewTypeMatch = part.match(/^\{\{(\w+)\}\}$/);
    if (viewTypeMatch) {
      result.viewTypes.push(viewTypeMatch[1].toLowerCase());
    } else {
      const ext = part.replace(/^\./, "").toLowerCase();
      if (ext) {
        result.fileTypes.push(ext);
      }
    }
  }
  return result;
}
function matchesFileTypeFilter(leaf, showOnFileTypes, hideOnFileTypes) {
  if (!(leaf == null ? void 0 : leaf.view)) return false;
  const showFilters = parseFileAndViewTypes(showOnFileTypes);
  const hideFilters = parseFileAndViewTypes(hideOnFileTypes);
  const fileExt = getFileExtension(leaf);
  const viewType = getViewType(leaf);
  if (hideFilters.fileTypes.length > 0 && fileExt && hideFilters.fileTypes.includes(fileExt)) {
    return false;
  }
  if (hideFilters.viewTypes.length > 0 && viewType && hideFilters.viewTypes.includes(viewType)) {
    return false;
  }
  if (showFilters.fileTypes.length > 0 || showFilters.viewTypes.length > 0) {
    const matchesFileType = fileExt ? showFilters.fileTypes.includes(fileExt) : false;
    const matchesViewType = viewType ? showFilters.viewTypes.includes(viewType) : false;
    return matchesFileType || matchesViewType;
  }
  return true;
}
function isModeActive(mode, plugin) {
  var _a;
  const app = plugin.app;
  const isMobile = (_a = app.isMobile) != null ? _a : false;
  const appId = app.appId;
  if (mode !== "any" && mode !== "desktop" && mode !== "mobile") {
    return mode === appId;
  }
  return mode === "any" || mode === "mobile" && isMobile || mode === "desktop" && !isMobile;
}
function getCommandFromId(id, plugin) {
  var _a, _b;
  const commands = plugin.app.commands;
  return (_b = (_a = commands == null ? void 0 : commands.commands) == null ? void 0 : _a[id]) != null ? _b : null;
}
var CommandToggleTracker = class {
  constructor() {
    this.toggleStates = /* @__PURE__ */ new Map();
    this.previousStates = /* @__PURE__ */ new Map();
    this.executionCounts = /* @__PURE__ */ new Map();
  }
  /**
   * Record that a command was executed
   */
  recordExecution(id) {
    const currentCount = this.executionCounts.get(id) || 0;
    this.executionCounts.set(id, currentCount + 1);
    this.toggleStates.set(id, (currentCount + 1) % 2 === 1);
  }
  /**
   * Get tracked toggle state (for commands without checkCallback)
   */
  getTrackedState(id) {
    var _a;
    return (_a = this.toggleStates.get(id)) != null ? _a : null;
  }
  /**
   * Get previous toggle state (for change detection)
   */
  getPreviousState(id) {
    var _a;
    return (_a = this.previousStates.get(id)) != null ? _a : null;
  }
  /**
   * Reset tracked state for a command
   */
  resetState(id) {
    this.toggleStates.delete(id);
    this.previousStates.delete(id);
    this.executionCounts.delete(id);
  }
  /**
   * Sync tracked state with actual command state
   * Used when checkCallback reports a different state than tracked
   * Returns true if state changed, false otherwise
   */
  syncState(id, actualState) {
    const currentTrackedState = this.toggleStates.get(id);
    if (currentTrackedState !== void 0) {
      this.previousStates.set(id, currentTrackedState);
    }
    if (currentTrackedState !== actualState) {
      const currentCount = this.executionCounts.get(id) || 0;
      this.executionCounts.set(id, currentCount + 1);
      this.toggleStates.set(id, actualState);
      return true;
    }
    return false;
  }
  /**
   * Check if state has changed since last check
   */
  hasStateChanged(id, currentState) {
    const previousState = this.previousStates.get(id);
    return previousState !== void 0 && previousState !== currentState;
  }
};
var commandToggleTracker = new CommandToggleTracker();
function isCommandChecked(id, plugin) {
  var _a, _b, _c, _d, _e, _f;
  if (id === "theme:toggle-light-dark") {
    const isDark = document.body.classList.contains("theme-dark");
    commandToggleTracker.syncState(id, isDark);
    return isDark;
  }
  if (id === "editing-toolbar:hide-show-menu" || id === "hide-show-menu") {
    const plugins = plugin.app.plugins;
    const editingToolbarPlugin = (_a = plugins == null ? void 0 : plugins.plugins) == null ? void 0 : _a["editing-toolbar"];
    if (((_b = editingToolbarPlugin == null ? void 0 : editingToolbarPlugin.settings) == null ? void 0 : _b.cMenuVisibility) !== void 0) {
      const isVisible = editingToolbarPlugin.settings.cMenuVisibility;
      commandToggleTracker.syncState(id, isVisible);
      return isVisible;
    }
    return (_c = commandToggleTracker.getTrackedState(id)) != null ? _c : false;
  }
  const command = getCommandFromId(id, plugin);
  if (!command) {
    return (_d = commandToggleTracker.getTrackedState(id)) != null ? _d : false;
  }
  if (typeof command.checkCallback === "function") {
    try {
      const result = command.checkCallback(true);
      const isChecked = result === true;
      commandToggleTracker.syncState(id, isChecked);
      return isChecked;
    } catch (e) {
      return (_e = commandToggleTracker.getTrackedState(id)) != null ? _e : false;
    }
  }
  return (_f = commandToggleTracker.getTrackedState(id)) != null ? _f : false;
}
function recordCommandExecution(id) {
  commandToggleTracker.recordExecution(id);
}

// src/manager/TabBarManager.ts
var TabBarManager = class {
  constructor(plugin) {
    this.buttons = /* @__PURE__ */ new WeakMap();
    this.plugin = plugin;
    this.init();
  }
  get pairs() {
    return this.plugin.settings.tabBarCommands || [];
  }
  init() {
    this.plugin.register(() => {
      this.removeButtonsFromAllLeaves();
    });
    this.plugin.registerEvent(
      this.plugin.app.workspace.on("layout-change", () => {
        this.addButtonsToAllLeaves();
      })
    );
    this.plugin.app.workspace.onLayoutReady(
      () => setTimeout(() => this.addButtonsToAllLeaves(), 100)
    );
  }
  addPageHeaderButton(leaf, pair) {
    const { id } = pair;
    const name = pair.name;
    const { view } = leaf;
    if (!(view instanceof import_obsidian12.ItemView)) {
      return;
    }
    const buttons = this.buttonsFor(leaf, true);
    if (!buttons) {
      return;
    }
    if (buttons.has(id)) {
      const existingButton = buttons.get(id);
      if (existingButton) {
        existingButton.setAttribute("aria-label", name);
        existingButton.setAttribute("title", name);
        if (pair.color && pair.color !== "#000000") {
          setCssProps(existingButton, { color: pair.color });
        } else {
          existingButton.style.removeProperty("color");
        }
        this.updateButtonToggleState(existingButton, pair);
        return;
      }
    }
    if (!matchesFileTypeFilter(leaf, pair.showOnFileTypes, pair.hideOnFileTypes)) {
      return;
    }
    const initialIcon = this.getIconForToggleState(pair);
    const buttonIcon = view.addAction(initialIcon, name, () => {
      this.plugin.app.workspace.setActiveLeaf(leaf, { focus: true });
      const commands = this.plugin.app.commands;
      if (commands == null ? void 0 : commands.executeCommandById) {
        void commands.executeCommandById(id);
        setTimeout(() => {
          this.updateButtonToggleState(buttonIcon, pair);
          this.updateAllButtonsForCommand(id);
        }, 100);
      }
    });
    buttons.set(id, buttonIcon);
    buttonIcon.addClasses(["ui-tweaker-tab-bar-button", id]);
    if (pair.color && pair.color !== "#000000") {
      setCssProps(buttonIcon, { color: pair.color });
    }
    this.updateButtonToggleState(buttonIcon, pair);
    buttonIcon.addEventListener("contextmenu", (event) => {
      event.stopImmediatePropagation();
      new import_obsidian12.Menu().addItem((item) => {
        item.setTitle("Change icon").setIcon("lucide-image-plus").onClick(() => {
          const modal = new IconPickerModal(this.plugin.app, (iconId) => {
            if (iconId && iconId !== pair.icon) {
              pair.icon = iconId;
              void this.plugin.saveSettings();
              this.reorder();
            }
          });
          modal.open();
        });
      }).addItem((item) => {
        item.setTitle("Delete").setIcon("lucide-trash").onClick(() => {
          void this.removeCommand(pair);
        });
        const dom = item.dom;
        if (dom) {
          dom.classList.add("mod-warning");
          const iconEl = dom.querySelector(".menu-item-icon svg");
          if (iconEl) {
            setCssProps(iconEl, { color: "var(--text-error)" });
          }
        }
      }).showAtMouseEvent(event);
    });
  }
  buttonsFor(leaf, create = false) {
    if (!(leaf.view instanceof import_obsidian12.ItemView)) return;
    if (create && !this.buttons.has(leaf.view))
      this.buttons.set(leaf.view, /* @__PURE__ */ new Map());
    return this.buttons.get(leaf.view);
  }
  addButtonsToAllLeaves(refresh = false) {
    requestAnimationFrame(() => {
      this.plugin.app.workspace.iterateAllLeaves((leaf) => {
        this.addButtonsToLeaf(leaf, refresh);
      });
    });
  }
  removeButtonsFromAllLeaves() {
    requestAnimationFrame(
      () => this.plugin.app.workspace.iterateAllLeaves(
        (leaf) => this.removeButtonsFromLeaf(leaf)
      )
    );
  }
  addButtonsToLeaf(leaf, refresh = false) {
    var _a;
    if (!(leaf.view instanceof import_obsidian12.ItemView)) {
      return;
    }
    if (refresh) {
      this.removeButtonsFromLeaf(leaf);
    } else if ((_a = this.buttonsFor(leaf)) == null ? void 0 : _a.size) {
      return;
    }
    for (let i = this.pairs.length - 1; i >= 0; i--) {
      const pair = this.pairs[i];
      if (isModeActive(pair.mode, this.plugin)) {
        this.addPageHeaderButton(leaf, pair);
      }
    }
  }
  removeButtonsFromLeaf(leaf) {
    const buttons = this.buttonsFor(leaf);
    if (buttons) {
      for (const button of buttons.values()) button.detach();
      buttons == null ? void 0 : buttons.clear();
    }
  }
  reorder() {
    this.addButtonsToAllLeaves(true);
  }
  /**
   * Update button names/tooltips for all existing buttons
   */
  updateButtonNames() {
    this.plugin.app.workspace.iterateAllLeaves((leaf) => {
      if (!(leaf.view instanceof import_obsidian12.ItemView)) return;
      const buttons = this.buttonsFor(leaf);
      if (!buttons) return;
      for (const [id, button] of buttons.entries()) {
        const pair = this.pairs.find((p) => p.id === id);
        if (pair) {
          button.setAttribute("aria-label", pair.name);
          button.setAttribute("title", pair.name);
          if (pair.color && pair.color !== "#000000") {
            setCssProps(button, { color: pair.color });
          } else {
            button.style.removeProperty("color");
          }
          this.updateButtonToggleState(button, pair);
        }
      }
    });
  }
  /**
   * Get icon for current toggle state
   */
  getIconForToggleState(pair) {
    if (!pair.toggleIcon) {
      return pair.icon;
    }
    const isChecked = isCommandChecked(pair.id, this.plugin);
    return isChecked ? pair.toggleIcon : pair.icon;
  }
  /**
   * Update button toggle state (icon swap only for tab bar)
   */
  updateButtonToggleState(button, pair) {
    if (!pair.toggleIcon) {
      (0, import_obsidian12.setIcon)(button, pair.icon);
      return;
    }
    const isChecked = isCommandChecked(pair.id, this.plugin);
    (0, import_obsidian12.setIcon)(button, isChecked ? pair.toggleIcon : pair.icon);
  }
  /**
   * Update all buttons for a specific command ID across all leaves
   */
  updateAllButtonsForCommand(commandId) {
    const pair = this.pairs.find((p) => p.id === commandId);
    if (!pair) return;
    this.plugin.app.workspace.iterateAllLeaves((leaf) => {
      if (!(leaf.view instanceof import_obsidian12.ItemView)) return;
      const buttons = this.buttonsFor(leaf);
      if (!buttons) return;
      const button = buttons.get(commandId);
      if (button) {
        this.updateButtonToggleState(button, pair);
      }
    });
  }
  /**
   * Refresh toggle states for all buttons
   */
  refreshToggleStates() {
    this.plugin.app.workspace.iterateAllLeaves((leaf) => {
      if (!(leaf.view instanceof import_obsidian12.ItemView)) return;
      const buttons = this.buttonsFor(leaf);
      if (!buttons) return;
      for (const [id, button] of buttons.entries()) {
        const pair = this.pairs.find((p) => p.id === id);
        if (pair && pair.toggleIcon) {
          this.updateButtonToggleState(button, pair);
        }
      }
    });
  }
  async addCommand(pair) {
    if (!this.plugin.settings.tabBarCommands) {
      this.plugin.settings.tabBarCommands = [];
    }
    this.plugin.settings.tabBarCommands.push(pair);
    this.addButtonsToAllLeaves(true);
    await this.plugin.saveSettings();
  }
  async removeCommand(pair) {
    if (!this.plugin.settings.tabBarCommands) return;
    const index = this.plugin.settings.tabBarCommands.indexOf(pair);
    if (index > -1) {
      this.plugin.settings.tabBarCommands.splice(index, 1);
    }
    this.addButtonsToAllLeaves(true);
    await this.plugin.saveSettings();
  }
  async updateCommand(oldPair, newPair) {
    if (!this.plugin.settings.tabBarCommands) return;
    const index = this.plugin.settings.tabBarCommands.indexOf(oldPair);
    if (index > -1) {
      this.plugin.settings.tabBarCommands[index] = newPair;
      this.addButtonsToAllLeaves(true);
      await this.plugin.saveSettings();
    }
  }
};

// src/manager/StatusBarManager.ts
var import_obsidian13 = require("obsidian");
var StatusBarManager = class {
  constructor(plugin) {
    this.customActions = /* @__PURE__ */ new Map();
    this.container = null;
    this.isReordering = false;
    this.plugin = plugin;
    this.init();
  }
  // Flag to prevent observer from triggering during reorder
  get items() {
    return this.plugin.settings.statusBarItems || [];
  }
  init() {
    this.plugin.app.workspace.onLayoutReady(() => {
      var _a, _b;
      this.container = (_b = (_a = this.plugin.app.statusBar) == null ? void 0 : _a.containerEl) != null ? _b : null;
      if (!this.container) {
        return;
      }
      if (!this.plugin.settings.statusBarItems) {
        this.plugin.settings.statusBarItems = [];
      }
      this.consolidateSettingsAndElements();
      this.reorder();
      let observerTimeout = null;
      this.observer = new MutationObserver(() => {
        if (this.isReordering) {
          return;
        }
        if (observerTimeout) {
          clearTimeout(observerTimeout);
        }
        observerTimeout = setTimeout(() => {
          if (!this.isReordering) {
            this.consolidateSettingsAndElements();
            this.reorder();
          }
        }, 200);
      });
      this.observer.observe(this.container, { childList: true, subtree: false });
      this.plugin.register(() => {
        if (this.observer) {
          this.observer.disconnect();
        }
        this.customActions.forEach((action) => action.remove());
        this.customActions.clear();
      });
    });
  }
  /**
   * Check if a class is a dynamic state class that should be filtered out
   * Dynamic state classes change based on plugin state (e.g., obsidian-git statusbar states)
   */
  isDynamicStateClass(className) {
    const dynamicPatterns = [
      /-statusbar-(idle|pull|push|commit|message|status|add|conflict|paused|failed-init)$/
      // Add more patterns as needed for other plugins
    ];
    return dynamicPatterns.some((pattern) => pattern.test(className));
  }
  /**
   * Generate a canonical name from an element's classes
   * Filters out dynamic state classes and uses only stable plugin identifiers
   */
  generateCanonicalName(element, allClasses) {
    var _a;
    const ignoredClasses = ["mod-clickable", "status-bar-item", "ui-tweaker-status-bar-item", "ui-tweaker-status-bar-hidden"];
    const pluginClass = allClasses.find(
      (cls) => cls.includes("plugin-") || cls.includes("obsidian-git") || cls.includes("-git") || cls.startsWith("git-") && cls !== "git-changes-status-bar"
    );
    if (pluginClass) {
      const stableClasses2 = allClasses.filter(
        (cls) => !this.isDynamicStateClass(cls) && !ignoredClasses.includes(cls) && cls !== pluginClass
        // Don't duplicate the plugin class
      );
      if (stableClasses2.length > 0 && !pluginClass.includes("obsidian-git")) {
        return `${pluginClass}-${stableClasses2.join("-")}`;
      }
      return pluginClass;
    }
    const stableClasses = allClasses.filter(
      (cls) => !this.isDynamicStateClass(cls) && !ignoredClasses.includes(cls)
    );
    if (stableClasses.length > 0) {
      return stableClasses.join("-");
    }
    const textContent = (_a = element.textContent) == null ? void 0 : _a.trim();
    if (textContent && textContent.length > 0 && textContent.length < 50 && !textContent.includes(":")) {
      const looksLikeBranch = /^[a-z0-9][a-z0-9_-]*$/i.test(textContent) && textContent.length < 30;
      if (looksLikeBranch) {
        return "plugin-obsidian-git";
      }
      const sanitized = textContent.toLowerCase().replace(/[^a-z0-9]+/g, "-").replace(/^-+|-+$/g, "");
      if (sanitized) {
        return `status-bar-item-${sanitized}`;
      }
    }
    return "status-bar-item";
  }
  /**
   * Extract canonical name from a saved ID
   * Removes the index suffix and filters out dynamic state classes
   * This handles legacy IDs that might have been created with dynamic classes
   */
  getCanonicalNameFromId(id) {
    const parts = id.split(";");
    parts.pop();
    const fullName = parts.join(";");
    if (fullName.startsWith("plugin-obsidian-git")) {
      return "plugin-obsidian-git";
    }
    if (fullName.startsWith("obsidian-git")) {
      return "obsidian-git";
    }
    const pluginMatch = fullName.match(/^(plugin-[a-z0-9-]+)/i);
    if (pluginMatch) {
      return pluginMatch[1];
    }
    const nameParts = fullName.split("-");
    const filteredParts = [];
    let skipNext = false;
    for (let i = 0; i < nameParts.length; i++) {
      if (skipNext) {
        skipNext = false;
        continue;
      }
      if (nameParts[i] === "statusbar" && i < nameParts.length - 1) {
        const nextPart = nameParts[i + 1];
        if (["idle", "pull", "push", "commit", "message", "status", "add", "conflict", "paused"].includes(nextPart)) {
          skipNext = true;
          continue;
        }
        if (nextPart === "failed" && i < nameParts.length - 2 && nameParts[i + 2] === "init") {
          i += 2;
          continue;
        }
      }
      filteredParts.push(nameParts[i]);
    }
    return filteredParts.length > 0 ? filteredParts.join("-") : fullName;
  }
  /**
   * Consolidate settings and elements (EXACTLY like Status Bar Organizer)
   * Merges saved items with current DOM elements, preserves order and settings
   * Saves immediately to prevent duplicates
   */
  consolidateSettingsAndElements() {
    if (!this.container) return;
    const existingElements = Array.from(this.container.children).filter(
      (el) => el.classList.contains("status-bar-item") && !el.classList.contains("ui-tweaker-status-bar-item")
    );
    const savedItems = this.items.filter((item) => item.type === "existing");
    const savedItemsMap = new Map(savedItems.map((item) => [item.id, item]));
    const pluginElementCount = {};
    const matchedSavedIds = /* @__PURE__ */ new Set();
    const newItems = [];
    existingElements.forEach((element, elementIndex) => {
      var _a, _b, _c;
      let id = element.getAttribute("data-ui-tweaker-status-bar-id");
      let name;
      let index;
      if (id) {
        const parts = id.split(";");
        if (parts.length >= 2) {
          const indexStr = parts[parts.length - 1];
          if (indexStr && !isNaN(parseInt(indexStr, 10))) {
            if (savedItemsMap.has(id)) {
              matchedSavedIds.add(id);
              index = parseInt(indexStr, 10);
              name = parts.slice(0, -1).join(";");
              pluginElementCount[name] = Math.max(
                index,
                name in pluginElementCount ? pluginElementCount[name] : 0
              );
              return;
            } else {
              index = parseInt(indexStr, 10);
              name = parts.slice(0, -1).join(";");
              pluginElementCount[name] = Math.max(
                index,
                name in pluginElementCount ? pluginElementCount[name] : 0
              );
            }
          } else {
            id = null;
          }
        } else {
          id = null;
        }
      }
      const allClasses = Array.from(element.classList);
      const canonicalName = this.generateCanonicalName(element, allClasses);
      name = canonicalName;
      const elementText = ((_a = element.textContent) == null ? void 0 : _a.trim()) || "";
      const elementAriaLabel = element.getAttribute("aria-label") || "";
      const elementTitle = element.getAttribute("title") || "";
      let matchingSavedItems = savedItems.filter((item) => {
        if (matchedSavedIds.has(item.id)) return false;
        const itemCanonicalName = this.getCanonicalNameFromId(item.id);
        return itemCanonicalName === canonicalName;
      });
      let actualDomPosition = 1;
      for (let i = 0; i < elementIndex; i++) {
        const prevElement = existingElements[i];
        const prevClasses = Array.from(prevElement.classList);
        const prevCanonicalName = this.generateCanonicalName(prevElement, prevClasses);
        if (prevCanonicalName === canonicalName) {
          actualDomPosition++;
        }
      }
      if (matchingSavedItems.length > 1) {
        const positionMatch = matchingSavedItems.find((item) => {
          const parts = item.id.split(";");
          const itemIndex = parseInt(parts[parts.length - 1] || "0", 10);
          return itemIndex === actualDomPosition;
        });
        if (positionMatch) {
          matchingSavedItems = [positionMatch];
        } else {
          const isBranchLike = elementText && elementText.length < 30 && !elementText.includes(":") && !/^[0-9]/.test(elementText) && // Not starting with numbers (like "0 words")
          !elementAriaLabel;
          const isMainStatusBar = elementAriaLabel || elementText && (elementText.includes(":") || elementText.length > 30);
          const scoredMatches = matchingSavedItems.map((item) => {
            let score = 0;
            const savedName = item.name || "";
            const isSavedNameBranchLike = savedName.length < 20 && !savedName.includes("plugin-") && !savedName.includes("status-bar") && savedName !== "Status bar item";
            const isSavedNameGeneric = savedName.includes("plugin-") || savedName.includes("status-bar") || savedName === "Status bar item";
            if (isBranchLike && isSavedNameBranchLike) {
              if (elementText.toLowerCase() === savedName.toLowerCase()) {
                score += 50;
              } else if (elementText.toLowerCase().includes(savedName.toLowerCase()) || savedName.toLowerCase().includes(elementText.toLowerCase())) {
                score += 30;
              } else {
                score += 10;
              }
            }
            if (isMainStatusBar && isSavedNameGeneric) {
              score += 40;
            }
            if (isBranchLike && isSavedNameGeneric) {
              score -= 20;
            }
            if (isMainStatusBar && isSavedNameBranchLike) {
              score -= 20;
            }
            if (elementText && savedName && elementText.toLowerCase().includes(savedName.toLowerCase())) {
              score += 10;
            }
            if (elementAriaLabel && savedName && elementAriaLabel.toLowerCase().includes(savedName.toLowerCase())) {
              score += 10;
            }
            if (elementTitle && savedName && elementTitle.toLowerCase().includes(savedName.toLowerCase())) {
              score += 5;
            }
            return { item, score };
          });
          scoredMatches.sort((a, b) => {
            if (b.score !== a.score) {
              return b.score - a.score;
            }
            const indexA = this.items.indexOf(a.item);
            const indexB = this.items.indexOf(b.item);
            return indexA - indexB;
          });
          matchingSavedItems = [scoredMatches[0].item];
        }
      } else if (matchingSavedItems.length === 1) {
        const parts = matchingSavedItems[0].id.split(";");
        const itemIndex = parseInt(parts[parts.length - 1] || "0", 10);
        const allUnmatchedSameCanonical = savedItems.filter((item) => {
          if (matchedSavedIds.has(item.id)) return false;
          const itemCanonicalName = this.getCanonicalNameFromId(item.id);
          return itemCanonicalName === canonicalName;
        });
        if (allUnmatchedSameCanonical.length > 1 && itemIndex !== actualDomPosition) {
          const betterMatch = allUnmatchedSameCanonical.find((item) => {
            const itemParts = item.id.split(";");
            const itemIdx = parseInt(itemParts[itemParts.length - 1] || "0", 10);
            return itemIdx === actualDomPosition;
          });
          if (betterMatch) {
            matchingSavedItems = [betterMatch];
          }
        }
      }
      if (matchingSavedItems.length === 0) {
        const pluginClass = allClasses.find(
          (cls) => cls.includes("plugin-") || cls.includes("obsidian-git") || cls.includes("-git")
        );
        if (pluginClass) {
          const samePluginItems = savedItems.filter((item) => {
            if (matchedSavedIds.has(item.id)) return false;
            const itemCanonicalName = this.getCanonicalNameFromId(item.id);
            return itemCanonicalName.includes(pluginClass) || itemCanonicalName.includes("obsidian-git") || itemCanonicalName.includes("plugin-obsidian-git");
          });
          if (samePluginItems.length > 0) {
            samePluginItems.sort((a, b) => {
              const indexA = this.items.indexOf(a);
              const indexB = this.items.indexOf(b);
              return indexA - indexB;
            });
            matchingSavedItems = [samePluginItems[0]];
          }
        }
      }
      if (matchingSavedItems.length > 0) {
        const savedItem = matchingSavedItems[0];
        id = savedItem.id;
        matchedSavedIds.add(id);
        let elementName2 = element.getAttribute("aria-label") || element.getAttribute("title") || ((_b = element.textContent) == null ? void 0 : _b.trim()) || null;
        const canonicalNameFromId = this.getCanonicalNameFromId(id);
        const hasGenericName = !savedItem.name || savedItem.name === canonicalNameFromId || savedItem.name === "Status bar item" || savedItem.name.startsWith("plugin-") || savedItem.name.startsWith("status-bar-item");
        if (elementName2 && elementName2.length > 0 && elementName2.length < 100) {
          if (!elementName2.includes(":") || elementName2.length < 30) {
            if (hasGenericName || elementName2 === savedItem.name) {
              if (elementName2.length < 30 && !elementName2.includes(":")) {
                savedItem.name = elementName2;
              } else if (hasGenericName && elementName2.length >= 30) {
                savedItem.name = elementName2.substring(0, 50);
              }
            }
          }
        } else if (hasGenericName) {
          const fallbackName = canonicalNameFromId || "Status bar item";
          if (!savedItem.name || savedItem.name === fallbackName) {
            savedItem.name = fallbackName;
          }
        }
        const parts = id.split(";");
        const indexStr = parts.pop();
        if (indexStr) {
          index = parseInt(indexStr, 10);
          pluginElementCount[canonicalName] = Math.max(
            index,
            canonicalName in pluginElementCount ? pluginElementCount[canonicalName] : 0
          );
        }
      } else {
        if (!id) {
          index = canonicalName in pluginElementCount ? pluginElementCount[canonicalName] + 1 : 1;
          id = `${canonicalName};${index}`;
          pluginElementCount[canonicalName] = index;
        } else {
          const existingCanonicalName = this.getCanonicalNameFromId(id);
          if (existingCanonicalName !== canonicalName) {
            const existingIndex = parseInt(id.split(";").pop() || "1", 10);
            index = canonicalName in pluginElementCount ? Math.max(pluginElementCount[canonicalName] + 1, existingIndex) : existingIndex;
            id = `${canonicalName};${index}`;
            pluginElementCount[canonicalName] = index;
          } else {
          }
        }
      }
      element.setAttribute("data-ui-tweaker-status-bar-id", id);
      let elementName = element.getAttribute("aria-label") || element.getAttribute("title") || ((_c = element.textContent) == null ? void 0 : _c.trim()) || null;
      if (elementName && elementName.length > 0 && elementName.length < 100) {
      } else {
        elementName = id.split(";")[0] || "Status bar item";
      }
      if (!savedItemsMap.has(id)) {
        newItems.push({
          id,
          name: elementName,
          type: "existing",
          hidden: false,
          mdOnly: false
        });
      }
    });
    if (newItems.length > 0) {
      this.plugin.settings.statusBarItems.push(...newItems);
      void this.plugin.saveSettings();
    }
  }
  /**
   * Reorder and apply visibility to all status bar items (like Status Bar Organizer)
   * Handles sticky items (left/right) and items that aren't currently visible
   * 
   * Note: Items with the same sticky position maintain their relative order
   * (e.g., if 3 items are sticky-left, they appear in the order they're in settings)
   */
  reorder() {
    var _a;
    if (!this.container) return;
    this.isReordering = true;
    this.customActions.forEach((action) => action.remove());
    this.customActions.clear();
    const allExistingElements = Array.from(this.container.children).filter(
      (el) => el.classList.contains("status-bar-item") && !el.classList.contains("ui-tweaker-status-bar-item")
    );
    const leftSticky = [];
    const rightSticky = [];
    const regular = [];
    const activeLeaf = this.plugin.app.workspace.getMostRecentLeaf();
    for (const item of this.items) {
      if (item.hidden) {
        if (item.type === "existing") {
          const element = allExistingElements.find(
            (el) => el.getAttribute("data-ui-tweaker-status-bar-id") === item.id
          );
          if (element) {
            element.addClass("ui-tweaker-status-bar-hidden");
          }
        }
        continue;
      }
      if (item.mdOnly && !isMarkdownView(activeLeaf)) {
        if (item.type === "existing") {
          const element = allExistingElements.find(
            (el) => el.getAttribute("data-ui-tweaker-status-bar-id") === item.id
          );
          if (element) {
            element.addClass("ui-tweaker-status-bar-hidden");
          }
        }
        continue;
      }
      if (item.type === "custom") {
        const commands = this.plugin.app.commands;
        const command = (_a = commands == null ? void 0 : commands.commands) == null ? void 0 : _a[item.commandId || ""];
        const mode = item.mode || "any";
        if (command && isModeActive(mode, this.plugin)) {
          this.addCustomAction(item);
          const action = this.customActions.get(item);
          if (action) {
            if (item.sticky === "left") {
              leftSticky.push(action);
            } else if (item.sticky === "right") {
              rightSticky.push(action);
            } else {
              regular.push(action);
            }
          }
        }
      } else {
        const element = allExistingElements.find(
          (el) => el.getAttribute("data-ui-tweaker-status-bar-id") === item.id
        );
        if (element) {
          element.removeClass("ui-tweaker-status-bar-hidden");
          if (item.sticky === "left") {
            leftSticky.push(element);
          } else if (item.sticky === "right") {
            rightSticky.push(element);
          } else {
            regular.push(element);
          }
        }
      }
    }
    const orderedElements = [...leftSticky, ...regular, ...rightSticky];
    orderedElements.forEach((element) => {
      if (this.container && element.parentElement === this.container) {
        this.container.appendChild(element);
      }
    });
    orderedElements.forEach((element, index) => {
      setCssProps(element, { order: (index + 1).toString() });
    });
    setTimeout(() => {
      this.isReordering = false;
    }, 50);
  }
  /**
   * Add a custom command action to the status bar (like Commander)
   */
  addCustomAction(item) {
    if (!this.container || !item.commandId) return;
    if (this.customActions.has(item)) return;
    const btn = this.container.createDiv({
      cls: "ui-tweaker-status-bar-item status-bar-item clickable-icon",
      attr: {
        "aria-label": item.name,
        "data-tooltip-position": "top",
        "data-ui-tweaker-status-bar-id": item.id
      }
    });
    if (item.icon) {
      (0, import_obsidian13.setIcon)(btn, item.icon);
    }
    if (item.color && item.color !== "#000000") {
      setCssProps(btn, { color: item.color });
    }
    btn.onclick = () => {
      const commands = this.plugin.app.commands;
      if ((commands == null ? void 0 : commands.executeCommandById) && item.commandId) {
        void commands.executeCommandById(item.commandId);
      }
    };
    btn.addEventListener("contextmenu", (event) => {
      event.stopImmediatePropagation();
      new import_obsidian13.Menu().addItem((menuItem) => {
        menuItem.setTitle("Change icon").setIcon("lucide-image-plus").onClick(() => {
          const modal = new IconPickerModal(this.plugin.app, (iconId) => {
            if (iconId && iconId !== item.icon) {
              item.icon = iconId;
              void this.plugin.saveSettings();
              this.reorder();
            }
          });
          modal.open();
        });
      }).addItem((menuItem) => {
        menuItem.setTitle("Delete").setIcon("lucide-trash").onClick(() => {
          void this.removeItem(item);
        });
        const dom = menuItem.dom;
        if (dom) {
          dom.classList.add("mod-warning");
          const iconEl = dom.querySelector(".menu-item-icon svg");
          if (iconEl) {
            setCssProps(iconEl, { color: "var(--text-error)" });
          }
        }
      }).showAtMouseEvent(event);
    });
    this.customActions.set(item, btn);
  }
  /**
   * Add a new custom command item
   */
  async addCustomCommand(pair) {
    if (!this.plugin.settings.statusBarItems) {
      this.plugin.settings.statusBarItems = [];
    }
    const hasMarkdownFilter = pair.showOnFileTypes && (pair.showOnFileTypes.includes("md") || pair.showOnFileTypes.includes("mdx"));
    const mdOnly = hasMarkdownFilter ? true : false;
    const item = {
      id: `custom-${pair.id}`,
      name: pair.name,
      displayName: pair.displayName,
      icon: pair.icon,
      type: "custom",
      hidden: false,
      mdOnly,
      commandId: pair.id,
      color: pair.color,
      mode: pair.mode
    };
    this.plugin.settings.statusBarItems.push(item);
    this.reorder();
    await this.plugin.saveSettings();
  }
  /**
   * Remove an item
   */
  async removeItem(item) {
    if (!this.plugin.settings.statusBarItems) return;
    const index = this.plugin.settings.statusBarItems.indexOf(item);
    if (index > -1) {
      this.plugin.settings.statusBarItems.splice(index, 1);
    }
    this.reorder();
    await this.plugin.saveSettings();
  }
  /**
   * Update item visibility
   */
  async updateItemVisibility(item, hidden) {
    item.hidden = hidden;
    this.reorder();
    await this.plugin.saveSettings();
  }
  /**
   * Update item md/mdx-only setting
   */
  async updateItemMdOnly(item, mdOnly) {
    item.mdOnly = mdOnly;
    this.reorder();
    await this.plugin.saveSettings();
  }
  /**
   * Update button names/tooltips for all existing custom buttons
   */
  updateButtonNames() {
    this.customActions.forEach((button, item) => {
      button.setAttribute("aria-label", item.name);
      if (item.color && item.color !== "#000000") {
        setCssProps(button, { color: item.color });
      } else {
        button.style.removeProperty("color");
      }
    });
  }
};

// src/manager/ExplorerManager.ts
var import_obsidian14 = require("obsidian");
var ExplorerManager = class {
  // Flag to prevent observer from triggering during reorder
  constructor(plugin) {
    this.buttons = /* @__PURE__ */ new Map();
    this.observers = [];
    this.isReordering = false;
    this.plugin = plugin;
    this.init();
  }
  init() {
    this.plugin.app.workspace.onLayoutReady(() => {
      if (!this.plugin.settings.explorerButtonItems) {
        this.plugin.settings.explorerButtonItems = [];
      }
      this.migrateExplorerCommands();
      this.consolidateSettingsAndElements();
      this.plugin.registerEvent(
        this.plugin.app.workspace.on("layout-change", () => {
          this.consolidateSettingsAndElements();
          this.reorder();
          this.applyNativeIconOverrides();
        })
      );
      this.addButtonsToAllLeaves();
      setTimeout(() => {
        this.setupMutationObserver();
      }, 100);
      this.plugin.register(() => {
        this.observers.forEach((observer) => observer.disconnect());
        this.observers = [];
      });
    });
  }
  addButtonsToAllLeaves() {
    const explorers = this.plugin.app.workspace.getLeavesOfType("file-explorer");
    explorers.forEach((leaf) => {
      this.addButtonsToExplorer(leaf);
    });
  }
  addButtonsToExplorer(leaf) {
    var _a, _b;
    const navButtonsContainer = (_b = (_a = leaf.view) == null ? void 0 : _a.containerEl) == null ? void 0 : _b.querySelector("div.nav-buttons-container");
    if (!navButtonsContainer) {
      return;
    }
    for (const pair of this.plugin.settings.explorerCommands) {
      this.addExplorerButton(navButtonsContainer, pair, leaf);
    }
  }
  /**
   * Migrate existing explorerCommands to explorerButtonItems
   */
  migrateExplorerCommands() {
    if (this.plugin.settings.explorerButtonItems.length === 0 && this.plugin.settings.explorerCommands.length > 0) {
      for (const command of this.plugin.settings.explorerCommands) {
        const item = {
          id: `custom-${command.id}`,
          name: command.name,
          ariaLabel: command.name,
          type: "custom",
          commandId: command.id,
          icon: command.icon,
          displayName: command.displayName,
          mode: command.mode,
          color: command.color,
          showOnFileTypes: command.showOnFileTypes,
          hideOnFileTypes: command.hideOnFileTypes,
          toggleIcon: command.toggleIcon,
          useActiveClass: command.useActiveClass,
          hidden: false
        };
        this.plugin.settings.explorerButtonItems.push(item);
      }
      this.consolidateSettingsAndElements();
      void this.plugin.saveSettings();
    }
  }
  addExplorerButton(container, pair, leaf) {
    const existingButton = container.querySelector(`[data-explorer-command-id="${pair.id}"]`);
    if (existingButton) {
      existingButton.setAttribute("aria-label", pair.name);
      if (pair.color && pair.color !== "#000000") {
        existingButton.style.color = pair.color;
      } else {
        existingButton.style.removeProperty("color");
      }
      this.updateButtonToggleState(existingButton, pair);
      return;
    }
    if (!isModeActive(pair.mode, this.plugin)) {
      return;
    }
    const button = createDiv({
      cls: "clickable-icon nav-action-button",
      attr: {
        "data-explorer-command-id": pair.id,
        "aria-label": pair.name,
        "aria-label-position": "top"
      }
    });
    this.updateButtonToggleState(button, pair);
    button.onclick = () => {
      const commands = this.plugin.app.commands;
      if (commands == null ? void 0 : commands.executeCommandById) {
        void commands.executeCommandById(pair.id);
        setTimeout(() => {
          this.updateButtonToggleState(button, pair);
          this.updateAllButtonsForCommand(pair.id);
        }, 100);
      }
    };
    this.buttons.set(pair.id, button);
    button.addEventListener("contextmenu", (event) => {
      event.stopImmediatePropagation();
      new import_obsidian14.Menu().addItem((item) => {
        item.setTitle("Change icon").setIcon("lucide-image-plus").onClick(() => {
          const modal = new IconPickerModal(this.plugin.app, (iconId) => {
            if (iconId && iconId !== pair.icon) {
              pair.icon = iconId;
              void this.plugin.saveSettings();
              this.reorder();
            }
          });
          modal.open();
        });
      }).addItem((item) => {
        item.setTitle("Delete").setIcon("lucide-trash").onClick(() => {
          void this.removeCommand(pair);
        });
        const dom = item.dom;
        if (dom) {
          dom.classList.add("mod-warning");
          const iconEl = dom.querySelector(".menu-item-icon svg");
          if (iconEl) {
            setCssProps(iconEl, { color: "var(--text-error)" });
          }
        }
      }).showAtMouseEvent(event);
    });
    container.appendChild(button);
  }
  /**
   * Generate canonical name from button element
   */
  generateCanonicalName(element, ariaLabel) {
    const nativeButtonMap = {
      "New note": "newNote",
      "New folder": "newFolder",
      "Change sort order": "sortOrder",
      "Auto-reveal current file": "autoReveal",
      "Collapse all": "collapseAll",
      "Expand all": "collapseAll"
      // Both map to same key
    };
    if (nativeButtonMap[ariaLabel]) {
      return `native-${nativeButtonMap[ariaLabel]}`;
    }
    const commandId = element.getAttribute("data-explorer-command-id");
    if (commandId) {
      return `custom-${commandId}`;
    }
    const allClasses = Array.from(element.classList);
    const ignoredClasses = ["clickable-icon", "nav-action-button"];
    const stableClasses = allClasses.filter((cls) => !ignoredClasses.includes(cls));
    const pluginClass = stableClasses.find(
      (cls) => cls.includes("plugin-") || cls.includes("commander") || cls.includes("explorer-focus")
    );
    if (pluginClass) {
      const sanitizedAriaLabel = ariaLabel.toLowerCase().replace(/[^a-z0-9]+/g, "-");
      return `external-${pluginClass}-${sanitizedAriaLabel}`;
    }
    const sanitized = ariaLabel.toLowerCase().replace(/[^a-z0-9]+/g, "-");
    return `external-${sanitized}`;
  }
  /**
   * Consolidate settings and elements - detect all buttons and merge with saved items
   */
  consolidateSettingsAndElements() {
    var _a, _b;
    const explorers = this.plugin.app.workspace.getLeavesOfType("file-explorer");
    if (explorers.length === 0) return;
    const firstExplorer = explorers[0];
    const navButtonsContainer = (_b = (_a = firstExplorer.view) == null ? void 0 : _a.containerEl) == null ? void 0 : _b.querySelector("div.nav-buttons-container");
    if (!navButtonsContainer) return;
    const existingButtons = Array.from(navButtonsContainer.querySelectorAll(".nav-action-button"));
    const savedItems = this.plugin.settings.explorerButtonItems || [];
    const savedItemsMap = new Map(savedItems.map((item) => [item.id, item]));
    const matchedSavedIds = /* @__PURE__ */ new Set();
    const newItems = [];
    const elementCount = {};
    existingButtons.forEach((element) => {
      const ariaLabel = element.getAttribute("aria-label") || "";
      const commandId = element.getAttribute("data-explorer-command-id");
      const canonicalName = this.generateCanonicalName(element, ariaLabel);
      let id = canonicalName;
      if (canonicalName.startsWith("native-")) {
        id = canonicalName;
      } else if (canonicalName.startsWith("custom-")) {
        id = canonicalName;
      } else {
        const baseName = canonicalName;
        const count = baseName in elementCount ? elementCount[baseName] + 1 : 1;
        elementCount[baseName] = count;
        id = count > 1 ? `${baseName};${count}` : baseName;
      }
      if (savedItemsMap.has(id)) {
        matchedSavedIds.add(id);
        const savedItem = savedItemsMap.get(id);
        if (!savedItem.name || savedItem.name === id || savedItem.name.startsWith("external-")) {
          savedItem.name = ariaLabel || savedItem.name || id;
        }
        if (ariaLabel) {
          savedItem.ariaLabel = ariaLabel;
        }
      } else {
        let type;
        if (canonicalName.startsWith("native-")) {
          type = "native";
        } else if (canonicalName.startsWith("custom-")) {
          type = "custom";
        } else {
          type = "external";
        }
        const newItem = {
          id,
          name: ariaLabel || id,
          ariaLabel,
          type,
          commandId: commandId || void 0,
          hidden: false
        };
        if (type === "custom" && commandId) {
          const existingCommand = this.plugin.settings.explorerCommands.find((c) => c.id === commandId);
          if (existingCommand) {
            newItem.icon = existingCommand.icon;
            newItem.displayName = existingCommand.displayName;
            newItem.mode = existingCommand.mode;
            newItem.color = existingCommand.color;
            newItem.showOnFileTypes = existingCommand.showOnFileTypes;
            newItem.hideOnFileTypes = existingCommand.hideOnFileTypes;
            newItem.toggleIcon = existingCommand.toggleIcon;
            newItem.useActiveClass = existingCommand.useActiveClass;
          }
        }
        newItems.push(newItem);
      }
    });
    if (newItems.length > 0) {
      this.plugin.settings.explorerButtonItems.push(...newItems);
      void this.plugin.saveSettings();
    }
  }
  /**
   * Set up mutation observer to detect new external buttons
   */
  setupMutationObserver() {
    const explorers = this.plugin.app.workspace.getLeavesOfType("file-explorer");
    if (explorers.length === 0) return;
    explorers.forEach((explorer) => {
      var _a, _b;
      const navButtonsContainer = (_b = (_a = explorer.view) == null ? void 0 : _a.containerEl) == null ? void 0 : _b.querySelector("div.nav-buttons-container");
      if (!navButtonsContainer) return;
      let observerTimeout = null;
      const observer = new MutationObserver((mutations) => {
        if (this.isReordering) return;
        const hasNewNodes = mutations.some(
          (mutation) => mutation.addedNodes.length > 0 && Array.from(mutation.addedNodes).some(
            (node) => node instanceof HTMLElement && node.classList.contains("nav-action-button") && !node.hasAttribute("data-explorer-command-id")
            // Only external buttons (not our custom ones)
          )
        );
        if (!hasNewNodes) return;
        if (observerTimeout) {
          clearTimeout(observerTimeout);
        }
        observerTimeout = setTimeout(() => {
          if (!this.isReordering) {
            this.consolidateSettingsAndElements();
            this.reorder();
          }
        }, 1e3);
      });
      observer.observe(navButtonsContainer, { childList: true, subtree: false });
      this.observers.push(observer);
    });
  }
  /**
   * Reorder buttons based on settings order
   */
  reorder() {
    this.isReordering = true;
    this.observers.forEach((observer) => observer.disconnect());
    const explorers = this.plugin.app.workspace.getLeavesOfType("file-explorer");
    explorers.forEach((leaf) => {
      var _a, _b;
      const navButtonsContainer = (_b = (_a = leaf.view) == null ? void 0 : _a.containerEl) == null ? void 0 : _b.querySelector("div.nav-buttons-container");
      if (!navButtonsContainer) return;
      const allButtons = Array.from(navButtonsContainer.querySelectorAll(".nav-action-button"));
      const buttonMap = /* @__PURE__ */ new Map();
      allButtons.forEach((button) => {
        const ariaLabel = button.getAttribute("aria-label") || "";
        const canonicalName = this.generateCanonicalName(button, ariaLabel);
        if (canonicalName.startsWith("native-")) {
          buttonMap.set(canonicalName, button);
        } else if (canonicalName.startsWith("custom-")) {
          buttonMap.set(canonicalName, button);
        } else {
          const savedItems = this.plugin.settings.explorerButtonItems || [];
          const matchingItem = savedItems.find((item) => {
            if (item.id === canonicalName) return true;
            if (item.id.startsWith(canonicalName + ";")) return true;
            return item.ariaLabel === ariaLabel && item.type === "external";
          });
          if (matchingItem) {
            buttonMap.set(matchingItem.id, button);
          }
        }
      });
      const orderedButtons = [];
      const items = this.plugin.settings.explorerButtonItems || [];
      items.forEach((item) => {
        if (item.hidden) {
          const button = buttonMap.get(item.id);
          if (button) {
            button.classList.add("ui-tweaker-explorer-button-hidden");
            buttonMap.delete(item.id);
          }
        }
      });
      for (const item of items) {
        if (item.hidden) continue;
        const button = buttonMap.get(item.id);
        if (button) {
          button.classList.remove("ui-tweaker-explorer-button-hidden");
          orderedButtons.push(button);
          buttonMap.delete(item.id);
        } else if (item.type === "custom") {
          const commandPair = this.plugin.settings.explorerCommands.find((c) => c.id === item.commandId);
          if (commandPair) {
            this.addExplorerButton(navButtonsContainer, commandPair, leaf);
          }
        }
      }
      buttonMap.forEach((button, id) => {
        const item = items.find((i) => i.id === id);
        if (!item && !id.startsWith("native-") && !id.startsWith("external-")) {
          button.remove();
        }
      });
      orderedButtons.forEach((button) => {
        if (button.parentElement === navButtonsContainer) {
          navButtonsContainer.appendChild(button);
        }
      });
      this.applyNativeIconOverrides();
    });
    setTimeout(() => {
      this.isReordering = false;
      this.observers = [];
      this.setupMutationObserver();
    }, 200);
  }
  /**
   * Update button toggle state (icon or is-active class)
   */
  updateButtonToggleState(button, pair) {
    if (!pair.toggleIcon && !pair.useActiveClass) {
      button.empty();
      (0, import_obsidian14.setIcon)(button, pair.icon);
      button.classList.remove("is-active");
      if (pair.color && pair.color !== "#000000") {
        button.style.color = pair.color;
      } else {
        button.style.removeProperty("color");
      }
      return;
    }
    const isChecked = isCommandChecked(pair.id, this.plugin);
    if (pair.useActiveClass) {
      const currentIcon = button.querySelector(".svg-icon");
      const iconName = pair.icon.replace("lucide-", "");
      if (!currentIcon || !currentIcon.classList.contains(iconName)) {
        button.empty();
        (0, import_obsidian14.setIcon)(button, pair.icon);
      }
      if (isChecked) {
        button.classList.add("is-active");
      } else {
        button.classList.remove("is-active");
      }
    } else if (pair.toggleIcon) {
      button.empty();
      (0, import_obsidian14.setIcon)(button, isChecked ? pair.toggleIcon : pair.icon);
      button.classList.remove("is-active");
    }
    if (pair.color && pair.color !== "#000000") {
      button.style.color = pair.color;
    } else {
      button.style.removeProperty("color");
    }
  }
  /**
   * Update button names/tooltips for all existing buttons
   */
  updateButtonNames() {
    const explorers = this.plugin.app.workspace.getLeavesOfType("file-explorer");
    explorers.forEach((leaf) => {
      var _a, _b;
      const navButtonsContainer = (_b = (_a = leaf.view) == null ? void 0 : _a.containerEl) == null ? void 0 : _b.querySelector("div.nav-buttons-container");
      if (!navButtonsContainer) return;
      for (const pair of this.plugin.settings.explorerCommands) {
        const button = navButtonsContainer.querySelector(`[data-explorer-command-id="${pair.id}"]`);
        if (button) {
          button.setAttribute("aria-label", pair.name);
          this.updateButtonToggleState(button, pair);
        }
      }
    });
  }
  /**
   * Update all buttons for a specific command ID across all explorers
   */
  updateAllButtonsForCommand(commandId) {
    const pair = this.plugin.settings.explorerCommands.find((p) => p.id === commandId);
    if (!pair) return;
    const explorers = this.plugin.app.workspace.getLeavesOfType("file-explorer");
    explorers.forEach((leaf) => {
      var _a, _b;
      const navButtonsContainer = (_b = (_a = leaf.view) == null ? void 0 : _a.containerEl) == null ? void 0 : _b.querySelector("div.nav-buttons-container");
      if (!navButtonsContainer) return;
      const button = navButtonsContainer.querySelector(`[data-explorer-command-id="${commandId}"]`);
      if (button) {
        this.updateButtonToggleState(button, pair);
      }
    });
  }
  /**
   * Refresh toggle states for all buttons
   */
  refreshToggleStates() {
    const explorers = this.plugin.app.workspace.getLeavesOfType("file-explorer");
    explorers.forEach((leaf) => {
      var _a, _b;
      const navButtonsContainer = (_b = (_a = leaf.view) == null ? void 0 : _a.containerEl) == null ? void 0 : _b.querySelector("div.nav-buttons-container");
      if (!navButtonsContainer) return;
      for (const pair of this.plugin.settings.explorerCommands) {
        const button = navButtonsContainer.querySelector(`[data-explorer-command-id="${pair.id}"]`);
        if (button && (pair.toggleIcon || pair.useActiveClass)) {
          this.updateButtonToggleState(button, pair);
        }
      }
    });
  }
  /**
   * Apply icon overrides to native explorer buttons
   */
  applyNativeIconOverrides() {
    const explorers = this.plugin.app.workspace.getLeavesOfType("file-explorer");
    const iconOverrides = this.plugin.settings.nativeExplorerButtonIcons;
    const defaultIcons = {
      "New note": { icon: "lucide-edit", key: "newNote" },
      "New folder": { icon: "lucide-folder-plus", key: "newFolder" },
      "Change sort order": { icon: "lucide-sort-asc", key: "sortOrder" },
      "Auto-reveal current file": { icon: "lucide-gallery-vertical", key: "autoReveal" },
      "Collapse all": { icon: "lucide-chevrons-up-down", key: "collapseAll" }
    };
    explorers.forEach((leaf) => {
      var _a, _b;
      const navButtonsContainer = (_b = (_a = leaf.view) == null ? void 0 : _a.containerEl) == null ? void 0 : _b.querySelector("div.nav-buttons-container");
      if (!navButtonsContainer) return;
      const nativeButtons = navButtonsContainer.querySelectorAll(".nav-action-button:not([data-explorer-command-id])");
      nativeButtons.forEach((button) => {
        const ariaLabel = button.getAttribute("aria-label");
        if (!ariaLabel) return;
        const buttonInfo = defaultIcons[ariaLabel];
        if (!buttonInfo) return;
        const iconKey = buttonInfo.key;
        const iconOverride = iconOverrides == null ? void 0 : iconOverrides[iconKey];
        const colorOverrides = this.plugin.settings.nativeExplorerButtonColors;
        const color = colorOverrides == null ? void 0 : colorOverrides[iconKey];
        button.empty();
        if (iconOverride) {
          (0, import_obsidian14.setIcon)(button, iconOverride);
        } else {
          (0, import_obsidian14.setIcon)(button, buttonInfo.icon);
        }
        if (color) {
          button.style.color = color;
        } else {
          button.style.removeProperty("color");
        }
      });
    });
  }
  /**
   * Remove a command from explorer
   */
  async removeCommand(pair) {
    if (!this.plugin.settings.explorerCommands) return;
    const index = this.plugin.settings.explorerCommands.indexOf(pair);
    if (index > -1) {
      this.plugin.settings.explorerCommands.splice(index, 1);
    }
    this.reorder();
    await this.plugin.saveSettings();
  }
};

// src/main.ts
var UITweakerPlugin = class extends import_obsidian15.Plugin {
  constructor() {
    super(...arguments);
    // Store original to restore later
    this.isUpdatingSyncButton = false;
  }
  async onload() {
    await this.loadSettings();
    this.uiManager = new UIManager(this.settings);
    this.uiManager.applyStyles();
    if (!this.settings.tabBarCommands) {
      this.settings.tabBarCommands = [];
    }
    this.tabBarManager = new TabBarManager(this);
    if (!this.settings.statusBarItems) {
      this.settings.statusBarItems = [];
    }
    this.statusBarManager = new StatusBarManager(this);
    if (!this.settings.explorerCommands) {
      this.settings.explorerCommands = [];
    }
    this.explorerManager = new ExplorerManager(this);
    registerCommands({
      plugin: this,
      settings: this.settings,
      saveSettings: () => this.saveSettings(),
      refresh: () => this.refresh()
    });
    this.setupToggleStateRefresh();
    this.registerInterval(
      window.setInterval(() => {
        var _a, _b, _c, _d;
        const hasToggleCommands = ((_b = (_a = this.settings.explorerCommands) == null ? void 0 : _a.some((p) => p.toggleIcon)) != null ? _b : false) || ((_d = (_c = this.settings.tabBarCommands) == null ? void 0 : _c.some((p) => p.toggleIcon)) != null ? _d : false);
        if (hasToggleCommands) {
          if (this.explorerManager) {
            this.explorerManager.refreshToggleStates();
          }
          if (this.tabBarManager) {
            this.tabBarManager.refreshToggleStates();
          }
        }
      }, 300)
      // Refresh every 300ms to keep buttons in sync (increased frequency)
    );
    const themeObserver = new MutationObserver(() => {
      if (this.explorerManager) {
        this.explorerManager.refreshToggleStates();
      }
      if (this.tabBarManager) {
        this.tabBarManager.refreshToggleStates();
      }
    });
    themeObserver.observe(document.body, {
      attributes: true,
      attributeFilter: ["class"]
    });
    this.settingTab = new UITweakerSettingTab(this.app, this);
    this.addSettingTab(this.settingTab);
    this.setupHelpButtonReplacement();
    if (import_obsidian15.Platform.isMobile) {
      this.setupSyncButtonReplacement();
    } else {
      document.body.classList.remove("ui-tweaker-hide-sync-button");
    }
  }
  onunload() {
    if (this.uiManager) {
      this.uiManager.cleanup();
    }
    this.restoreHelpButton();
    if (this.helpButtonObserver) {
      this.helpButtonObserver.disconnect();
    }
    this.restoreSyncButton();
    if (this.syncButtonObserver) {
      this.syncButtonObserver.disconnect();
    }
  }
  async loadSettings() {
    var _a, _b;
    try {
      const data = await this.loadData();
      if (!data || typeof data !== "object" || Array.isArray(data)) {
        this.settings = Object.assign({}, DEFAULT_SETTINGS);
        await this.saveSettings();
        return;
      }
      this.settings = Object.assign({}, DEFAULT_SETTINGS, data);
      if (!this.settings.helpButtonReplacement) {
        this.settings.helpButtonReplacement = {
          enabled: false,
          commandId: "",
          iconId: "settings-2"
        };
      } else {
        if (!this.settings.helpButtonReplacement.iconId) {
          this.settings.helpButtonReplacement.iconId = "wrench";
        }
        if ((_a = this.settings.helpButtonReplacement.commandId) == null ? void 0 : _a.startsWith("ui-tweaker:")) {
          this.settings.helpButtonReplacement.commandId = this.settings.helpButtonReplacement.commandId.replace(/^ui-tweaker:+/g, "");
          await this.saveSettings();
        }
      }
      if (!this.settings.syncButtonReplacement) {
        this.settings.syncButtonReplacement = {
          enabled: false,
          commandId: "",
          iconId: "wrench"
        };
      } else {
        if (!this.settings.syncButtonReplacement.iconId) {
          this.settings.syncButtonReplacement.iconId = "wrench";
        }
        if ((_b = this.settings.syncButtonReplacement.commandId) == null ? void 0 : _b.startsWith("ui-tweaker:")) {
          this.settings.syncButtonReplacement.commandId = this.settings.syncButtonReplacement.commandId.replace(/^ui-tweaker:+/g, "");
          await this.saveSettings();
        }
      }
      if (this.settings.tabBarCommands) {
        let needsSave = false;
        for (const pair of this.settings.tabBarCommands) {
          const pairWithOldProps = pair;
          if (pair.showOnFileTypes !== void 0 || pair.hideOnFileTypes !== void 0) {
            continue;
          }
          if (pairWithOldProps.mdOnly === true && !pair.showOnFileTypes) {
            pair.showOnFileTypes = "md,mdx";
            delete pairWithOldProps.mdOnly;
            needsSave = true;
          }
          if (pairWithOldProps.fileTypeFilter && !pair.showOnFileTypes && !pair.hideOnFileTypes) {
            const filter = pairWithOldProps.fileTypeFilter;
            const parts = filter.split(",").map((p) => p.trim()).filter((p) => p);
            const showTypes = [];
            const hideTypes = [];
            for (const part of parts) {
              if (part.startsWith("-")) {
                const ext = part.slice(1).replace(/^\./, "").toLowerCase();
                if (ext) hideTypes.push(ext);
              } else {
                const ext = part.replace(/^\./, "").toLowerCase();
                if (ext) showTypes.push(ext);
              }
            }
            if (showTypes.length > 0) {
              pair.showOnFileTypes = showTypes.join(",");
            }
            if (hideTypes.length > 0) {
              pair.hideOnFileTypes = hideTypes.join(",");
            }
            delete pairWithOldProps.fileTypeFilter;
            needsSave = true;
          }
        }
        if (needsSave) {
          await this.saveSettings();
        }
      }
    } catch (error) {
      console.error("[UI Tweaker] Failed to load settings:", error);
      this.settings = { ...DEFAULT_SETTINGS };
    }
  }
  async saveSettings() {
    await this.saveData(this.settings);
  }
  refresh() {
    var _a;
    if (this.uiManager) {
      this.uiManager.updateSettings(this.settings);
    }
    (_a = this.explorerManager) == null ? void 0 : _a.applyNativeIconOverrides();
    this.setupHelpButtonReplacement();
    this.updateSyncButtonCSS();
    if (import_obsidian15.Platform.isMobile) {
      this.setupSyncButtonReplacement();
    } else {
      document.body.classList.remove("ui-tweaker-hide-sync-button");
    }
  }
  setupHelpButtonReplacement() {
    var _a;
    if (!((_a = this.settings.helpButtonReplacement) == null ? void 0 : _a.enabled)) {
      this.restoreHelpButton();
      return;
    }
    this.updateHelpButtonCSS();
    const trySetup = () => {
      var _a2;
      if ((_a2 = this.settings.helpButtonReplacement) == null ? void 0 : _a2.enabled) {
        void this.updateHelpButton();
      }
    };
    trySetup();
    setTimeout(trySetup, 500);
    setTimeout(() => {
      this.setupHelpButtonObserver();
    }, 1e3);
  }
  updateHelpButtonCSS() {
    var _a;
    const shouldHideHelpButton = this.settings.helpButton === "hide" || ((_a = this.settings.helpButtonReplacement) == null ? void 0 : _a.enabled);
    document.body.classList.toggle("ui-tweaker-hide-help-button", shouldHideHelpButton);
  }
  async updateHelpButton() {
    var _a, _b, _c, _d, _e;
    if (!((_a = this.settings.helpButtonReplacement) == null ? void 0 : _a.enabled)) {
      this.restoreHelpButton();
      return;
    }
    if (this.helpButtonObserver) {
      this.helpButtonObserver.disconnect();
    }
    await this.loadSettings();
    this.updateHelpButtonCSS();
    try {
      if (!((_b = this.settings.helpButtonReplacement) == null ? void 0 : _b.enabled)) {
        this.restoreHelpButton();
        return;
      }
      const vaultActions = document.querySelector(".workspace-drawer-vault-actions");
      if (!vaultActions) {
        this.setupHelpButtonObserver();
        setTimeout(() => {
          var _a2;
          if ((_a2 = this.settings.helpButtonReplacement) == null ? void 0 : _a2.enabled) {
            void this.updateHelpButton();
          }
        }, 500);
        return;
      }
      const clickableIcons = Array.from(vaultActions.querySelectorAll(".clickable-icon"));
      let helpButton = null;
      for (const icon of clickableIcons) {
        const svg = icon.querySelector("svg.help");
        if (svg) {
          helpButton = icon;
          break;
        }
      }
      if (!helpButton) {
        this.setupHelpButtonObserver();
        setTimeout(() => {
          var _a2;
          if ((_a2 = this.settings.helpButtonReplacement) == null ? void 0 : _a2.enabled) {
            void this.updateHelpButton();
          }
        }, 500);
        return;
      }
      if (this.customHelpButton && this.customHelpButton.parentElement && document.body.contains(this.customHelpButton)) {
        this.customHelpButton.remove();
      }
      this.customHelpButton = void 0;
      const customButton = helpButton.cloneNode(true);
      customButton.removeAttribute("aria-label");
      customButton.setAttribute("data-ui-tweaker-help-replacement", "true");
      customButton.classList.add("ui-tweaker-help-replacement");
      customButton.onclick = null;
      const iconContainer = ((_c = customButton.querySelector("svg")) == null ? void 0 : _c.parentElement) || customButton;
      const iconId = (_d = this.settings.helpButtonReplacement) == null ? void 0 : _d.iconId;
      if (iconId) {
        try {
          (0, import_obsidian15.setIcon)(iconContainer, iconId);
        } catch (e) {
        }
      } else {
        try {
          (0, import_obsidian15.setIcon)(iconContainer, "wrench");
        } catch (e) {
        }
      }
      customButton.addEventListener("click", (evt) => {
        var _a2;
        evt.preventDefault();
        evt.stopPropagation();
        const commandId = (_a2 = this.settings.helpButtonReplacement) == null ? void 0 : _a2.commandId;
        if (commandId) {
          void (async () => {
            try {
              const commands = this.app.commands;
              if (commands == null ? void 0 : commands.executeCommandById) {
                await commands.executeCommandById(commandId);
              } else {
                throw new Error("Command execution not available");
              }
            } catch (e) {
              new import_obsidian15.Notice(`Failed to execute command: ${commandId}`);
            }
          })();
        }
      }, true);
      (_e = helpButton.parentElement) == null ? void 0 : _e.insertBefore(customButton, helpButton.nextSibling);
      this.customHelpButton = customButton;
    } finally {
      setTimeout(() => {
        var _a2;
        if ((_a2 = this.settings.helpButtonReplacement) == null ? void 0 : _a2.enabled) {
          this.setupHelpButtonObserver();
        }
      }, 1e3);
    }
  }
  setupHelpButtonObserver() {
    var _a;
    if (this.helpButtonObserver) {
      this.helpButtonObserver.disconnect();
    }
    if (!((_a = this.settings.helpButtonReplacement) == null ? void 0 : _a.enabled)) {
      return;
    }
    let updateTimeout = null;
    this.helpButtonObserver = new MutationObserver(() => {
      if (updateTimeout) {
        clearTimeout(updateTimeout);
      }
      updateTimeout = window.setTimeout(() => {
        const vaultActions2 = document.querySelector(".workspace-drawer-vault-actions");
        if (!vaultActions2) return;
        const customButtonExists = this.customHelpButton && this.customHelpButton.parentElement && document.body.contains(this.customHelpButton) && this.customHelpButton.hasAttribute("data-ui-tweaker-help-replacement");
        if (!customButtonExists) {
          if (this.customHelpButton && !document.body.contains(this.customHelpButton)) {
            this.customHelpButton = void 0;
          }
          void this.updateHelpButton();
        }
      }, 100);
    });
    const vaultActions = document.querySelector(".workspace-drawer-vault-actions");
    if (vaultActions) {
      this.helpButtonObserver.observe(vaultActions, {
        childList: true,
        subtree: true
      });
    }
    const vaultProfile = document.querySelector(".workspace-sidedock-vault-profile");
    if (vaultProfile) {
      this.helpButtonObserver.observe(vaultProfile, {
        childList: true,
        subtree: false
      });
    }
    if (!vaultActions && !vaultProfile) {
      const workspace = document.querySelector(".workspace-split");
      if (workspace) {
        this.helpButtonObserver.observe(workspace, {
          childList: true,
          subtree: true
        });
      } else {
        this.helpButtonObserver.observe(document.body, {
          childList: true,
          subtree: true
        });
      }
    }
  }
  restoreHelpButton() {
    var _a, _b;
    const shouldHideHelpButton = this.settings.helpButton === "hide" || ((_a = this.settings.helpButtonReplacement) == null ? void 0 : _a.enabled);
    if (!shouldHideHelpButton) {
      document.body.classList.remove("ui-tweaker-hide-help-button");
    }
    if (!((_b = this.settings.helpButtonReplacement) == null ? void 0 : _b.enabled) && this.customHelpButton) {
      if (document.body.contains(this.customHelpButton)) {
        this.customHelpButton.remove();
      }
      this.customHelpButton = void 0;
    }
  }
  setupSyncButtonReplacement() {
    var _a;
    this.updateSyncButtonCSS();
    if (!((_a = this.settings.syncButtonReplacement) == null ? void 0 : _a.enabled) || !import_obsidian15.Platform.isMobile) {
      this.restoreSyncButton();
      return;
    }
    const trySetup = () => {
      var _a2;
      if ((_a2 = this.settings.syncButtonReplacement) == null ? void 0 : _a2.enabled) {
        void this.updateSyncButton();
      }
    };
    trySetup();
    setTimeout(trySetup, 500);
    setTimeout(() => {
      this.setupSyncButtonObserver();
    }, 1e3);
  }
  updateSyncButtonCSS() {
    var _a, _b;
    const shouldHide = ((_b = (_a = this.settings.syncButtonReplacement) == null ? void 0 : _a.enabled) != null ? _b : false) && import_obsidian15.Platform.isMobile;
    document.body.classList.toggle("ui-tweaker-hide-sync-button", shouldHide);
  }
  async updateSyncButton() {
    var _a, _b, _c, _d;
    if (!((_a = this.settings.syncButtonReplacement) == null ? void 0 : _a.enabled)) {
      this.restoreSyncButton();
      return;
    }
    if (this.syncButtonObserver) {
      this.syncButtonObserver.disconnect();
    }
    await this.loadSettings();
    this.updateSyncButtonCSS();
    try {
      if (!((_b = this.settings.syncButtonReplacement) == null ? void 0 : _b.enabled)) {
        this.restoreSyncButton();
        return;
      }
      let syncButton = null;
      const rightDrawer = document.querySelector(".workspace-drawer.mod-right");
      if (rightDrawer) {
        const drawerHeader = rightDrawer.querySelector(".workspace-drawer-header");
        if (drawerHeader) {
          syncButton = drawerHeader.querySelector(".sync-status-icon, .workspace-drawer-header-icon.sync-status-icon");
          if (!syncButton) {
            const clickableIcons = Array.from(drawerHeader.querySelectorAll(".clickable-icon"));
            for (const icon of clickableIcons) {
              const svg = icon.querySelector("svg.refresh-cw-off, svg.refresh-cw");
              if (svg) {
                syncButton = icon;
                break;
              }
            }
          }
        }
      }
      if (!syncButton) {
        this.setupSyncButtonObserver();
        setTimeout(() => {
          var _a2;
          if ((_a2 = this.settings.syncButtonReplacement) == null ? void 0 : _a2.enabled) {
            void this.updateSyncButton();
          }
        }, 500);
        return;
      }
      if (this.customSyncButton && this.customSyncButton.parentElement && document.body.contains(this.customSyncButton)) {
        this.customSyncButton.remove();
      }
      this.customSyncButton = void 0;
      const customButton = syncButton.cloneNode(true);
      customButton.removeAttribute("aria-label");
      customButton.setAttribute("data-ui-tweaker-sync-replacement", "true");
      customButton.classList.add("ui-tweaker-sync-replacement");
      customButton.onclick = null;
      customButton.removeAttribute("data-command");
      let iconContainer = null;
      const existingSvg = customButton.querySelector("svg");
      if (existingSvg) {
        iconContainer = existingSvg.parentElement;
        existingSvg.remove();
      } else {
        iconContainer = customButton;
      }
      if (iconContainer) {
        setCssProps(iconContainer, {
          display: "flex",
          alignItems: "center",
          justifyContent: "center"
        });
      }
      const iconId = (_c = this.settings.syncButtonReplacement) == null ? void 0 : _c.iconId;
      if (iconId) {
        try {
          (0, import_obsidian15.setIcon)(iconContainer, iconId);
        } catch (e) {
        }
      } else {
        try {
          (0, import_obsidian15.setIcon)(iconContainer, "wrench");
        } catch (e) {
        }
      }
      const parent = syncButton.parentElement;
      if (parent) {
        parent.insertBefore(customButton, syncButton);
      } else {
        (_d = syncButton.parentElement) == null ? void 0 : _d.insertBefore(customButton, syncButton.nextSibling);
      }
      customButton.addEventListener("click", (evt) => {
        var _a2, _b2, _c2, _d2, _e;
        evt.preventDefault();
        evt.stopPropagation();
        const commandId = (_a2 = this.settings.syncButtonReplacement) == null ? void 0 : _a2.commandId;
        if (commandId) {
          if (commandId === "open-settings" || commandId === "ui-tweaker:open-settings") {
            const settingApi = this.app.setting;
            if (settingApi) {
              (_b2 = settingApi.open) == null ? void 0 : _b2.call(settingApi);
              const pluginInstance = this;
              if (((_c2 = pluginInstance.settingTab) == null ? void 0 : _c2.id) && settingApi.openTabById) {
                settingApi.openTabById(pluginInstance.settingTab.id);
              }
            }
          } else {
            (_e = (_d2 = this.app.commands) == null ? void 0 : _d2.executeCommandById) == null ? void 0 : _e.call(_d2, commandId).catch((error) => {
              console.warn("[UI Tweaker] Error executing command:", error);
              new import_obsidian15.Notice(`Failed to execute command: ${commandId}`);
            });
          }
        }
      }, true);
      customButton.addEventListener("touchstart", (evt) => {
        var _a2, _b2, _c2, _d2, _e;
        evt.preventDefault();
        evt.stopPropagation();
        const commandId = (_a2 = this.settings.syncButtonReplacement) == null ? void 0 : _a2.commandId;
        if (commandId) {
          if (commandId === "open-settings" || commandId === "ui-tweaker:open-settings") {
            const settingApi = this.app.setting;
            if (settingApi) {
              (_b2 = settingApi.open) == null ? void 0 : _b2.call(settingApi);
              const pluginInstance = this;
              if (((_c2 = pluginInstance.settingTab) == null ? void 0 : _c2.id) && settingApi.openTabById) {
                settingApi.openTabById(pluginInstance.settingTab.id);
              }
            }
          } else {
            (_e = (_d2 = this.app.commands) == null ? void 0 : _d2.executeCommandById) == null ? void 0 : _e.call(_d2, commandId).catch((error) => {
              console.warn("[UI Tweaker] Error executing command:", error);
              new import_obsidian15.Notice(`Failed to execute command: ${commandId}`);
            });
          }
        }
      }, true);
      setCssProps(syncButton, { display: "none" });
      syncButton.setAttribute("data-ui-tweaker-original-sync-hidden", "true");
      this.originalSyncButton = syncButton;
      this.customSyncButton = customButton;
    } finally {
      setTimeout(() => {
        var _a2;
        if ((_a2 = this.settings.syncButtonReplacement) == null ? void 0 : _a2.enabled) {
          this.setupSyncButtonObserver();
        }
      }, 1e3);
    }
  }
  setupSyncButtonObserver() {
    var _a;
    if (this.syncButtonObserver) {
      this.syncButtonObserver.disconnect();
    }
    if (!((_a = this.settings.syncButtonReplacement) == null ? void 0 : _a.enabled)) {
      return;
    }
    let updateTimeout = null;
    this.syncButtonObserver = new MutationObserver(() => {
      if (updateTimeout) {
        clearTimeout(updateTimeout);
      }
      updateTimeout = window.setTimeout(() => {
        const rightDrawer2 = document.querySelector(".workspace-drawer.mod-right");
        if (!rightDrawer2) return;
        if (this.originalSyncButton && document.body.contains(this.originalSyncButton)) {
          setCssProps(this.originalSyncButton, { display: "none" });
        }
        const drawerHeader = rightDrawer2.querySelector(".workspace-drawer-header");
        if (drawerHeader) {
          const allSyncButtons = Array.from(drawerHeader.querySelectorAll(".sync-status-icon, .workspace-drawer-header-icon.sync-status-icon, .clickable-icon.sync-status-icon"));
          for (const btn of allSyncButtons) {
            const button = btn;
            if (!button.hasAttribute("data-ui-tweaker-sync-replacement") && !button.hasAttribute("data-ui-tweaker-original-sync-hidden")) {
              setCssProps(button, { display: "none" });
              button.setAttribute("data-ui-tweaker-original-sync-hidden", "true");
              this.originalSyncButton = button;
            }
          }
        }
        const customButtonExists = this.customSyncButton && this.customSyncButton.parentElement && document.body.contains(this.customSyncButton) && this.customSyncButton.hasAttribute("data-ui-tweaker-sync-replacement");
        if (!customButtonExists && !this.isUpdatingSyncButton) {
          if (this.customSyncButton && !document.body.contains(this.customSyncButton)) {
            this.customSyncButton = void 0;
          }
          this.isUpdatingSyncButton = true;
          void this.updateSyncButton().finally(() => {
            this.isUpdatingSyncButton = false;
          });
        }
      }, 100);
    });
    const rightDrawer = document.querySelector(".workspace-drawer.mod-right");
    if (rightDrawer) {
      this.syncButtonObserver.observe(rightDrawer, {
        childList: true,
        subtree: true
      });
      const drawerHeader = rightDrawer.querySelector(".workspace-drawer-header");
      if (drawerHeader) {
        this.syncButtonObserver.observe(drawerHeader, {
          childList: true,
          subtree: true
        });
      }
    }
    if (!rightDrawer) {
      const workspace = document.querySelector(".workspace-split.mod-right-split");
      if (workspace) {
        this.syncButtonObserver.observe(workspace, {
          childList: true,
          subtree: true
        });
      } else {
        this.syncButtonObserver.observe(document.body, {
          childList: true,
          subtree: true
        });
      }
    }
  }
  /**
   * Set up command execution interceptor to update button toggle states
   * This intercepts command execution globally to update buttons when commands are run
   * from anywhere (command palette, hotkeys, etc.)
   */
  setupToggleStateRefresh() {
    const commands = this.app.commands;
    if (!(commands == null ? void 0 : commands.executeCommandById)) return;
    const originalExecute = commands.executeCommandById.bind(commands);
    commands.executeCommandById = async (id) => {
      var _a, _b;
      const isTracked = ((_a = this.settings.explorerCommands) == null ? void 0 : _a.some((p) => p.id === id && p.toggleIcon)) || ((_b = this.settings.tabBarCommands) == null ? void 0 : _b.some((p) => p.id === id && p.toggleIcon));
      if (isTracked) {
        recordCommandExecution(id);
        await originalExecute(id);
        setTimeout(() => {
          if (this.explorerManager) {
            this.explorerManager.refreshToggleStates();
          }
          if (this.tabBarManager) {
            this.tabBarManager.refreshToggleStates();
          }
        }, 50);
        setTimeout(() => {
          if (this.explorerManager) {
            this.explorerManager.refreshToggleStates();
          }
          if (this.tabBarManager) {
            this.tabBarManager.refreshToggleStates();
          }
        }, 300);
      } else {
        await originalExecute(id);
      }
    };
  }
  restoreSyncButton() {
    var _a, _b;
    if (!((_a = this.settings.syncButtonReplacement) == null ? void 0 : _a.enabled) || !import_obsidian15.Platform.isMobile) {
      document.body.classList.remove("ui-tweaker-hide-sync-button");
    }
    if (!((_b = this.settings.syncButtonReplacement) == null ? void 0 : _b.enabled)) {
      if (this.customSyncButton && document.body.contains(this.customSyncButton)) {
        this.customSyncButton.remove();
      }
      this.customSyncButton = void 0;
      if (this.originalSyncButton && document.body.contains(this.originalSyncButton)) {
        this.originalSyncButton.style.removeProperty("display");
      }
      this.originalSyncButton = void 0;
    }
  }
};
//# sourceMappingURL=data:application/json;base64,ewogICJ2ZXJzaW9uIjogMywKICAic291cmNlcyI6IFsic3JjL21haW4udHMiLCAic3JjL3NldHRpbmdzLnRzIiwgInNyYy91aU1hbmFnZXIudHMiLCAic3JjL2NvbW1hbmRzLnRzIiwgInNyYy91aS9TZXR0aW5nc1RhYi50cyIsICJzcmMvdWkvY29tbW9uL1RhYlJlbmRlcmVyLnRzIiwgInNyYy91dGlscy9zZXR0aW5ncy1jb21wYXQudHMiLCAic3JjL21vZGFscy9Db21tYW5kUGlja2VyTW9kYWwudHMiLCAic3JjL21vZGFscy9JY29uUGlja2VyTW9kYWwudHMiLCAic3JjL3VpL3RhYnMvSGlkZXJUYWIudHMiLCAic3JjL3VpL3RhYnMvVGFiQmFyVGFiLnRzIiwgInNyYy9tb2RhbHMvTmFtZVBpY2tlck1vZGFsLnRzIiwgInNyYy91dGlscy9jaG9vc2VDb21tYW5kLnRzIiwgInNyYy91aS90YWJzL1N0YXR1c0JhclRhYi50cyIsICJzcmMvdWkvdGFicy9FeHBsb3JlclRhYi50cyIsICJzcmMvdWkvdGFicy9Nb2JpbGVUYWIudHMiLCAic3JjL21hbmFnZXIvVGFiQmFyTWFuYWdlci50cyIsICJzcmMvdXRpbHMvY29tbWFuZFV0aWxzLnRzIiwgInNyYy9tYW5hZ2VyL1N0YXR1c0Jhck1hbmFnZXIudHMiLCAic3JjL21hbmFnZXIvRXhwbG9yZXJNYW5hZ2VyLnRzIl0sCiAgInNvdXJjZXNDb250ZW50IjogWyIvKipcbiAqIE1haW4gcGx1Z2luIGZpbGVcbiAqL1xuXG5pbXBvcnQgeyBQbHVnaW4sIE5vdGljZSwgc2V0SWNvbiwgUGxhdGZvcm0gfSBmcm9tICdvYnNpZGlhbic7XG5pbXBvcnQgeyBVSVNldHRpbmdzLCBERUZBVUxUX1NFVFRJTkdTIH0gZnJvbSAnLi9zZXR0aW5ncyc7XG5pbXBvcnQgeyBVSU1hbmFnZXIsIHNldENzc1Byb3BzIH0gZnJvbSAnLi91aU1hbmFnZXInO1xuaW1wb3J0IHsgcmVnaXN0ZXJDb21tYW5kcyB9IGZyb20gJy4vY29tbWFuZHMnO1xuaW1wb3J0IHsgVUlUd2Vha2VyU2V0dGluZ1RhYiB9IGZyb20gJy4vdWkvU2V0dGluZ3NUYWInO1xuaW1wb3J0IHsgVGFiQmFyTWFuYWdlciB9IGZyb20gJy4vbWFuYWdlci9UYWJCYXJNYW5hZ2VyJztcbmltcG9ydCB7IFN0YXR1c0Jhck1hbmFnZXIgfSBmcm9tICcuL21hbmFnZXIvU3RhdHVzQmFyTWFuYWdlcic7XG5pbXBvcnQgeyBFeHBsb3Jlck1hbmFnZXIgfSBmcm9tICcuL21hbmFnZXIvRXhwbG9yZXJNYW5hZ2VyJztcbmltcG9ydCB7IHJlY29yZENvbW1hbmRFeGVjdXRpb24gfSBmcm9tICcuL3V0aWxzL2NvbW1hbmRVdGlscyc7XG5cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIFVJVHdlYWtlclBsdWdpbiBleHRlbmRzIFBsdWdpbiB7XG5cdHNldHRpbmdzOiBVSVNldHRpbmdzO1xuXHRwcml2YXRlIHVpTWFuYWdlcjogVUlNYW5hZ2VyO1xuXHRwcml2YXRlIGN1c3RvbUhlbHBCdXR0b24/OiBIVE1MRWxlbWVudDtcblx0cHJpdmF0ZSBoZWxwQnV0dG9uT2JzZXJ2ZXI/OiBNdXRhdGlvbk9ic2VydmVyO1xuXHRwcml2YXRlIGN1c3RvbVN5bmNCdXR0b24/OiBIVE1MRWxlbWVudDtcblx0cHJpdmF0ZSBzeW5jQnV0dG9uT2JzZXJ2ZXI/OiBNdXRhdGlvbk9ic2VydmVyO1xuXHRwcml2YXRlIG9yaWdpbmFsU3luY0J1dHRvbj86IEhUTUxFbGVtZW50OyAvLyBTdG9yZSBvcmlnaW5hbCB0byByZXN0b3JlIGxhdGVyXG5cdHByaXZhdGUgaXNVcGRhdGluZ1N5bmNCdXR0b246IGJvb2xlYW4gPSBmYWxzZTsgLy8gUHJldmVudCBpbmZpbml0ZSBsb29wc1xuXHRwdWJsaWMgc2V0dGluZ1RhYj86IFVJVHdlYWtlclNldHRpbmdUYWI7XG5cdHB1YmxpYyB0YWJCYXJNYW5hZ2VyPzogVGFiQmFyTWFuYWdlcjtcblx0cHVibGljIHN0YXR1c0Jhck1hbmFnZXI/OiBTdGF0dXNCYXJNYW5hZ2VyO1xuXHRwdWJsaWMgZXhwbG9yZXJNYW5hZ2VyPzogRXhwbG9yZXJNYW5hZ2VyO1xuXG5cdGFzeW5jIG9ubG9hZCgpIHtcblx0XHRhd2FpdCB0aGlzLmxvYWRTZXR0aW5ncygpO1xuXG5cdFx0Ly8gSW5pdGlhbGl6ZSBVSSBtYW5hZ2VyXG5cdFx0dGhpcy51aU1hbmFnZXIgPSBuZXcgVUlNYW5hZ2VyKHRoaXMuc2V0dGluZ3MpO1xuXHRcdHRoaXMudWlNYW5hZ2VyLmFwcGx5U3R5bGVzKCk7XG5cblx0XHQvLyBJbml0aWFsaXplIFRhYiBCYXIgTWFuYWdlclxuXHRcdGlmICghdGhpcy5zZXR0aW5ncy50YWJCYXJDb21tYW5kcykge1xuXHRcdFx0dGhpcy5zZXR0aW5ncy50YWJCYXJDb21tYW5kcyA9IFtdO1xuXHRcdH1cblx0XHR0aGlzLnRhYkJhck1hbmFnZXIgPSBuZXcgVGFiQmFyTWFuYWdlcih0aGlzKTtcblxuXHRcdC8vIEluaXRpYWxpemUgU3RhdHVzIEJhciBNYW5hZ2VyXG5cdFx0aWYgKCF0aGlzLnNldHRpbmdzLnN0YXR1c0Jhckl0ZW1zKSB7XG5cdFx0XHR0aGlzLnNldHRpbmdzLnN0YXR1c0Jhckl0ZW1zID0gW107XG5cdFx0fVxuXHRcdHRoaXMuc3RhdHVzQmFyTWFuYWdlciA9IG5ldyBTdGF0dXNCYXJNYW5hZ2VyKHRoaXMpO1xuXG5cdFx0Ly8gSW5pdGlhbGl6ZSBFeHBsb3JlciBNYW5hZ2VyXG5cdFx0aWYgKCF0aGlzLnNldHRpbmdzLmV4cGxvcmVyQ29tbWFuZHMpIHtcblx0XHRcdHRoaXMuc2V0dGluZ3MuZXhwbG9yZXJDb21tYW5kcyA9IFtdO1xuXHRcdH1cblx0XHR0aGlzLmV4cGxvcmVyTWFuYWdlciA9IG5ldyBFeHBsb3Jlck1hbmFnZXIodGhpcyk7XG5cblx0XHQvLyBSZWdpc3RlciBjb21tYW5kc1xuXHRcdHJlZ2lzdGVyQ29tbWFuZHMoe1xuXHRcdFx0cGx1Z2luOiB0aGlzLFxuXHRcdFx0c2V0dGluZ3M6IHRoaXMuc2V0dGluZ3MsXG5cdFx0XHRzYXZlU2V0dGluZ3M6ICgpID0+IHRoaXMuc2F2ZVNldHRpbmdzKCksXG5cdFx0XHRyZWZyZXNoOiAoKSA9PiB0aGlzLnJlZnJlc2goKSxcblx0XHR9KTtcblxuXHRcdC8vIFNldCB1cCBjb21tYW5kIGV4ZWN1dGlvbiBpbnRlcmNlcHRvciBhbmQgcGVyaW9kaWMgcmVmcmVzaCBmb3IgYnV0dG9uIHRvZ2dsZSBzdGF0ZXNcblx0XHR0aGlzLnNldHVwVG9nZ2xlU3RhdGVSZWZyZXNoKCk7XG5cdFx0XG5cdFx0Ly8gU2V0IHVwIHBlcmlvZGljIHJlZnJlc2ggdG8gY2F0Y2ggY29tbWFuZHMgZXhlY3V0ZWQgb3V0c2lkZSB0aGUgaW50ZXJjZXB0b3Jcblx0XHQvLyAoZS5nLiwga2V5Ym9hcmQgc2hvcnRjdXRzIHRoYXQgYnlwYXNzIGV4ZWN1dGVDb21tYW5kQnlJZClcblx0XHQvLyBQZXJpb2RpYyByZWZyZXNoIHRvIGNhdGNoIGNvbW1hbmRzIGV4ZWN1dGVkIG91dHNpZGUgdGhlIGludGVyY2VwdG9yXG5cdFx0Ly8gVGhpcyBpcyBjcml0aWNhbCBmb3IgY29tbWFuZHMgZXhlY3V0ZWQgdmlhIGtleWJvYXJkIHNob3J0Y3V0cywgY29tbWFuZCBwYWxldHRlLCBldGMuXG5cdFx0Ly8gV2UgcmVmcmVzaCBmcmVxdWVudGx5IHRvIGVuc3VyZSBidXR0b25zIHN0YXkgaW4gc3luY1xuXHRcdHRoaXMucmVnaXN0ZXJJbnRlcnZhbChcblx0XHRcdHdpbmRvdy5zZXRJbnRlcnZhbCgoKSA9PiB7XG5cdFx0XHRcdGNvbnN0IGhhc1RvZ2dsZUNvbW1hbmRzID0gXG5cdFx0XHRcdFx0KHRoaXMuc2V0dGluZ3MuZXhwbG9yZXJDb21tYW5kcz8uc29tZShwID0+IHAudG9nZ2xlSWNvbikgPz8gZmFsc2UpIHx8XG5cdFx0XHRcdFx0KHRoaXMuc2V0dGluZ3MudGFiQmFyQ29tbWFuZHM/LnNvbWUocCA9PiBwLnRvZ2dsZUljb24pID8/IGZhbHNlKTtcblx0XHRcdFx0XG5cdFx0XHRcdGlmIChoYXNUb2dnbGVDb21tYW5kcykge1xuXHRcdFx0XHRcdC8vIEFsd2F5cyByZWZyZXNoIC0gaXNDb21tYW5kQ2hlY2tlZCB3aWxsIGNoZWNrIGFjdHVhbCBzdGF0ZSB2aWEgY2hlY2tDYWxsYmFja1xuXHRcdFx0XHRcdC8vIG9yIGRpcmVjdCBkZXRlY3Rpb24sIGVuc3VyaW5nIGJ1dHRvbnMgc3RheSBpbiBzeW5jXG5cdFx0XHRcdFx0aWYgKHRoaXMuZXhwbG9yZXJNYW5hZ2VyKSB7XG5cdFx0XHRcdFx0XHR0aGlzLmV4cGxvcmVyTWFuYWdlci5yZWZyZXNoVG9nZ2xlU3RhdGVzKCk7XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHRcdGlmICh0aGlzLnRhYkJhck1hbmFnZXIpIHtcblx0XHRcdFx0XHRcdHRoaXMudGFiQmFyTWFuYWdlci5yZWZyZXNoVG9nZ2xlU3RhdGVzKCk7XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHR9XG5cdFx0XHR9LCAzMDApIGFzIHVua25vd24gYXMgbnVtYmVyIC8vIFJlZnJlc2ggZXZlcnkgMzAwbXMgdG8ga2VlcCBidXR0b25zIGluIHN5bmMgKGluY3JlYXNlZCBmcmVxdWVuY3kpXG5cdFx0KTtcblxuXHRcdC8vIFdhdGNoIGZvciB0aGVtZSBjaGFuZ2VzIG9uIGJvZHkgZWxlbWVudCB0byBpbW1lZGlhdGVseSB1cGRhdGUgdGhlbWUgdG9nZ2xlIGJ1dHRvbnNcblx0XHQvLyBUaGlzIGNhdGNoZXMgdGhlbWUgY2hhbmdlcyBmcm9tIGFueSBzb3VyY2UgKGtleWJvYXJkIHNob3J0Y3V0cywgY29tbWFuZCBwYWxldHRlLCBldGMuKVxuXHRcdGNvbnN0IHRoZW1lT2JzZXJ2ZXIgPSBuZXcgTXV0YXRpb25PYnNlcnZlcigoKSA9PiB7XG5cdFx0XHQvLyBUaGVtZSBjbGFzcyBjaGFuZ2VkIC0gcmVmcmVzaCB0b2dnbGUgc3RhdGVzIGltbWVkaWF0ZWx5XG5cdFx0XHRpZiAodGhpcy5leHBsb3Jlck1hbmFnZXIpIHtcblx0XHRcdFx0dGhpcy5leHBsb3Jlck1hbmFnZXIucmVmcmVzaFRvZ2dsZVN0YXRlcygpO1xuXHRcdFx0fVxuXHRcdFx0aWYgKHRoaXMudGFiQmFyTWFuYWdlcikge1xuXHRcdFx0XHR0aGlzLnRhYkJhck1hbmFnZXIucmVmcmVzaFRvZ2dsZVN0YXRlcygpO1xuXHRcdFx0fVxuXHRcdH0pO1xuXG5cdFx0Ly8gT2JzZXJ2ZSBib2R5IGZvciBjbGFzcyBjaGFuZ2VzICh0aGVtZSBjaGFuZ2VzKVxuXHRcdHRoZW1lT2JzZXJ2ZXIub2JzZXJ2ZShkb2N1bWVudC5ib2R5LCB7XG5cdFx0XHRhdHRyaWJ1dGVzOiB0cnVlLFxuXHRcdFx0YXR0cmlidXRlRmlsdGVyOiBbJ2NsYXNzJ11cblx0XHR9KTtcblxuXHRcdC8vIFJlZ2lzdGVyIHNldHRpbmdzIHRhYlxuXHRcdHRoaXMuc2V0dGluZ1RhYiA9IG5ldyBVSVR3ZWFrZXJTZXR0aW5nVGFiKHRoaXMuYXBwLCB0aGlzKTtcblx0XHR0aGlzLmFkZFNldHRpbmdUYWIodGhpcy5zZXR0aW5nVGFiKTtcblxuXHRcdC8vIFNldCB1cCBoZWxwIGJ1dHRvbiByZXBsYWNlbWVudFxuXHRcdHRoaXMuc2V0dXBIZWxwQnV0dG9uUmVwbGFjZW1lbnQoKTtcblx0XHRcblx0XHQvLyBTZXQgdXAgc3luYyBidXR0b24gcmVwbGFjZW1lbnQgKG9ubHkgb24gbW9iaWxlKVxuXHRcdGlmIChQbGF0Zm9ybS5pc01vYmlsZSkge1xuXHRcdFx0dGhpcy5zZXR1cFN5bmNCdXR0b25SZXBsYWNlbWVudCgpO1xuXHRcdH0gZWxzZSB7XG5cdFx0XHQvLyBNYWtlIHN1cmUgY2xhc3MgaXMgcmVtb3ZlZCBvbiBkZXNrdG9wXG5cdFx0XHRkb2N1bWVudC5ib2R5LmNsYXNzTGlzdC5yZW1vdmUoJ3VpLXR3ZWFrZXItaGlkZS1zeW5jLWJ1dHRvbicpO1xuXHRcdH1cblx0fVxuXG5cdG9udW5sb2FkKCkge1xuXHRcdGlmICh0aGlzLnVpTWFuYWdlcikge1xuXHRcdFx0dGhpcy51aU1hbmFnZXIuY2xlYW51cCgpO1xuXHRcdH1cblx0XHR0aGlzLnJlc3RvcmVIZWxwQnV0dG9uKCk7XG5cdFx0aWYgKHRoaXMuaGVscEJ1dHRvbk9ic2VydmVyKSB7XG5cdFx0XHR0aGlzLmhlbHBCdXR0b25PYnNlcnZlci5kaXNjb25uZWN0KCk7XG5cdFx0fVxuXHRcdHRoaXMucmVzdG9yZVN5bmNCdXR0b24oKTtcblx0XHRpZiAodGhpcy5zeW5jQnV0dG9uT2JzZXJ2ZXIpIHtcblx0XHRcdHRoaXMuc3luY0J1dHRvbk9ic2VydmVyLmRpc2Nvbm5lY3QoKTtcblx0XHR9XG5cdH1cblxuXHRhc3luYyBsb2FkU2V0dGluZ3MoKSB7XG5cdFx0dHJ5IHtcblx0XHRcdGNvbnN0IGRhdGEgPSBhd2FpdCB0aGlzLmxvYWREYXRhKCkgYXMgUGFydGlhbDxVSVNldHRpbmdzPiB8IG51bGw7XG5cdFx0XHQvLyBIYW5kbGUgY29ycnVwdGVkIG9yIGVtcHR5IGRhdGFcblx0XHRcdGlmICghZGF0YSB8fCB0eXBlb2YgZGF0YSAhPT0gJ29iamVjdCcgfHwgQXJyYXkuaXNBcnJheShkYXRhKSkge1xuXHRcdFx0XHR0aGlzLnNldHRpbmdzID0gT2JqZWN0LmFzc2lnbih7fSwgREVGQVVMVF9TRVRUSU5HUyk7XG5cdFx0XHRcdC8vIFNhdmUgZGVmYXVsdHMgdG8gZml4IGNvcnJ1cHRlZCBmaWxlXG5cdFx0XHRcdGF3YWl0IHRoaXMuc2F2ZVNldHRpbmdzKCk7XG5cdFx0XHRcdHJldHVybjtcblx0XHRcdH1cblx0XHRcdHRoaXMuc2V0dGluZ3MgPSBPYmplY3QuYXNzaWduKHt9LCBERUZBVUxUX1NFVFRJTkdTLCBkYXRhKTtcblx0XHRcdC8vIEVuc3VyZSBoZWxwQnV0dG9uUmVwbGFjZW1lbnQgc3RydWN0dXJlIGV4aXN0c1xuXHRcdFx0aWYgKCF0aGlzLnNldHRpbmdzLmhlbHBCdXR0b25SZXBsYWNlbWVudCkge1xuXHRcdFx0XHR0aGlzLnNldHRpbmdzLmhlbHBCdXR0b25SZXBsYWNlbWVudCA9IHtcblx0XHRcdFx0XHRlbmFibGVkOiBmYWxzZSxcblx0XHRcdFx0XHRjb21tYW5kSWQ6ICcnLFxuXHRcdFx0XHRcdGljb25JZDogJ3NldHRpbmdzLTInLFxuXHRcdFx0XHR9O1xuXHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0Ly8gRW5zdXJlIGljb25JZCBpcyBkZWZpbmVkIGV2ZW4gaWYgaGVscEJ1dHRvblJlcGxhY2VtZW50IGV4aXN0c1xuXHRcdFx0XHRpZiAoIXRoaXMuc2V0dGluZ3MuaGVscEJ1dHRvblJlcGxhY2VtZW50Lmljb25JZCkge1xuXHRcdFx0XHRcdHRoaXMuc2V0dGluZ3MuaGVscEJ1dHRvblJlcGxhY2VtZW50Lmljb25JZCA9ICd3cmVuY2gnO1xuXHRcdFx0XHR9XG5cdFx0XHRcdC8vIE1pZ3JhdGUgb2xkIGNvbW1hbmQgSURzIChyZW1vdmUgdWktdHdlYWtlcjogcHJlZml4KVxuXHRcdFx0XHRpZiAodGhpcy5zZXR0aW5ncy5oZWxwQnV0dG9uUmVwbGFjZW1lbnQuY29tbWFuZElkPy5zdGFydHNXaXRoKCd1aS10d2Vha2VyOicpKSB7XG5cdFx0XHRcdFx0dGhpcy5zZXR0aW5ncy5oZWxwQnV0dG9uUmVwbGFjZW1lbnQuY29tbWFuZElkID0gdGhpcy5zZXR0aW5ncy5oZWxwQnV0dG9uUmVwbGFjZW1lbnQuY29tbWFuZElkLnJlcGxhY2UoL151aS10d2Vha2VyOisvZywgJycpO1xuXHRcdFx0XHRcdC8vIFNhdmUgbWlncmF0ZWQgc2V0dGluZ3Ncblx0XHRcdFx0XHRhd2FpdCB0aGlzLnNhdmVTZXR0aW5ncygpO1xuXHRcdFx0XHR9XG5cdFx0XHR9XG5cdFx0XHRcblx0XHRcdC8vIEVuc3VyZSBzeW5jQnV0dG9uUmVwbGFjZW1lbnQgc3RydWN0dXJlIGV4aXN0c1xuXHRcdFx0aWYgKCF0aGlzLnNldHRpbmdzLnN5bmNCdXR0b25SZXBsYWNlbWVudCkge1xuXHRcdFx0XHR0aGlzLnNldHRpbmdzLnN5bmNCdXR0b25SZXBsYWNlbWVudCA9IHtcblx0XHRcdFx0XHRlbmFibGVkOiBmYWxzZSxcblx0XHRcdFx0XHRjb21tYW5kSWQ6ICcnLFxuXHRcdFx0XHRcdGljb25JZDogJ3dyZW5jaCcsXG5cdFx0XHRcdH07XG5cdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHQvLyBFbnN1cmUgaWNvbklkIGlzIGRlZmluZWQgZXZlbiBpZiBzeW5jQnV0dG9uUmVwbGFjZW1lbnQgZXhpc3RzXG5cdFx0XHRcdGlmICghdGhpcy5zZXR0aW5ncy5zeW5jQnV0dG9uUmVwbGFjZW1lbnQuaWNvbklkKSB7XG5cdFx0XHRcdFx0dGhpcy5zZXR0aW5ncy5zeW5jQnV0dG9uUmVwbGFjZW1lbnQuaWNvbklkID0gJ3dyZW5jaCc7XG5cdFx0XHRcdH1cblx0XHRcdFx0Ly8gTWlncmF0ZSBvbGQgY29tbWFuZCBJRHMgKHJlbW92ZSB1aS10d2Vha2VyOiBwcmVmaXgpXG5cdFx0XHRcdGlmICh0aGlzLnNldHRpbmdzLnN5bmNCdXR0b25SZXBsYWNlbWVudC5jb21tYW5kSWQ/LnN0YXJ0c1dpdGgoJ3VpLXR3ZWFrZXI6JykpIHtcblx0XHRcdFx0XHR0aGlzLnNldHRpbmdzLnN5bmNCdXR0b25SZXBsYWNlbWVudC5jb21tYW5kSWQgPSB0aGlzLnNldHRpbmdzLnN5bmNCdXR0b25SZXBsYWNlbWVudC5jb21tYW5kSWQucmVwbGFjZSgvXnVpLXR3ZWFrZXI6Ky9nLCAnJyk7XG5cdFx0XHRcdFx0Ly8gU2F2ZSBtaWdyYXRlZCBzZXR0aW5nc1xuXHRcdFx0XHRcdGF3YWl0IHRoaXMuc2F2ZVNldHRpbmdzKCk7XG5cdFx0XHRcdH1cblx0XHRcdH1cblx0XHRcdFxuXHRcdFx0Ly8gTWlncmF0ZSBtZE9ubHkgb3IgZmlsZVR5cGVGaWx0ZXIgdG8gc2hvd09uRmlsZVR5cGVzL2hpZGVPbkZpbGVUeXBlcyBmb3IgdGFiQmFyQ29tbWFuZHNcblx0XHRcdGlmICh0aGlzLnNldHRpbmdzLnRhYkJhckNvbW1hbmRzKSB7XG5cdFx0XHRcdGxldCBuZWVkc1NhdmUgPSBmYWxzZTtcblx0XHRcdFx0Zm9yIChjb25zdCBwYWlyIG9mIHRoaXMuc2V0dGluZ3MudGFiQmFyQ29tbWFuZHMpIHtcblx0XHRcdFx0XHQvLyBDaGVjayBpZiBvbGQgcHJvcGVydGllcyBleGlzdCBpbiB0aGUgbG9hZGVkIGRhdGEgKGZvciBiYWNrd2FyZCBjb21wYXRpYmlsaXR5KVxuXHRcdFx0XHRcdGNvbnN0IHBhaXJXaXRoT2xkUHJvcHMgPSBwYWlyIGFzIHsgXG5cdFx0XHRcdFx0XHRtZE9ubHk/OiBib29sZWFuOyBcblx0XHRcdFx0XHRcdGZpbGVUeXBlRmlsdGVyPzogc3RyaW5nO1xuXHRcdFx0XHRcdFx0c2hvd09uRmlsZVR5cGVzPzogc3RyaW5nO1xuXHRcdFx0XHRcdFx0aGlkZU9uRmlsZVR5cGVzPzogc3RyaW5nO1xuXHRcdFx0XHRcdH07XG5cdFx0XHRcdFx0XG5cdFx0XHRcdFx0Ly8gU2tpcCBpZiBhbHJlYWR5IG1pZ3JhdGVkXG5cdFx0XHRcdFx0aWYgKHBhaXIuc2hvd09uRmlsZVR5cGVzICE9PSB1bmRlZmluZWQgfHwgcGFpci5oaWRlT25GaWxlVHlwZXMgIT09IHVuZGVmaW5lZCkge1xuXHRcdFx0XHRcdFx0Y29udGludWU7XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHRcdFxuXHRcdFx0XHRcdC8vIE1pZ3JhdGUgZnJvbSBtZE9ubHk6IHRydWVcblx0XHRcdFx0XHRpZiAocGFpcldpdGhPbGRQcm9wcy5tZE9ubHkgPT09IHRydWUgJiYgIXBhaXIuc2hvd09uRmlsZVR5cGVzKSB7XG5cdFx0XHRcdFx0XHRwYWlyLnNob3dPbkZpbGVUeXBlcyA9ICdtZCxtZHgnO1xuXHRcdFx0XHRcdFx0ZGVsZXRlIHBhaXJXaXRoT2xkUHJvcHMubWRPbmx5O1xuXHRcdFx0XHRcdFx0bmVlZHNTYXZlID0gdHJ1ZTtcblx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0XG5cdFx0XHRcdFx0Ly8gTWlncmF0ZSBmcm9tIGZpbGVUeXBlRmlsdGVyIChvbGQgbWl4ZWQgc3ludGF4KVxuXHRcdFx0XHRcdGlmIChwYWlyV2l0aE9sZFByb3BzLmZpbGVUeXBlRmlsdGVyICYmICFwYWlyLnNob3dPbkZpbGVUeXBlcyAmJiAhcGFpci5oaWRlT25GaWxlVHlwZXMpIHtcblx0XHRcdFx0XHRcdGNvbnN0IGZpbHRlciA9IHBhaXJXaXRoT2xkUHJvcHMuZmlsZVR5cGVGaWx0ZXI7XG5cdFx0XHRcdFx0XHRjb25zdCBwYXJ0cyA9IGZpbHRlci5zcGxpdCgnLCcpLm1hcChwID0+IHAudHJpbSgpKS5maWx0ZXIocCA9PiBwKTtcblx0XHRcdFx0XHRcdGNvbnN0IHNob3dUeXBlczogc3RyaW5nW10gPSBbXTtcblx0XHRcdFx0XHRcdGNvbnN0IGhpZGVUeXBlczogc3RyaW5nW10gPSBbXTtcblx0XHRcdFx0XHRcdFxuXHRcdFx0XHRcdFx0Zm9yIChjb25zdCBwYXJ0IG9mIHBhcnRzKSB7XG5cdFx0XHRcdFx0XHRcdGlmIChwYXJ0LnN0YXJ0c1dpdGgoJy0nKSkge1xuXHRcdFx0XHRcdFx0XHRcdGNvbnN0IGV4dCA9IHBhcnQuc2xpY2UoMSkucmVwbGFjZSgvXlxcLi8sICcnKS50b0xvd2VyQ2FzZSgpO1xuXHRcdFx0XHRcdFx0XHRcdGlmIChleHQpIGhpZGVUeXBlcy5wdXNoKGV4dCk7XG5cdFx0XHRcdFx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdFx0XHRcdFx0Y29uc3QgZXh0ID0gcGFydC5yZXBsYWNlKC9eXFwuLywgJycpLnRvTG93ZXJDYXNlKCk7XG5cdFx0XHRcdFx0XHRcdFx0aWYgKGV4dCkgc2hvd1R5cGVzLnB1c2goZXh0KTtcblx0XHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdFx0XG5cdFx0XHRcdFx0XHRpZiAoc2hvd1R5cGVzLmxlbmd0aCA+IDApIHtcblx0XHRcdFx0XHRcdFx0cGFpci5zaG93T25GaWxlVHlwZXMgPSBzaG93VHlwZXMuam9pbignLCcpO1xuXHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdFx0aWYgKGhpZGVUeXBlcy5sZW5ndGggPiAwKSB7XG5cdFx0XHRcdFx0XHRcdHBhaXIuaGlkZU9uRmlsZVR5cGVzID0gaGlkZVR5cGVzLmpvaW4oJywnKTtcblx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHRcdFxuXHRcdFx0XHRcdFx0ZGVsZXRlIHBhaXJXaXRoT2xkUHJvcHMuZmlsZVR5cGVGaWx0ZXI7XG5cdFx0XHRcdFx0XHRuZWVkc1NhdmUgPSB0cnVlO1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0fVxuXHRcdFx0XHRpZiAobmVlZHNTYXZlKSB7XG5cdFx0XHRcdFx0YXdhaXQgdGhpcy5zYXZlU2V0dGluZ3MoKTtcblx0XHRcdFx0fVxuXHRcdFx0fVxuXHRcdH0gY2F0Y2ggKGVycm9yKSB7XG5cdFx0XHRjb25zb2xlLmVycm9yKCdbVUkgVHdlYWtlcl0gRmFpbGVkIHRvIGxvYWQgc2V0dGluZ3M6JywgZXJyb3IpO1xuXHRcdFx0Ly8gRmFsbCBiYWNrIHRvIGRlZmF1bHRzIGlmIGxvYWRpbmcgZmFpbHNcblx0XHRcdHRoaXMuc2V0dGluZ3MgPSB7IC4uLkRFRkFVTFRfU0VUVElOR1MgfTtcblx0XHR9XG5cdH1cblxuXHRhc3luYyBzYXZlU2V0dGluZ3MoKSB7XG5cdFx0YXdhaXQgdGhpcy5zYXZlRGF0YSh0aGlzLnNldHRpbmdzKTtcblx0fVxuXG5cdHJlZnJlc2goKSB7XG5cdFx0aWYgKHRoaXMudWlNYW5hZ2VyKSB7XG5cdFx0XHR0aGlzLnVpTWFuYWdlci51cGRhdGVTZXR0aW5ncyh0aGlzLnNldHRpbmdzKTtcblx0XHR9XG5cdFx0dGhpcy5leHBsb3Jlck1hbmFnZXI/LmFwcGx5TmF0aXZlSWNvbk92ZXJyaWRlcygpO1xuXHRcdHRoaXMuc2V0dXBIZWxwQnV0dG9uUmVwbGFjZW1lbnQoKTtcblx0XHQvLyBBbHdheXMgdXBkYXRlIHN5bmMgYnV0dG9uIENTUyB0byBlbnN1cmUgaXQgbWF0Y2hlcyBjdXJyZW50IHNldHRpbmdzXG5cdFx0dGhpcy51cGRhdGVTeW5jQnV0dG9uQ1NTKCk7XG5cdFx0aWYgKFBsYXRmb3JtLmlzTW9iaWxlKSB7XG5cdFx0XHR0aGlzLnNldHVwU3luY0J1dHRvblJlcGxhY2VtZW50KCk7XG5cdFx0fSBlbHNlIHtcblx0XHRcdC8vIE1ha2Ugc3VyZSBjbGFzcyBpcyByZW1vdmVkIG9uIGRlc2t0b3Bcblx0XHRcdGRvY3VtZW50LmJvZHkuY2xhc3NMaXN0LnJlbW92ZSgndWktdHdlYWtlci1oaWRlLXN5bmMtYnV0dG9uJyk7XG5cdFx0fVxuXHR9XG5cblx0cHJpdmF0ZSBzZXR1cEhlbHBCdXR0b25SZXBsYWNlbWVudCgpIHtcblx0XHQvLyBPbmx5IHByb2NlZWQgaWYgcmVwbGFjZW1lbnQgaXMgZW5hYmxlZFxuXHRcdGlmICghdGhpcy5zZXR0aW5ncy5oZWxwQnV0dG9uUmVwbGFjZW1lbnQ/LmVuYWJsZWQpIHtcblx0XHRcdHRoaXMucmVzdG9yZUhlbHBCdXR0b24oKTtcblx0XHRcdHJldHVybjtcblx0XHR9XG5cdFx0XG5cdFx0Ly8gVXBkYXRlIENTUyBhbmQgYnV0dG9uXG5cdFx0dGhpcy51cGRhdGVIZWxwQnV0dG9uQ1NTKCk7XG5cdFx0XG5cdFx0Ly8gV2FpdCBmb3IgdGhlIERPTSB0byBiZSByZWFkeVxuXHRcdGNvbnN0IHRyeVNldHVwID0gKCkgPT4ge1xuXHRcdFx0aWYgKHRoaXMuc2V0dGluZ3MuaGVscEJ1dHRvblJlcGxhY2VtZW50Py5lbmFibGVkKSB7XG5cdFx0XHRcdHZvaWQgdGhpcy51cGRhdGVIZWxwQnV0dG9uKCk7XG5cdFx0XHR9XG5cdFx0fTtcblxuXHRcdC8vIFRyeSBpbW1lZGlhdGVseVxuXHRcdHRyeVNldHVwKCk7XG5cblx0XHQvLyBBbHNvIHRyeSBhZnRlciBhIHNob3J0IGRlbGF5IHRvIGVuc3VyZSBET00gaXMgcmVhZHlcblx0XHRzZXRUaW1lb3V0KHRyeVNldHVwLCA1MDApO1xuXG5cdFx0Ly8gU2V0IHVwIG9ic2VydmVyIGFmdGVyIGluaXRpYWwgc2V0dXAgdG8gd2F0Y2ggZm9yIGJ1dHRvbiByZWNyZWF0aW9uXG5cdFx0c2V0VGltZW91dCgoKSA9PiB7XG5cdFx0XHR0aGlzLnNldHVwSGVscEJ1dHRvbk9ic2VydmVyKCk7XG5cdFx0fSwgMTAwMCk7XG5cdH1cblxuXHRwdWJsaWMgdXBkYXRlSGVscEJ1dHRvbkNTUygpIHtcblx0XHQvLyBIaWRlIGhlbHAgYnV0dG9uIGlmIGVpdGhlciBoZWxwQnV0dG9uIGlzIHNldCB0byBcImhpZGVcIiBPUiByZXBsYWNlbWVudCBpcyBlbmFibGVkXG5cdFx0Y29uc3Qgc2hvdWxkSGlkZUhlbHBCdXR0b24gPSB0aGlzLnNldHRpbmdzLmhlbHBCdXR0b24gPT09ICdoaWRlJyB8fCB0aGlzLnNldHRpbmdzLmhlbHBCdXR0b25SZXBsYWNlbWVudD8uZW5hYmxlZDtcblx0XHRcblx0XHQvLyBVc2UgQ1NTIGNsYXNzIGluc3RlYWQgb2Ygc3R5bGUgZWxlbWVudFxuXHRcdGRvY3VtZW50LmJvZHkuY2xhc3NMaXN0LnRvZ2dsZSgndWktdHdlYWtlci1oaWRlLWhlbHAtYnV0dG9uJywgc2hvdWxkSGlkZUhlbHBCdXR0b24pO1xuXHR9XG5cblx0cHVibGljIGFzeW5jIHVwZGF0ZUhlbHBCdXR0b24oKSB7XG5cdFx0Ly8gT25seSBwcm9jZWVkIGlmIHJlcGxhY2VtZW50IGlzIGVuYWJsZWRcblx0XHRpZiAoIXRoaXMuc2V0dGluZ3MuaGVscEJ1dHRvblJlcGxhY2VtZW50Py5lbmFibGVkKSB7XG5cdFx0XHR0aGlzLnJlc3RvcmVIZWxwQnV0dG9uKCk7XG5cdFx0XHRyZXR1cm47XG5cdFx0fVxuXHRcdFxuXHRcdC8vIFRlbXBvcmFyaWx5IGRpc2Nvbm5lY3Qgb2JzZXJ2ZXIgdG8gcHJldmVudCBpbmZpbml0ZSBsb29wc1xuXHRcdGlmICh0aGlzLmhlbHBCdXR0b25PYnNlcnZlcikge1xuXHRcdFx0dGhpcy5oZWxwQnV0dG9uT2JzZXJ2ZXIuZGlzY29ubmVjdCgpO1xuXHRcdH1cblxuXHRcdC8vIEVuc3VyZSB3ZSBoYXZlIHRoZSBsYXRlc3Qgc2V0dGluZ3Ncblx0XHRhd2FpdCB0aGlzLmxvYWRTZXR0aW5ncygpO1xuXG5cdFx0Ly8gVXBkYXRlIENTUyBmaXJzdCAodGhpcyB3aWxsIGhpZGUgdGhlIGhlbHAgYnV0dG9uIGdsb2JhbGx5KVxuXHRcdHRoaXMudXBkYXRlSGVscEJ1dHRvbkNTUygpO1xuXG5cdFx0dHJ5IHtcblx0XHRcdC8vIENoZWNrIGlmIHJlcGxhY2VtZW50IGlzIHN0aWxsIGVuYWJsZWRcblx0XHRcdGlmICghdGhpcy5zZXR0aW5ncy5oZWxwQnV0dG9uUmVwbGFjZW1lbnQ/LmVuYWJsZWQpIHtcblx0XHRcdFx0dGhpcy5yZXN0b3JlSGVscEJ1dHRvbigpO1xuXHRcdFx0XHRyZXR1cm47XG5cdFx0XHR9XG5cblx0XHRcdC8vIEZpbmQgdGhlIGhlbHAgYnV0dG9uXG5cdFx0XHRjb25zdCB2YXVsdEFjdGlvbnMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcud29ya3NwYWNlLWRyYXdlci12YXVsdC1hY3Rpb25zJyk7XG5cdFx0XHRpZiAoIXZhdWx0QWN0aW9ucykge1xuXHRcdFx0XHQvLyBTZXQgdXAgb2JzZXJ2ZXIgdG8gY2F0Y2ggaXQgd2hlbiBpdCBhcHBlYXJzXG5cdFx0XHRcdHRoaXMuc2V0dXBIZWxwQnV0dG9uT2JzZXJ2ZXIoKTtcblx0XHRcdFx0Ly8gQWxzbyByZXRyeSBhZnRlciBhIHNob3J0IGRlbGF5XG5cdFx0XHRcdHNldFRpbWVvdXQoKCkgPT4ge1xuXHRcdFx0XHRcdGlmICh0aGlzLnNldHRpbmdzLmhlbHBCdXR0b25SZXBsYWNlbWVudD8uZW5hYmxlZCkge1xuXHRcdFx0XHRcdFx0dm9pZCB0aGlzLnVwZGF0ZUhlbHBCdXR0b24oKTtcblx0XHRcdFx0XHR9XG5cdFx0XHRcdH0sIDUwMCk7XG5cdFx0XHRcdHJldHVybjtcblx0XHRcdH1cblxuXHRcdFx0Ly8gRmluZCB0aGUgaGVscCBidXR0b24gLSBpdCdzIHRoZSBmaXJzdCBjbGlja2FibGUtaWNvbiB0aGF0IGNvbnRhaW5zIGFuIFNWRyB3aXRoIGNsYXNzIFwiaGVscFwiXG5cdFx0XHRjb25zdCBjbGlja2FibGVJY29ucyA9IEFycmF5LmZyb20odmF1bHRBY3Rpb25zLnF1ZXJ5U2VsZWN0b3JBbGwoJy5jbGlja2FibGUtaWNvbicpKTtcblx0XHRcdGxldCBoZWxwQnV0dG9uOiBIVE1MRWxlbWVudCB8IG51bGwgPSBudWxsO1xuXHRcdFx0XG5cdFx0XHRmb3IgKGNvbnN0IGljb24gb2YgY2xpY2thYmxlSWNvbnMpIHtcblx0XHRcdFx0Y29uc3Qgc3ZnID0gaWNvbi5xdWVyeVNlbGVjdG9yKCdzdmcuaGVscCcpO1xuXHRcdFx0XHRpZiAoc3ZnKSB7XG5cdFx0XHRcdFx0aGVscEJ1dHRvbiA9IGljb24gYXMgSFRNTEVsZW1lbnQ7XG5cdFx0XHRcdFx0YnJlYWs7XG5cdFx0XHRcdH1cblx0XHRcdH1cblx0XHRcdFxuXHRcdFx0aWYgKCFoZWxwQnV0dG9uKSB7XG5cdFx0XHRcdC8vIFNldCB1cCBvYnNlcnZlciB0byBjYXRjaCBpdCB3aGVuIGl0IGFwcGVhcnNcblx0XHRcdFx0dGhpcy5zZXR1cEhlbHBCdXR0b25PYnNlcnZlcigpO1xuXHRcdFx0XHQvLyBBbHNvIHJldHJ5IGFmdGVyIGEgc2hvcnQgZGVsYXlcblx0XHRcdFx0c2V0VGltZW91dCgoKSA9PiB7XG5cdFx0XHRcdFx0aWYgKHRoaXMuc2V0dGluZ3MuaGVscEJ1dHRvblJlcGxhY2VtZW50Py5lbmFibGVkKSB7XG5cdFx0XHRcdFx0XHR2b2lkIHRoaXMudXBkYXRlSGVscEJ1dHRvbigpO1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0fSwgNTAwKTtcblx0XHRcdFx0cmV0dXJuO1xuXHRcdFx0fVxuXG5cdFx0XHQvLyBSZW1vdmUgZXhpc3RpbmcgY3VzdG9tIGJ1dHRvbiBpZiBpdCBleGlzdHMgKGFsd2F5cyByZWNyZWF0ZSB0byB1cGRhdGUgaWNvbi9jb21tYW5kKVxuXHRcdFx0aWYgKHRoaXMuY3VzdG9tSGVscEJ1dHRvbiAmJiB0aGlzLmN1c3RvbUhlbHBCdXR0b24ucGFyZW50RWxlbWVudCAmJiBkb2N1bWVudC5ib2R5LmNvbnRhaW5zKHRoaXMuY3VzdG9tSGVscEJ1dHRvbikpIHtcblx0XHRcdFx0dGhpcy5jdXN0b21IZWxwQnV0dG9uLnJlbW92ZSgpO1xuXHRcdFx0fVxuXHRcdFx0dGhpcy5jdXN0b21IZWxwQnV0dG9uID0gdW5kZWZpbmVkO1xuXG5cdFx0XHQvLyBDcmVhdGUgYSBuZXcgY3VzdG9tIGJ1dHRvblxuXHRcdFx0Y29uc3QgY3VzdG9tQnV0dG9uID0gaGVscEJ1dHRvbi5jbG9uZU5vZGUodHJ1ZSkgYXMgSFRNTEVsZW1lbnQ7XG5cdFx0XHRjdXN0b21CdXR0b24ucmVtb3ZlQXR0cmlidXRlKCdhcmlhLWxhYmVsJyk7XG5cdFx0XHQvLyBBZGQgdW5pcXVlIGlkZW50aWZpZXIgdG8gYXZvaWQgY29uZmxpY3RzIHdpdGggb3RoZXIgcGx1Z2luc1xuXHRcdFx0Y3VzdG9tQnV0dG9uLnNldEF0dHJpYnV0ZSgnZGF0YS11aS10d2Vha2VyLWhlbHAtcmVwbGFjZW1lbnQnLCAndHJ1ZScpO1xuXHRcdFx0Y3VzdG9tQnV0dG9uLmNsYXNzTGlzdC5hZGQoJ3VpLXR3ZWFrZXItaGVscC1yZXBsYWNlbWVudCcpO1xuXHRcdFx0XG5cdFx0XHQvLyBDbGVhciBhbnkgZXhpc3RpbmcgY2xpY2sgaGFuZGxlcnNcblx0XHRcdGN1c3RvbUJ1dHRvbi5vbmNsaWNrID0gbnVsbDtcblx0XHRcdFxuXHRcdFx0Ly8gUmVwbGFjZSB0aGUgaWNvbiB1c2luZyBPYnNpZGlhbidzIHNldEljb24gZnVuY3Rpb25cblx0XHRcdGNvbnN0IGljb25Db250YWluZXIgPSBjdXN0b21CdXR0b24ucXVlcnlTZWxlY3Rvcignc3ZnJyk/LnBhcmVudEVsZW1lbnQgfHwgY3VzdG9tQnV0dG9uO1xuXHRcdFx0Y29uc3QgaWNvbklkID0gdGhpcy5zZXR0aW5ncy5oZWxwQnV0dG9uUmVwbGFjZW1lbnQ/Lmljb25JZDtcblx0XHRcdGlmIChpY29uSWQpIHtcblx0XHRcdFx0dHJ5IHtcblx0XHRcdFx0XHRzZXRJY29uKGljb25Db250YWluZXIsIGljb25JZCk7XG5cdFx0XHRcdH0gY2F0Y2gge1xuXHRcdFx0XHRcdC8vIEVycm9yIHNldHRpbmcgaWNvblxuXHRcdFx0XHR9XG5cdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHR0cnkge1xuXHRcdFx0XHRcdHNldEljb24oaWNvbkNvbnRhaW5lciwgJ3dyZW5jaCcpO1xuXHRcdFx0XHR9IGNhdGNoIHtcblx0XHRcdFx0XHQvLyBFcnJvciBzZXR0aW5nIGRlZmF1bHQgaWNvblxuXHRcdFx0XHR9XG5cdFx0XHR9XG5cblx0XHRcdC8vIEFkZCBvdXIgY3VzdG9tIGNsaWNrIGhhbmRsZXJcblx0XHRcdGN1c3RvbUJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIChldnQ6IE1vdXNlRXZlbnQpID0+IHtcblx0XHRcdFx0ZXZ0LnByZXZlbnREZWZhdWx0KCk7XG5cdFx0XHRcdGV2dC5zdG9wUHJvcGFnYXRpb24oKTtcblx0XHRcdFx0XG5cdFx0XHRcdGNvbnN0IGNvbW1hbmRJZCA9IHRoaXMuc2V0dGluZ3MuaGVscEJ1dHRvblJlcGxhY2VtZW50Py5jb21tYW5kSWQ7XG5cdFx0XHRcdGlmIChjb21tYW5kSWQpIHtcblx0XHRcdFx0XHR2b2lkIChhc3luYyAoKSA9PiB7XG5cdFx0XHRcdFx0XHR0cnkge1xuXHRcdFx0XHRcdFx0XHQvLyBVc2UgdHlwZSBhc3NlcnRpb24gZm9yIGV4ZWN1dGVDb21tYW5kQnlJZCBhcyBpdCdzIG5vdCBpbiB0aGUgcHVibGljIEFQSSB0eXBlc1xuXHRcdFx0XHRcdFx0XHQvLyBidXQgaXMgYXZhaWxhYmxlIGluIHRoZSBydW50aW1lIEFQSVxuXHRcdFx0XHRcdFx0XHRjb25zdCBjb21tYW5kcyA9ICh0aGlzLmFwcCBhcyB7IGNvbW1hbmRzPzogeyBleGVjdXRlQ29tbWFuZEJ5SWQ/OiAoaWQ6IHN0cmluZykgPT4gUHJvbWlzZTx2b2lkPiB9IH0pLmNvbW1hbmRzO1xuXHRcdFx0XHRcdFx0XHRpZiAoY29tbWFuZHM/LmV4ZWN1dGVDb21tYW5kQnlJZCkge1xuXHRcdFx0XHRcdFx0XHRcdGF3YWl0IGNvbW1hbmRzLmV4ZWN1dGVDb21tYW5kQnlJZChjb21tYW5kSWQpO1xuXHRcdFx0XHRcdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRcdFx0XHRcdHRocm93IG5ldyBFcnJvcignQ29tbWFuZCBleGVjdXRpb24gbm90IGF2YWlsYWJsZScpO1xuXHRcdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0XHR9IGNhdGNoIHtcblx0XHRcdFx0XHRcdFx0bmV3IE5vdGljZShgRmFpbGVkIHRvIGV4ZWN1dGUgY29tbWFuZDogJHtjb21tYW5kSWR9YCk7XG5cdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0fSkoKTtcblx0XHRcdFx0fVxuXHRcdFx0fSwgdHJ1ZSk7IC8vIFVzZSBjYXB0dXJlIHBoYXNlIHRvIGVuc3VyZSB3ZSBoYW5kbGUgaXQgZmlyc3RcblxuXHRcdFx0Ly8gSW5zZXJ0IHRoZSBjdXN0b20gYnV0dG9uIHJpZ2h0IGFmdGVyIHRoZSBvcmlnaW5hbCAoaGlkZGVuKSBidXR0b25cblx0XHRcdGhlbHBCdXR0b24ucGFyZW50RWxlbWVudD8uaW5zZXJ0QmVmb3JlKGN1c3RvbUJ1dHRvbiwgaGVscEJ1dHRvbi5uZXh0U2libGluZyk7XG5cdFx0XHRcblx0XHRcdC8vIFN0b3JlIHJlZmVyZW5jZSB0byBjdXN0b20gYnV0dG9uXG5cdFx0XHR0aGlzLmN1c3RvbUhlbHBCdXR0b24gPSBjdXN0b21CdXR0b247XG5cdFx0fSBmaW5hbGx5IHtcblx0XHRcdC8vIEFsd2F5cyBzZXQgdXAgb2JzZXJ2ZXIgYWZ0ZXIgYXR0ZW1wdGluZyB0byBjcmVhdGUgYnV0dG9uIChldmVuIGlmIGVsZW1lbnRzIHdlcmVuJ3QgZm91bmQpXG5cdFx0XHRzZXRUaW1lb3V0KCgpID0+IHtcblx0XHRcdFx0aWYgKHRoaXMuc2V0dGluZ3MuaGVscEJ1dHRvblJlcGxhY2VtZW50Py5lbmFibGVkKSB7XG5cdFx0XHRcdFx0dGhpcy5zZXR1cEhlbHBCdXR0b25PYnNlcnZlcigpO1xuXHRcdFx0XHR9XG5cdFx0XHR9LCAxMDAwKTtcblx0XHR9XG5cdH1cblxuXHRwcml2YXRlIHNldHVwSGVscEJ1dHRvbk9ic2VydmVyKCkge1xuXHRcdC8vIERpc2Nvbm5lY3QgZXhpc3Rpbmcgb2JzZXJ2ZXIgaWYgYW55XG5cdFx0aWYgKHRoaXMuaGVscEJ1dHRvbk9ic2VydmVyKSB7XG5cdFx0XHR0aGlzLmhlbHBCdXR0b25PYnNlcnZlci5kaXNjb25uZWN0KCk7XG5cdFx0fVxuXG5cdFx0Ly8gT25seSBzZXQgdXAgb2JzZXJ2ZXIgaWYgcmVwbGFjZW1lbnQgaXMgZW5hYmxlZFxuXHRcdGlmICghdGhpcy5zZXR0aW5ncy5oZWxwQnV0dG9uUmVwbGFjZW1lbnQ/LmVuYWJsZWQpIHtcblx0XHRcdHJldHVybjtcblx0XHR9XG5cblx0XHQvLyBOb3RlOiBNdXRhdGlvbk9ic2VydmVyIGlzIG1hbnVhbGx5IG1hbmFnZWQgYmVjYXVzZSBPYnNpZGlhbidzIHJlZ2lzdGVyRG9tRXZlbnRcblx0XHQvLyBkb2Vzbid0IHN1cHBvcnQgTXV0YXRpb25PYnNlcnZlciBkaXJlY3RseS4gQ2xlYW51cCBpcyBoYW5kbGVkIGluIG9udW5sb2FkKCkuXG5cdFx0Ly8gV2F0Y2ggZm9yIGNoYW5nZXMgdG8gdGhlIHZhdWx0IHByb2ZpbGUgYXJlYSBvbmx5IChtb3JlIHRhcmdldGVkKVxuXHRcdGxldCB1cGRhdGVUaW1lb3V0OiBudW1iZXIgfCBudWxsID0gbnVsbDtcblx0XHR0aGlzLmhlbHBCdXR0b25PYnNlcnZlciA9IG5ldyBNdXRhdGlvbk9ic2VydmVyKCgpID0+IHtcblx0XHRcdC8vIERlYm91bmNlIHVwZGF0ZXMgdG8gcHJldmVudCBpbmZpbml0ZSBsb29wc1xuXHRcdFx0aWYgKHVwZGF0ZVRpbWVvdXQpIHtcblx0XHRcdFx0Y2xlYXJUaW1lb3V0KHVwZGF0ZVRpbWVvdXQpO1xuXHRcdFx0fVxuXHRcdFx0dXBkYXRlVGltZW91dCA9IHdpbmRvdy5zZXRUaW1lb3V0KCgpID0+IHtcblx0XHRcdFx0Ly8gQ2hlY2sgaWYgaGVscCBidXR0b24gd2FzIHJlY3JlYXRlZCAoQ1NTIHdpbGwgaGlkZSBpdCwgYnV0IHdlIG5lZWQgdG8gaW5qZWN0IG91ciBjdXN0b20gYnV0dG9uKVxuXHRcdFx0XHRjb25zdCB2YXVsdEFjdGlvbnMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcud29ya3NwYWNlLWRyYXdlci12YXVsdC1hY3Rpb25zJyk7XG5cdFx0XHRcdGlmICghdmF1bHRBY3Rpb25zKSByZXR1cm47XG5cdFx0XHRcdFxuXHRcdFx0XHQvLyBDaGVjayBpZiB3ZSBoYXZlIGEgY3VzdG9tIGJ1dHRvbiBBTkQgaXQncyBzdGlsbCBpbiB0aGUgRE9NXG5cdFx0XHRcdGNvbnN0IGN1c3RvbUJ1dHRvbkV4aXN0cyA9IHRoaXMuY3VzdG9tSGVscEJ1dHRvbiAmJiBcblx0XHRcdFx0XHR0aGlzLmN1c3RvbUhlbHBCdXR0b24ucGFyZW50RWxlbWVudCAmJiBcblx0XHRcdFx0XHRkb2N1bWVudC5ib2R5LmNvbnRhaW5zKHRoaXMuY3VzdG9tSGVscEJ1dHRvbikgJiZcblx0XHRcdFx0XHR0aGlzLmN1c3RvbUhlbHBCdXR0b24uaGFzQXR0cmlidXRlKCdkYXRhLXVpLXR3ZWFrZXItaGVscC1yZXBsYWNlbWVudCcpO1xuXHRcdFx0XHRcblx0XHRcdFx0aWYgKCFjdXN0b21CdXR0b25FeGlzdHMpIHtcblx0XHRcdFx0XHQvLyBDbGVhciBzdGFsZSByZWZlcmVuY2UgaWYgYnV0dG9uIHdhcyByZW1vdmVkXG5cdFx0XHRcdFx0aWYgKHRoaXMuY3VzdG9tSGVscEJ1dHRvbiAmJiAhZG9jdW1lbnQuYm9keS5jb250YWlucyh0aGlzLmN1c3RvbUhlbHBCdXR0b24pKSB7XG5cdFx0XHRcdFx0XHR0aGlzLmN1c3RvbUhlbHBCdXR0b24gPSB1bmRlZmluZWQ7XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHRcdHZvaWQgdGhpcy51cGRhdGVIZWxwQnV0dG9uKCk7XG5cdFx0XHRcdH1cblx0XHRcdH0sIDEwMCk7XG5cdFx0fSk7XG5cblx0XHQvLyBPYnNlcnZlIHRoZSB2YXVsdCBhY3Rpb25zIGFyZWEgbW9yZSBzcGVjaWZpY2FsbHlcblx0XHRjb25zdCB2YXVsdEFjdGlvbnMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcud29ya3NwYWNlLWRyYXdlci12YXVsdC1hY3Rpb25zJyk7XG5cdFx0aWYgKHZhdWx0QWN0aW9ucykge1xuXHRcdFx0dGhpcy5oZWxwQnV0dG9uT2JzZXJ2ZXIub2JzZXJ2ZSh2YXVsdEFjdGlvbnMsIHtcblx0XHRcdFx0Y2hpbGRMaXN0OiB0cnVlLFxuXHRcdFx0XHRzdWJ0cmVlOiB0cnVlLFxuXHRcdFx0fSk7XG5cdFx0fVxuXHRcdFxuXHRcdC8vIEFsc28gb2JzZXJ2ZSB0aGUgcGFyZW50IHZhdWx0IHByb2ZpbGUgYXJlYVxuXHRcdGNvbnN0IHZhdWx0UHJvZmlsZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy53b3Jrc3BhY2Utc2lkZWRvY2stdmF1bHQtcHJvZmlsZScpO1xuXHRcdGlmICh2YXVsdFByb2ZpbGUpIHtcblx0XHRcdHRoaXMuaGVscEJ1dHRvbk9ic2VydmVyLm9ic2VydmUodmF1bHRQcm9maWxlLCB7XG5cdFx0XHRcdGNoaWxkTGlzdDogdHJ1ZSxcblx0XHRcdFx0c3VidHJlZTogZmFsc2UsXG5cdFx0XHR9KTtcblx0XHR9XG5cdFx0XG5cdFx0Ly8gQWRkIGZhbGxiYWNrIG9ic2VydmVycyBpZiB0aGUgc3BlY2lmaWMgZWxlbWVudHMgZG9uJ3QgZXhpc3QgeWV0XG5cdFx0aWYgKCF2YXVsdEFjdGlvbnMgJiYgIXZhdWx0UHJvZmlsZSkge1xuXHRcdFx0Y29uc3Qgd29ya3NwYWNlID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLndvcmtzcGFjZS1zcGxpdCcpO1xuXHRcdFx0aWYgKHdvcmtzcGFjZSkge1xuXHRcdFx0XHR0aGlzLmhlbHBCdXR0b25PYnNlcnZlci5vYnNlcnZlKHdvcmtzcGFjZSwge1xuXHRcdFx0XHRcdGNoaWxkTGlzdDogdHJ1ZSxcblx0XHRcdFx0XHRzdWJ0cmVlOiB0cnVlLFxuXHRcdFx0XHR9KTtcblx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdC8vIExhc3QgcmVzb3J0OiBvYnNlcnZlIGRvY3VtZW50IGJvZHlcblx0XHRcdFx0dGhpcy5oZWxwQnV0dG9uT2JzZXJ2ZXIub2JzZXJ2ZShkb2N1bWVudC5ib2R5LCB7XG5cdFx0XHRcdFx0Y2hpbGRMaXN0OiB0cnVlLFxuXHRcdFx0XHRcdHN1YnRyZWU6IHRydWUsXG5cdFx0XHRcdH0pO1xuXHRcdFx0fVxuXHRcdH1cblx0fVxuXG5cdHByaXZhdGUgcmVzdG9yZUhlbHBCdXR0b24oKSB7XG5cdFx0Ly8gT25seSByZW1vdmUgQ1NTIGNsYXNzIGlmIG5laXRoZXIgaGVscEJ1dHRvbiBpcyBzZXQgdG8gXCJoaWRlXCIgbm9yIHJlcGxhY2VtZW50IGlzIGVuYWJsZWRcblx0XHRjb25zdCBzaG91bGRIaWRlSGVscEJ1dHRvbiA9IHRoaXMuc2V0dGluZ3MuaGVscEJ1dHRvbiA9PT0gJ2hpZGUnIHx8IHRoaXMuc2V0dGluZ3MuaGVscEJ1dHRvblJlcGxhY2VtZW50Py5lbmFibGVkO1xuXHRcdGlmICghc2hvdWxkSGlkZUhlbHBCdXR0b24pIHtcblx0XHRcdGRvY3VtZW50LmJvZHkuY2xhc3NMaXN0LnJlbW92ZSgndWktdHdlYWtlci1oaWRlLWhlbHAtYnV0dG9uJyk7XG5cdFx0fVxuXG5cdFx0Ly8gUmVtb3ZlIHRoZSBjdXN0b20gYnV0dG9uIChvbmx5IGlmIHJlcGxhY2VtZW50IGlzIGRpc2FibGVkKVxuXHRcdGlmICghdGhpcy5zZXR0aW5ncy5oZWxwQnV0dG9uUmVwbGFjZW1lbnQ/LmVuYWJsZWQgJiYgdGhpcy5jdXN0b21IZWxwQnV0dG9uKSB7XG5cdFx0XHRpZiAoZG9jdW1lbnQuYm9keS5jb250YWlucyh0aGlzLmN1c3RvbUhlbHBCdXR0b24pKSB7XG5cdFx0XHRcdHRoaXMuY3VzdG9tSGVscEJ1dHRvbi5yZW1vdmUoKTtcblx0XHRcdH1cblx0XHRcdHRoaXMuY3VzdG9tSGVscEJ1dHRvbiA9IHVuZGVmaW5lZDtcblx0XHR9XG5cdH1cblxuXHRwcml2YXRlIHNldHVwU3luY0J1dHRvblJlcGxhY2VtZW50KCkge1xuXHRcdC8vIEFsd2F5cyB1cGRhdGUgQ1NTIGZpcnN0ICh3aWxsIHJlbW92ZSBjbGFzcyBpZiBkaXNhYmxlZClcblx0XHR0aGlzLnVwZGF0ZVN5bmNCdXR0b25DU1MoKTtcblx0XHRcblx0XHQvLyBPbmx5IHByb2NlZWQgaWYgcmVwbGFjZW1lbnQgaXMgZW5hYmxlZCBBTkQgd2UncmUgb24gbW9iaWxlXG5cdFx0aWYgKCF0aGlzLnNldHRpbmdzLnN5bmNCdXR0b25SZXBsYWNlbWVudD8uZW5hYmxlZCB8fCAhUGxhdGZvcm0uaXNNb2JpbGUpIHtcblx0XHRcdHRoaXMucmVzdG9yZVN5bmNCdXR0b24oKTtcblx0XHRcdHJldHVybjtcblx0XHR9XG5cdFx0XG5cdFx0Ly8gV2FpdCBmb3IgdGhlIERPTSB0byBiZSByZWFkeVxuXHRcdGNvbnN0IHRyeVNldHVwID0gKCkgPT4ge1xuXHRcdFx0aWYgKHRoaXMuc2V0dGluZ3Muc3luY0J1dHRvblJlcGxhY2VtZW50Py5lbmFibGVkKSB7XG5cdFx0XHRcdHZvaWQgdGhpcy51cGRhdGVTeW5jQnV0dG9uKCk7XG5cdFx0XHR9XG5cdFx0fTtcblxuXHRcdC8vIFRyeSBpbW1lZGlhdGVseVxuXHRcdHRyeVNldHVwKCk7XG5cblx0XHQvLyBBbHNvIHRyeSBhZnRlciBhIHNob3J0IGRlbGF5IHRvIGVuc3VyZSBET00gaXMgcmVhZHlcblx0XHRzZXRUaW1lb3V0KHRyeVNldHVwLCA1MDApO1xuXG5cdFx0Ly8gU2V0IHVwIG9ic2VydmVyIGFmdGVyIGluaXRpYWwgc2V0dXAgdG8gd2F0Y2ggZm9yIGJ1dHRvbiByZWNyZWF0aW9uXG5cdFx0c2V0VGltZW91dCgoKSA9PiB7XG5cdFx0XHR0aGlzLnNldHVwU3luY0J1dHRvbk9ic2VydmVyKCk7XG5cdFx0fSwgMTAwMCk7XG5cdH1cblxuXHRwdWJsaWMgdXBkYXRlU3luY0J1dHRvbkNTUygpIHtcblx0XHQvLyBIaWRlIHN5bmMgYnV0dG9uIGlmIHJlcGxhY2VtZW50IGlzIGVuYWJsZWQgQU5EIHdlJ3JlIG9uIG1vYmlsZVxuXHRcdC8vIFVzZSBDU1MgY2xhc3MgaW5zdGVhZCBvZiBzdHlsZSBlbGVtZW50XG5cdFx0Y29uc3Qgc2hvdWxkSGlkZSA9ICh0aGlzLnNldHRpbmdzLnN5bmNCdXR0b25SZXBsYWNlbWVudD8uZW5hYmxlZCA/PyBmYWxzZSkgJiYgUGxhdGZvcm0uaXNNb2JpbGU7XG5cdFx0ZG9jdW1lbnQuYm9keS5jbGFzc0xpc3QudG9nZ2xlKCd1aS10d2Vha2VyLWhpZGUtc3luYy1idXR0b24nLCBzaG91bGRIaWRlKTtcblx0fVxuXG5cdHB1YmxpYyBhc3luYyB1cGRhdGVTeW5jQnV0dG9uKCkge1xuXHRcdC8vIE9ubHkgcHJvY2VlZCBpZiByZXBsYWNlbWVudCBpcyBlbmFibGVkXG5cdFx0aWYgKCF0aGlzLnNldHRpbmdzLnN5bmNCdXR0b25SZXBsYWNlbWVudD8uZW5hYmxlZCkge1xuXHRcdFx0dGhpcy5yZXN0b3JlU3luY0J1dHRvbigpO1xuXHRcdFx0cmV0dXJuO1xuXHRcdH1cblx0XHRcblx0XHQvLyBUZW1wb3JhcmlseSBkaXNjb25uZWN0IG9ic2VydmVyIHRvIHByZXZlbnQgaW5maW5pdGUgbG9vcHNcblx0XHRpZiAodGhpcy5zeW5jQnV0dG9uT2JzZXJ2ZXIpIHtcblx0XHRcdHRoaXMuc3luY0J1dHRvbk9ic2VydmVyLmRpc2Nvbm5lY3QoKTtcblx0XHR9XG5cblx0XHQvLyBFbnN1cmUgd2UgaGF2ZSB0aGUgbGF0ZXN0IHNldHRpbmdzXG5cdFx0YXdhaXQgdGhpcy5sb2FkU2V0dGluZ3MoKTtcblxuXHRcdC8vIFVwZGF0ZSBDU1MgZmlyc3QgKHRoaXMgd2lsbCBoaWRlIHRoZSBzeW5jIGJ1dHRvbiBnbG9iYWxseSlcblx0XHR0aGlzLnVwZGF0ZVN5bmNCdXR0b25DU1MoKTtcblxuXHRcdHRyeSB7XG5cdFx0XHQvLyBDaGVjayBpZiByZXBsYWNlbWVudCBpcyBzdGlsbCBlbmFibGVkXG5cdFx0XHRpZiAoIXRoaXMuc2V0dGluZ3Muc3luY0J1dHRvblJlcGxhY2VtZW50Py5lbmFibGVkKSB7XG5cdFx0XHRcdHRoaXMucmVzdG9yZVN5bmNCdXR0b24oKTtcblx0XHRcdFx0cmV0dXJuO1xuXHRcdFx0fVxuXG5cdFx0XHQvLyBGaW5kIHRoZSBzeW5jIGJ1dHRvbiBpbiBtb2JpbGUgcmlnaHQgZHJhd2VyIGhlYWRlclxuXHRcdFx0Ly8gQWN0dWFsIHBhdHRlcm46IGNsaWNrYWJsZS1pY29uIHdvcmtzcGFjZS1kcmF3ZXItaGVhZGVyLWljb24gbW9kLXJhaXNlZCBzeW5jLXN0YXR1cy1pY29uXG5cdFx0XHRsZXQgc3luY0J1dHRvbjogSFRNTEVsZW1lbnQgfCBudWxsID0gbnVsbDtcblx0XHRcdFxuXHRcdFx0Ly8gU2VhcmNoIGluIHJpZ2h0IGRyYXdlciBoZWFkZXJcblx0XHRcdGNvbnN0IHJpZ2h0RHJhd2VyID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLndvcmtzcGFjZS1kcmF3ZXIubW9kLXJpZ2h0Jyk7XG5cdFx0XHRpZiAocmlnaHREcmF3ZXIpIHtcblx0XHRcdFx0Y29uc3QgZHJhd2VySGVhZGVyID0gcmlnaHREcmF3ZXIucXVlcnlTZWxlY3RvcignLndvcmtzcGFjZS1kcmF3ZXItaGVhZGVyJyk7XG5cdFx0XHRcdGlmIChkcmF3ZXJIZWFkZXIpIHtcblx0XHRcdFx0XHQvLyBMb29rIGZvciBzeW5jLXN0YXR1cy1pY29uIGNsYXNzICh0aGlzIGlzIHRoZSBhY3R1YWwgY2xhc3MhKVxuXHRcdFx0XHRcdHN5bmNCdXR0b24gPSBkcmF3ZXJIZWFkZXIucXVlcnlTZWxlY3RvcignLnN5bmMtc3RhdHVzLWljb24sIC53b3Jrc3BhY2UtZHJhd2VyLWhlYWRlci1pY29uLnN5bmMtc3RhdHVzLWljb24nKSBhcyBIVE1MRWxlbWVudDtcblx0XHRcdFx0XHRcblx0XHRcdFx0XHQvLyBGYWxsYmFjazogbG9vayBmb3IgcmVmcmVzaC1jdy1vZmYgU1ZHIChzeW5jIGljb24gaW4gZXJyb3IvcGF1c2VkIHN0YXRlKVxuXHRcdFx0XHRcdGlmICghc3luY0J1dHRvbikge1xuXHRcdFx0XHRcdFx0Y29uc3QgY2xpY2thYmxlSWNvbnMgPSBBcnJheS5mcm9tKGRyYXdlckhlYWRlci5xdWVyeVNlbGVjdG9yQWxsKCcuY2xpY2thYmxlLWljb24nKSk7XG5cdFx0XHRcdFx0XHRmb3IgKGNvbnN0IGljb24gb2YgY2xpY2thYmxlSWNvbnMpIHtcblx0XHRcdFx0XHRcdFx0Y29uc3Qgc3ZnID0gaWNvbi5xdWVyeVNlbGVjdG9yKCdzdmcucmVmcmVzaC1jdy1vZmYsIHN2Zy5yZWZyZXNoLWN3Jyk7XG5cdFx0XHRcdFx0XHRcdGlmIChzdmcpIHtcblx0XHRcdFx0XHRcdFx0XHRzeW5jQnV0dG9uID0gaWNvbiBhcyBIVE1MRWxlbWVudDtcblx0XHRcdFx0XHRcdFx0XHRicmVhaztcblx0XHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdH1cblx0XHRcdFx0fVxuXHRcdFx0fVxuXHRcdFx0XG5cdFx0XHRpZiAoIXN5bmNCdXR0b24pIHtcblx0XHRcdFx0Ly8gU2V0IHVwIG9ic2VydmVyIHRvIGNhdGNoIGl0IHdoZW4gaXQgYXBwZWFyc1xuXHRcdFx0XHR0aGlzLnNldHVwU3luY0J1dHRvbk9ic2VydmVyKCk7XG5cdFx0XHRcdC8vIEFsc28gcmV0cnkgYWZ0ZXIgYSBzaG9ydCBkZWxheVxuXHRcdFx0XHRzZXRUaW1lb3V0KCgpID0+IHtcblx0XHRcdFx0XHRpZiAodGhpcy5zZXR0aW5ncy5zeW5jQnV0dG9uUmVwbGFjZW1lbnQ/LmVuYWJsZWQpIHtcblx0XHRcdFx0XHRcdHZvaWQgdGhpcy51cGRhdGVTeW5jQnV0dG9uKCk7XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHR9LCA1MDApO1xuXHRcdFx0XHRyZXR1cm47XG5cdFx0XHR9XG5cblx0XHRcdC8vIFJlbW92ZSBleGlzdGluZyBjdXN0b20gYnV0dG9uIGlmIGl0IGV4aXN0cyAoYWx3YXlzIHJlY3JlYXRlIHRvIHVwZGF0ZSBpY29uL2NvbW1hbmQpXG5cdFx0XHRpZiAodGhpcy5jdXN0b21TeW5jQnV0dG9uICYmIHRoaXMuY3VzdG9tU3luY0J1dHRvbi5wYXJlbnRFbGVtZW50ICYmIGRvY3VtZW50LmJvZHkuY29udGFpbnModGhpcy5jdXN0b21TeW5jQnV0dG9uKSkge1xuXHRcdFx0XHR0aGlzLmN1c3RvbVN5bmNCdXR0b24ucmVtb3ZlKCk7XG5cdFx0XHR9XG5cdFx0XHR0aGlzLmN1c3RvbVN5bmNCdXR0b24gPSB1bmRlZmluZWQ7XG5cblx0XHRcdC8vIENyZWF0ZSBhIG5ldyBjdXN0b20gYnV0dG9uIChjbG9uZSBwcmVzZXJ2ZXMgYWxsIG9yaWdpbmFsIGNsYXNzZXMpXG5cdFx0XHRjb25zdCBjdXN0b21CdXR0b24gPSBzeW5jQnV0dG9uLmNsb25lTm9kZSh0cnVlKSBhcyBIVE1MRWxlbWVudDtcblx0XHRcdGN1c3RvbUJ1dHRvbi5yZW1vdmVBdHRyaWJ1dGUoJ2FyaWEtbGFiZWwnKTtcblx0XHRcdC8vIEFkZCB1bmlxdWUgaWRlbnRpZmllciB0byBhdm9pZCBjb25mbGljdHMgd2l0aCBvdGhlciBwbHVnaW5zXG5cdFx0XHRjdXN0b21CdXR0b24uc2V0QXR0cmlidXRlKCdkYXRhLXVpLXR3ZWFrZXItc3luYy1yZXBsYWNlbWVudCcsICd0cnVlJyk7XG5cdFx0XHRjdXN0b21CdXR0b24uY2xhc3NMaXN0LmFkZCgndWktdHdlYWtlci1zeW5jLXJlcGxhY2VtZW50Jyk7XG5cdFx0XHRcblx0XHRcdC8vIEVuc3VyZSB0aGUgYnV0dG9uIGlzIHZpc2libGUgKHByZXNlcnZlIG9yaWdpbmFsIGNsYXNzZXMgYnV0IGVuc3VyZSB2aXNpYmlsaXR5KVxuXHRcdFx0Ly8gVGhlIG9yaWdpbmFsIGNsYXNzZXMgKHdvcmtzcGFjZS1kcmF3ZXItaGVhZGVyLWljb24sIGNsaWNrYWJsZS1pY29uLCBldGMuKSBzaG91bGQgYmUgcHJlc2VydmVkIGZyb20gY2xvbmVcblx0XHRcdFxuXHRcdFx0Ly8gQ2xlYXIgYW55IGV4aXN0aW5nIGNsaWNrIGhhbmRsZXJzIC0gcmVtb3ZlIGFsbCBldmVudCBsaXN0ZW5lcnNcblx0XHRcdGN1c3RvbUJ1dHRvbi5vbmNsaWNrID0gbnVsbDtcblx0XHRcdC8vIFJlbW92ZSBhbnkgZGF0YSBhdHRyaWJ1dGVzIHRoYXQgbWlnaHQgaGF2ZSBjbGljayBoYW5kbGVyc1xuXHRcdFx0Y3VzdG9tQnV0dG9uLnJlbW92ZUF0dHJpYnV0ZSgnZGF0YS1jb21tYW5kJyk7XG5cdFx0XHRcblx0XHRcdC8vIFJlcGxhY2UgdGhlIGljb24gdXNpbmcgT2JzaWRpYW4ncyBzZXRJY29uIGZ1bmN0aW9uXG5cdFx0XHQvLyBGaW5kIHRoZSBTVkcgY29udGFpbmVyIC0gaXQgc2hvdWxkIGJlIGRpcmVjdGx5IGluIHRoZSBidXR0b24gb3IgaW4gYSBjaGlsZFxuXHRcdFx0bGV0IGljb25Db250YWluZXI6IEhUTUxFbGVtZW50IHwgbnVsbCA9IG51bGw7XG5cdFx0XHRjb25zdCBleGlzdGluZ1N2ZyA9IGN1c3RvbUJ1dHRvbi5xdWVyeVNlbGVjdG9yKCdzdmcnKTtcblx0XHRcdGlmIChleGlzdGluZ1N2Zykge1xuXHRcdFx0XHRpY29uQ29udGFpbmVyID0gZXhpc3RpbmdTdmcucGFyZW50RWxlbWVudCBhcyBIVE1MRWxlbWVudDtcblx0XHRcdFx0Ly8gUmVtb3ZlIHRoZSBvbGQgU1ZHXG5cdFx0XHRcdGV4aXN0aW5nU3ZnLnJlbW92ZSgpO1xuXHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0aWNvbkNvbnRhaW5lciA9IGN1c3RvbUJ1dHRvbjtcblx0XHRcdH1cblx0XHRcdFxuXHRcdFx0Ly8gRW5zdXJlIGljb24gY29udGFpbmVyIGhhcyBwcm9wZXIgZGlzcGxheSBmb3IgY2VudGVyaW5nXG5cdFx0XHRpZiAoaWNvbkNvbnRhaW5lcikge1xuXHRcdFx0XHRzZXRDc3NQcm9wcyhpY29uQ29udGFpbmVyLCB7XG5cdFx0XHRcdFx0ZGlzcGxheTogJ2ZsZXgnLFxuXHRcdFx0XHRcdGFsaWduSXRlbXM6ICdjZW50ZXInLFxuXHRcdFx0XHRcdGp1c3RpZnlDb250ZW50OiAnY2VudGVyJ1xuXHRcdFx0XHR9KTtcblx0XHRcdH1cblx0XHRcdFxuXHRcdFx0Y29uc3QgaWNvbklkID0gdGhpcy5zZXR0aW5ncy5zeW5jQnV0dG9uUmVwbGFjZW1lbnQ/Lmljb25JZDtcblx0XHRcdGlmIChpY29uSWQpIHtcblx0XHRcdFx0dHJ5IHtcblx0XHRcdFx0XHRzZXRJY29uKGljb25Db250YWluZXIsIGljb25JZCk7XG5cdFx0XHRcdH0gY2F0Y2gge1xuXHRcdFx0XHRcdC8vIEVycm9yIHNldHRpbmcgaWNvblxuXHRcdFx0XHR9XG5cdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHR0cnkge1xuXHRcdFx0XHRcdHNldEljb24oaWNvbkNvbnRhaW5lciwgJ3dyZW5jaCcpO1xuXHRcdFx0XHR9IGNhdGNoIHtcblx0XHRcdFx0XHQvLyBFcnJvciBzZXR0aW5nIGRlZmF1bHQgaWNvblxuXHRcdFx0XHR9XG5cdFx0XHR9XG5cblx0XHRcdC8vIEluc2VydCBjdXN0b20gYnV0dG9uIGluIHBsYWNlIG9mIHRoZSBvcmlnaW5hbCAobGlrZSBoZWxwIGJ1dHRvbiByZXBsYWNlbWVudClcblx0XHRcdC8vIEluc2VydCByaWdodCBiZWZvcmUgdGhlIG9yaWdpbmFsLCB0aGVuIGhpZGUgdGhlIG9yaWdpbmFsIGRpcmVjdGx5XG5cdFx0XHRjb25zdCBwYXJlbnQgPSBzeW5jQnV0dG9uLnBhcmVudEVsZW1lbnQ7XG5cdFx0XHRpZiAocGFyZW50KSB7XG5cdFx0XHRcdHBhcmVudC5pbnNlcnRCZWZvcmUoY3VzdG9tQnV0dG9uLCBzeW5jQnV0dG9uKTtcblx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdC8vIEZhbGxiYWNrOiBqdXN0IGluc2VydCBhZnRlciBpZiBwYXJlbnQgaXMgbWlzc2luZ1xuXHRcdFx0XHRzeW5jQnV0dG9uLnBhcmVudEVsZW1lbnQ/Lmluc2VydEJlZm9yZShjdXN0b21CdXR0b24sIHN5bmNCdXR0b24ubmV4dFNpYmxpbmcpO1xuXHRcdFx0fVxuXHRcdFx0XG5cdFx0XHQvLyBBZGQgb3VyIGN1c3RvbSBjbGljayBoYW5kbGVyIEFGVEVSIGluc2VydGlvblxuXHRcdFx0Ly8gRG9uJ3QgcHJldmVudCBkZWZhdWx0IC0gbGV0IHRoZSBjbGljayBoYXBwZW4gbmF0dXJhbGx5LCBqdXN0IGV4ZWN1dGUgb3VyIGNvbW1hbmRcblx0XHRcdGN1c3RvbUJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIChldnQ6IE1vdXNlRXZlbnQpID0+IHtcblx0XHRcdFx0ZXZ0LnByZXZlbnREZWZhdWx0KCk7XG5cdFx0XHRcdGV2dC5zdG9wUHJvcGFnYXRpb24oKTtcblx0XHRcdFx0XG5cdFx0XHRcdGNvbnN0IGNvbW1hbmRJZCA9IHRoaXMuc2V0dGluZ3Muc3luY0J1dHRvblJlcGxhY2VtZW50Py5jb21tYW5kSWQ7XG5cdFx0XHRcdGlmIChjb21tYW5kSWQpIHtcblx0XHRcdFx0XHQvLyBGb3Igb3Blbi1zZXR0aW5ncywgZXhlY3V0ZSBkaXJlY3RseSAodGhpcyB3b3JrcyEpXG5cdFx0XHRcdFx0aWYgKGNvbW1hbmRJZCA9PT0gJ29wZW4tc2V0dGluZ3MnIHx8IGNvbW1hbmRJZCA9PT0gJ3VpLXR3ZWFrZXI6b3Blbi1zZXR0aW5ncycpIHtcblx0XHRcdFx0XHRcdGNvbnN0IHNldHRpbmdBcGkgPSAodGhpcy5hcHAgYXMgeyBzZXR0aW5nPzogeyBvcGVuPzogKCkgPT4gdm9pZDsgb3BlblRhYkJ5SWQ/OiAoaWQ6IHN0cmluZykgPT4gdm9pZCB9IH0pLnNldHRpbmc7XG5cdFx0XHRcdFx0XHRpZiAoc2V0dGluZ0FwaSkge1xuXHRcdFx0XHRcdFx0XHRzZXR0aW5nQXBpLm9wZW4/LigpO1xuXHRcdFx0XHRcdFx0XHQvLyBVc2UgdHlwZSBhc3NlcnRpb24gZm9yIHNldHRpbmdUYWIgYXMgaXQncyBhIHByaXZhdGUgcHJvcGVydHlcblx0XHRcdFx0XHRcdFx0Y29uc3QgcGx1Z2luSW5zdGFuY2UgPSB0aGlzIGFzIHVua25vd24gYXMgeyBzZXR0aW5nVGFiPzogeyBpZD86IHN0cmluZyB9IH07XG5cdFx0XHRcdFx0XHRcdGlmIChwbHVnaW5JbnN0YW5jZS5zZXR0aW5nVGFiPy5pZCAmJiBzZXR0aW5nQXBpLm9wZW5UYWJCeUlkKSB7XG5cdFx0XHRcdFx0XHRcdFx0c2V0dGluZ0FwaS5vcGVuVGFiQnlJZChwbHVnaW5JbnN0YW5jZS5zZXR0aW5nVGFiLmlkKTtcblx0XHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdFx0XHQvLyBGb3Igb3RoZXIgY29tbWFuZHMsIHRyeSBleGVjdXRlQ29tbWFuZEJ5SWRcblx0XHRcdFx0XHRcdCgodGhpcy5hcHAgYXMgeyBjb21tYW5kcz86IHsgZXhlY3V0ZUNvbW1hbmRCeUlkPzogKGlkOiBzdHJpbmcpID0+IFByb21pc2U8dm9pZD4gfSB9KS5jb21tYW5kcyBhcyB7IGV4ZWN1dGVDb21tYW5kQnlJZD86IChpZDogc3RyaW5nKSA9PiBQcm9taXNlPHZvaWQ+IH0pPy5leGVjdXRlQ29tbWFuZEJ5SWQ/Lihjb21tYW5kSWQpLmNhdGNoKChlcnJvcjogdW5rbm93bikgPT4ge1xuXHRcdFx0XHRcdFx0XHRjb25zb2xlLndhcm4oJ1tVSSBUd2Vha2VyXSBFcnJvciBleGVjdXRpbmcgY29tbWFuZDonLCBlcnJvcik7XG5cdFx0XHRcdFx0XHRcdG5ldyBOb3RpY2UoYEZhaWxlZCB0byBleGVjdXRlIGNvbW1hbmQ6ICR7Y29tbWFuZElkfWApO1xuXHRcdFx0XHRcdFx0fSk7XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHR9XG5cdFx0XHR9LCB0cnVlKTsgLy8gVXNlIGNhcHR1cmUgcGhhc2UgdG8gZW5zdXJlIHdlIGhhbmRsZSBpdCBmaXJzdFxuXHRcdFx0XG5cdFx0XHQvLyBBbHNvIGFkZCB0b3VjaHN0YXJ0IGZvciBtb2JpbGUgLSBzYW1lIGxvZ2ljIGFzIGNsaWNrXG5cdFx0XHRjdXN0b21CdXR0b24uYWRkRXZlbnRMaXN0ZW5lcigndG91Y2hzdGFydCcsIChldnQ6IFRvdWNoRXZlbnQpID0+IHtcblx0XHRcdFx0ZXZ0LnByZXZlbnREZWZhdWx0KCk7XG5cdFx0XHRcdGV2dC5zdG9wUHJvcGFnYXRpb24oKTtcblx0XHRcdFx0XG5cdFx0XHRcdGNvbnN0IGNvbW1hbmRJZCA9IHRoaXMuc2V0dGluZ3Muc3luY0J1dHRvblJlcGxhY2VtZW50Py5jb21tYW5kSWQ7XG5cdFx0XHRcdGlmIChjb21tYW5kSWQpIHtcblx0XHRcdFx0XHQvLyBGb3Igb3Blbi1zZXR0aW5ncywgZXhlY3V0ZSBkaXJlY3RseSAodGhpcyB3b3JrcyEpXG5cdFx0XHRcdFx0aWYgKGNvbW1hbmRJZCA9PT0gJ29wZW4tc2V0dGluZ3MnIHx8IGNvbW1hbmRJZCA9PT0gJ3VpLXR3ZWFrZXI6b3Blbi1zZXR0aW5ncycpIHtcblx0XHRcdFx0XHRcdGNvbnN0IHNldHRpbmdBcGkgPSAodGhpcy5hcHAgYXMgeyBzZXR0aW5nPzogeyBvcGVuPzogKCkgPT4gdm9pZDsgb3BlblRhYkJ5SWQ/OiAoaWQ6IHN0cmluZykgPT4gdm9pZCB9IH0pLnNldHRpbmc7XG5cdFx0XHRcdFx0XHRpZiAoc2V0dGluZ0FwaSkge1xuXHRcdFx0XHRcdFx0XHRzZXR0aW5nQXBpLm9wZW4/LigpO1xuXHRcdFx0XHRcdFx0XHQvLyBVc2UgdHlwZSBhc3NlcnRpb24gZm9yIHNldHRpbmdUYWIgYXMgaXQncyBhIHByaXZhdGUgcHJvcGVydHlcblx0XHRcdFx0XHRcdFx0Y29uc3QgcGx1Z2luSW5zdGFuY2UgPSB0aGlzIGFzIHVua25vd24gYXMgeyBzZXR0aW5nVGFiPzogeyBpZD86IHN0cmluZyB9IH07XG5cdFx0XHRcdFx0XHRcdGlmIChwbHVnaW5JbnN0YW5jZS5zZXR0aW5nVGFiPy5pZCAmJiBzZXR0aW5nQXBpLm9wZW5UYWJCeUlkKSB7XG5cdFx0XHRcdFx0XHRcdFx0c2V0dGluZ0FwaS5vcGVuVGFiQnlJZChwbHVnaW5JbnN0YW5jZS5zZXR0aW5nVGFiLmlkKTtcblx0XHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdFx0XHQvLyBGb3Igb3RoZXIgY29tbWFuZHMsIHRyeSBleGVjdXRlQ29tbWFuZEJ5SWRcblx0XHRcdFx0XHRcdCgodGhpcy5hcHAgYXMgeyBjb21tYW5kcz86IHsgZXhlY3V0ZUNvbW1hbmRCeUlkPzogKGlkOiBzdHJpbmcpID0+IFByb21pc2U8dm9pZD4gfSB9KS5jb21tYW5kcyBhcyB7IGV4ZWN1dGVDb21tYW5kQnlJZD86IChpZDogc3RyaW5nKSA9PiBQcm9taXNlPHZvaWQ+IH0pPy5leGVjdXRlQ29tbWFuZEJ5SWQ/Lihjb21tYW5kSWQpLmNhdGNoKChlcnJvcjogdW5rbm93bikgPT4ge1xuXHRcdFx0XHRcdFx0XHRjb25zb2xlLndhcm4oJ1tVSSBUd2Vha2VyXSBFcnJvciBleGVjdXRpbmcgY29tbWFuZDonLCBlcnJvcik7XG5cdFx0XHRcdFx0XHRcdG5ldyBOb3RpY2UoYEZhaWxlZCB0byBleGVjdXRlIGNvbW1hbmQ6ICR7Y29tbWFuZElkfWApO1xuXHRcdFx0XHRcdFx0fSk7XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHR9XG5cdFx0XHR9LCB0cnVlKTtcblx0XHRcdFxuXHRcdFx0Ly8gSGlkZSB0aGUgb3JpZ2luYWwgYnV0dG9uIGRpcmVjdGx5IChtb3JlIHJlbGlhYmxlIHRoYW4gQ1NTIHNlbGVjdG9ycylcblx0XHRcdHNldENzc1Byb3BzKHN5bmNCdXR0b24sIHsgZGlzcGxheTogJ25vbmUnIH0pO1xuXHRcdFx0Ly8gQWRkIGRhdGEgYXR0cmlidXRlIHRvIHRyYWNrIGl0IChpbiBjYXNlIE9ic2lkaWFuIHJlY3JlYXRlcyBpdClcblx0XHRcdHN5bmNCdXR0b24uc2V0QXR0cmlidXRlKCdkYXRhLXVpLXR3ZWFrZXItb3JpZ2luYWwtc3luYy1oaWRkZW4nLCAndHJ1ZScpO1xuXHRcdFx0XG5cdFx0XHQvLyBTdG9yZSByZWZlcmVuY2UgdG8gb3JpZ2luYWwgYnV0dG9uIHNvIHdlIGNhbiByZXN0b3JlIGl0IGxhdGVyXG5cdFx0XHR0aGlzLm9yaWdpbmFsU3luY0J1dHRvbiA9IHN5bmNCdXR0b247XG5cdFx0XHRcblx0XHRcdC8vIFN0b3JlIHJlZmVyZW5jZSB0byBjdXN0b20gYnV0dG9uXG5cdFx0XHR0aGlzLmN1c3RvbVN5bmNCdXR0b24gPSBjdXN0b21CdXR0b247XG5cdFx0fSBmaW5hbGx5IHtcblx0XHRcdC8vIEFsd2F5cyBzZXQgdXAgb2JzZXJ2ZXIgYWZ0ZXIgYXR0ZW1wdGluZyB0byBjcmVhdGUgYnV0dG9uIChldmVuIGlmIGVsZW1lbnRzIHdlcmVuJ3QgZm91bmQpXG5cdFx0XHRzZXRUaW1lb3V0KCgpID0+IHtcblx0XHRcdFx0aWYgKHRoaXMuc2V0dGluZ3Muc3luY0J1dHRvblJlcGxhY2VtZW50Py5lbmFibGVkKSB7XG5cdFx0XHRcdFx0dGhpcy5zZXR1cFN5bmNCdXR0b25PYnNlcnZlcigpO1xuXHRcdFx0XHR9XG5cdFx0XHR9LCAxMDAwKTtcblx0XHR9XG5cdH1cblxuXHRwcml2YXRlIHNldHVwU3luY0J1dHRvbk9ic2VydmVyKCkge1xuXHRcdC8vIERpc2Nvbm5lY3QgZXhpc3Rpbmcgb2JzZXJ2ZXIgaWYgYW55XG5cdFx0aWYgKHRoaXMuc3luY0J1dHRvbk9ic2VydmVyKSB7XG5cdFx0XHR0aGlzLnN5bmNCdXR0b25PYnNlcnZlci5kaXNjb25uZWN0KCk7XG5cdFx0fVxuXG5cdFx0Ly8gT25seSBzZXQgdXAgb2JzZXJ2ZXIgaWYgcmVwbGFjZW1lbnQgaXMgZW5hYmxlZFxuXHRcdGlmICghdGhpcy5zZXR0aW5ncy5zeW5jQnV0dG9uUmVwbGFjZW1lbnQ/LmVuYWJsZWQpIHtcblx0XHRcdHJldHVybjtcblx0XHR9XG5cblx0XHQvLyBOb3RlOiBNdXRhdGlvbk9ic2VydmVyIGlzIG1hbnVhbGx5IG1hbmFnZWQgYmVjYXVzZSBPYnNpZGlhbidzIHJlZ2lzdGVyRG9tRXZlbnRcblx0XHQvLyBkb2Vzbid0IHN1cHBvcnQgTXV0YXRpb25PYnNlcnZlciBkaXJlY3RseS4gQ2xlYW51cCBpcyBoYW5kbGVkIGluIG9udW5sb2FkKCkuXG5cdFx0Ly8gV2F0Y2ggZm9yIGNoYW5nZXMgdG8gdGhlIHJpZ2h0IHNpZGViYXIgdmF1bHQgYWN0aW9ucyBhcmVhXG5cdFx0bGV0IHVwZGF0ZVRpbWVvdXQ6IG51bWJlciB8IG51bGwgPSBudWxsO1xuXHRcdHRoaXMuc3luY0J1dHRvbk9ic2VydmVyID0gbmV3IE11dGF0aW9uT2JzZXJ2ZXIoKCkgPT4ge1xuXHRcdFx0Ly8gRGVib3VuY2UgdXBkYXRlcyB0byBwcmV2ZW50IGluZmluaXRlIGxvb3BzXG5cdFx0XHRpZiAodXBkYXRlVGltZW91dCkge1xuXHRcdFx0XHRjbGVhclRpbWVvdXQodXBkYXRlVGltZW91dCk7XG5cdFx0XHR9XG5cdFx0XHR1cGRhdGVUaW1lb3V0ID0gd2luZG93LnNldFRpbWVvdXQoKCkgPT4ge1xuXHRcdFx0XHQvLyBDaGVjayBpZiBzeW5jIGJ1dHRvbiB3YXMgcmVjcmVhdGVkICh3ZSBuZWVkIHRvIGhpZGUgaXQgYW5kIGVuc3VyZSBjdXN0b20gYnV0dG9uIGV4aXN0cylcblx0XHRcdFx0Y29uc3QgcmlnaHREcmF3ZXIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcud29ya3NwYWNlLWRyYXdlci5tb2QtcmlnaHQnKTtcblx0XHRcdFx0aWYgKCFyaWdodERyYXdlcikgcmV0dXJuO1xuXHRcdFx0XHRcblx0XHRcdFx0Ly8gSWYgd2UgaGF2ZSBhbiBvcmlnaW5hbCBidXR0b24gcmVmZXJlbmNlLCBtYWtlIHN1cmUgaXQncyBzdGlsbCBoaWRkZW5cblx0XHRcdFx0aWYgKHRoaXMub3JpZ2luYWxTeW5jQnV0dG9uICYmIGRvY3VtZW50LmJvZHkuY29udGFpbnModGhpcy5vcmlnaW5hbFN5bmNCdXR0b24pKSB7XG5cdFx0XHRcdFx0c2V0Q3NzUHJvcHModGhpcy5vcmlnaW5hbFN5bmNCdXR0b24sIHsgZGlzcGxheTogJ25vbmUnIH0pO1xuXHRcdFx0XHR9XG5cdFx0XHRcdFxuXHRcdFx0XHQvLyBBbHNvIGNoZWNrIGZvciBhbnkgbmV3bHkgY3JlYXRlZCBzeW5jIGJ1dHRvbnMgdGhhdCBhcmVuJ3Qgb3VyIGN1c3RvbSBvbmVcblx0XHRcdFx0Y29uc3QgZHJhd2VySGVhZGVyID0gcmlnaHREcmF3ZXIucXVlcnlTZWxlY3RvcignLndvcmtzcGFjZS1kcmF3ZXItaGVhZGVyJyk7XG5cdFx0XHRcdGlmIChkcmF3ZXJIZWFkZXIpIHtcblx0XHRcdFx0XHQvLyBUYXJnZXQgc3luYy1zdGF0dXMtaWNvbiBjbGFzcyAodGhlIGFjdHVhbCBjbGFzcyEpXG5cdFx0XHRcdFx0Y29uc3QgYWxsU3luY0J1dHRvbnMgPSBBcnJheS5mcm9tKGRyYXdlckhlYWRlci5xdWVyeVNlbGVjdG9yQWxsKCcuc3luYy1zdGF0dXMtaWNvbiwgLndvcmtzcGFjZS1kcmF3ZXItaGVhZGVyLWljb24uc3luYy1zdGF0dXMtaWNvbiwgLmNsaWNrYWJsZS1pY29uLnN5bmMtc3RhdHVzLWljb24nKSk7XG5cdFx0XHRcdFx0Zm9yIChjb25zdCBidG4gb2YgYWxsU3luY0J1dHRvbnMpIHtcblx0XHRcdFx0XHRcdGNvbnN0IGJ1dHRvbiA9IGJ0biBhcyBIVE1MRWxlbWVudDtcblx0XHRcdFx0XHRcdC8vIERvbid0IGhpZGUgb3VyIGN1c3RvbSByZXBsYWNlbWVudCBidXR0b25cblx0XHRcdFx0XHRcdGlmICghYnV0dG9uLmhhc0F0dHJpYnV0ZSgnZGF0YS11aS10d2Vha2VyLXN5bmMtcmVwbGFjZW1lbnQnKSAmJlxuXHRcdFx0XHRcdFx0XHQhYnV0dG9uLmhhc0F0dHJpYnV0ZSgnZGF0YS11aS10d2Vha2VyLW9yaWdpbmFsLXN5bmMtaGlkZGVuJykpIHtcblx0XHRcdFx0XHRcdFx0Ly8gVGhpcyBpcyBhIG5ldyBzeW5jIGJ1dHRvbiwgaGlkZSBpdFxuXHRcdFx0XHRcdFx0XHRzZXRDc3NQcm9wcyhidXR0b24sIHsgZGlzcGxheTogJ25vbmUnIH0pO1xuXHRcdFx0XHRcdFx0XHRidXR0b24uc2V0QXR0cmlidXRlKCdkYXRhLXVpLXR3ZWFrZXItb3JpZ2luYWwtc3luYy1oaWRkZW4nLCAndHJ1ZScpO1xuXHRcdFx0XHRcdFx0XHQvLyBVcGRhdGUgb3VyIHJlZmVyZW5jZVxuXHRcdFx0XHRcdFx0XHR0aGlzLm9yaWdpbmFsU3luY0J1dHRvbiA9IGJ1dHRvbjtcblx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHR9XG5cdFx0XHRcdH1cblx0XHRcdFx0XG5cdFx0XHRcdC8vIENoZWNrIGlmIHdlIGhhdmUgYSBjdXN0b20gYnV0dG9uIEFORCBpdCdzIHN0aWxsIGluIHRoZSBET01cblx0XHRcdFx0Y29uc3QgY3VzdG9tQnV0dG9uRXhpc3RzID0gdGhpcy5jdXN0b21TeW5jQnV0dG9uICYmIFxuXHRcdFx0XHRcdHRoaXMuY3VzdG9tU3luY0J1dHRvbi5wYXJlbnRFbGVtZW50ICYmIFxuXHRcdFx0XHRcdGRvY3VtZW50LmJvZHkuY29udGFpbnModGhpcy5jdXN0b21TeW5jQnV0dG9uKSAmJlxuXHRcdFx0XHRcdHRoaXMuY3VzdG9tU3luY0J1dHRvbi5oYXNBdHRyaWJ1dGUoJ2RhdGEtdWktdHdlYWtlci1zeW5jLXJlcGxhY2VtZW50Jyk7XG5cdFx0XHRcdFxuXHRcdFx0XHQvLyBPbmx5IHJlY3JlYXRlIGlmIGN1c3RvbSBidXR0b24gZG9lc24ndCBleGlzdCBBTkQgd2UncmUgbm90IGN1cnJlbnRseSB1cGRhdGluZ1xuXHRcdFx0XHRpZiAoIWN1c3RvbUJ1dHRvbkV4aXN0cyAmJiAhdGhpcy5pc1VwZGF0aW5nU3luY0J1dHRvbikge1xuXHRcdFx0XHRcdC8vIENsZWFyIHN0YWxlIHJlZmVyZW5jZSBpZiBidXR0b24gd2FzIHJlbW92ZWRcblx0XHRcdFx0XHRpZiAodGhpcy5jdXN0b21TeW5jQnV0dG9uICYmICFkb2N1bWVudC5ib2R5LmNvbnRhaW5zKHRoaXMuY3VzdG9tU3luY0J1dHRvbikpIHtcblx0XHRcdFx0XHRcdHRoaXMuY3VzdG9tU3luY0J1dHRvbiA9IHVuZGVmaW5lZDtcblx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0Ly8gU2V0IGZsYWcgdG8gcHJldmVudCBpbmZpbml0ZSBsb29wc1xuXHRcdFx0XHRcdHRoaXMuaXNVcGRhdGluZ1N5bmNCdXR0b24gPSB0cnVlO1xuXHRcdFx0XHRcdHZvaWQgdGhpcy51cGRhdGVTeW5jQnV0dG9uKCkuZmluYWxseSgoKSA9PiB7XG5cdFx0XHRcdFx0XHR0aGlzLmlzVXBkYXRpbmdTeW5jQnV0dG9uID0gZmFsc2U7XG5cdFx0XHRcdFx0fSk7XG5cdFx0XHRcdH1cblx0XHRcdH0sIDEwMCk7XG5cdFx0fSk7XG5cblx0XHQvLyBPYnNlcnZlIHRoZSByaWdodCBkcmF3ZXIgaGVhZGVyICh3aGVyZSBzeW5jIGJ1dHRvbiBpcyBsb2NhdGVkKVxuXHRcdGNvbnN0IHJpZ2h0RHJhd2VyID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLndvcmtzcGFjZS1kcmF3ZXIubW9kLXJpZ2h0Jyk7XG5cdFx0aWYgKHJpZ2h0RHJhd2VyKSB7XG5cdFx0XHR0aGlzLnN5bmNCdXR0b25PYnNlcnZlci5vYnNlcnZlKHJpZ2h0RHJhd2VyLCB7XG5cdFx0XHRcdGNoaWxkTGlzdDogdHJ1ZSxcblx0XHRcdFx0c3VidHJlZTogdHJ1ZSxcblx0XHRcdH0pO1xuXHRcdFx0XG5cdFx0XHQvLyBTcGVjaWZpY2FsbHkgb2JzZXJ2ZSB0aGUgaGVhZGVyXG5cdFx0XHRjb25zdCBkcmF3ZXJIZWFkZXIgPSByaWdodERyYXdlci5xdWVyeVNlbGVjdG9yKCcud29ya3NwYWNlLWRyYXdlci1oZWFkZXInKTtcblx0XHRcdGlmIChkcmF3ZXJIZWFkZXIpIHtcblx0XHRcdFx0dGhpcy5zeW5jQnV0dG9uT2JzZXJ2ZXIub2JzZXJ2ZShkcmF3ZXJIZWFkZXIsIHtcblx0XHRcdFx0XHRjaGlsZExpc3Q6IHRydWUsXG5cdFx0XHRcdFx0c3VidHJlZTogdHJ1ZSxcblx0XHRcdFx0fSk7XG5cdFx0XHR9XG5cdFx0fVxuXHRcdFxuXHRcdC8vIEFkZCBmYWxsYmFjayBvYnNlcnZlcnMgaWYgdGhlIHNwZWNpZmljIGVsZW1lbnRzIGRvbid0IGV4aXN0IHlldFxuXHRcdGlmICghcmlnaHREcmF3ZXIpIHtcblx0XHRcdGNvbnN0IHdvcmtzcGFjZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy53b3Jrc3BhY2Utc3BsaXQubW9kLXJpZ2h0LXNwbGl0Jyk7XG5cdFx0XHRpZiAod29ya3NwYWNlKSB7XG5cdFx0XHRcdHRoaXMuc3luY0J1dHRvbk9ic2VydmVyLm9ic2VydmUod29ya3NwYWNlLCB7XG5cdFx0XHRcdFx0Y2hpbGRMaXN0OiB0cnVlLFxuXHRcdFx0XHRcdHN1YnRyZWU6IHRydWUsXG5cdFx0XHRcdH0pO1xuXHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0Ly8gTGFzdCByZXNvcnQ6IG9ic2VydmUgZG9jdW1lbnQgYm9keVxuXHRcdFx0XHR0aGlzLnN5bmNCdXR0b25PYnNlcnZlci5vYnNlcnZlKGRvY3VtZW50LmJvZHksIHtcblx0XHRcdFx0XHRjaGlsZExpc3Q6IHRydWUsXG5cdFx0XHRcdFx0c3VidHJlZTogdHJ1ZSxcblx0XHRcdFx0fSk7XG5cdFx0XHR9XG5cdFx0fVxuXHR9XG5cblx0LyoqXG5cdCAqIFNldCB1cCBjb21tYW5kIGV4ZWN1dGlvbiBpbnRlcmNlcHRvciB0byB1cGRhdGUgYnV0dG9uIHRvZ2dsZSBzdGF0ZXNcblx0ICogVGhpcyBpbnRlcmNlcHRzIGNvbW1hbmQgZXhlY3V0aW9uIGdsb2JhbGx5IHRvIHVwZGF0ZSBidXR0b25zIHdoZW4gY29tbWFuZHMgYXJlIHJ1blxuXHQgKiBmcm9tIGFueXdoZXJlIChjb21tYW5kIHBhbGV0dGUsIGhvdGtleXMsIGV0Yy4pXG5cdCAqL1xuXHRwcml2YXRlIHNldHVwVG9nZ2xlU3RhdGVSZWZyZXNoKCk6IHZvaWQge1xuXHRcdGNvbnN0IGNvbW1hbmRzID0gKHRoaXMuYXBwIGFzIHsgY29tbWFuZHM/OiB7IGV4ZWN1dGVDb21tYW5kQnlJZD86IChpZDogc3RyaW5nKSA9PiBQcm9taXNlPHZvaWQ+IH0gfSkuY29tbWFuZHM7XG5cdFx0aWYgKCFjb21tYW5kcz8uZXhlY3V0ZUNvbW1hbmRCeUlkKSByZXR1cm47XG5cblx0XHQvLyBTdG9yZSBvcmlnaW5hbCBmdW5jdGlvblxuXHRcdGNvbnN0IG9yaWdpbmFsRXhlY3V0ZSA9IGNvbW1hbmRzLmV4ZWN1dGVDb21tYW5kQnlJZC5iaW5kKGNvbW1hbmRzKSBhcyAoaWQ6IHN0cmluZykgPT4gUHJvbWlzZTx2b2lkPjtcblxuXHRcdC8vIFdyYXAgZXhlY3V0ZUNvbW1hbmRCeUlkIHRvIGludGVyY2VwdCBjb21tYW5kIGV4ZWN1dGlvblxuXHRcdC8vIFR5cGUgYXNzZXJ0aW9uIG5lZWRlZCBiZWNhdXNlIHdlJ3JlIG1vZGlmeWluZyBPYnNpZGlhbidzIGludGVybmFsIEFQSVxuXHRcdChjb21tYW5kcyBhcyB7IGV4ZWN1dGVDb21tYW5kQnlJZDogKGlkOiBzdHJpbmcpID0+IFByb21pc2U8dm9pZD4gfSkuZXhlY3V0ZUNvbW1hbmRCeUlkID0gYXN5bmMgKGlkOiBzdHJpbmcpOiBQcm9taXNlPHZvaWQ+ID0+IHtcblx0XHRcdC8vIENoZWNrIGlmIHRoaXMgaXMgYSBjb21tYW5kIHdlJ3JlIHRyYWNraW5nXG5cdFx0XHRjb25zdCBpc1RyYWNrZWQgPSB0aGlzLnNldHRpbmdzLmV4cGxvcmVyQ29tbWFuZHM/LnNvbWUocCA9PiBwLmlkID09PSBpZCAmJiBwLnRvZ2dsZUljb24pIHx8XG5cdFx0XHRcdHRoaXMuc2V0dGluZ3MudGFiQmFyQ29tbWFuZHM/LnNvbWUocCA9PiBwLmlkID09PSBpZCAmJiBwLnRvZ2dsZUljb24pO1xuXG5cdFx0XHRpZiAoaXNUcmFja2VkKSB7XG5cdFx0XHRcdC8vIFJlY29yZCBleGVjdXRpb24gZm9yIHRvZ2dsZSB0cmFja2luZ1xuXHRcdFx0XHRyZWNvcmRDb21tYW5kRXhlY3V0aW9uKGlkKTtcblxuXHRcdFx0XHQvLyBFeGVjdXRlIHRoZSBjb21tYW5kXG5cdFx0XHRcdGF3YWl0IG9yaWdpbmFsRXhlY3V0ZShpZCk7XG5cblx0XHRcdFx0Ly8gVXBkYXRlIGJ1dHRvbiBzdGF0ZXMgYWZ0ZXIgYSBicmllZiBkZWxheSB0byBhbGxvdyBjb21tYW5kIHRvIGNvbXBsZXRlXG5cdFx0XHRcdC8vIFVzZSBtdWx0aXBsZSB0aW1lb3V0cyB0byBjYXRjaCBjb21tYW5kcyB0aGF0IHRha2UgbG9uZ2VyIHRvIGNvbXBsZXRlXG5cdFx0XHRcdHNldFRpbWVvdXQoKCkgPT4ge1xuXHRcdFx0XHRcdGlmICh0aGlzLmV4cGxvcmVyTWFuYWdlcikge1xuXHRcdFx0XHRcdFx0dGhpcy5leHBsb3Jlck1hbmFnZXIucmVmcmVzaFRvZ2dsZVN0YXRlcygpO1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0XHRpZiAodGhpcy50YWJCYXJNYW5hZ2VyKSB7XG5cdFx0XHRcdFx0XHR0aGlzLnRhYkJhck1hbmFnZXIucmVmcmVzaFRvZ2dsZVN0YXRlcygpO1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0fSwgNTApO1xuXHRcdFx0XHRcblx0XHRcdFx0Ly8gQWxzbyByZWZyZXNoIGFmdGVyIGEgbG9uZ2VyIGRlbGF5IHRvIGNhdGNoIGNvbW1hbmRzIHRoYXQgdGFrZSBtb3JlIHRpbWVcblx0XHRcdFx0c2V0VGltZW91dCgoKSA9PiB7XG5cdFx0XHRcdFx0aWYgKHRoaXMuZXhwbG9yZXJNYW5hZ2VyKSB7XG5cdFx0XHRcdFx0XHR0aGlzLmV4cGxvcmVyTWFuYWdlci5yZWZyZXNoVG9nZ2xlU3RhdGVzKCk7XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHRcdGlmICh0aGlzLnRhYkJhck1hbmFnZXIpIHtcblx0XHRcdFx0XHRcdHRoaXMudGFiQmFyTWFuYWdlci5yZWZyZXNoVG9nZ2xlU3RhdGVzKCk7XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHR9LCAzMDApO1xuXHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0Ly8gTm90IGEgdHJhY2tlZCBjb21tYW5kLCBqdXN0IGV4ZWN1dGUgbm9ybWFsbHlcblx0XHRcdFx0YXdhaXQgb3JpZ2luYWxFeGVjdXRlKGlkKTtcblx0XHRcdH1cblx0XHR9O1xuXHR9XG5cblx0cHJpdmF0ZSByZXN0b3JlU3luY0J1dHRvbigpIHtcblx0XHQvLyBSZW1vdmUgQ1NTIGNsYXNzIGlmIHJlcGxhY2VtZW50IGlzIGRpc2FibGVkIG9yIG5vdCBvbiBtb2JpbGVcblx0XHRpZiAoIXRoaXMuc2V0dGluZ3Muc3luY0J1dHRvblJlcGxhY2VtZW50Py5lbmFibGVkIHx8ICFQbGF0Zm9ybS5pc01vYmlsZSkge1xuXHRcdFx0ZG9jdW1lbnQuYm9keS5jbGFzc0xpc3QucmVtb3ZlKCd1aS10d2Vha2VyLWhpZGUtc3luYy1idXR0b24nKTtcblx0XHR9XG5cblx0XHQvLyBSZW1vdmUgdGhlIGN1c3RvbSBidXR0b24gKG9ubHkgaWYgcmVwbGFjZW1lbnQgaXMgZGlzYWJsZWQpXG5cdFx0aWYgKCF0aGlzLnNldHRpbmdzLnN5bmNCdXR0b25SZXBsYWNlbWVudD8uZW5hYmxlZCkge1xuXHRcdFx0aWYgKHRoaXMuY3VzdG9tU3luY0J1dHRvbiAmJiBkb2N1bWVudC5ib2R5LmNvbnRhaW5zKHRoaXMuY3VzdG9tU3luY0J1dHRvbikpIHtcblx0XHRcdFx0dGhpcy5jdXN0b21TeW5jQnV0dG9uLnJlbW92ZSgpO1xuXHRcdFx0fVxuXHRcdFx0dGhpcy5jdXN0b21TeW5jQnV0dG9uID0gdW5kZWZpbmVkO1xuXHRcdFx0XG5cdFx0XHQvLyBSZXN0b3JlIHRoZSBvcmlnaW5hbCBidXR0b24ncyB2aXNpYmlsaXR5ICh3ZSBoaWQgaXQgd2l0aCBzdHlsZS5kaXNwbGF5ID0gJ25vbmUnKVxuXHRcdFx0aWYgKHRoaXMub3JpZ2luYWxTeW5jQnV0dG9uICYmIGRvY3VtZW50LmJvZHkuY29udGFpbnModGhpcy5vcmlnaW5hbFN5bmNCdXR0b24pKSB7XG5cdFx0XHRcdHRoaXMub3JpZ2luYWxTeW5jQnV0dG9uLnN0eWxlLnJlbW92ZVByb3BlcnR5KCdkaXNwbGF5Jyk7XG5cdFx0XHR9XG5cdFx0XHR0aGlzLm9yaWdpbmFsU3luY0J1dHRvbiA9IHVuZGVmaW5lZDtcblx0XHR9XG5cdH1cbn1cbiIsICIvKipcbiAqIFNldHRpbmdzIGludGVyZmFjZSBhbmQgZGVmYXVsdHNcbiAqL1xuXG5pbXBvcnQgeyBVSVZpc2liaWxpdHlTdGF0ZSwgTW9iaWxlTmF2UG9zaXRpb24sIENvbW1hbmRJY29uUGFpciwgU3RhdHVzQmFySXRlbSwgRXhwbG9yZXJCdXR0b25JdGVtIH0gZnJvbSAnLi90eXBlcyc7XG5cbmV4cG9ydCBpbnRlcmZhY2UgVUlTZXR0aW5ncyB7XG5cdC8vIEF1dG8taGlkZSBlbGVtZW50cyAoU2hvdy9IaWRlL1JldmVhbClcblx0dGl0bGVCYXI6IFVJVmlzaWJpbGl0eVN0YXRlO1xuXHRmaWxlRXhwbG9yZXJOYXZIZWFkZXI6IFVJVmlzaWJpbGl0eVN0YXRlO1xuXHRvdGhlck5hdkhlYWRlcnM6IFVJVmlzaWJpbGl0eVN0YXRlO1xuXHRsZWZ0VGFiSGVhZGVyczogVUlWaXNpYmlsaXR5U3RhdGU7XG5cdHJpZ2h0VGFiSGVhZGVyczogVUlWaXNpYmlsaXR5U3RhdGU7XG5cdHJpYmJvblJldmVhbE9uSG92ZXI6IGJvb2xlYW47IC8vIEJvb2xlYW4gdG9nZ2xlIGZvciBhdXRvLWNvbGxhcHNlIHJpYmJvblxuXHR2YXVsdFN3aXRjaGVyOiBVSVZpc2liaWxpdHlTdGF0ZTtcblx0aGVscEJ1dHRvbjogVUlWaXNpYmlsaXR5U3RhdGU7IC8vIENoYW5nZWQgdG8gc3VwcG9ydCBTaG93L0hpZGUvUmV2ZWFsXG5cdHNldHRpbmdzQnV0dG9uOiBVSVZpc2liaWxpdHlTdGF0ZTtcblxuXHQvLyBTaW1wbGUgdG9nZ2xlcyAoU2hvdy9IaWRlIG9ubHkpXG5cdHRhYkJhcjogYm9vbGVhbjtcblx0ZW5hYmxlV2luZG93RHJhZ2dpbmc6IGJvb2xlYW47XG5cdG5ld05vdGVCdXR0b246IGJvb2xlYW47XG5cdG5ld0ZvbGRlckJ1dHRvbjogYm9vbGVhbjtcblx0c29ydE9yZGVyQnV0dG9uOiBib29sZWFuO1xuXHRhdXRvUmV2ZWFsQnV0dG9uOiBib29sZWFuO1xuXHRjb2xsYXBzZUFsbEJ1dHRvbjogYm9vbGVhbjtcblx0cmVhZGluZ01vZGVCdXR0b246IGJvb2xlYW47XG5cdHNlYXJjaFNldHRpbmdzQnV0dG9uOiBib29sZWFuO1xuXHR0YWJMaXN0SWNvbjogVUlWaXNpYmlsaXR5U3RhdGU7IC8vIENoYW5nZWQgdG8gc3VwcG9ydCBSZXZlYWxcblx0bmV3VGFiSWNvbjogVUlWaXNpYmlsaXR5U3RhdGU7IC8vIENoYW5nZWQgdG8gc3VwcG9ydCBSZXZlYWxcblx0dGFiQ2xvc2VCdXR0b246IFVJVmlzaWJpbGl0eVN0YXRlOyAvLyBDaGFuZ2VkIHRvIHN1cHBvcnQgUmV2ZWFsXG5cdHN0YXR1c0JhcjogYm9vbGVhbjtcblx0c2Nyb2xsQmFyczogVUlWaXNpYmlsaXR5U3RhdGU7IC8vIENoYW5nZWQgdG8gc3VwcG9ydCBSZXZlYWxcblx0bGVmdFNpZGViYXJUb2dnbGVCdXR0b246IFVJVmlzaWJpbGl0eVN0YXRlOyAvLyBDaGFuZ2VkIHRvIHN1cHBvcnQgUmV2ZWFsXG5cdHJpZ2h0U2lkZWJhclRvZ2dsZUJ1dHRvbjogVUlWaXNpYmlsaXR5U3RhdGU7IC8vIENoYW5nZWQgdG8gc3VwcG9ydCBSZXZlYWxcblx0dG9vbHRpcHM6IGJvb2xlYW47XG5cdHNlYXJjaFN1Z2dlc3Rpb25zOiBib29sZWFuO1xuXHRzZWFyY2hUZXJtQ291bnRzOiBib29sZWFuO1xuXHRwcm9wZXJ0aWVzSW5SZWFkaW5nVmlldzogYm9vbGVhbjtcblx0cHJvcGVydGllc0luSGVhZGluZzogYm9vbGVhbjtcblx0YWRkUHJvcGVydHlCdXR0b246IGJvb2xlYW47XG5cdGluc3RydWN0aW9uczogYm9vbGVhbjtcblxuXHQvLyBNb2JpbGUtc3BlY2lmaWMgc2V0dGluZ3MgKFNob3cvSGlkZSBvbmx5KVxuXHRtb2JpbGVDaGV2cm9uc0ljb246IGJvb2xlYW47XG5cdG5hdmlnYXRlQmFja0J1dHRvbjogYm9vbGVhbjtcblx0bmF2aWdhdGVGb3J3YXJkQnV0dG9uOiBib29sZWFuO1xuXHRxdWlja1N3aXRjaGVyQnV0dG9uOiBib29sZWFuO1xuXHRtb2JpbGVOZXdUYWJCdXR0b246IGJvb2xlYW47XG5cdG9wZW5UYWJCdXR0b246IGJvb2xlYW47XG5cdHJpYmJvbk1lbnVCdXR0b246IGJvb2xlYW47XG5cdHN3YXBNb2JpbGVOZXdUYWJJY29uOiBib29sZWFuO1xuXHRoaWRlTW9iaWxlVGl0bGU6IGJvb2xlYW47XG5cdGhpZGVNb2JpbGVTeW5jSWNvbjogYm9vbGVhbjtcblxuXHQvLyBNb2JpbGUgbmF2aWdhdGlvbiBtZW51IHBvc2l0aW9uc1xuXHRuYXZpZ2F0ZUJ1dHRvblBvc2l0aW9uOiBNb2JpbGVOYXZQb3NpdGlvbjtcblx0bmF2aWdhdGlvbkJ1dHRvblBvc2l0aW9uOiBNb2JpbGVOYXZQb3NpdGlvbjtcblx0cXVpY2tTd2l0Y2hlclBvc2l0aW9uOiBNb2JpbGVOYXZQb3NpdGlvbjtcblx0bmV3VGFiUG9zaXRpb246IE1vYmlsZU5hdlBvc2l0aW9uO1xuXHRvcGVuVGFic1Bvc2l0aW9uOiBNb2JpbGVOYXZQb3NpdGlvbjtcblx0cmliYm9uTWVudVBvc2l0aW9uOiBNb2JpbGVOYXZQb3NpdGlvbjtcblxuXHQvLyBBZHZhbmNlZCBzZXR0aW5nc1xuXHR2YXVsdFN3aXRjaGVyQmFja2dyb3VuZFRyYW5zcGFyZW5jeTogbnVtYmVyOyAvLyAwLTFcblx0aGVscEJ1dHRvblJlcGxhY2VtZW50OiB7XG5cdFx0ZW5hYmxlZDogYm9vbGVhbjtcblx0XHRjb21tYW5kSWQ6IHN0cmluZztcblx0XHRpY29uSWQ6IHN0cmluZztcblx0fTtcblx0c3luY0J1dHRvblJlcGxhY2VtZW50OiB7XG5cdFx0ZW5hYmxlZDogYm9vbGVhbjtcblx0XHRjb21tYW5kSWQ6IHN0cmluZztcblx0XHRpY29uSWQ6IHN0cmluZztcblx0fTtcblxuXHQvLyBUYWIgQmFyIGN1c3RvbSBjb21tYW5kc1xuXHR0YWJCYXJDb21tYW5kczogQ29tbWFuZEljb25QYWlyW107XG5cblx0Ly8gU3RhdHVzIEJhciBpdGVtcyAodW5pZmllZCBsaXN0IG9mIGV4aXN0aW5nICsgY3VzdG9tKVxuXHRzdGF0dXNCYXJJdGVtczogU3RhdHVzQmFySXRlbVtdO1xuXG5cdC8vIEV4cGxvcmVyIGN1c3RvbSBjb21tYW5kcyAobGVnYWN5IC0ga2VwdCBmb3IgbWlncmF0aW9uKVxuXHRleHBsb3JlckNvbW1hbmRzOiBDb21tYW5kSWNvblBhaXJbXTtcblxuXHQvLyBFeHBsb3JlciBidXR0b24gaXRlbXMgKHVuaWZpZWQgbGlzdCBvZiBuYXRpdmUgKyBleHRlcm5hbCArIGN1c3RvbSlcblx0ZXhwbG9yZXJCdXR0b25JdGVtczogRXhwbG9yZXJCdXR0b25JdGVtW107XG5cblx0Ly8gTmF0aXZlIGV4cGxvcmVyIGJ1dHRvbiBjb2xvcnMgKG9wdGlvbmFsKVxuXHRuYXRpdmVFeHBsb3JlckJ1dHRvbkNvbG9ycz86IHtcblx0XHRuZXdOb3RlPzogc3RyaW5nO1xuXHRcdG5ld0ZvbGRlcj86IHN0cmluZztcblx0XHRzb3J0T3JkZXI/OiBzdHJpbmc7XG5cdFx0YXV0b1JldmVhbD86IHN0cmluZztcblx0XHRjb2xsYXBzZUFsbD86IHN0cmluZztcblx0fTtcblxuXHQvLyBOYXRpdmUgZXhwbG9yZXIgYnV0dG9uIGljb24gb3ZlcnJpZGVzIChvcHRpb25hbClcblx0bmF0aXZlRXhwbG9yZXJCdXR0b25JY29ucz86IHtcblx0XHRuZXdOb3RlPzogc3RyaW5nO1xuXHRcdG5ld0ZvbGRlcj86IHN0cmluZztcblx0XHRzb3J0T3JkZXI/OiBzdHJpbmc7XG5cdFx0YXV0b1JldmVhbD86IHN0cmluZztcblx0XHRjb2xsYXBzZUFsbD86IHN0cmluZztcblx0fTtcbn1cblxuZXhwb3J0IGNvbnN0IERFRkFVTFRfU0VUVElOR1M6IFVJU2V0dGluZ3MgPSB7XG5cdC8vIEF1dG8taGlkZSBlbGVtZW50c1xuXHR0aXRsZUJhcjogJ3Nob3cnLFxuXHRmaWxlRXhwbG9yZXJOYXZIZWFkZXI6ICdzaG93Jyxcblx0b3RoZXJOYXZIZWFkZXJzOiAnc2hvdycsXG5cdGxlZnRUYWJIZWFkZXJzOiAnc2hvdycsXG5cdHJpZ2h0VGFiSGVhZGVyczogJ3Nob3cnLFxuXHRyaWJib25SZXZlYWxPbkhvdmVyOiBmYWxzZSxcblx0dmF1bHRTd2l0Y2hlcjogJ3Nob3cnLFxuXHRoZWxwQnV0dG9uOiAnc2hvdycsXG5cdHNldHRpbmdzQnV0dG9uOiAnc2hvdycsXG5cblx0Ly8gU2ltcGxlIHRvZ2dsZXNcblx0dGFiQmFyOiBmYWxzZSxcblx0ZW5hYmxlV2luZG93RHJhZ2dpbmc6IGZhbHNlLFxuXHRuZXdOb3RlQnV0dG9uOiBmYWxzZSxcblx0bmV3Rm9sZGVyQnV0dG9uOiBmYWxzZSxcblx0c29ydE9yZGVyQnV0dG9uOiBmYWxzZSxcblx0YXV0b1JldmVhbEJ1dHRvbjogZmFsc2UsXG5cdGNvbGxhcHNlQWxsQnV0dG9uOiBmYWxzZSxcblx0cmVhZGluZ01vZGVCdXR0b246IGZhbHNlLFxuXHRzZWFyY2hTZXR0aW5nc0J1dHRvbjogZmFsc2UsXG5cdHRhYkxpc3RJY29uOiAnc2hvdycsXG5cdG5ld1RhYkljb246ICdzaG93Jyxcblx0dGFiQ2xvc2VCdXR0b246ICdzaG93Jyxcblx0c3RhdHVzQmFyOiBmYWxzZSxcblx0c2Nyb2xsQmFyczogJ3Nob3cnLFxuXHRsZWZ0U2lkZWJhclRvZ2dsZUJ1dHRvbjogJ3Nob3cnLFxuXHRyaWdodFNpZGViYXJUb2dnbGVCdXR0b246ICdzaG93Jyxcblx0dG9vbHRpcHM6IGZhbHNlLFxuXHRzZWFyY2hTdWdnZXN0aW9uczogZmFsc2UsXG5cdHNlYXJjaFRlcm1Db3VudHM6IGZhbHNlLFxuXHRwcm9wZXJ0aWVzSW5SZWFkaW5nVmlldzogZmFsc2UsXG5cdHByb3BlcnRpZXNJbkhlYWRpbmc6IGZhbHNlLFxuXHRhZGRQcm9wZXJ0eUJ1dHRvbjogZmFsc2UsXG5cdGluc3RydWN0aW9uczogZmFsc2UsXG5cblx0Ly8gTW9iaWxlLXNwZWNpZmljXG5cdG1vYmlsZUNoZXZyb25zSWNvbjogZmFsc2UsXG5cdG5hdmlnYXRlQmFja0J1dHRvbjogZmFsc2UsXG5cdG5hdmlnYXRlRm9yd2FyZEJ1dHRvbjogZmFsc2UsXG5cdHF1aWNrU3dpdGNoZXJCdXR0b246IGZhbHNlLFxuXHRtb2JpbGVOZXdUYWJCdXR0b246IGZhbHNlLFxuXHRvcGVuVGFiQnV0dG9uOiBmYWxzZSxcblx0cmliYm9uTWVudUJ1dHRvbjogZmFsc2UsXG5cdHN3YXBNb2JpbGVOZXdUYWJJY29uOiBmYWxzZSxcblx0aGlkZU1vYmlsZVRpdGxlOiBmYWxzZSxcblx0aGlkZU1vYmlsZVN5bmNJY29uOiBmYWxzZSxcblxuXHQvLyBNb2JpbGUgbmF2aWdhdGlvbiBtZW51IHBvc2l0aW9uc1xuXHRuYXZpZ2F0ZUJ1dHRvblBvc2l0aW9uOiAnMScsXG5cdG5hdmlnYXRpb25CdXR0b25Qb3NpdGlvbjogJzInLFxuXHRxdWlja1N3aXRjaGVyUG9zaXRpb246ICczJyxcblx0bmV3VGFiUG9zaXRpb246ICc0Jyxcblx0b3BlblRhYnNQb3NpdGlvbjogJzUnLFxuXHRyaWJib25NZW51UG9zaXRpb246ICc2JyxcblxuXHQvLyBBZHZhbmNlZFxuXHR2YXVsdFN3aXRjaGVyQmFja2dyb3VuZFRyYW5zcGFyZW5jeTogMC45OCxcblx0aGVscEJ1dHRvblJlcGxhY2VtZW50OiB7XG5cdFx0ZW5hYmxlZDogZmFsc2UsXG5cdFx0Y29tbWFuZElkOiAnJyxcblx0XHRpY29uSWQ6ICd3cmVuY2gnLFxuXHR9LFxuXHRzeW5jQnV0dG9uUmVwbGFjZW1lbnQ6IHtcblx0XHRlbmFibGVkOiBmYWxzZSxcblx0XHRjb21tYW5kSWQ6ICcnLFxuXHRcdGljb25JZDogJ3dyZW5jaCcsXG5cdH0sXG5cblx0Ly8gVGFiIEJhclxuXHR0YWJCYXJDb21tYW5kczogW10sXG5cblx0Ly8gU3RhdHVzIEJhclxuXHRzdGF0dXNCYXJJdGVtczogW10sXG5cblx0Ly8gRXhwbG9yZXJcblx0ZXhwbG9yZXJDb21tYW5kczogW10sXG5cdGV4cGxvcmVyQnV0dG9uSXRlbXM6IFtdLFxuXG5cdC8vIE5hdGl2ZSBleHBsb3JlciBidXR0b24gY29sb3JzXG5cdG5hdGl2ZUV4cGxvcmVyQnV0dG9uQ29sb3JzOiB7XG5cdFx0bmV3Tm90ZTogdW5kZWZpbmVkLFxuXHRcdG5ld0ZvbGRlcjogdW5kZWZpbmVkLFxuXHRcdHNvcnRPcmRlcjogdW5kZWZpbmVkLFxuXHRcdGF1dG9SZXZlYWw6IHVuZGVmaW5lZCxcblx0XHRjb2xsYXBzZUFsbDogdW5kZWZpbmVkLFxuXHR9LFxuXG5cdC8vIE5hdGl2ZSBleHBsb3JlciBidXR0b24gaWNvbiBvdmVycmlkZXNcblx0bmF0aXZlRXhwbG9yZXJCdXR0b25JY29uczoge1xuXHRcdG5ld05vdGU6IHVuZGVmaW5lZCxcblx0XHRuZXdGb2xkZXI6IHVuZGVmaW5lZCxcblx0XHRzb3J0T3JkZXI6IHVuZGVmaW5lZCxcblx0XHRhdXRvUmV2ZWFsOiB1bmRlZmluZWQsXG5cdFx0Y29sbGFwc2VBbGw6IHVuZGVmaW5lZCxcblx0fSxcbn07XG4iLCAiLyoqXG4gKiBVSSBNYW5hZ2VyIC0gaGFuZGxlcyBDU1MgY2xhc3MgaW5qZWN0aW9uIGFuZCByZXZlYWwtb24taG92ZXIgZnVuY3Rpb25hbGl0eVxuICovXG5cbmltcG9ydCB7IFBsYXRmb3JtIH0gZnJvbSAnb2JzaWRpYW4nO1xuaW1wb3J0IHsgVUlTZXR0aW5ncyB9IGZyb20gJy4vc2V0dGluZ3MnO1xuaW1wb3J0IHsgVUlWaXNpYmlsaXR5U3RhdGUgfSBmcm9tICcuL3R5cGVzJztcblxuLy8gTGlnaHR3ZWlnaHQgaGVscGVyIHRoYXQgbWlycm9ycyBPYnNpZGlhbidzIHNldENzc1Byb3BzIEFQSSB3aGVyZSB1bmF2YWlsYWJsZVxuZXhwb3J0IGZ1bmN0aW9uIHNldENzc1Byb3BzKGVsOiBIVE1MRWxlbWVudCwgcHJvcHM6IFJlY29yZDxzdHJpbmcsIHN0cmluZyB8IG51bWJlcj4pIHtcblx0T2JqZWN0LmVudHJpZXMocHJvcHMpLmZvckVhY2goKFtrZXksIHZhbHVlXSkgPT4ge1xuXHRcdGVsLnN0eWxlLnNldFByb3BlcnR5KGtleSwgU3RyaW5nKHZhbHVlKSk7XG5cdH0pO1xufVxuXG5leHBvcnQgY2xhc3MgVUlNYW5hZ2VyIHtcblx0cHJpdmF0ZSBzZXR0aW5nczogVUlTZXR0aW5ncztcblx0cHJpdmF0ZSByZXZlYWxMaXN0ZW5lcnM6IE1hcDxzdHJpbmcsICgpID0+IHZvaWQ+ID0gbmV3IE1hcCgpO1xuXG5cdGNvbnN0cnVjdG9yKHNldHRpbmdzOiBVSVNldHRpbmdzKSB7XG5cdFx0dGhpcy5zZXR0aW5ncyA9IHNldHRpbmdzO1xuXHR9XG5cblx0dXBkYXRlU2V0dGluZ3Moc2V0dGluZ3M6IFVJU2V0dGluZ3MpIHtcblx0XHR0aGlzLnNldHRpbmdzID0gc2V0dGluZ3M7XG5cdFx0dGhpcy5hcHBseVN0eWxlcygpO1xuXHRcdC8vIEFwcGx5IG5hdGl2ZSBpY29uIG92ZXJyaWRlcyBhZnRlciBzdHlsZXMgYXJlIGFwcGxpZWRcblx0XHQvLyBOb3RlOiBleHBsb3Jlck1hbmFnZXIgaXMgYWNjZXNzZWQgdmlhIHBsdWdpbiBpbnN0YW5jZSwgbm90IHN0b3JlZCBoZXJlXG5cdH1cblxuXHRwcml2YXRlIGRldGVjdE9TKCk6ICd3aW5kb3dzJyB8ICdtYWNvcycgfCAnbmV1dHJhbCcge1xuXHRcdC8vIFVzZSBPYnNpZGlhbidzIFBsYXRmb3JtIEFQSVxuXHRcdGlmIChQbGF0Zm9ybS5pc01hY09TKSB7XG5cdFx0XHRyZXR1cm4gJ21hY29zJztcblx0XHR9XG5cdFx0aWYgKFBsYXRmb3JtLmlzV2luKSB7XG5cdFx0XHRyZXR1cm4gJ3dpbmRvd3MnO1xuXHRcdH1cblx0XHRcblx0XHQvLyBEZWZhdWx0IHRvIG5ldXRyYWwvTGludXhcblx0XHRyZXR1cm4gJ25ldXRyYWwnO1xuXHR9XG5cblx0YXBwbHlTdHlsZXMoKSB7XG5cdFx0Y29uc3QgYm9keSA9IGRvY3VtZW50LmJvZHk7XG5cblx0XHQvLyBBdXRvLWhpZGUgZWxlbWVudHMgd2l0aCBTaG93L0hpZGUvUmV2ZWFsXG5cdFx0dGhpcy5hcHBseVZpc2liaWxpdHlTdGF0ZShib2R5LCAnYXV0by1oaWRlLXRpdGxlLWJhcicsIHRoaXMuc2V0dGluZ3MudGl0bGVCYXIsIHRydWUpO1xuXHRcdHRoaXMuYXBwbHlWaXNpYmlsaXR5U3RhdGUoYm9keSwgJ2F1dG8taGlkZS1maWxlLWV4cGxvcmVyLW5hdi1oZWFkZXInLCB0aGlzLnNldHRpbmdzLmZpbGVFeHBsb3Jlck5hdkhlYWRlcik7XG5cdFx0dGhpcy5hcHBseVZpc2liaWxpdHlTdGF0ZShib2R5LCAnYXV0by1oaWRlLW90aGVyLW5hdi1oZWFkZXJzJywgdGhpcy5zZXR0aW5ncy5vdGhlck5hdkhlYWRlcnMpO1xuXHRcdHRoaXMuYXBwbHlWaXNpYmlsaXR5U3RhdGUoYm9keSwgJ2F1dG8taGlkZS1sZWZ0LXRhYi1oZWFkZXJzJywgdGhpcy5zZXR0aW5ncy5sZWZ0VGFiSGVhZGVycyk7XG5cdFx0dGhpcy5hcHBseVZpc2liaWxpdHlTdGF0ZShib2R5LCAnYXV0by1oaWRlLXJpZ2h0LXRhYi1oZWFkZXJzJywgdGhpcy5zZXR0aW5ncy5yaWdodFRhYkhlYWRlcnMpO1xuXHRcdHRoaXMuYXBwbHlWaXNpYmlsaXR5U3RhdGUoYm9keSwgJ2F1dG8taGlkZS12YXVsdC1zd2l0Y2hlcicsIHRoaXMuc2V0dGluZ3MudmF1bHRTd2l0Y2hlcik7XG5cdFx0dGhpcy5hcHBseVZpc2liaWxpdHlTdGF0ZShib2R5LCAnaGlkZXItaGVscC1idXR0b24nLCB0aGlzLnNldHRpbmdzLmhlbHBCdXR0b24pO1xuXHRcdHRoaXMuYXBwbHlWaXNpYmlsaXR5U3RhdGUoYm9keSwgJ2F1dG8taGlkZS1zZXR0aW5ncy1idXR0b24nLCB0aGlzLnNldHRpbmdzLnNldHRpbmdzQnV0dG9uKTtcblxuXHRcdC8vIFJpYmJvbiAtIGJvb2xlYW4gdG9nZ2xlIChhdXRvLWNvbGxhcHNlLXJpYmJvbilcblx0XHRib2R5LmNsYXNzTGlzdC50b2dnbGUoJ2F1dG8tY29sbGFwc2UtcmliYm9uJywgdGhpcy5zZXR0aW5ncy5yaWJib25SZXZlYWxPbkhvdmVyKTtcblxuXHRcdC8vIFNpbXBsZSB0b2dnbGVzXG5cdFx0Ym9keS5jbGFzc0xpc3QudG9nZ2xlKCdoaWRlci10YWJzJywgdGhpcy5zZXR0aW5ncy50YWJCYXIpO1xuXHRcdFxuXHRcdC8vIFdpbmRvdyBkcmFnZ2luZyAtIG9ubHkgYXBwbHkgd2hlbiB0YWIgYmFyIGlzIGhpZGRlblxuXHRcdGlmICh0aGlzLnNldHRpbmdzLnRhYkJhciAmJiB0aGlzLnNldHRpbmdzLmVuYWJsZVdpbmRvd0RyYWdnaW5nKSB7XG5cdFx0XHRjb25zdCBvcyA9IHRoaXMuZGV0ZWN0T1MoKTtcblx0XHRcdC8vIFJlbW92ZSBhbGwgd2luZG93IGRyYWdnaW5nIGNsYXNzZXMgZmlyc3Rcblx0XHRcdGJvZHkuY2xhc3NMaXN0LnJlbW92ZSgnZW5hYmxlLXdpbmRvdy1kcmFnZ2luZy13aW5kb3dzJywgJ2VuYWJsZS13aW5kb3ctZHJhZ2dpbmctbWFjb3MnLCAnZW5hYmxlLXdpbmRvdy1kcmFnZ2luZy1uZXV0cmFsJyk7XG5cdFx0XHQvLyBBcHBseSBPUy1zcGVjaWZpYyBjbGFzc1xuXHRcdFx0Ym9keS5jbGFzc0xpc3QuYWRkKGBlbmFibGUtd2luZG93LWRyYWdnaW5nLSR7b3N9YCk7XG5cdFx0fSBlbHNlIHtcblx0XHRcdC8vIFJlbW92ZSBhbGwgd2luZG93IGRyYWdnaW5nIGNsYXNzZXMgaWYgbm90IGVuYWJsZWRcblx0XHRcdGJvZHkuY2xhc3NMaXN0LnJlbW92ZSgnZW5hYmxlLXdpbmRvdy1kcmFnZ2luZy13aW5kb3dzJywgJ2VuYWJsZS13aW5kb3ctZHJhZ2dpbmctbWFjb3MnLCAnZW5hYmxlLXdpbmRvdy1kcmFnZ2luZy1uZXV0cmFsJyk7XG5cdFx0fVxuXHRcdGJvZHkuY2xhc3NMaXN0LnRvZ2dsZSgnaGlkZS1idXR0b24tbmV3LW5vdGUnLCB0aGlzLnNldHRpbmdzLm5ld05vdGVCdXR0b24pO1xuXHRcdGJvZHkuY2xhc3NMaXN0LnRvZ2dsZSgnaGlkZS1idXR0b24tbmV3LWZvbGRlcicsIHRoaXMuc2V0dGluZ3MubmV3Rm9sZGVyQnV0dG9uKTtcblx0XHRib2R5LmNsYXNzTGlzdC50b2dnbGUoJ2hpZGUtYnV0dG9uLXNvcnQtb3JkZXInLCB0aGlzLnNldHRpbmdzLnNvcnRPcmRlckJ1dHRvbik7XG5cdFx0Ym9keS5jbGFzc0xpc3QudG9nZ2xlKCdoaWRlLWJ1dHRvbi1hdXRvLXJldmVhbCcsIHRoaXMuc2V0dGluZ3MuYXV0b1JldmVhbEJ1dHRvbik7XG5cdFx0Ym9keS5jbGFzc0xpc3QudG9nZ2xlKCdoaWRlLWJ1dHRvbi1jb2xsYXBzZS1hbGwnLCB0aGlzLnNldHRpbmdzLmNvbGxhcHNlQWxsQnV0dG9uKTtcblx0XHRib2R5LmNsYXNzTGlzdC50b2dnbGUoJ2hpZGUtYnV0dG9uLXJlYWRpbmctbW9kZScsIHRoaXMuc2V0dGluZ3MucmVhZGluZ01vZGVCdXR0b24pO1xuXHRcdGJvZHkuY2xhc3NMaXN0LnRvZ2dsZSgnaGlkZS1idXR0b24tc2VhcmNoLXNldHRpbmdzJywgdGhpcy5zZXR0aW5ncy5zZWFyY2hTZXR0aW5nc0J1dHRvbik7XG5cdFx0XG5cdFx0Ly8gVGFiIGljb25zIC0gbm93IHN1cHBvcnQgUmV2ZWFsXG5cdFx0dGhpcy5hcHBseVZpc2liaWxpdHlTdGF0ZShib2R5LCAnaGlkZS10YWItbGlzdC1pY29uJywgdGhpcy5zZXR0aW5ncy50YWJMaXN0SWNvbik7XG5cdFx0dGhpcy5hcHBseVZpc2liaWxpdHlTdGF0ZShib2R5LCAnaGlkZS1uZXctdGFiLWljb24nLCB0aGlzLnNldHRpbmdzLm5ld1RhYkljb24pO1xuXHRcdHRoaXMuYXBwbHlWaXNpYmlsaXR5U3RhdGUoYm9keSwgJ2hpZGUtdGFiLWNsb3NlLWJ1dHRvbicsIHRoaXMuc2V0dGluZ3MudGFiQ2xvc2VCdXR0b24pO1xuXHRcdFxuXHRcdGJvZHkuY2xhc3NMaXN0LnRvZ2dsZSgnaGlkZXItc3RhdHVzJywgdGhpcy5zZXR0aW5ncy5zdGF0dXNCYXIpO1xuXHRcdFxuXHRcdC8vIFNjcm9sbGJhcnMgLSBub3cgc3VwcG9ydCBTaG93L0hpZGUvUmV2ZWFsXG5cdFx0dGhpcy5hcHBseVZpc2liaWxpdHlTdGF0ZShib2R5LCAnaGlkZXItc2Nyb2xsJywgdGhpcy5zZXR0aW5ncy5zY3JvbGxCYXJzKTtcblx0XHRcblx0XHQvLyBTZXQgdXAgc2Nyb2xsYmFyIHJldmVhbCBob3ZlciBsaXN0ZW5lcnMgaWYgbmVlZGVkXG5cdFx0aWYgKHRoaXMuc2V0dGluZ3Muc2Nyb2xsQmFycyA9PT0gJ3JldmVhbCcpIHtcblx0XHRcdHRoaXMuc2V0dXBTY3JvbGxiYXJSZXZlYWxMaXN0ZW5lcnMoKTtcblx0XHR9IGVsc2Uge1xuXHRcdFx0dGhpcy5yZW1vdmVTY3JvbGxiYXJSZXZlYWxMaXN0ZW5lcnMoKTtcblx0XHR9XG5cdFx0XG5cdFx0Ly8gU2lkZWJhciB0b2dnbGUgYnV0dG9ucyAtIG5vdyBzdXBwb3J0IFJldmVhbFxuXHRcdHRoaXMuYXBwbHlWaXNpYmlsaXR5U3RhdGUoYm9keSwgJ2hpZGVyLWxlZnQtc2lkZWJhci1idXR0b24nLCB0aGlzLnNldHRpbmdzLmxlZnRTaWRlYmFyVG9nZ2xlQnV0dG9uKTtcblx0XHR0aGlzLmFwcGx5VmlzaWJpbGl0eVN0YXRlKGJvZHksICdoaWRlci1yaWdodC1zaWRlYmFyLWJ1dHRvbicsIHRoaXMuc2V0dGluZ3MucmlnaHRTaWRlYmFyVG9nZ2xlQnV0dG9uKTtcblx0XHRcblx0XHRib2R5LmNsYXNzTGlzdC50b2dnbGUoJ2hpZGVyLXRvb2x0aXBzJywgdGhpcy5zZXR0aW5ncy50b29sdGlwcyk7XG5cdFx0Ym9keS5jbGFzc0xpc3QudG9nZ2xlKCdoaWRlci1zZWFyY2gtc3VnZ2VzdGlvbnMnLCB0aGlzLnNldHRpbmdzLnNlYXJjaFN1Z2dlc3Rpb25zKTtcblx0XHRib2R5LmNsYXNzTGlzdC50b2dnbGUoJ2hpZGVyLXNlYXJjaC1jb3VudHMnLCB0aGlzLnNldHRpbmdzLnNlYXJjaFRlcm1Db3VudHMpO1xuXHRcdGJvZHkuY2xhc3NMaXN0LnRvZ2dsZSgnaGlkZXItbWV0YScsIHRoaXMuc2V0dGluZ3MucHJvcGVydGllc0luUmVhZGluZ1ZpZXcpO1xuXHRcdGJvZHkuY2xhc3NMaXN0LnRvZ2dsZSgnbWV0YWRhdGEtaGVhZGluZy1vZmYnLCB0aGlzLnNldHRpbmdzLnByb3BlcnRpZXNJbkhlYWRpbmcpO1xuXHRcdGJvZHkuY2xhc3NMaXN0LnRvZ2dsZSgnbWV0YWRhdGEtYWRkLXByb3BlcnR5LW9mZicsIHRoaXMuc2V0dGluZ3MuYWRkUHJvcGVydHlCdXR0b24pO1xuXHRcdGJvZHkuY2xhc3NMaXN0LnRvZ2dsZSgnaGlkZXItaW5zdHJ1Y3Rpb25zJywgdGhpcy5zZXR0aW5ncy5pbnN0cnVjdGlvbnMpO1xuXG5cdFx0Ly8gTW9iaWxlLXNwZWNpZmljXG5cdFx0Ym9keS5jbGFzc0xpc3QudG9nZ2xlKCdoaWRlLWljb24tbW9iaWxlLWNoZXZyb25zJywgdGhpcy5zZXR0aW5ncy5tb2JpbGVDaGV2cm9uc0ljb24pO1xuXHRcdGJvZHkuY2xhc3NMaXN0LnRvZ2dsZSgnaGlkZS1idXR0b24tbW9iaWxlLW5hdmJhci1hY3Rpb24tYmFjaycsIHRoaXMuc2V0dGluZ3MubmF2aWdhdGVCYWNrQnV0dG9uKTtcblx0XHRib2R5LmNsYXNzTGlzdC50b2dnbGUoJ2hpZGUtYnV0dG9uLW1vYmlsZS1uYXZiYXItYWN0aW9uLWZvcndhcmQnLCB0aGlzLnNldHRpbmdzLm5hdmlnYXRlRm9yd2FyZEJ1dHRvbik7XG5cdFx0Ym9keS5jbGFzc0xpc3QudG9nZ2xlKCdoaWRlLWJ1dHRvbi1tb2JpbGUtbmF2YmFyLWFjdGlvbi1xdWljay1zd2l0Y2hlcicsIHRoaXMuc2V0dGluZ3MucXVpY2tTd2l0Y2hlckJ1dHRvbik7XG5cdFx0Ym9keS5jbGFzc0xpc3QudG9nZ2xlKCdoaWRlLWJ1dHRvbi1tb2JpbGUtbmF2YmFyLWFjdGlvbi1uZXctdGFiJywgdGhpcy5zZXR0aW5ncy5tb2JpbGVOZXdUYWJCdXR0b24pO1xuXHRcdGJvZHkuY2xhc3NMaXN0LnRvZ2dsZSgnaGlkZS1idXR0b24tbW9iaWxlLW5hdmJhci1hY3Rpb24tdGFicycsIHRoaXMuc2V0dGluZ3Mub3BlblRhYkJ1dHRvbik7XG5cdFx0Ym9keS5jbGFzc0xpc3QudG9nZ2xlKCdoaWRlLWJ1dHRvbi1tb2JpbGUtbmF2YmFyLWFjdGlvbi1tZW51JywgdGhpcy5zZXR0aW5ncy5yaWJib25NZW51QnV0dG9uKTtcblx0XHRib2R5LmNsYXNzTGlzdC50b2dnbGUoJ3N3YXAtbW9iaWxlLW5ldy10YWItaWNvbicsIHRoaXMuc2V0dGluZ3Muc3dhcE1vYmlsZU5ld1RhYkljb24pO1xuXHRcdGJvZHkuY2xhc3NMaXN0LnRvZ2dsZSgnaGlkZS1tb2JpbGUtdGl0bGUnLCB0aGlzLnNldHRpbmdzLmhpZGVNb2JpbGVUaXRsZSk7XG5cdFx0Ym9keS5jbGFzc0xpc3QudG9nZ2xlKCdoaWRlLW1vYmlsZS1zeW5jLWljb24nLCB0aGlzLnNldHRpbmdzLmhpZGVNb2JpbGVTeW5jSWNvbik7XG5cblx0XHQvLyBNb2JpbGUgbmF2aWdhdGlvbiBtZW51IHBvc2l0aW9uc1xuXHRcdC8vIFJlbW92ZSBhbGwgZXhpc3Rpbmcgb3JkZXIgY2xhc3NlcyBmaXJzdFxuXHRcdGNvbnN0IG9yZGVyQ2xhc3NlcyA9IEFycmF5LmZyb20oYm9keS5jbGFzc0xpc3QpLmZpbHRlcigoY2xzKSA9PlxuXHRcdFx0Y2xzLnN0YXJ0c1dpdGgoJ29yZGVyLW5hdmJhci1idXR0b24tbnRoLWNoaWxkLScpXG5cdFx0KTtcblx0XHRvcmRlckNsYXNzZXMuZm9yRWFjaCgoY2xzKSA9PiBib2R5LmNsYXNzTGlzdC5yZW1vdmUoY2xzKSk7XG5cblx0XHQvLyBBZGQgdGhlIHNlbGVjdGVkIG9yZGVyIGNsYXNzZXNcblx0XHRib2R5LmNsYXNzTGlzdC5hZGQoYG9yZGVyLW5hdmJhci1idXR0b24tbnRoLWNoaWxkLTEtJHt0aGlzLnNldHRpbmdzLm5hdmlnYXRlQnV0dG9uUG9zaXRpb259YCk7XG5cdFx0Ym9keS5jbGFzc0xpc3QuYWRkKGBvcmRlci1uYXZiYXItYnV0dG9uLW50aC1jaGlsZC0yLSR7dGhpcy5zZXR0aW5ncy5uYXZpZ2F0aW9uQnV0dG9uUG9zaXRpb259YCk7XG5cdFx0Ym9keS5jbGFzc0xpc3QuYWRkKGBvcmRlci1uYXZiYXItYnV0dG9uLW50aC1jaGlsZC0zLSR7dGhpcy5zZXR0aW5ncy5xdWlja1N3aXRjaGVyUG9zaXRpb259YCk7XG5cdFx0Ym9keS5jbGFzc0xpc3QuYWRkKGBvcmRlci1uYXZiYXItYnV0dG9uLW50aC1jaGlsZC00LSR7dGhpcy5zZXR0aW5ncy5uZXdUYWJQb3NpdGlvbn1gKTtcblx0XHRib2R5LmNsYXNzTGlzdC5hZGQoYG9yZGVyLW5hdmJhci1idXR0b24tbnRoLWNoaWxkLTUtJHt0aGlzLnNldHRpbmdzLm9wZW5UYWJzUG9zaXRpb259YCk7XG5cdFx0Ym9keS5jbGFzc0xpc3QuYWRkKGBvcmRlci1uYXZiYXItYnV0dG9uLW50aC1jaGlsZC02LSR7dGhpcy5zZXR0aW5ncy5yaWJib25NZW51UG9zaXRpb259YCk7XG5cblx0XHQvLyBWYXVsdCBzd2l0Y2hlciBiYWNrZ3JvdW5kIHRyYW5zcGFyZW5jeVxuXHRcdC8vIFVzZSBzZXRDc3NQcm9wcyBmb3IgQ1NTIGN1c3RvbSBwcm9wZXJ0aWVzICh2YXJpYWJsZXMpXG5cdFx0Y29uc3QgbWFza1ZhbHVlID0gdGhpcy5zZXR0aW5ncy52YXVsdFN3aXRjaGVyQmFja2dyb3VuZFRyYW5zcGFyZW5jeSA+PSAxXG5cdFx0XHQ/ICdub25lJ1xuXHRcdFx0OiAnbGluZWFyLWdyYWRpZW50KHRvIHRvcCwgaHNsKDAsIDAlLCAwJSkgMCUsIGhzbGEoMCwgMCUsIDAlLCAwLjk5KSAxOC40JSwgaHNsYSgwLCAwJSwgMCUsIDAuOTYzKSAzMy43JSwgaHNsYSgwLCAwJSwgMCUsIDAuOTIpIDQ2LjQlLCBoc2xhKDAsIDAlLCAwJSwgMC44NjQpIDU2LjclLCBoc2xhKDAsIDAlLCAwJSwgMC43OTYpIDY0LjglLCBoc2xhKDAsIDAlLCAwJSwgMC43MikgNzEuMiUsIGhzbGEoMCwgMCUsIDAlLCAwLjYzNykgNzYuMSUsIGhzbGEoMCwgMCUsIDAlLCAwLjU1KSA3OS45JSwgaHNsYSgwLCAwJSwgMCUsIDAuNDYpIDgyLjglLCBoc2xhKDAsIDAlLCAwJSwgMC4zNykgODUuMiUsIGhzbGEoMCwgMCUsIDAlLCAwLjI4MykgODcuMyUsIGhzbGEoMCwgMCUsIDAlLCAwLjIpIDg5LjYlLCBoc2xhKDAsIDAlLCAwJSwgMC4xMjQpIDkyLjMlLCBoc2xhKDAsIDAlLCAwJSwgMC4wNTYpIDk1LjYlLCBoc2xhKDAsIDAlLCAwJSwgMCkgMTAwJSknO1xuXHRcdFxuXHRcdHNldENzc1Byb3BzKGJvZHksIHtcblx0XHRcdCctLWF1dG8taGlkZS12YXVsdC1zd2l0Y2hlci1iZy10cmFuc3BhcmVuY3knOiBTdHJpbmcodGhpcy5zZXR0aW5ncy52YXVsdFN3aXRjaGVyQmFja2dyb3VuZFRyYW5zcGFyZW5jeSksXG5cdFx0XHQnLS1hdXRvLWhpZGUtdmF1bHQtc3dpdGNoZXItbWFzayc6IG1hc2tWYWx1ZSxcblx0XHR9KTtcblxuXHRcdC8vIE5hdGl2ZSBleHBsb3JlciBidXR0b24gY29sb3JzIGFyZSBub3cgYXBwbGllZCBkaXJlY3RseSB2aWEgRXhwbG9yZXJNYW5hZ2VyLmFwcGx5TmF0aXZlSWNvbk92ZXJyaWRlcygpXG5cdFx0Ly8gTm8gQ1NTIHZhcmlhYmxlcyBuZWVkZWQgLSBjb2xvcnMgYXJlIGFwcGxpZWQgYXMgaW5saW5lIHN0eWxlcyBvbmx5IHdoZW4gc2V0XG5cdH1cblxuXHRwcml2YXRlIGFwcGx5VmlzaWJpbGl0eVN0YXRlKGJvZHk6IEhUTUxFbGVtZW50LCBjbGFzc05hbWU6IHN0cmluZywgc3RhdGU6IFVJVmlzaWJpbGl0eVN0YXRlLCB1c2VBbHdheXNTaG93OiBib29sZWFuID0gZmFsc2UpIHtcblx0XHQvLyBSZW1vdmUgYWxsIHN0YXRlcyBmaXJzdFxuXHRcdGlmICh1c2VBbHdheXNTaG93KSB7XG5cdFx0XHRib2R5LmNsYXNzTGlzdC5yZW1vdmUoJ2Fsd2F5cy1zaG93LXRpdGxlLWJhcicsIGAke2NsYXNzTmFtZX0taGlkZWAsIGAke2NsYXNzTmFtZX0tcmV2ZWFsYCk7XG5cdFx0fSBlbHNlIHtcblx0XHRcdGJvZHkuY2xhc3NMaXN0LnJlbW92ZShgJHtjbGFzc05hbWV9LXNob3dgLCBgJHtjbGFzc05hbWV9LWhpZGVgLCBgJHtjbGFzc05hbWV9LXJldmVhbGApO1xuXHRcdH1cblxuXHRcdC8vIEFwcGx5IHRoZSBjdXJyZW50IHN0YXRlXG5cdFx0aWYgKHN0YXRlID09PSAnc2hvdycpIHtcblx0XHRcdGlmICh1c2VBbHdheXNTaG93KSB7XG5cdFx0XHRcdGJvZHkuY2xhc3NMaXN0LmFkZCgnYWx3YXlzLXNob3ctdGl0bGUtYmFyJyk7XG5cdFx0XHR9XG5cdFx0XHQvLyBObyBjbGFzcyBuZWVkZWQgZm9yIHNob3cgc3RhdGUgKG9yIHVzZSBhbHdheXMtc2hvdyBmb3IgdGl0bGUgYmFyKVxuXHRcdH0gZWxzZSBpZiAoc3RhdGUgPT09ICdoaWRlJykge1xuXHRcdFx0Ym9keS5jbGFzc0xpc3QuYWRkKGAke2NsYXNzTmFtZX0taGlkZWApO1xuXHRcdH0gZWxzZSBpZiAoc3RhdGUgPT09ICdyZXZlYWwnKSB7XG5cdFx0XHRib2R5LmNsYXNzTGlzdC5hZGQoYCR7Y2xhc3NOYW1lfS1yZXZlYWxgKTtcblx0XHR9XG5cdH1cblxuXHRwcml2YXRlIHNldHVwU2Nyb2xsYmFyUmV2ZWFsTGlzdGVuZXJzKCkge1xuXHRcdC8vIFJlbW92ZSBleGlzdGluZyBsaXN0ZW5lcnMgZmlyc3Rcblx0XHR0aGlzLnJlbW92ZVNjcm9sbGJhclJldmVhbExpc3RlbmVycygpO1xuXG5cdFx0Ly8gSGVscGVyIHRvIGNoZWNrIGlmIGFuIGVsZW1lbnQgaXMgc2Nyb2xsYWJsZVxuXHRcdGNvbnN0IGlzU2Nyb2xsYWJsZSA9IChlbGVtZW50OiBIVE1MRWxlbWVudCk6IGJvb2xlYW4gPT4ge1xuXHRcdFx0Y29uc3Qgc3R5bGUgPSB3aW5kb3cuZ2V0Q29tcHV0ZWRTdHlsZShlbGVtZW50KTtcblx0XHRcdGNvbnN0IG92ZXJmbG93ID0gc3R5bGUub3ZlcmZsb3cgKyBzdHlsZS5vdmVyZmxvd1kgKyBzdHlsZS5vdmVyZmxvd1g7XG5cdFx0XHRpZiAoIW92ZXJmbG93LmluY2x1ZGVzKCdzY3JvbGwnKSAmJiAhb3ZlcmZsb3cuaW5jbHVkZXMoJ2F1dG8nKSkge1xuXHRcdFx0XHRyZXR1cm4gZmFsc2U7XG5cdFx0XHR9XG5cdFx0XHQvLyBDaGVjayBpZiBlbGVtZW50IGFjdHVhbGx5IGhhcyBzY3JvbGxhYmxlIGNvbnRlbnRcblx0XHRcdHJldHVybiBlbGVtZW50LnNjcm9sbEhlaWdodCA+IGVsZW1lbnQuY2xpZW50SGVpZ2h0IHx8IGVsZW1lbnQuc2Nyb2xsV2lkdGggPiBlbGVtZW50LmNsaWVudFdpZHRoO1xuXHRcdH07XG5cblx0XHQvLyBUcmFjayB3aGljaCBzY3JvbGxhYmxlIGVsZW1lbnRzIHNob3VsZCBoYXZlIGhvdmVyIGNsYXNzXG5cdFx0Y29uc3QgaG92ZXJlZEVsZW1lbnRzID0gbmV3IFNldDxIVE1MRWxlbWVudD4oKTtcblxuXHRcdC8vIFVzZSBtb3VzZW1vdmUgdG8gdHJhY2sgbW91c2UgcG9zaXRpb24gYW5kIG9ubHkgYWRkIGhvdmVyIGNsYXNzIHdoZW4gbmVhciBzY3JvbGxiYXJcblx0XHRjb25zdCBoYW5kbGVNb3VzZU1vdmUgPSAoZTogTW91c2VFdmVudCkgPT4ge1xuXHRcdFx0Y29uc3QgdGFyZ2V0ID0gZS50YXJnZXQgYXMgSFRNTEVsZW1lbnQ7XG5cdFx0XHRpZiAoIXRhcmdldCkgcmV0dXJuO1xuXHRcdFx0XG5cdFx0XHQvLyBDbGVhciBhbGwgaG92ZXIgY2xhc3NlcyBmaXJzdFxuXHRcdFx0aG92ZXJlZEVsZW1lbnRzLmZvckVhY2goKGVsKSA9PiB7XG5cdFx0XHRcdGVsLmNsYXNzTGlzdC5yZW1vdmUoJ3VpLXR3ZWFrZXItc2Nyb2xsYmFyLWhvdmVyJyk7XG5cdFx0XHR9KTtcblx0XHRcdGhvdmVyZWRFbGVtZW50cy5jbGVhcigpO1xuXHRcdFx0XG5cdFx0XHQvLyBGaW5kIHNjcm9sbGFibGUgY29udGFpbmVycyBhbmQgY2hlY2sgaWYgbW91c2UgaXMgbmVhciB0aGUgc2Nyb2xsYmFyIGFyZWFcblx0XHRcdGxldCBlbGVtZW50OiBIVE1MRWxlbWVudCB8IG51bGwgPSB0YXJnZXQ7XG5cdFx0XHR3aGlsZSAoZWxlbWVudCAmJiBlbGVtZW50ICE9PSBkb2N1bWVudC5ib2R5ICYmIGVsZW1lbnQgIT09IGRvY3VtZW50LmRvY3VtZW50RWxlbWVudCkge1xuXHRcdFx0XHRpZiAoaXNTY3JvbGxhYmxlKGVsZW1lbnQpKSB7XG5cdFx0XHRcdFx0Y29uc3QgcmVjdCA9IGVsZW1lbnQuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCk7XG5cdFx0XHRcdFx0Y29uc3Qgc2Nyb2xsYmFyQXJlYSA9IDI1OyAvLyBXaWR0aCBvZiBhcmVhIG5lYXIgZWRnZXMgd2hlcmUgc2Nyb2xsYmFyIHdvdWxkIGJlXG5cdFx0XHRcdFx0XG5cdFx0XHRcdFx0Ly8gQ2hlY2sgaWYgbW91c2UgaXMgaW4gdGhlIHNjcm9sbGJhciBhcmVhIChyaWdodCBlZGdlIGZvciB2ZXJ0aWNhbCwgYm90dG9tIGVkZ2UgZm9yIGhvcml6b250YWwpXG5cdFx0XHRcdFx0Y29uc3QgaXNJblZlcnRpY2FsU2Nyb2xsYmFyQXJlYSA9IGUuY2xpZW50WCA+PSByZWN0LnJpZ2h0IC0gc2Nyb2xsYmFyQXJlYSAmJiBlLmNsaWVudFggPD0gcmVjdC5yaWdodDtcblx0XHRcdFx0XHRjb25zdCBpc0luSG9yaXpvbnRhbFNjcm9sbGJhckFyZWEgPSBlLmNsaWVudFkgPj0gcmVjdC5ib3R0b20gLSBzY3JvbGxiYXJBcmVhICYmIGUuY2xpZW50WSA8PSByZWN0LmJvdHRvbTtcblx0XHRcdFx0XHRcblx0XHRcdFx0XHQvLyBPbmx5IGFkZCBob3ZlciBjbGFzcyBpZiBtb3VzZSBpcyBpbiB0aGUgc2Nyb2xsYmFyIGFyZWFcblx0XHRcdFx0XHRpZiAoaXNJblZlcnRpY2FsU2Nyb2xsYmFyQXJlYSB8fCBpc0luSG9yaXpvbnRhbFNjcm9sbGJhckFyZWEpIHtcblx0XHRcdFx0XHRcdGVsZW1lbnQuY2xhc3NMaXN0LmFkZCgndWktdHdlYWtlci1zY3JvbGxiYXItaG92ZXInKTtcblx0XHRcdFx0XHRcdGhvdmVyZWRFbGVtZW50cy5hZGQoZWxlbWVudCk7XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHR9XG5cdFx0XHRcdGVsZW1lbnQgPSBlbGVtZW50LnBhcmVudEVsZW1lbnQ7XG5cdFx0XHR9XG5cdFx0fTtcblxuXHRcdC8vIENsZWFyIGhvdmVyIHdoZW4gbW91c2UgbGVhdmVzIGRvY3VtZW50XG5cdFx0Y29uc3QgaGFuZGxlTW91c2VMZWF2ZSA9ICgpID0+IHtcblx0XHRcdGhvdmVyZWRFbGVtZW50cy5mb3JFYWNoKChlbCkgPT4ge1xuXHRcdFx0XHRlbC5jbGFzc0xpc3QucmVtb3ZlKCd1aS10d2Vha2VyLXNjcm9sbGJhci1ob3ZlcicpO1xuXHRcdFx0fSk7XG5cdFx0XHRob3ZlcmVkRWxlbWVudHMuY2xlYXIoKTtcblx0XHR9O1xuXG5cdFx0ZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcignbW91c2Vtb3ZlJywgaGFuZGxlTW91c2VNb3ZlLCB0cnVlKTtcblx0XHRkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKCdtb3VzZWxlYXZlJywgaGFuZGxlTW91c2VMZWF2ZSwgdHJ1ZSk7XG5cblx0XHQvLyBTdG9yZSBjbGVhbnVwIGZ1bmN0aW9uXG5cdFx0dGhpcy5yZXZlYWxMaXN0ZW5lcnMuc2V0KCdzY3JvbGxiYXItcmV2ZWFsJywgKCkgPT4ge1xuXHRcdFx0ZG9jdW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcignbW91c2Vtb3ZlJywgaGFuZGxlTW91c2VNb3ZlLCB0cnVlKTtcblx0XHRcdGRvY3VtZW50LnJlbW92ZUV2ZW50TGlzdGVuZXIoJ21vdXNlbGVhdmUnLCBoYW5kbGVNb3VzZUxlYXZlLCB0cnVlKTtcblx0XHRcdC8vIFJlbW92ZSBhbGwgaG92ZXIgY2xhc3Nlc1xuXHRcdFx0aG92ZXJlZEVsZW1lbnRzLmZvckVhY2goKGVsKSA9PiB7XG5cdFx0XHRcdGVsLmNsYXNzTGlzdC5yZW1vdmUoJ3VpLXR3ZWFrZXItc2Nyb2xsYmFyLWhvdmVyJyk7XG5cdFx0XHR9KTtcblx0XHRcdGhvdmVyZWRFbGVtZW50cy5jbGVhcigpO1xuXHRcdH0pO1xuXHR9XG5cblx0cHJpdmF0ZSByZW1vdmVTY3JvbGxiYXJSZXZlYWxMaXN0ZW5lcnMoKSB7XG5cdFx0Y29uc3QgY2xlYW51cCA9IHRoaXMucmV2ZWFsTGlzdGVuZXJzLmdldCgnc2Nyb2xsYmFyLXJldmVhbCcpO1xuXHRcdGlmIChjbGVhbnVwKSB7XG5cdFx0XHRjbGVhbnVwKCk7XG5cdFx0XHR0aGlzLnJldmVhbExpc3RlbmVycy5kZWxldGUoJ3Njcm9sbGJhci1yZXZlYWwnKTtcblx0XHR9XG5cdH1cblxuXHRjbGVhbnVwKCkge1xuXHRcdC8vIFJlbW92ZSBhbGwgZXZlbnQgbGlzdGVuZXJzXG5cdFx0dGhpcy5yZXZlYWxMaXN0ZW5lcnMuZm9yRWFjaCgoY2xlYW51cCkgPT4gY2xlYW51cCgpKTtcblx0XHR0aGlzLnJldmVhbExpc3RlbmVycy5jbGVhcigpO1xuXG5cdFx0Ly8gUmVtb3ZlIGFsbCBjbGFzc2VzXG5cdFx0Y29uc3QgYm9keSA9IGRvY3VtZW50LmJvZHk7XG5cdFx0Y29uc3QgY2xhc3Nlc1RvUmVtb3ZlOiBzdHJpbmdbXSA9IFtdO1xuXHRcdGJvZHkuY2xhc3NMaXN0LmZvckVhY2goKGNsYXNzTmFtZSkgPT4ge1xuXHRcdFx0aWYgKGNsYXNzTmFtZS5zdGFydHNXaXRoKCd1aS10d2Vha2VyLScpIHx8XG5cdFx0XHRcdGNsYXNzTmFtZS5zdGFydHNXaXRoKCdhdXRvLWhpZGUtJykgfHxcblx0XHRcdFx0Y2xhc3NOYW1lLnN0YXJ0c1dpdGgoJ2hpZGVyLScpIHx8XG5cdFx0XHRcdGNsYXNzTmFtZS5zdGFydHNXaXRoKCdoaWRlLScpIHx8XG5cdFx0XHRcdGNsYXNzTmFtZS5zdGFydHNXaXRoKCdtZXRhZGF0YS0nKSB8fFxuXHRcdFx0XHRjbGFzc05hbWUuc3RhcnRzV2l0aCgnb3JkZXItbmF2YmFyLWJ1dHRvbi0nKSB8fFxuXHRcdFx0XHRjbGFzc05hbWUuc3RhcnRzV2l0aCgnZW5hYmxlLXdpbmRvdy1kcmFnZ2luZy0nKSB8fFxuXHRcdFx0XHRjbGFzc05hbWUgPT09ICdhdXRvLWNvbGxhcHNlLXJpYmJvbicgfHxcblx0XHRcdFx0Y2xhc3NOYW1lID09PSAnc3dhcC1tb2JpbGUtbmV3LXRhYi1pY29uJyB8fFxuXHRcdFx0XHRjbGFzc05hbWUgPT09ICdhbHdheXMtc2hvdy10aXRsZS1iYXInKSB7XG5cdFx0XHRcdGNsYXNzZXNUb1JlbW92ZS5wdXNoKGNsYXNzTmFtZSk7XG5cdFx0XHR9XG5cdFx0fSk7XG5cdFx0Y2xhc3Nlc1RvUmVtb3ZlLmZvckVhY2goKGNsYXNzTmFtZSkgPT4gYm9keS5jbGFzc0xpc3QucmVtb3ZlKGNsYXNzTmFtZSkpO1xuXG5cdFx0Ly8gUmVtb3ZlIENTUyB2YXJpYWJsZXNcblx0XHRib2R5LnN0eWxlLnJlbW92ZVByb3BlcnR5KCctLWF1dG8taGlkZS12YXVsdC1zd2l0Y2hlci1iZy10cmFuc3BhcmVuY3knKTtcblx0XHRib2R5LnN0eWxlLnJlbW92ZVByb3BlcnR5KCctLWF1dG8taGlkZS12YXVsdC1zd2l0Y2hlci1tYXNrJyk7XG5cdFx0Ym9keS5zdHlsZS5yZW1vdmVQcm9wZXJ0eSgnLS1uYXRpdmUtYnV0dG9uLWNvbG9yLW5ldy1ub3RlJyk7XG5cdFx0Ym9keS5zdHlsZS5yZW1vdmVQcm9wZXJ0eSgnLS1uYXRpdmUtYnV0dG9uLWNvbG9yLW5ldy1mb2xkZXInKTtcblx0XHRib2R5LnN0eWxlLnJlbW92ZVByb3BlcnR5KCctLW5hdGl2ZS1idXR0b24tY29sb3Itc29ydC1vcmRlcicpO1xuXHRcdGJvZHkuc3R5bGUucmVtb3ZlUHJvcGVydHkoJy0tbmF0aXZlLWJ1dHRvbi1jb2xvci1hdXRvLXJldmVhbCcpO1xuXHRcdGJvZHkuc3R5bGUucmVtb3ZlUHJvcGVydHkoJy0tbmF0aXZlLWJ1dHRvbi1jb2xvci1jb2xsYXBzZS1hbGwnKTtcblx0fVxufVxuIiwgIi8qKlxyXG4gKiBDb21tYW5kIHJlZ2lzdHJhdGlvblxyXG4gKi9cclxuXHJcbmltcG9ydCB7IFBsdWdpbiB9IGZyb20gJ29ic2lkaWFuJztcclxuaW1wb3J0IHsgVUlTZXR0aW5ncyB9IGZyb20gJy4vc2V0dGluZ3MnO1xyXG5pbXBvcnQgeyBVSVZpc2liaWxpdHlTdGF0ZSB9IGZyb20gJy4vdHlwZXMnO1xyXG5cclxuaW50ZXJmYWNlIENvbW1hbmRDb250ZXh0IHtcclxuXHRwbHVnaW46IFBsdWdpbjtcclxuXHRzZXR0aW5nczogVUlTZXR0aW5ncztcclxuXHRzYXZlU2V0dGluZ3M6ICgpID0+IFByb21pc2U8dm9pZD47XHJcblx0cmVmcmVzaDogKCkgPT4gdm9pZDtcclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIHJlZ2lzdGVyQ29tbWFuZHMoY29udGV4dDogQ29tbWFuZENvbnRleHQpIHtcclxuXHRjb25zdCB7IHBsdWdpbiwgc2V0dGluZ3MsIHNhdmVTZXR0aW5ncywgcmVmcmVzaCB9ID0gY29udGV4dDtcclxuXHJcblx0Ly8gVG9nZ2xlIGNvbW1hbmRzIGZvciBhdXRvLWhpZGUgZWxlbWVudHMgKFNob3cvSGlkZS9SZXZlYWwpXHJcblx0cmVnaXN0ZXJUb2dnbGVDb21tYW5kKHBsdWdpbiwgJ3RvZ2dsZS10aXRsZS1iYXInLCAnVG9nZ2xlIHRpdGxlIGJhcicsIGFzeW5jICgpID0+IHtcclxuXHRcdHNldHRpbmdzLnRpdGxlQmFyID0gdG9nZ2xlVmlzaWJpbGl0eVN0YXRlKHNldHRpbmdzLnRpdGxlQmFyKTtcclxuXHRcdGF3YWl0IHNhdmVTZXR0aW5ncygpO1xyXG5cdFx0cmVmcmVzaCgpO1xyXG5cdH0pO1xyXG5cclxuXHRyZWdpc3RlclRvZ2dsZUNvbW1hbmQocGx1Z2luLCAndG9nZ2xlLWZpbGUtZXhwbG9yZXItbmF2LWhlYWRlcicsICdUb2dnbGUgZmlsZSBleHBsb3JlciBuYXZpZ2F0aW9uIGhlYWRlcicsIGFzeW5jICgpID0+IHtcclxuXHRcdHNldHRpbmdzLmZpbGVFeHBsb3Jlck5hdkhlYWRlciA9IHRvZ2dsZVZpc2liaWxpdHlTdGF0ZShzZXR0aW5ncy5maWxlRXhwbG9yZXJOYXZIZWFkZXIpO1xyXG5cdFx0YXdhaXQgc2F2ZVNldHRpbmdzKCk7XHJcblx0XHRyZWZyZXNoKCk7XHJcblx0fSk7XHJcblxyXG5cdHJlZ2lzdGVyVG9nZ2xlQ29tbWFuZChwbHVnaW4sICd0b2dnbGUtb3RoZXItbmF2LWhlYWRlcnMnLCAnVG9nZ2xlIG90aGVyIG5hdmlnYXRpb24gaGVhZGVycycsIGFzeW5jICgpID0+IHtcclxuXHRcdHNldHRpbmdzLm90aGVyTmF2SGVhZGVycyA9IHRvZ2dsZVZpc2liaWxpdHlTdGF0ZShzZXR0aW5ncy5vdGhlck5hdkhlYWRlcnMpO1xyXG5cdFx0YXdhaXQgc2F2ZVNldHRpbmdzKCk7XHJcblx0XHRyZWZyZXNoKCk7XHJcblx0fSk7XHJcblxyXG5cdHJlZ2lzdGVyVG9nZ2xlQ29tbWFuZChwbHVnaW4sICd0b2dnbGUtbGVmdC10YWItaGVhZGVycycsICdUb2dnbGUgbGVmdCB0YWIgaGVhZGVycycsIGFzeW5jICgpID0+IHtcclxuXHRcdHNldHRpbmdzLmxlZnRUYWJIZWFkZXJzID0gdG9nZ2xlVmlzaWJpbGl0eVN0YXRlKHNldHRpbmdzLmxlZnRUYWJIZWFkZXJzKTtcclxuXHRcdGF3YWl0IHNhdmVTZXR0aW5ncygpO1xyXG5cdFx0cmVmcmVzaCgpO1xyXG5cdH0pO1xyXG5cclxuXHRyZWdpc3RlclRvZ2dsZUNvbW1hbmQocGx1Z2luLCAndG9nZ2xlLXJpZ2h0LXRhYi1oZWFkZXJzJywgJ1RvZ2dsZSByaWdodCB0YWIgaGVhZGVycycsIGFzeW5jICgpID0+IHtcclxuXHRcdHNldHRpbmdzLnJpZ2h0VGFiSGVhZGVycyA9IHRvZ2dsZVZpc2liaWxpdHlTdGF0ZShzZXR0aW5ncy5yaWdodFRhYkhlYWRlcnMpO1xyXG5cdFx0YXdhaXQgc2F2ZVNldHRpbmdzKCk7XHJcblx0XHRyZWZyZXNoKCk7XHJcblx0fSk7XHJcblxyXG5cdC8vIE5vdGU6IFJpYmJvbiB0b2dnbGUgZXhjbHVkZWQgLSB1c2VzIGJhc2UgT2JzaWRpYW4gY29tbWFuZFxyXG5cclxuXHRyZWdpc3RlclRvZ2dsZUNvbW1hbmQocGx1Z2luLCAndG9nZ2xlLXZhdWx0LXN3aXRjaGVyJywgJ1RvZ2dsZSB2YXVsdCBzd2l0Y2hlcicsIGFzeW5jICgpID0+IHtcclxuXHRcdHNldHRpbmdzLnZhdWx0U3dpdGNoZXIgPSB0b2dnbGVWaXNpYmlsaXR5U3RhdGUoc2V0dGluZ3MudmF1bHRTd2l0Y2hlcik7XHJcblx0XHRhd2FpdCBzYXZlU2V0dGluZ3MoKTtcclxuXHRcdHJlZnJlc2goKTtcclxuXHR9KTtcclxuXHJcblx0cmVnaXN0ZXJUb2dnbGVDb21tYW5kKHBsdWdpbiwgJ3RvZ2dsZS1oZWxwLWJ1dHRvbicsICdUb2dnbGUgaGVscCBidXR0b24nLCBhc3luYyAoKSA9PiB7XHJcblx0XHRzZXR0aW5ncy5oZWxwQnV0dG9uID0gdG9nZ2xlVmlzaWJpbGl0eVN0YXRlKHNldHRpbmdzLmhlbHBCdXR0b24pO1xyXG5cdFx0YXdhaXQgc2F2ZVNldHRpbmdzKCk7XHJcblx0XHRyZWZyZXNoKCk7XHJcblx0fSk7XHJcblxyXG5cdHJlZ2lzdGVyVG9nZ2xlQ29tbWFuZChwbHVnaW4sICd0b2dnbGUtc2V0dGluZ3MtYnV0dG9uJywgJ1RvZ2dsZSBzZXR0aW5ncyBidXR0b24nLCBhc3luYyAoKSA9PiB7XHJcblx0XHRzZXR0aW5ncy5zZXR0aW5nc0J1dHRvbiA9IHRvZ2dsZVZpc2liaWxpdHlTdGF0ZShzZXR0aW5ncy5zZXR0aW5nc0J1dHRvbik7XHJcblx0XHRhd2FpdCBzYXZlU2V0dGluZ3MoKTtcclxuXHRcdHJlZnJlc2goKTtcclxuXHR9KTtcclxuXHJcblx0Ly8gT3BlbiBzZXR0aW5ncyBjb21tYW5kXHJcblx0cGx1Z2luLmFkZENvbW1hbmQoe1xyXG5cdFx0aWQ6ICdvcGVuLXNldHRpbmdzJyxcclxuXHRcdG5hbWU6ICdPcGVuIHNldHRpbmdzJyxcclxuXHRcdGNhbGxiYWNrOiAoKSA9PiB7XHJcblx0XHRcdC8vIEFjY2VzcyBhcHAgdGhyb3VnaCBwbHVnaW4gaW5zdGFuY2UgKFBsdWdpbiBjbGFzcyBoYXMgYXBwIHByb3BlcnR5KVxyXG5cdFx0XHRjb25zdCBhcHAgPSBwbHVnaW4uYXBwO1xyXG5cdFx0XHQvLyBVc2UgdHlwZSBhc3NlcnRpb24gZm9yIHNldHRpbmcgQVBJIGFzIGl0J3Mgbm90IGluIHRoZSBwdWJsaWMgdHlwZSBkZWZpbml0aW9uc1xyXG5cdFx0XHQvLyBidXQgaXMgYXZhaWxhYmxlIGluIHRoZSBydW50aW1lIEFQSVxyXG5cdFx0XHRjb25zdCBzZXR0aW5nQXBpID0gKGFwcCBhcyB7IHNldHRpbmc/OiB7IG9wZW4/OiAoKSA9PiB2b2lkOyBvcGVuVGFiQnlJZD86IChpZDogc3RyaW5nKSA9PiB2b2lkIH0gfSkuc2V0dGluZztcclxuXHRcdFx0aWYgKHNldHRpbmdBcGkpIHtcclxuXHRcdFx0XHRzZXR0aW5nQXBpLm9wZW4/LigpO1xyXG5cdFx0XHRcdC8vIE9wZW4gdGhlIHBsdWdpbidzIHNldHRpbmdzIHRhYlxyXG5cdFx0XHRcdC8vIFVzZSB0eXBlIGFzc2VydGlvbiBmb3Igc2V0dGluZ1RhYiBhcyBpdCdzIGEgcHJpdmF0ZSBwcm9wZXJ0eVxyXG5cdFx0XHRcdGNvbnN0IHBsdWdpbkluc3RhbmNlID0gcGx1Z2luIGFzIHsgc2V0dGluZ1RhYj86IHsgaWQ/OiBzdHJpbmcgfSB9O1xyXG5cdFx0XHRcdGlmIChwbHVnaW5JbnN0YW5jZS5zZXR0aW5nVGFiPy5pZCAmJiBzZXR0aW5nQXBpLm9wZW5UYWJCeUlkKSB7XHJcblx0XHRcdFx0XHRzZXR0aW5nQXBpLm9wZW5UYWJCeUlkKHBsdWdpbkluc3RhbmNlLnNldHRpbmdUYWIuaWQpO1xyXG5cdFx0XHRcdH1cclxuXHRcdFx0fVxyXG5cdFx0fSxcclxuXHR9KTtcclxuXHJcblx0Ly8gVG9nZ2xlIGNvbW1hbmRzIGZvciBzaW1wbGUgdG9nZ2xlc1xyXG5cclxuXHJcblx0cmVnaXN0ZXJUb2dnbGVDb21tYW5kKHBsdWdpbiwgJ3RvZ2dsZS10YWItYmFyJywgJ1RvZ2dsZSB0YWIgYmFyJywgYXN5bmMgKCkgPT4ge1xyXG5cdFx0c2V0dGluZ3MudGFiQmFyID0gIXNldHRpbmdzLnRhYkJhcjtcclxuXHRcdGF3YWl0IHNhdmVTZXR0aW5ncygpO1xyXG5cdFx0cmVmcmVzaCgpO1xyXG5cdH0pO1xyXG5cclxuXHRyZWdpc3RlclRvZ2dsZUNvbW1hbmQocGx1Z2luLCAndG9nZ2xlLW5ldy1ub3RlLWJ1dHRvbicsICdUb2dnbGUgbmV3IG5vdGUgYnV0dG9uJywgYXN5bmMgKCkgPT4ge1xyXG5cdFx0c2V0dGluZ3MubmV3Tm90ZUJ1dHRvbiA9ICFzZXR0aW5ncy5uZXdOb3RlQnV0dG9uO1xyXG5cdFx0YXdhaXQgc2F2ZVNldHRpbmdzKCk7XHJcblx0XHRyZWZyZXNoKCk7XHJcblx0fSk7XHJcblxyXG5cdHJlZ2lzdGVyVG9nZ2xlQ29tbWFuZChwbHVnaW4sICd0b2dnbGUtbmV3LWZvbGRlci1idXR0b24nLCAnVG9nZ2xlIG5ldyBmb2xkZXIgYnV0dG9uJywgYXN5bmMgKCkgPT4ge1xyXG5cdFx0c2V0dGluZ3MubmV3Rm9sZGVyQnV0dG9uID0gIXNldHRpbmdzLm5ld0ZvbGRlckJ1dHRvbjtcclxuXHRcdGF3YWl0IHNhdmVTZXR0aW5ncygpO1xyXG5cdFx0cmVmcmVzaCgpO1xyXG5cdH0pO1xyXG5cclxuXHRyZWdpc3RlclRvZ2dsZUNvbW1hbmQocGx1Z2luLCAndG9nZ2xlLXNvcnQtb3JkZXItYnV0dG9uJywgJ1RvZ2dsZSBzb3J0IG9yZGVyIGJ1dHRvbicsIGFzeW5jICgpID0+IHtcclxuXHRcdHNldHRpbmdzLnNvcnRPcmRlckJ1dHRvbiA9ICFzZXR0aW5ncy5zb3J0T3JkZXJCdXR0b247XHJcblx0XHRhd2FpdCBzYXZlU2V0dGluZ3MoKTtcclxuXHRcdHJlZnJlc2goKTtcclxuXHR9KTtcclxuXHJcblx0cmVnaXN0ZXJUb2dnbGVDb21tYW5kKHBsdWdpbiwgJ3RvZ2dsZS1hdXRvLXJldmVhbC1idXR0b24nLCAnVG9nZ2xlIGF1dG8gcmV2ZWFsIGJ1dHRvbicsIGFzeW5jICgpID0+IHtcclxuXHRcdHNldHRpbmdzLmF1dG9SZXZlYWxCdXR0b24gPSAhc2V0dGluZ3MuYXV0b1JldmVhbEJ1dHRvbjtcclxuXHRcdGF3YWl0IHNhdmVTZXR0aW5ncygpO1xyXG5cdFx0cmVmcmVzaCgpO1xyXG5cdH0pO1xyXG5cclxuXHRyZWdpc3RlclRvZ2dsZUNvbW1hbmQocGx1Z2luLCAndG9nZ2xlLWNvbGxhcHNlLWFsbC1idXR0b24nLCAnVG9nZ2xlIGNvbGxhcHNlIGFsbCBidXR0b24nLCBhc3luYyAoKSA9PiB7XHJcblx0XHRzZXR0aW5ncy5jb2xsYXBzZUFsbEJ1dHRvbiA9ICFzZXR0aW5ncy5jb2xsYXBzZUFsbEJ1dHRvbjtcclxuXHRcdGF3YWl0IHNhdmVTZXR0aW5ncygpO1xyXG5cdFx0cmVmcmVzaCgpO1xyXG5cdH0pO1xyXG5cclxuXHRyZWdpc3RlclRvZ2dsZUNvbW1hbmQocGx1Z2luLCAndG9nZ2xlLXJlYWRpbmctbW9kZS1idXR0b24nLCAnVG9nZ2xlIHJlYWRpbmcgbW9kZSBidXR0b24nLCBhc3luYyAoKSA9PiB7XHJcblx0XHRzZXR0aW5ncy5yZWFkaW5nTW9kZUJ1dHRvbiA9ICFzZXR0aW5ncy5yZWFkaW5nTW9kZUJ1dHRvbjtcclxuXHRcdGF3YWl0IHNhdmVTZXR0aW5ncygpO1xyXG5cdFx0cmVmcmVzaCgpO1xyXG5cdH0pO1xyXG5cclxuXHRyZWdpc3RlclRvZ2dsZUNvbW1hbmQocGx1Z2luLCAndG9nZ2xlLXNlYXJjaC1zZXR0aW5ncy1idXR0b24nLCAnVG9nZ2xlIHNlYXJjaCBzZXR0aW5ncyBidXR0b24nLCBhc3luYyAoKSA9PiB7XHJcblx0XHRzZXR0aW5ncy5zZWFyY2hTZXR0aW5nc0J1dHRvbiA9ICFzZXR0aW5ncy5zZWFyY2hTZXR0aW5nc0J1dHRvbjtcclxuXHRcdGF3YWl0IHNhdmVTZXR0aW5ncygpO1xyXG5cdFx0cmVmcmVzaCgpO1xyXG5cdH0pO1xyXG5cclxuXHQvLyBUYWIgaWNvbnMgLSBub3cgc3VwcG9ydCBTaG93L0hpZGUvUmV2ZWFsXHJcblx0cmVnaXN0ZXJUb2dnbGVDb21tYW5kKHBsdWdpbiwgJ3RvZ2dsZS10YWItbGlzdC1pY29uJywgJ1RvZ2dsZSB0YWIgbGlzdCBpY29uJywgYXN5bmMgKCkgPT4ge1xyXG5cdFx0c2V0dGluZ3MudGFiTGlzdEljb24gPSB0b2dnbGVWaXNpYmlsaXR5U3RhdGUoc2V0dGluZ3MudGFiTGlzdEljb24pO1xyXG5cdFx0YXdhaXQgc2F2ZVNldHRpbmdzKCk7XHJcblx0XHRyZWZyZXNoKCk7XHJcblx0fSk7XHJcblxyXG5cdHJlZ2lzdGVyVG9nZ2xlQ29tbWFuZChwbHVnaW4sICd0b2dnbGUtbmV3LXRhYi1pY29uJywgJ1RvZ2dsZSBuZXcgdGFiIGljb24nLCBhc3luYyAoKSA9PiB7XHJcblx0XHRzZXR0aW5ncy5uZXdUYWJJY29uID0gdG9nZ2xlVmlzaWJpbGl0eVN0YXRlKHNldHRpbmdzLm5ld1RhYkljb24pO1xyXG5cdFx0YXdhaXQgc2F2ZVNldHRpbmdzKCk7XHJcblx0XHRyZWZyZXNoKCk7XHJcblx0fSk7XHJcblxyXG5cdHJlZ2lzdGVyVG9nZ2xlQ29tbWFuZChwbHVnaW4sICd0b2dnbGUtdGFiLWNsb3NlLWJ1dHRvbicsICdUb2dnbGUgdGFiIGNsb3NlIGJ1dHRvbicsIGFzeW5jICgpID0+IHtcclxuXHRcdHNldHRpbmdzLnRhYkNsb3NlQnV0dG9uID0gdG9nZ2xlVmlzaWJpbGl0eVN0YXRlKHNldHRpbmdzLnRhYkNsb3NlQnV0dG9uKTtcclxuXHRcdGF3YWl0IHNhdmVTZXR0aW5ncygpO1xyXG5cdFx0cmVmcmVzaCgpO1xyXG5cdH0pO1xyXG5cclxuXHRyZWdpc3RlclRvZ2dsZUNvbW1hbmQocGx1Z2luLCAndG9nZ2xlLXN0YXR1cy1iYXInLCAnVG9nZ2xlIHN0YXR1cyBiYXInLCBhc3luYyAoKSA9PiB7XHJcblx0XHRzZXR0aW5ncy5zdGF0dXNCYXIgPSAhc2V0dGluZ3Muc3RhdHVzQmFyO1xyXG5cdFx0YXdhaXQgc2F2ZVNldHRpbmdzKCk7XHJcblx0XHRyZWZyZXNoKCk7XHJcblx0fSk7XHJcblxyXG5cdC8vIFNjcm9sbCBiYXJzIC0gbm93IHN1cHBvcnQgU2hvdy9IaWRlL1JldmVhbFxyXG5cdHJlZ2lzdGVyVG9nZ2xlQ29tbWFuZChwbHVnaW4sICd0b2dnbGUtc2Nyb2xsLWJhcnMnLCAnVG9nZ2xlIHNjcm9sbCBiYXJzJywgYXN5bmMgKCkgPT4ge1xyXG5cdFx0c2V0dGluZ3Muc2Nyb2xsQmFycyA9IHRvZ2dsZVZpc2liaWxpdHlTdGF0ZShzZXR0aW5ncy5zY3JvbGxCYXJzKTtcclxuXHRcdGF3YWl0IHNhdmVTZXR0aW5ncygpO1xyXG5cdFx0cmVmcmVzaCgpO1xyXG5cdH0pO1xyXG5cclxuXHQvLyBTaWRlYmFyIHRvZ2dsZSBidXR0b25zIC0gbm93IHN1cHBvcnQgU2hvdy9IaWRlL1JldmVhbFxyXG5cdHJlZ2lzdGVyVG9nZ2xlQ29tbWFuZChwbHVnaW4sICd0b2dnbGUtbGVmdC1zaWRlYmFyLXRvZ2dsZS1idXR0b24nLCAnVG9nZ2xlIGxlZnQgc2lkZWJhciB0b2dnbGUgYnV0dG9uJywgYXN5bmMgKCkgPT4ge1xyXG5cdFx0c2V0dGluZ3MubGVmdFNpZGViYXJUb2dnbGVCdXR0b24gPSB0b2dnbGVWaXNpYmlsaXR5U3RhdGUoc2V0dGluZ3MubGVmdFNpZGViYXJUb2dnbGVCdXR0b24pO1xyXG5cdFx0YXdhaXQgc2F2ZVNldHRpbmdzKCk7XHJcblx0XHRyZWZyZXNoKCk7XHJcblx0fSk7XHJcblxyXG5cdHJlZ2lzdGVyVG9nZ2xlQ29tbWFuZChwbHVnaW4sICd0b2dnbGUtcmlnaHQtc2lkZWJhci10b2dnbGUtYnV0dG9uJywgJ1RvZ2dsZSByaWdodCBzaWRlYmFyIHRvZ2dsZSBidXR0b24nLCBhc3luYyAoKSA9PiB7XHJcblx0XHRzZXR0aW5ncy5yaWdodFNpZGViYXJUb2dnbGVCdXR0b24gPSB0b2dnbGVWaXNpYmlsaXR5U3RhdGUoc2V0dGluZ3MucmlnaHRTaWRlYmFyVG9nZ2xlQnV0dG9uKTtcclxuXHRcdGF3YWl0IHNhdmVTZXR0aW5ncygpO1xyXG5cdFx0cmVmcmVzaCgpO1xyXG5cdH0pO1xyXG5cclxuXHRyZWdpc3RlclRvZ2dsZUNvbW1hbmQocGx1Z2luLCAndG9nZ2xlLXRvb2x0aXBzJywgJ1RvZ2dsZSB0b29sdGlwcycsIGFzeW5jICgpID0+IHtcclxuXHRcdHNldHRpbmdzLnRvb2x0aXBzID0gIXNldHRpbmdzLnRvb2x0aXBzO1xyXG5cdFx0YXdhaXQgc2F2ZVNldHRpbmdzKCk7XHJcblx0XHRyZWZyZXNoKCk7XHJcblx0fSk7XHJcblxyXG5cdHJlZ2lzdGVyVG9nZ2xlQ29tbWFuZChwbHVnaW4sICd0b2dnbGUtc2VhcmNoLXN1Z2dlc3Rpb25zJywgJ1RvZ2dsZSBzZWFyY2ggc3VnZ2VzdGlvbnMnLCBhc3luYyAoKSA9PiB7XHJcblx0XHRzZXR0aW5ncy5zZWFyY2hTdWdnZXN0aW9ucyA9ICFzZXR0aW5ncy5zZWFyY2hTdWdnZXN0aW9ucztcclxuXHRcdGF3YWl0IHNhdmVTZXR0aW5ncygpO1xyXG5cdFx0cmVmcmVzaCgpO1xyXG5cdH0pO1xyXG5cclxuXHRyZWdpc3RlclRvZ2dsZUNvbW1hbmQocGx1Z2luLCAndG9nZ2xlLXNlYXJjaC10ZXJtLWNvdW50cycsICdUb2dnbGUgc2VhcmNoIHRlcm0gY291bnRzJywgYXN5bmMgKCkgPT4ge1xyXG5cdFx0c2V0dGluZ3Muc2VhcmNoVGVybUNvdW50cyA9ICFzZXR0aW5ncy5zZWFyY2hUZXJtQ291bnRzO1xyXG5cdFx0YXdhaXQgc2F2ZVNldHRpbmdzKCk7XHJcblx0XHRyZWZyZXNoKCk7XHJcblx0fSk7XHJcblxyXG5cdHJlZ2lzdGVyVG9nZ2xlQ29tbWFuZChwbHVnaW4sICd0b2dnbGUtcHJvcGVydGllcy1yZWFkaW5nLXZpZXcnLCAnVG9nZ2xlIHByb3BlcnRpZXMgaW4gUmVhZGluZyB2aWV3JywgYXN5bmMgKCkgPT4ge1xyXG5cdFx0c2V0dGluZ3MucHJvcGVydGllc0luUmVhZGluZ1ZpZXcgPSAhc2V0dGluZ3MucHJvcGVydGllc0luUmVhZGluZ1ZpZXc7XHJcblx0XHRhd2FpdCBzYXZlU2V0dGluZ3MoKTtcclxuXHRcdHJlZnJlc2goKTtcclxuXHR9KTtcclxuXHJcblx0cmVnaXN0ZXJUb2dnbGVDb21tYW5kKHBsdWdpbiwgJ3RvZ2dsZS1wcm9wZXJ0aWVzLWhlYWRpbmcnLCAnVG9nZ2xlIHByb3BlcnRpZXMgaGVhZGluZycsIGFzeW5jICgpID0+IHtcclxuXHRcdHNldHRpbmdzLnByb3BlcnRpZXNJbkhlYWRpbmcgPSAhc2V0dGluZ3MucHJvcGVydGllc0luSGVhZGluZztcclxuXHRcdGF3YWl0IHNhdmVTZXR0aW5ncygpO1xyXG5cdFx0cmVmcmVzaCgpO1xyXG5cdH0pO1xyXG5cclxuXHRyZWdpc3RlclRvZ2dsZUNvbW1hbmQocGx1Z2luLCAndG9nZ2xlLWFkZC1wcm9wZXJ0eS1idXR0b24nLCAnVG9nZ2xlIGFkZCBwcm9wZXJ0eSBidXR0b24nLCBhc3luYyAoKSA9PiB7XHJcblx0XHRzZXR0aW5ncy5hZGRQcm9wZXJ0eUJ1dHRvbiA9ICFzZXR0aW5ncy5hZGRQcm9wZXJ0eUJ1dHRvbjtcclxuXHRcdGF3YWl0IHNhdmVTZXR0aW5ncygpO1xyXG5cdFx0cmVmcmVzaCgpO1xyXG5cdH0pO1xyXG5cclxuXHRyZWdpc3RlclRvZ2dsZUNvbW1hbmQocGx1Z2luLCAndG9nZ2xlLWluc3RydWN0aW9ucycsICdUb2dnbGUgaW5zdHJ1Y3Rpb25zJywgYXN5bmMgKCkgPT4ge1xyXG5cdFx0c2V0dGluZ3MuaW5zdHJ1Y3Rpb25zID0gIXNldHRpbmdzLmluc3RydWN0aW9ucztcclxuXHRcdGF3YWl0IHNhdmVTZXR0aW5ncygpO1xyXG5cdFx0cmVmcmVzaCgpO1xyXG5cdH0pO1xyXG5cclxuXHQvLyBNb2JpbGUgdG9nZ2xlIGNvbW1hbmRzXHJcblx0cmVnaXN0ZXJUb2dnbGVDb21tYW5kKHBsdWdpbiwgJ3RvZ2dsZS1tb2JpbGUtY2hldnJvbnMtaWNvbicsICdUb2dnbGUgbW9iaWxlIGNoZXZyb25zIGljb24nLCBhc3luYyAoKSA9PiB7XHJcblx0XHRzZXR0aW5ncy5tb2JpbGVDaGV2cm9uc0ljb24gPSAhc2V0dGluZ3MubW9iaWxlQ2hldnJvbnNJY29uO1xyXG5cdFx0YXdhaXQgc2F2ZVNldHRpbmdzKCk7XHJcblx0XHRyZWZyZXNoKCk7XHJcblx0fSk7XHJcblxyXG5cdHJlZ2lzdGVyVG9nZ2xlQ29tbWFuZChwbHVnaW4sICd0b2dnbGUtbmF2aWdhdGUtYmFjay1idXR0b24nLCAnVG9nZ2xlIG5hdmlnYXRlIGJhY2sgYnV0dG9uJywgYXN5bmMgKCkgPT4ge1xyXG5cdFx0c2V0dGluZ3MubmF2aWdhdGVCYWNrQnV0dG9uID0gIXNldHRpbmdzLm5hdmlnYXRlQmFja0J1dHRvbjtcclxuXHRcdGF3YWl0IHNhdmVTZXR0aW5ncygpO1xyXG5cdFx0cmVmcmVzaCgpO1xyXG5cdH0pO1xyXG5cclxuXHRyZWdpc3RlclRvZ2dsZUNvbW1hbmQocGx1Z2luLCAndG9nZ2xlLW5hdmlnYXRlLWZvcndhcmQtYnV0dG9uJywgJ1RvZ2dsZSBuYXZpZ2F0ZSBmb3J3YXJkIGJ1dHRvbicsIGFzeW5jICgpID0+IHtcclxuXHRcdHNldHRpbmdzLm5hdmlnYXRlRm9yd2FyZEJ1dHRvbiA9ICFzZXR0aW5ncy5uYXZpZ2F0ZUZvcndhcmRCdXR0b247XHJcblx0XHRhd2FpdCBzYXZlU2V0dGluZ3MoKTtcclxuXHRcdHJlZnJlc2goKTtcclxuXHR9KTtcclxuXHJcblx0cmVnaXN0ZXJUb2dnbGVDb21tYW5kKHBsdWdpbiwgJ3RvZ2dsZS1xdWljay1zd2l0Y2hlci1idXR0b24nLCAnVG9nZ2xlIHF1aWNrIHN3aXRjaGVyIGJ1dHRvbicsIGFzeW5jICgpID0+IHtcclxuXHRcdHNldHRpbmdzLnF1aWNrU3dpdGNoZXJCdXR0b24gPSAhc2V0dGluZ3MucXVpY2tTd2l0Y2hlckJ1dHRvbjtcclxuXHRcdGF3YWl0IHNhdmVTZXR0aW5ncygpO1xyXG5cdFx0cmVmcmVzaCgpO1xyXG5cdH0pO1xyXG5cclxuXHRyZWdpc3RlclRvZ2dsZUNvbW1hbmQocGx1Z2luLCAndG9nZ2xlLW1vYmlsZS1uZXctdGFiLWJ1dHRvbicsICdUb2dnbGUgbW9iaWxlIG5ldyB0YWIgYnV0dG9uJywgYXN5bmMgKCkgPT4ge1xyXG5cdFx0c2V0dGluZ3MubW9iaWxlTmV3VGFiQnV0dG9uID0gIXNldHRpbmdzLm1vYmlsZU5ld1RhYkJ1dHRvbjtcclxuXHRcdGF3YWl0IHNhdmVTZXR0aW5ncygpO1xyXG5cdFx0cmVmcmVzaCgpO1xyXG5cdH0pO1xyXG5cclxuXHRyZWdpc3RlclRvZ2dsZUNvbW1hbmQocGx1Z2luLCAndG9nZ2xlLW9wZW4tdGFiLWJ1dHRvbicsICdUb2dnbGUgb3BlbiB0YWIgYnV0dG9uJywgYXN5bmMgKCkgPT4ge1xyXG5cdFx0c2V0dGluZ3Mub3BlblRhYkJ1dHRvbiA9ICFzZXR0aW5ncy5vcGVuVGFiQnV0dG9uO1xyXG5cdFx0YXdhaXQgc2F2ZVNldHRpbmdzKCk7XHJcblx0XHRyZWZyZXNoKCk7XHJcblx0fSk7XHJcblxyXG5cdHJlZ2lzdGVyVG9nZ2xlQ29tbWFuZChwbHVnaW4sICd0b2dnbGUtcmliYm9uLW1lbnUtYnV0dG9uJywgJ1RvZ2dsZSByaWJib24gbWVudSBidXR0b24nLCBhc3luYyAoKSA9PiB7XHJcblx0XHRzZXR0aW5ncy5yaWJib25NZW51QnV0dG9uID0gIXNldHRpbmdzLnJpYmJvbk1lbnVCdXR0b247XHJcblx0XHRhd2FpdCBzYXZlU2V0dGluZ3MoKTtcclxuXHRcdHJlZnJlc2goKTtcclxuXHR9KTtcclxufVxyXG5cclxuZnVuY3Rpb24gcmVnaXN0ZXJUb2dnbGVDb21tYW5kKHBsdWdpbjogUGx1Z2luLCBpZDogc3RyaW5nLCBuYW1lOiBzdHJpbmcsIGNhbGxiYWNrOiAoKSA9PiB2b2lkIHwgUHJvbWlzZTx2b2lkPikge1xyXG5cdHBsdWdpbi5hZGRDb21tYW5kKHtcclxuXHRcdGlkOiBpZCxcclxuXHRcdG5hbWU6IG5hbWUsXHJcblx0XHRjYWxsYmFjazogY2FsbGJhY2ssXHJcblx0fSk7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIHRvZ2dsZVZpc2liaWxpdHlTdGF0ZShjdXJyZW50U3RhdGU6IFVJVmlzaWJpbGl0eVN0YXRlKTogVUlWaXNpYmlsaXR5U3RhdGUge1xyXG5cdC8vIElmIGN1cnJlbnQgc3RhdGUgaXMgXCJyZXZlYWxcIiwgcmVzZXQgdG8gXCJzaG93XCIgZmlyc3RcclxuXHRpZiAoY3VycmVudFN0YXRlID09PSAncmV2ZWFsJykge1xyXG5cdFx0cmV0dXJuICdoaWRlJztcclxuXHR9XHJcblx0Ly8gVG9nZ2xlIGJldHdlZW4gXCJzaG93XCIgYW5kIFwiaGlkZVwiXHJcblx0cmV0dXJuIGN1cnJlbnRTdGF0ZSA9PT0gJ3Nob3cnID8gJ2hpZGUnIDogJ3Nob3cnO1xyXG59XHJcbiIsICIvKipcclxuICogTWFpbiBTZXR0aW5ncyBUYWIgd2l0aCB0YWIgbmF2aWdhdGlvblxyXG4gKi9cclxuXHJcbmltcG9ydCB7IEFwcCwgUGx1Z2luU2V0dGluZ1RhYiwgUGxhdGZvcm0gfSBmcm9tICdvYnNpZGlhbic7XHJcbmltcG9ydCBVSVR3ZWFrZXJQbHVnaW4gZnJvbSAnLi4vbWFpbic7XHJcbmltcG9ydCB7IFRhYlJlbmRlcmVyIH0gZnJvbSAnLi9jb21tb24vVGFiUmVuZGVyZXInO1xyXG5pbXBvcnQgeyBIaWRlclRhYiB9IGZyb20gJy4vdGFicy9IaWRlclRhYic7XHJcbmltcG9ydCB7IFRhYkJhclRhYiB9IGZyb20gJy4vdGFicy9UYWJCYXJUYWInO1xyXG5pbXBvcnQgeyBTdGF0dXNCYXJUYWIgfSBmcm9tICcuL3RhYnMvU3RhdHVzQmFyVGFiJztcclxuaW1wb3J0IHsgRXhwbG9yZXJUYWIgfSBmcm9tICcuL3RhYnMvRXhwbG9yZXJUYWInO1xyXG5pbXBvcnQgeyBNb2JpbGVUYWIgfSBmcm9tICcuL3RhYnMvTW9iaWxlVGFiJztcclxuXHJcbmV4cG9ydCBjbGFzcyBVSVR3ZWFrZXJTZXR0aW5nVGFiIGV4dGVuZHMgUGx1Z2luU2V0dGluZ1RhYiB7XHJcblx0cGx1Z2luOiBVSVR3ZWFrZXJQbHVnaW47XHJcblxyXG5cdGNvbnN0cnVjdG9yKGFwcDogQXBwLCBwbHVnaW46IFVJVHdlYWtlclBsdWdpbikge1xyXG5cdFx0c3VwZXIoYXBwLCBwbHVnaW4pO1xyXG5cdFx0dGhpcy5wbHVnaW4gPSBwbHVnaW47XHJcblx0fVxyXG5cclxuXHRkaXNwbGF5KCk6IHZvaWQge1xyXG5cdFx0dGhpcy5yZW5kZXIoKTtcclxuXHR9XHJcblxyXG5cdHJlbmRlcigpOiB2b2lkIHtcclxuXHRcdGNvbnN0IHsgY29udGFpbmVyRWwgfSA9IHRoaXM7XHJcblx0XHRjb250YWluZXJFbC5lbXB0eSgpO1xyXG5cclxuXHRcdC8vIE9uIG1vYmlsZSwgc2ltcGxpZnk6IGp1c3Qgc2hvdyB0aGUgTW9iaWxlIHRhYiBkaXJlY3RseSAobm8gdGFiIG5hdmlnYXRpb24pXHJcblx0XHQvLyBUaGlzIGF2b2lkcyBDU1MgY29uZmxpY3RzIHdpdGggT2JzaWRpYW4ncyBhcHAuY3NzIGFuZCBwcm92aWRlcyBhIGNsZWFuZXIgZXhwZXJpZW5jZVxyXG5cdFx0Ly8gRE9OJ1QgYWRkIHVpLXR3ZWFrZXItc2V0dGluZ3MgY2xhc3Mgb24gbW9iaWxlIC0gbGV0IGl0IHVzZSBuYXRpdmUgT2JzaWRpYW4gc3R5bGluZ1xyXG5cdFx0aWYgKFBsYXRmb3JtLmlzTW9iaWxlIHx8IGRvY3VtZW50LmJvZHkuY2xhc3NMaXN0LmNvbnRhaW5zKCdpcy1tb2JpbGUnKSkge1xyXG5cdFx0XHRjb25zdCBtb2JpbGVUYWIgPSBuZXcgTW9iaWxlVGFiKHRoaXMuYXBwLCB0aGlzLnBsdWdpbik7XHJcblx0XHRcdHZvaWQgbW9iaWxlVGFiLnJlbmRlcihjb250YWluZXJFbCk7XHJcblx0XHRcdHJldHVybjtcclxuXHRcdH1cclxuXHJcblx0XHQvLyBEZXNrdG9wOiBBZGQgdGhlIGNsYXNzIGZvciB0YWIgbmF2aWdhdGlvbiBzdHlsaW5nXHJcblx0XHRjb250YWluZXJFbC5hZGRDbGFzcygndWktdHdlYWtlci1zZXR0aW5ncycpO1xyXG5cclxuXHRcdC8vIERlc2t0b3A6IFVzZSB0YWIgbmF2aWdhdGlvblxyXG5cdFx0Y29uc3QgdGFiQ29udGFpbmVyID0gY29udGFpbmVyRWwuY3JlYXRlRGl2KCd0YWItY29udGFpbmVyJyk7XHJcblx0XHRjb25zdCB0YWJOYXYgPSB0YWJDb250YWluZXIuY3JlYXRlRGl2KCd0YWItbmF2Jyk7XHJcblx0XHRjb25zdCB0YWJDb250ZW50ID0gdGFiQ29udGFpbmVyLmNyZWF0ZURpdigndGFiLWNvbnRlbnQnKTtcclxuXHJcblx0XHQvLyBUYWIgZGVmaW5pdGlvbnNcclxuXHRcdGNvbnN0IHRhYnM6IEFycmF5PHsgaWQ6IHN0cmluZzsgbmFtZTogc3RyaW5nOyByZW5kZXJlcjogVGFiUmVuZGVyZXIgfT4gPSBbXHJcblx0XHRcdHtcclxuXHRcdFx0XHRpZDogJ2hpZGVyJyxcclxuXHRcdFx0XHRuYW1lOiAnSGlkZXInLFxyXG5cdFx0XHRcdHJlbmRlcmVyOiBuZXcgSGlkZXJUYWIodGhpcy5hcHAsIHRoaXMucGx1Z2luKVxyXG5cdFx0XHR9LFxyXG5cdFx0XHR7XHJcblx0XHRcdFx0aWQ6ICdzdGF0dXMtYmFyJyxcclxuXHRcdFx0XHRuYW1lOiAnU3RhdHVzIGJhcicsXHJcblx0XHRcdFx0cmVuZGVyZXI6IG5ldyBTdGF0dXNCYXJUYWIodGhpcy5hcHAsIHRoaXMucGx1Z2luKVxyXG5cdFx0XHR9LFxyXG5cdFx0XHR7XHJcblx0XHRcdFx0aWQ6ICd0YWItYmFyJyxcclxuXHRcdFx0XHRuYW1lOiAnVGFiIGJhcicsXHJcblx0XHRcdFx0cmVuZGVyZXI6IG5ldyBUYWJCYXJUYWIodGhpcy5hcHAsIHRoaXMucGx1Z2luKVxyXG5cdFx0XHR9LFxyXG5cdFx0XHR7XHJcblx0XHRcdFx0aWQ6ICdleHBsb3JlcicsXHJcblx0XHRcdFx0bmFtZTogJ0V4cGxvcmVyJyxcclxuXHRcdFx0XHRyZW5kZXJlcjogbmV3IEV4cGxvcmVyVGFiKHRoaXMuYXBwLCB0aGlzLnBsdWdpbilcclxuXHRcdFx0fSxcclxuXHRcdFx0e1xyXG5cdFx0XHRcdGlkOiAnbW9iaWxlJyxcclxuXHRcdFx0XHRuYW1lOiAnTW9iaWxlJyxcclxuXHRcdFx0XHRyZW5kZXJlcjogbmV3IE1vYmlsZVRhYih0aGlzLmFwcCwgdGhpcy5wbHVnaW4pXHJcblx0XHRcdH1cclxuXHRcdF07XHJcblxyXG5cdFx0Ly8gQ3JlYXRlIHRhYiBidXR0b25zIHdpdGggY2xlYW4gc3R5bGluZ1xyXG5cdFx0dGFicy5mb3JFYWNoKCh0YWIsIGluZGV4KSA9PiB7XHJcblx0XHRcdGNvbnN0IGJ1dHRvbiA9IHRhYk5hdi5jcmVhdGVFbCgnYnV0dG9uJywge1xyXG5cdFx0XHRcdHRleHQ6IHRhYi5uYW1lLFxyXG5cdFx0XHRcdGNsczogYHRhYi1idXR0b24gJHtpbmRleCA9PT0gMCA/ICdhY3RpdmUnIDogJyd9YFxyXG5cdFx0XHR9KTtcclxuXHRcdFx0XHJcblx0XHRcdGJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHtcclxuXHRcdFx0XHQvLyBSZW1vdmUgYWN0aXZlIGNsYXNzIGZyb20gYWxsIGJ1dHRvbnNcclxuXHRcdFx0XHR0YWJOYXYucXVlcnlTZWxlY3RvckFsbCgnLnRhYi1idXR0b24nKS5mb3JFYWNoKGJ0biA9PiBidG4uY2xhc3NMaXN0LnJlbW92ZSgnYWN0aXZlJykpO1xyXG5cdFx0XHRcdC8vIEFkZCBhY3RpdmUgY2xhc3MgdG8gY2xpY2tlZCBidXR0b25cclxuXHRcdFx0XHRidXR0b24uY2xhc3NMaXN0LmFkZCgnYWN0aXZlJyk7XHJcblx0XHRcdFx0Ly8gUmVuZGVyIHRhYiBjb250ZW50IGltbWVkaWF0ZWx5XHJcblx0XHRcdFx0dGFiQ29udGVudC5lbXB0eSgpO1xyXG5cdFx0XHRcdHZvaWQgdGFiLnJlbmRlcmVyLnJlbmRlcih0YWJDb250ZW50KTtcclxuXHRcdFx0fSk7XHJcblx0XHR9KTtcclxuXHJcblx0XHQvLyBSZW5kZXIgdGhlIGZpcnN0IHRhYiBieSBkZWZhdWx0XHJcblx0XHR2b2lkIHRhYnNbMF0ucmVuZGVyZXIucmVuZGVyKHRhYkNvbnRlbnQpO1xyXG5cdH1cclxufVxyXG4iLCAiLyoqXHJcbiAqIEJhc2UgY2xhc3MgZm9yIGFsbCBzZXR0aW5ncyB0YWJzXHJcbiAqL1xyXG5cclxuaW1wb3J0IHsgQXBwLCBTZXR0aW5nIH0gZnJvbSAnb2JzaWRpYW4nO1xyXG5pbXBvcnQgVUlUd2Vha2VyUGx1Z2luIGZyb20gJy4uLy4uL21haW4nO1xyXG5pbXBvcnQgeyBVSVNldHRpbmdzIH0gZnJvbSAnLi4vLi4vc2V0dGluZ3MnO1xyXG5cclxuZXhwb3J0IGFic3RyYWN0IGNsYXNzIFRhYlJlbmRlcmVyIHtcclxuXHRwcm90ZWN0ZWQgYXBwOiBBcHA7XHJcblx0cHJvdGVjdGVkIHBsdWdpbjogVUlUd2Vha2VyUGx1Z2luO1xyXG5cclxuXHRjb25zdHJ1Y3RvcihhcHA6IEFwcCwgcGx1Z2luOiBVSVR3ZWFrZXJQbHVnaW4pIHtcclxuXHRcdHRoaXMuYXBwID0gYXBwO1xyXG5cdFx0dGhpcy5wbHVnaW4gPSBwbHVnaW47XHJcblx0fVxyXG5cclxuXHRhYnN0cmFjdCByZW5kZXIoY29udGFpbmVyOiBIVE1MRWxlbWVudCk6IHZvaWQgfCBQcm9taXNlPHZvaWQ+O1xyXG5cclxuXHRwcm90ZWN0ZWQgZ2V0U2V0dGluZ3MoKTogVUlTZXR0aW5ncyB7XHJcblx0XHRyZXR1cm4gdGhpcy5wbHVnaW4uc2V0dGluZ3M7XHJcblx0fVxyXG5cclxuXHRwcm90ZWN0ZWQgYXN5bmMgc2F2ZVNldHRpbmdzKCk6IFByb21pc2U8dm9pZD4ge1xyXG5cdFx0YXdhaXQgdGhpcy5wbHVnaW4uc2F2ZVNldHRpbmdzKCk7XHJcblx0XHR0aGlzLnBsdWdpbi5yZWZyZXNoKCk7XHJcblx0fVxyXG5cclxuXHRwcm90ZWN0ZWQgY3JlYXRlRHJvcGRvd25TZXR0aW5nKFxyXG5cdFx0Y29udGFpbmVyOiBIVE1MRWxlbWVudCxcclxuXHRcdG5hbWU6IHN0cmluZyxcclxuXHRcdGRlc2NyaXB0aW9uOiBzdHJpbmcsXHJcblx0XHR2YWx1ZTogc3RyaW5nLFxyXG5cdFx0b3B0aW9uczogUmVjb3JkPHN0cmluZywgc3RyaW5nPixcclxuXHRcdG9uQ2hhbmdlOiAodmFsdWU6IHN0cmluZykgPT4gdm9pZFxyXG5cdCk6IFNldHRpbmcge1xyXG5cdFx0cmV0dXJuIG5ldyBTZXR0aW5nKGNvbnRhaW5lcilcclxuXHRcdFx0LnNldE5hbWUobmFtZSlcclxuXHRcdFx0LnNldERlc2MoZGVzY3JpcHRpb24pXHJcblx0XHRcdC5hZGREcm9wZG93bihkcm9wZG93biA9PiB7XHJcblx0XHRcdFx0T2JqZWN0LmVudHJpZXMob3B0aW9ucykuZm9yRWFjaCgoW2tleSwgbGFiZWxdKSA9PiB7XHJcblx0XHRcdFx0XHRkcm9wZG93bi5hZGRPcHRpb24oa2V5LCBsYWJlbCk7XHJcblx0XHRcdFx0fSk7XHJcblx0XHRcdFx0ZHJvcGRvd24uc2V0VmFsdWUodmFsdWUpO1xyXG5cdFx0XHRcdGRyb3Bkb3duLm9uQ2hhbmdlKGFzeW5jICh2YWx1ZSkgPT4ge1xyXG5cdFx0XHRcdFx0b25DaGFuZ2UodmFsdWUpO1xyXG5cdFx0XHRcdFx0YXdhaXQgdGhpcy5zYXZlU2V0dGluZ3MoKTtcclxuXHRcdFx0XHR9KTtcclxuXHRcdFx0XHRyZXR1cm4gZHJvcGRvd247XHJcblx0XHRcdH0pO1xyXG5cdH1cclxuXHJcblx0cHJvdGVjdGVkIGNyZWF0ZVRvZ2dsZVNldHRpbmcoXHJcblx0XHRjb250YWluZXI6IEhUTUxFbGVtZW50LFxyXG5cdFx0bmFtZTogc3RyaW5nLFxyXG5cdFx0ZGVzY3JpcHRpb246IHN0cmluZyxcclxuXHRcdHZhbHVlOiBib29sZWFuLFxyXG5cdFx0b25DaGFuZ2U6ICh2YWx1ZTogYm9vbGVhbikgPT4gdm9pZFxyXG5cdCk6IFNldHRpbmcge1xyXG5cdFx0cmV0dXJuIG5ldyBTZXR0aW5nKGNvbnRhaW5lcilcclxuXHRcdFx0LnNldE5hbWUobmFtZSlcclxuXHRcdFx0LnNldERlc2MoZGVzY3JpcHRpb24pXHJcblx0XHRcdC5hZGRUb2dnbGUodG9nZ2xlID0+IHtcclxuXHRcdFx0XHR0b2dnbGUuc2V0VmFsdWUodmFsdWUpO1xyXG5cdFx0XHRcdHRvZ2dsZS5vbkNoYW5nZShhc3luYyAodmFsdWUpID0+IHtcclxuXHRcdFx0XHRcdG9uQ2hhbmdlKHZhbHVlKTtcclxuXHRcdFx0XHRcdGF3YWl0IHRoaXMuc2F2ZVNldHRpbmdzKCk7XHJcblx0XHRcdFx0fSk7XHJcblx0XHRcdFx0cmV0dXJuIHRvZ2dsZTtcclxuXHRcdFx0fSk7XHJcblx0fVxyXG5cclxuXHRwcm90ZWN0ZWQgY3JlYXRlU2xpZGVyU2V0dGluZyhcclxuXHRcdGNvbnRhaW5lcjogSFRNTEVsZW1lbnQsXHJcblx0XHRuYW1lOiBzdHJpbmcsXHJcblx0XHRkZXNjcmlwdGlvbjogc3RyaW5nLFxyXG5cdFx0dmFsdWU6IG51bWJlcixcclxuXHRcdG1pbjogbnVtYmVyLFxyXG5cdFx0bWF4OiBudW1iZXIsXHJcblx0XHRzdGVwOiBudW1iZXIsXHJcblx0XHRvbkNoYW5nZTogKHZhbHVlOiBudW1iZXIpID0+IHZvaWRcclxuXHQpOiBTZXR0aW5nIHtcclxuXHRcdHJldHVybiBuZXcgU2V0dGluZyhjb250YWluZXIpXHJcblx0XHRcdC5zZXROYW1lKG5hbWUpXHJcblx0XHRcdC5zZXREZXNjKGRlc2NyaXB0aW9uKVxyXG5cdFx0XHQuYWRkU2xpZGVyKHNsaWRlciA9PiB7XHJcblx0XHRcdFx0c2xpZGVyXHJcblx0XHRcdFx0XHQuc2V0TGltaXRzKG1pbiwgbWF4LCBzdGVwKVxyXG5cdFx0XHRcdFx0LnNldFZhbHVlKHZhbHVlKVxyXG5cdFx0XHRcdFx0LnNldER5bmFtaWNUb29sdGlwKClcclxuXHRcdFx0XHRcdC5vbkNoYW5nZShhc3luYyAodmFsdWUpID0+IHtcclxuXHRcdFx0XHRcdFx0b25DaGFuZ2UodmFsdWUpO1xyXG5cdFx0XHRcdFx0XHRhd2FpdCB0aGlzLnNhdmVTZXR0aW5ncygpO1xyXG5cdFx0XHRcdFx0fSk7XHJcblx0XHRcdFx0cmV0dXJuIHNsaWRlcjtcclxuXHRcdFx0fSk7XHJcblx0fVxyXG5cclxufVxyXG4iLCAiLyoqXHJcbiAqIENvbXBhdGliaWxpdHkgdXRpbGl0aWVzIGZvciBzZXR0aW5nc1xyXG4gKiBQcm92aWRlcyBiYWNrd2FyZCBjb21wYXRpYmlsaXR5IGZvciBTZXR0aW5nR3JvdXAgKHJlcXVpcmVzIEFQSSAxLjExLjArKVxyXG4gKi9cclxuXHJcbmltcG9ydCB7IFNldHRpbmcsIHJlcXVpcmVBcGlWZXJzaW9uIH0gZnJvbSAnb2JzaWRpYW4nO1xyXG5pbXBvcnQgKiBhcyBPYnNpZGlhbk1vZHVsZSBmcm9tICdvYnNpZGlhbic7XHJcblxyXG4vKipcclxuICogSW50ZXJmYWNlIHRoYXQgd29ya3Mgd2l0aCBib3RoIFNldHRpbmdHcm91cCBhbmQgZmFsbGJhY2sgY29udGFpbmVyXHJcbiAqL1xyXG5leHBvcnQgaW50ZXJmYWNlIFNldHRpbmdzQ29udGFpbmVyIHtcclxuXHRhZGRTZXR0aW5nKGNiOiAoc2V0dGluZzogU2V0dGluZykgPT4gdm9pZCk6IHZvaWQ7XHJcbn1cclxuXHJcbi8qKlxyXG4gKiBDcmVhdGVzIGEgc2V0dGluZ3MgY29udGFpbmVyIHRoYXQgdXNlcyBTZXR0aW5nR3JvdXAgaWYgYXZhaWxhYmxlIChBUEkgMS4xMS4wKyksXHJcbiAqIG90aGVyd2lzZSBmYWxscyBiYWNrIHRvIGNyZWF0aW5nIGEgaGVhZGluZyBhbmQgdXNpbmcgdGhlIGNvbnRhaW5lciBkaXJlY3RseS5cclxuICogXHJcbiAqIFVzZXMgcmVxdWlyZUFwaVZlcnNpb24oJzEuMTEuMCcpIHRvIGNoZWNrIGlmIFNldHRpbmdHcm91cCBpcyBhdmFpbGFibGUuXHJcbiAqIFRoaXMgaXMgdGhlIG9mZmljaWFsIE9ic2lkaWFuIEFQSSBtZXRob2QgZm9yIHZlcnNpb24gY2hlY2tpbmcuXHJcbiAqIFxyXG4gKiBAcGFyYW0gY29udGFpbmVyRWwgLSBUaGUgY29udGFpbmVyIGVsZW1lbnQgZm9yIHNldHRpbmdzXHJcbiAqIEBwYXJhbSBoZWFkaW5nIC0gVGhlIGhlYWRpbmcgdGV4dCBmb3IgdGhlIHNldHRpbmdzIGdyb3VwIChvcHRpb25hbClcclxuICogQHBhcmFtIG1hbmlmZXN0SWQgLSBUaGUgcGx1Z2luJ3MgbWFuaWZlc3QgSUQgZm9yIENTUyBzY29waW5nIChyZXF1aXJlZCBmb3IgZmFsbGJhY2sgbW9kZSlcclxuICogQHJldHVybnMgQSBjb250YWluZXIgdGhhdCBjYW4gYmUgdXNlZCB0byBhZGQgc2V0dGluZ3NcclxuICovXHJcbmV4cG9ydCBmdW5jdGlvbiBjcmVhdGVTZXR0aW5nc0dyb3VwKFxyXG5cdGNvbnRhaW5lckVsOiBIVE1MRWxlbWVudCxcclxuXHRoZWFkaW5nPzogc3RyaW5nLFxyXG5cdG1hbmlmZXN0SWQ/OiBzdHJpbmdcclxuKTogU2V0dGluZ3NDb250YWluZXIge1xyXG5cdC8vIENoZWNrIGlmIFNldHRpbmdHcm91cCBpcyBhdmFpbGFibGUgKEFQSSAxLjExLjArKVxyXG5cdC8vIHJlcXVpcmVBcGlWZXJzaW9uIGlzIHRoZSBvZmZpY2lhbCBPYnNpZGlhbiBBUEkgbWV0aG9kIGZvciB2ZXJzaW9uIGNoZWNraW5nXHJcblx0aWYgKHJlcXVpcmVBcGlWZXJzaW9uKCcxLjExLjAnKSkge1xyXG5cdFx0Ly8gVXNlIFNldHRpbmdHcm91cCAtIGl0J3MgZ3VhcmFudGVlZCB0byBleGlzdCBpZiByZXF1aXJlQXBpVmVyc2lvbiByZXR1cm5zIHRydWVcclxuXHRcdC8vIEFjY2VzcyBTZXR0aW5nR3JvdXAgdmlhIHR5cGUgYXNzZXJ0aW9uIHNpbmNlIGl0IG1heSBub3QgYmUgaW4gdHlwZSBkZWZpbml0aW9uc1xyXG5cdFx0Ly8gZm9yIG9sZGVyIFR5cGVTY3JpcHQgdmVyc2lvbnMsIGJ1dCBleGlzdHMgYXQgcnVudGltZSBpbiBPYnNpZGlhbiAxLjExLjArXHJcblx0XHQvLyBVc2luZyB1bmtub3duIGluc3RlYWQgb2YgYW55IHRvIHNhdGlzZnkgZXNsaW50IHdoaWxlIG1haW50YWluaW5nIHR5cGUgc2FmZXR5XHJcblx0XHRjb25zdCBTZXR0aW5nR3JvdXBDbGFzcyA9IChPYnNpZGlhbk1vZHVsZSBhcyB1bmtub3duIGFzIHsgU2V0dGluZ0dyb3VwPzogbmV3IChjb250YWluZXJFbDogSFRNTEVsZW1lbnQpID0+IHtcclxuXHRcdFx0c2V0SGVhZGluZyhoZWFkaW5nOiBzdHJpbmcpOiB7XHJcblx0XHRcdFx0YWRkU2V0dGluZyhjYjogKHNldHRpbmc6IFNldHRpbmcpID0+IHZvaWQpOiB2b2lkO1xyXG5cdFx0XHR9O1xyXG5cdFx0XHRhZGRTZXR0aW5nKGNiOiAoc2V0dGluZzogU2V0dGluZykgPT4gdm9pZCk6IHZvaWQ7XHJcblx0XHR9IH0pLlNldHRpbmdHcm91cDtcclxuXHRcdFxyXG5cdFx0aWYgKFNldHRpbmdHcm91cENsYXNzKSB7XHJcblx0XHRcdGNvbnN0IGdyb3VwID0gaGVhZGluZyBcclxuXHRcdFx0XHQ/IG5ldyBTZXR0aW5nR3JvdXBDbGFzcyhjb250YWluZXJFbCkuc2V0SGVhZGluZyhoZWFkaW5nKVxyXG5cdFx0XHRcdDogbmV3IFNldHRpbmdHcm91cENsYXNzKGNvbnRhaW5lckVsKTtcclxuXHRcdFx0cmV0dXJuIHtcclxuXHRcdFx0XHRhZGRTZXR0aW5nKGNiOiAoc2V0dGluZzogU2V0dGluZykgPT4gdm9pZCkge1xyXG5cdFx0XHRcdFx0Z3JvdXAuYWRkU2V0dGluZyhjYik7XHJcblx0XHRcdFx0fVxyXG5cdFx0XHR9O1xyXG5cdFx0fVxyXG5cdH1cclxuXHRcclxuXHQvLyBGYWxsYmFjayBwYXRoIChlaXRoZXIgQVBJIDwgMS4xMS4wIG9yIFNldHRpbmdHcm91cCBub3QgZm91bmQpXHJcblx0Ly8gQWRkIHNjb3BpbmcgY2xhc3MgdG8gY29udGFpbmVyRWwgdG8gc2NvcGUgQ1NTIHRvIG9ubHkgdGhpcyBwbHVnaW4ncyBzZXR0aW5nc1xyXG5cdGlmIChtYW5pZmVzdElkKSB7XHJcblx0XHRjb250YWluZXJFbC5hZGRDbGFzcyhgJHttYW5pZmVzdElkfS1zZXR0aW5ncy1jb21wYXRgKTtcclxuXHR9XHJcblx0XHJcblx0e1xyXG5cdFx0Ly8gRmFsbGJhY2s6IENyZWF0ZSBhIGhlYWRpbmcgbWFudWFsbHkgZm9yIG9sZGVyIEFQSSB2ZXJzaW9uc1xyXG5cdFx0Ly8gTm90ZTogV2hpbGUgYmVzdCBwcmFjdGljZSBwcmVmZXJzIFNldHRpbmcuc2V0SGVhZGluZygpLCB0aGUgZmFsbGJhY2sgcGF0aFxyXG5cdFx0Ly8gaXMgZm9yIHZlcnNpb25zIHRoYXQgbWF5IG5vdCBzdXBwb3J0IGl0LCBzbyBtYW51YWwgaGVhZGluZyBpcyBhcHByb3ByaWF0ZSBoZXJlXHJcblx0XHRpZiAoaGVhZGluZykge1xyXG5cdFx0XHRjb25zdCBoZWFkaW5nRWwgPSBjb250YWluZXJFbC5jcmVhdGVEaXYoJ3NldHRpbmctZ3JvdXAtaGVhZGluZycpO1xyXG5cdFx0XHRoZWFkaW5nRWwuY3JlYXRlRWwoJ2gzJywgeyB0ZXh0OiBoZWFkaW5nIH0pO1xyXG5cdFx0fVxyXG5cdFx0XHJcblx0XHRyZXR1cm4ge1xyXG5cdFx0XHRhZGRTZXR0aW5nKGNiOiAoc2V0dGluZzogU2V0dGluZykgPT4gdm9pZCkge1xyXG5cdFx0XHRcdGNvbnN0IHNldHRpbmcgPSBuZXcgU2V0dGluZyhjb250YWluZXJFbCk7XHJcblx0XHRcdFx0Y2Ioc2V0dGluZyk7XHJcblx0XHRcdH1cclxuXHRcdH07XHJcblx0fVxyXG59XHJcblxyXG4iLCAiLyoqXHJcbiAqIENvbW1hbmQgUGlja2VyIE1vZGFsXHJcbiAqIFNlYXJjaGFibGUgbW9kYWwgZm9yIHNlbGVjdGluZyBhbiBPYnNpZGlhbiBjb21tYW5kXHJcbiAqL1xyXG5cclxuaW1wb3J0IHsgQXBwLCBGdXp6eVN1Z2dlc3RNb2RhbCB9IGZyb20gJ29ic2lkaWFuJztcclxuXHJcbmludGVyZmFjZSBDb21tYW5kT3B0aW9uIHtcclxuXHRpZDogc3RyaW5nO1xyXG5cdG5hbWU6IHN0cmluZztcclxufVxyXG5cclxuZXhwb3J0IGNsYXNzIENvbW1hbmRQaWNrZXJNb2RhbCBleHRlbmRzIEZ1enp5U3VnZ2VzdE1vZGFsPENvbW1hbmRPcHRpb24+IHtcclxuXHRwcml2YXRlIG9uU2VsZWN0OiAoY29tbWFuZElkOiBzdHJpbmcpID0+IHZvaWQ7XHJcblxyXG5cdGNvbnN0cnVjdG9yKGFwcDogQXBwLCBvblNlbGVjdDogKGNvbW1hbmRJZDogc3RyaW5nKSA9PiB2b2lkKSB7XHJcblx0XHRzdXBlcihhcHApO1xyXG5cdFx0dGhpcy5vblNlbGVjdCA9IG9uU2VsZWN0O1xyXG5cdH1cclxuXHJcblx0Z2V0SXRlbXMoKTogQ29tbWFuZE9wdGlvbltdIHtcclxuXHRcdGNvbnN0IGNvbW1hbmRSZWdpc3RyeSA9ICh0aGlzLmFwcCBhcyB7IGNvbW1hbmRzPzogeyBsaXN0Q29tbWFuZHM/OiAoKSA9PiBDb21tYW5kT3B0aW9uW10gfSB9KS5jb21tYW5kcztcclxuXHRcdGNvbnN0IGNvbW1hbmRNYXAgPSBuZXcgTWFwPHN0cmluZywgQ29tbWFuZE9wdGlvbj4oKTtcclxuXHJcblx0XHRpZiAoY29tbWFuZFJlZ2lzdHJ5ICYmIHR5cGVvZiBjb21tYW5kUmVnaXN0cnkubGlzdENvbW1hbmRzID09PSAnZnVuY3Rpb24nKSB7XHJcblx0XHRcdHRyeSB7XHJcblx0XHRcdFx0Y29uc3QgY29tbWFuZHMgPSBjb21tYW5kUmVnaXN0cnkubGlzdENvbW1hbmRzKCk7XHJcblx0XHRcdFx0Zm9yIChjb25zdCBjb21tYW5kIG9mIGNvbW1hbmRzKSB7XHJcblx0XHRcdFx0XHRpZiAoY29tbWFuZCAmJiBjb21tYW5kLmlkICYmIGNvbW1hbmQubmFtZSAmJiAhY29tbWFuZE1hcC5oYXMoY29tbWFuZC5pZCkpIHtcclxuXHRcdFx0XHRcdFx0Y29tbWFuZE1hcC5zZXQoY29tbWFuZC5pZCwge1xyXG5cdFx0XHRcdFx0XHRcdGlkOiBjb21tYW5kLmlkLFxyXG5cdFx0XHRcdFx0XHRcdG5hbWU6IGNvbW1hbmQubmFtZSxcclxuXHRcdFx0XHRcdFx0fSk7XHJcblx0XHRcdFx0XHR9XHJcblx0XHRcdFx0fVxyXG5cdFx0XHR9IGNhdGNoIHtcclxuXHRcdFx0XHQvLyBFcnJvciBnZXR0aW5nIGNvbW1hbmRzIC0gZmFsbCBiYWNrIHRvIGVtcHR5IGxpc3RcclxuXHRcdFx0fVxyXG5cdFx0fVxyXG5cclxuXHRcdHJldHVybiBBcnJheS5mcm9tKGNvbW1hbmRNYXAudmFsdWVzKCkpLnNvcnQoKGEsIGIpID0+IGEubmFtZS5sb2NhbGVDb21wYXJlKGIubmFtZSkpO1xyXG5cdH1cclxuXHJcblx0Z2V0SXRlbVRleHQoaXRlbTogQ29tbWFuZE9wdGlvbik6IHN0cmluZyB7XHJcblx0XHRyZXR1cm4gaXRlbS5uYW1lO1xyXG5cdH1cclxuXHJcblx0b25DaG9vc2VJdGVtKGl0ZW06IENvbW1hbmRPcHRpb24sIGV2dDogTW91c2VFdmVudCB8IEtleWJvYXJkRXZlbnQpOiB2b2lkIHtcclxuXHRcdHRoaXMub25TZWxlY3QoaXRlbS5pZCk7XHJcblx0XHQvLyBEb24ndCBjbG9zZSBoZXJlIC0gbGV0IHRoZSBjYWxsYmFjayBoYW5kbGUgaXRcclxuXHR9XHJcbn1cclxuXHJcbiIsICIvKipcclxuICogSWNvbiBQaWNrZXIgTW9kYWxcclxuICogU2VhcmNoYWJsZSBtb2RhbCBmb3Igc2VsZWN0aW5nIGEgTHVjaWRlIGljb25cclxuICovXHJcblxyXG5pbXBvcnQgeyBBcHAsIEZ1enp5U3VnZ2VzdE1vZGFsLCBzZXRJY29uLCBnZXRJY29uSWRzLCByZXF1aXJlQXBpVmVyc2lvbiB9IGZyb20gJ29ic2lkaWFuJztcclxuXHJcbmludGVyZmFjZSBJY29uT3B0aW9uIHtcclxuXHRpZDogc3RyaW5nO1xyXG5cdG5hbWU6IHN0cmluZztcclxufVxyXG5cclxuLy8gR2V0IGljb24gbGlzdCBmcm9tIE9ic2lkaWFuIEFQSSBpZiBhdmFpbGFibGUsIG90aGVyd2lzZSB1c2UgZmFsbGJhY2sgbGlzdFxyXG5jb25zdCBnZXRJY29uTGlzdCA9ICgpOiBzdHJpbmdbXSA9PiB7XHJcblx0aWYgKHJlcXVpcmVBcGlWZXJzaW9uICYmIHJlcXVpcmVBcGlWZXJzaW9uKCcxLjcuMycpICYmIGdldEljb25JZHMpIHtcclxuXHRcdHRyeSB7XHJcblx0XHRcdHJldHVybiBnZXRJY29uSWRzKCk7XHJcblx0XHR9IGNhdGNoIHtcclxuXHRcdFx0Ly8gRXJyb3IgZ2V0dGluZyBpY29uIElEcyAtIGZhbGwgYmFjayB0byBiYXNpYyBsaXN0XHJcblx0XHR9XHJcblx0fVxyXG5cdC8vIEZhbGxiYWNrIHRvIGEgYmFzaWMgbGlzdCBpZiBBUEkgaXMgbm90IGF2YWlsYWJsZVxyXG5cdHJldHVybiBbXHJcblx0XHQnc2V0dGluZ3MtMicsICdzZXR0aW5ncycsICdoZWxwLWNpcmNsZScsICdpbmZvJywgJ3N0YXInLCAnaGVhcnQnLCAnYm9va21hcmsnLFxyXG5cdFx0J2hvbWUnLCAnc2VhcmNoJywgJ2JlbGwnLCAnbWFpbCcsICd1c2VyJywgJ3VzZXJzJywgJ2ZvbGRlcicsICdmaWxlJywgJ2ZpbGUtdGV4dCcsXHJcblx0XHQnaW1hZ2UnLCAndmlkZW8nLCAnbXVzaWMnLCAnY2FsZW5kYXInLCAnY2xvY2snLCAnZWRpdCcsICdwZW5jaWwnLCAndHJhc2gnLFxyXG5cdFx0J2NvcHknLCAnY3V0JywgJ3Bhc3RlJywgJ2Rvd25sb2FkJywgJ3VwbG9hZCcsICdzYXZlJywgJ3NoYXJlJywgJ2xpbmsnLFxyXG5cdFx0J2V4dGVybmFsLWxpbmsnLCAnbG9jaycsICd1bmxvY2snLCAnZXllJywgJ2V5ZS1vZmYnLCAna2V5JywgJ3NoaWVsZCcsXHJcblx0XHQnY2hlY2snLCAneCcsICdwbHVzJywgJ21pbnVzJywgJ2Fycm93LWxlZnQnLCAnYXJyb3ctcmlnaHQnLCAnYXJyb3ctdXAnLFxyXG5cdFx0J2Fycm93LWRvd24nLCAnY2hldnJvbi1sZWZ0JywgJ2NoZXZyb24tcmlnaHQnLCAnY2hldnJvbi11cCcsICdjaGV2cm9uLWRvd24nLFxyXG5cdFx0J21lbnUnLCAnbW9yZS1ob3Jpem9udGFsJywgJ21vcmUtdmVydGljYWwnLCAnZ3JpZCcsICdsaXN0JywgJ2xheW91dCcsXHJcblx0XHQnY29sdW1ucycsICdyb3dzJywgJ21heGltaXplJywgJ21pbmltaXplJywgJ3pvb20taW4nLCAnem9vbS1vdXQnLFxyXG5cdFx0J3JlZnJlc2gtY3cnLCAncGxheScsICdwYXVzZScsICdzdG9wJywgJ3N1bicsICdtb29uJywgJ2Nsb3VkJywgJ3phcCcsXHJcblx0XHQnd2FuZC0yJywgJ3dhbmQnLCAnd2FuZC1zcGFya2xlcycsICdwYWxldHRlJywgJ2JydXNoJywgJ3NsaWRlcnMnLFxyXG5cdFx0J3Bvd2VyJywgJ3dpZmknLCAnYmx1ZXRvb3RoJywgJ21vbml0b3InLCAnbGFwdG9wJywgJ3NtYXJ0cGhvbmUnLFxyXG5cdFx0J2NhbWVyYScsICdtaWMnLCAnaGVhZHBob25lcycsICdjb2RlJywgJ3Rlcm1pbmFsJywgJ3Rlcm1pbmFsLXNxdWFyZScsXHJcblx0XHQnZ2l0aHViJywgJ2dpdGxhYicsICdnaXQtYnJhbmNoJywgJ2dpdC1jb21taXQnLCAnZGF0YWJhc2UnLCAnc2VydmVyJyxcclxuXHRcdCdjbG91ZC1kb3dubG9hZCcsICdjbG91ZC11cGxvYWQnLCAndGFnJywgJ3RhZ3MnLCAnZmxhZycsICdwaW4nLFxyXG5cdFx0J21hcC1waW4nLCAnY29tcGFzcycsICdnbG9iZScsICdyb2NrZXQnLCAnY2FyJywgJ2Jpa2UnLCAncm9ib3QnLFxyXG5cdFx0J2FwcGxlJywgJ3dpbmRvd3MnLCAnbGludXgnLCAnY2hyb21lJywgJ2ZpcmVmb3gnLCAnc2FmYXJpJyxcclxuXHRcdCdjcmVkaXQtY2FyZCcsICd3YWxsZXQnLCAnY29pbnMnLCAnYm9vaycsICdib29rLW9wZW4nLCAnYXdhcmQnLFxyXG5cdFx0J3Ryb3BoeScsICdiYWRnZScsICd3cmVuY2gnLCAndG9vbCcsICdwYWNrYWdlJywgJ2JveCcsICdhcmNoaXZlJyxcclxuXHRcdCdzZW5kJywgJ3JlcGx5JywgJ2ZvcndhcmQnLCAnbWFpbC1vcGVuJywgJ3RhZy1wbHVzJywgJ3RhZy1taW51cycsXHJcblx0XHQnZmxhZy1vZmYnLCAncGluLW9mZicsICdtYXAtcGluLW9mZicsICduYXZpZ2F0aW9uJywgJ21hcCcsICdlYXJ0aCcsXHJcblx0XHQncGxhbmUnLCAnc2hpcCcsICdhbmNob3InLCAnaGVsaWNvcHRlcicsICdkcm9uZScsICdhbmRyb2lkJyxcclxuXHRcdCdrZXlob2xlJywgJ2tleXMnLCAnZmluZ2VycHJpbnQnLCAnc2NhbicsICdxci1jb2RlJywgJ2JhcmNvZGUnLFxyXG5cdFx0J3JlY2VpcHQnLCAncGlnZ3ktYmFuaycsICdiYW5rbm90ZSdcclxuXHRdO1xyXG59O1xyXG5cclxuLy8gQ29udmVydCBpY29uIElEcyB0byBJY29uT3B0aW9uIGZvcm1hdFxyXG5jb25zdCBMVUNJREVfSUNPTlM6IEljb25PcHRpb25bXSA9IGdldEljb25MaXN0KCkubWFwKGlkID0+ICh7XHJcblx0aWQ6IGlkLFxyXG5cdG5hbWU6IGlkXHJcblx0XHQucmVwbGFjZSgvXmx1Y2lkZS0vLCAnJykgLy8gUmVtb3ZlIGx1Y2lkZS0gcHJlZml4IGZvciBkaXNwbGF5XHJcblx0XHQucmVwbGFjZSgvLS9nLCAnICcpXHJcblx0XHQucmVwbGFjZSgvKF5cXHd7MX0pfChcXHMrXFx3ezF9KS9nLCAobGV0dGVyKSA9PiBsZXR0ZXIudG9VcHBlckNhc2UoKSlcclxufSkpLnNvcnQoKGEsIGIpID0+IGEubmFtZS5sb2NhbGVDb21wYXJlKGIubmFtZSkpO1xyXG5cclxuZXhwb3J0IGNsYXNzIEljb25QaWNrZXJNb2RhbCBleHRlbmRzIEZ1enp5U3VnZ2VzdE1vZGFsPEljb25PcHRpb24+IHtcclxuXHRwcml2YXRlIG9uU2VsZWN0OiAoaWNvbklkOiBzdHJpbmcpID0+IHZvaWQ7XHJcblxyXG5cdGNvbnN0cnVjdG9yKGFwcDogQXBwLCBvblNlbGVjdDogKGljb25JZDogc3RyaW5nKSA9PiB2b2lkKSB7XHJcblx0XHRzdXBlcihhcHApO1xyXG5cdFx0dGhpcy5vblNlbGVjdCA9IG9uU2VsZWN0O1xyXG5cdH1cclxuXHJcblx0Z2V0SXRlbXMoKTogSWNvbk9wdGlvbltdIHtcclxuXHRcdHJldHVybiBMVUNJREVfSUNPTlM7XHJcblx0fVxyXG5cclxuXHRnZXRJdGVtVGV4dChpdGVtOiBJY29uT3B0aW9uKTogc3RyaW5nIHtcclxuXHRcdHJldHVybiBpdGVtLm5hbWU7XHJcblx0fVxyXG5cclxuXHRvbkNob29zZUl0ZW0oaXRlbTogSWNvbk9wdGlvbiwgZXZ0OiBNb3VzZUV2ZW50IHwgS2V5Ym9hcmRFdmVudCk6IHZvaWQge1xyXG5cdFx0dGhpcy5vblNlbGVjdChpdGVtLmlkKTtcclxuXHRcdHRoaXMuY2xvc2UoKTtcclxuXHR9XHJcblxyXG5cdC8vIE92ZXJyaWRlIHRvIHNob3cgaWNvbiBwcmV2aWV3XHJcblx0cmVuZGVyU3VnZ2VzdGlvbihtYXRjaDogeyBpdGVtOiBJY29uT3B0aW9uIH0sIGVsOiBIVE1MRWxlbWVudCk6IHZvaWQge1xyXG5cdFx0Y29uc3QgaXRlbSA9IG1hdGNoLml0ZW07XHJcblx0XHRlbC5hZGRDbGFzcygnbW9kLWNvbXBsZXgnKTtcclxuXHRcdGNvbnN0IGNvbnRlbnQgPSBlbC5jcmVhdGVEaXYoeyBjbHM6ICdzdWdnZXN0aW9uLWNvbnRlbnQnIH0pO1xyXG5cdFx0Y29udGVudC5jcmVhdGVEaXYoeyBjbHM6ICdzdWdnZXN0aW9uLXRpdGxlJywgdGV4dDogaXRlbS5uYW1lIH0pO1xyXG5cdFx0XHJcblx0XHQvLyBDcmVhdGUgaWNvbiBwcmV2aWV3IHVzaW5nIE9ic2lkaWFuJ3Mgc2V0SWNvbiAtIG5vIGJhY2tncm91bmQgYm94XHJcblx0XHRjb25zdCBhdXggPSBlbC5jcmVhdGVEaXYoeyBjbHM6ICdzdWdnZXN0aW9uLWF1eCcgfSk7XHJcblx0XHRjb25zdCBpY29uU3BhbiA9IGF1eC5jcmVhdGVTcGFuKHsgY2xzOiAnc3VnZ2VzdGlvbi1mbGFpciB1aS10d2Vha2VyLWljb24tbm8tYmcnIH0pO1xyXG5cdFx0c2V0SWNvbihpY29uU3BhbiwgaXRlbS5pZCk7XHJcblx0fVxyXG59XHJcblxyXG4iLCAiLyoqXHJcbiAqIEhpZGVyIFRhYiAtIEF1dG8taGlkZSBhbmQgdmlzaWJpbGl0eSBzZXR0aW5ncyAoZXhjbHVkaW5nIG1vYmlsZSBhbmQgZXhwbG9yZXIgYnV0dG9ucylcclxuICovXHJcblxyXG5pbXBvcnQgeyBUYWJSZW5kZXJlciB9IGZyb20gJy4uL2NvbW1vbi9UYWJSZW5kZXJlcic7XHJcbmltcG9ydCB7IGNyZWF0ZVNldHRpbmdzR3JvdXAsIFNldHRpbmdzQ29udGFpbmVyIH0gZnJvbSAnLi4vLi4vdXRpbHMvc2V0dGluZ3MtY29tcGF0JztcclxuaW1wb3J0IHsgQ29tbWFuZFBpY2tlck1vZGFsIH0gZnJvbSAnLi4vLi4vbW9kYWxzL0NvbW1hbmRQaWNrZXJNb2RhbCc7XHJcbmltcG9ydCB7IEljb25QaWNrZXJNb2RhbCB9IGZyb20gJy4uLy4uL21vZGFscy9JY29uUGlja2VyTW9kYWwnO1xyXG5pbXBvcnQgeyBVSVNldHRpbmdzIH0gZnJvbSAnLi4vLi4vc2V0dGluZ3MnO1xyXG5pbXBvcnQgeyBVSVZpc2liaWxpdHlTdGF0ZSB9IGZyb20gJy4uLy4uL3R5cGVzJztcclxuXHJcbmV4cG9ydCBjbGFzcyBIaWRlclRhYiBleHRlbmRzIFRhYlJlbmRlcmVyIHtcclxuXHRyZW5kZXIoY29udGFpbmVyOiBIVE1MRWxlbWVudCk6IHZvaWQge1xyXG5cdFx0Ly8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxyXG5cdFx0Ly8gQXV0by1oaWRlIGVsZW1lbnRzXHJcblx0XHQvLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XHJcblx0XHRjb25zdCBnZW5lcmFsR3JvdXAgPSBjcmVhdGVTZXR0aW5nc0dyb3VwKGNvbnRhaW5lciwgdW5kZWZpbmVkLCAndWktdHdlYWtlcicpO1xyXG5cclxuXHRcdHRoaXMuYWRkVmlzaWJpbGl0eVNldHRpbmcoXHJcblx0XHRcdGdlbmVyYWxHcm91cCxcclxuXHRcdFx0J1RpdGxlIGJhcicsXHJcblx0XHRcdCdIaWRlIHRpdGxlIGJhciB1bnRpbCBob3Zlci4gVHVybiBvZmYgdG8gYWx3YXlzIHNob3cuJyxcclxuXHRcdFx0J3RpdGxlQmFyJ1xyXG5cdFx0KTtcclxuXHJcblx0XHR0aGlzLmFkZFZpc2liaWxpdHlTZXR0aW5nKFxyXG5cdFx0XHRnZW5lcmFsR3JvdXAsXHJcblx0XHRcdCdGaWxlIGV4cGxvcmVyIG5hdiBoZWFkZXInLFxyXG5cdFx0XHQnSGlkZSBmaWxlIGV4cGxvcmVyIG5hdmlnYXRpb24gaGVhZGVyIHVudGlsIGhvdmVyLiBFbGVnYW50bHkgcmV2ZWFscyBvbiBob3Zlci4nLFxyXG5cdFx0XHQnZmlsZUV4cGxvcmVyTmF2SGVhZGVyJ1xyXG5cdFx0KTtcclxuXHJcblx0XHR0aGlzLmFkZFZpc2liaWxpdHlTZXR0aW5nKFxyXG5cdFx0XHRnZW5lcmFsR3JvdXAsXHJcblx0XHRcdCdPdGhlciBuYXYgaGVhZGVycycsXHJcblx0XHRcdCdIaWRlIG5hdmlnYXRpb24gaGVhZGVycyBmb3IgdGFnLCBiYWNrbGlua3MsIG91dGdvaW5nIGxpbmtzLCBvdXRsaW5lLCBhbmQgYm9va21hcmtzIHBhbmVzIHVudGlsIGhvdmVyLicsXHJcblx0XHRcdCdvdGhlck5hdkhlYWRlcnMnXHJcblx0XHQpO1xyXG5cclxuXHRcdHRoaXMuYWRkVmlzaWJpbGl0eVNldHRpbmcoXHJcblx0XHRcdGdlbmVyYWxHcm91cCxcclxuXHRcdFx0J0xlZnQgdGFiIGhlYWRlcnMnLFxyXG5cdFx0XHQnSGlkZSBsZWZ0IHBhbmVsIHRhYiBoZWFkZXJzIHVudGlsIGhvdmVyLiBFbGVnYW50bHkgcmV2ZWFscyBvbiBob3Zlci4nLFxyXG5cdFx0XHQnbGVmdFRhYkhlYWRlcnMnXHJcblx0XHQpO1xyXG5cclxuXHRcdHRoaXMuYWRkVmlzaWJpbGl0eVNldHRpbmcoXHJcblx0XHRcdGdlbmVyYWxHcm91cCxcclxuXHRcdFx0J1JpZ2h0IHRhYiBoZWFkZXJzJyxcclxuXHRcdFx0J0hpZGUgcmlnaHQgcGFuZWwgdGFiIGhlYWRlcnMgdW50aWwgaG92ZXIuIEVsZWdhbnRseSByZXZlYWxzIG9uIGhvdmVyLicsXHJcblx0XHRcdCdyaWdodFRhYkhlYWRlcnMnXHJcblx0XHQpO1xyXG5cclxuXHRcdC8vIFJpYmJvbiAtIGJvb2xlYW4gdG9nZ2xlXHJcblx0XHRnZW5lcmFsR3JvdXAuYWRkU2V0dGluZygoc2V0dGluZyk6IHZvaWQgPT4ge1xyXG5cdFx0XHRzZXR0aW5nXHJcblx0XHRcdFx0LnNldE5hbWUoJ0NvbGxhcHNlIHJpYmJvbicpXHJcblx0XHRcdFx0LnNldERlc2MoJ0NvbGxhcHNlIHRoZSBsZWZ0IHJpYmJvbiB0byBhIHRoaW4gc3RyaXAgdW50aWwgaG92ZXIuIEVsZWdhbnRseSBleHBhbmRzIG9uIGhvdmVyLicpXHJcblx0XHRcdFx0LmFkZFRvZ2dsZSgodG9nZ2xlKSA9PlxyXG5cdFx0XHRcdFx0dG9nZ2xlLnNldFZhbHVlKHRoaXMuZ2V0U2V0dGluZ3MoKS5yaWJib25SZXZlYWxPbkhvdmVyKS5vbkNoYW5nZSgodmFsdWUpID0+IHtcclxuXHRcdFx0XHRcdFx0dGhpcy5nZXRTZXR0aW5ncygpLnJpYmJvblJldmVhbE9uSG92ZXIgPSB2YWx1ZTtcclxuXHRcdFx0XHRcdFx0dm9pZCB0aGlzLnNhdmVTZXR0aW5ncygpO1xyXG5cdFx0XHRcdFx0fSlcclxuXHRcdFx0XHQpO1xyXG5cdFx0fSk7XHJcblxyXG5cdFx0Ly8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxyXG5cdFx0Ly8gTmF2aWdhdGlvblxyXG5cdFx0Ly8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxyXG5cdFx0Y29uc3QgbmF2aWdhdGlvbkdyb3VwID0gY3JlYXRlU2V0dGluZ3NHcm91cChjb250YWluZXIsICdOYXZpZ2F0aW9uJywgJ3VpLXR3ZWFrZXInKTtcclxuXHJcblx0XHR0aGlzLmFkZFRvZ2dsZVNldHRpbmcobmF2aWdhdGlvbkdyb3VwLCAnSGlkZSB0YWIgYmFyJywgJ0hpZGVzIHRoZSB0YWIgY29udGFpbmVyIGF0IHRoZSB0b3Agb2YgdGhlIHdpbmRvdy4nLCAndGFiQmFyJyk7XHJcblxyXG5cdFx0dGhpcy5hZGRUb2dnbGVTZXR0aW5nKG5hdmlnYXRpb25Hcm91cCwgJ01ha2UgdG9wIG9mIHdpbmRvdyBkcmFnZ2FibGUgd2l0aG91dCB0YWIgYmFyJywgJ0VuYWJsZXMgd2luZG93IGRyYWdnaW5nIGZyb20gdGhlIHRvcCBvZiB0aGUgd2luZG93IHdoZW4gdGhlIHRhYiBiYXIgaXMgaGlkZGVuLiBPbmx5IHdvcmtzIHdoZW4gXCJIaWRlIHRhYiBiYXJcIiBpcyBlbmFibGVkLicsICdlbmFibGVXaW5kb3dEcmFnZ2luZycpO1xyXG5cclxuXHRcdC8vIFZpZXcgaGVhZGVyIGJ1dHRvbnNcclxuXHRcdHRoaXMuYWRkVG9nZ2xlU2V0dGluZyhuYXZpZ2F0aW9uR3JvdXAsICdIaWRlIFwiUmVhZGluZyBtb2RlXCIgYnV0dG9uJywgJ0hpZGUgXCJSZWFkaW5nIG1vZGVcIiBidXR0b24gaW4gdmlldyBoZWFkZXJzLicsICdyZWFkaW5nTW9kZUJ1dHRvbicpO1xyXG5cclxuXHRcdHRoaXMuYWRkVG9nZ2xlU2V0dGluZyhuYXZpZ2F0aW9uR3JvdXAsICdIaWRlIFwiU2VhcmNoIHNldHRpbmdzXCIgYnV0dG9uJywgJ0hpZGUgXCJTZWFyY2ggc2V0dGluZ3NcIiBidXR0b24gaW4gc2VhcmNoIHBhbmUuJywgJ3NlYXJjaFNldHRpbmdzQnV0dG9uJyk7XHJcblxyXG5cdFx0Ly8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxyXG5cdFx0Ly8gVmF1bHQgcHJvZmlsZSBhcmVhXHJcblx0XHQvLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XHJcblx0XHRjb25zdCB2YXVsdFByb2ZpbGVHcm91cCA9IGNyZWF0ZVNldHRpbmdzR3JvdXAoY29udGFpbmVyLCAnVmF1bHQgcHJvZmlsZSBhcmVhJywgJ3VpLXR3ZWFrZXInKTtcclxuXHJcblx0XHR0aGlzLmFkZFZpc2liaWxpdHlTZXR0aW5nKFxyXG5cdFx0XHR2YXVsdFByb2ZpbGVHcm91cCxcclxuXHRcdFx0J1ZhdWx0IHN3aXRjaGVyJyxcclxuXHRcdFx0J0hpZGUgdmF1bHQgc3dpdGNoZXIgdW50aWwgaG92ZXIuIERvZXMgbm90IHdvcmsgd2hlbiB2YXVsdCBuYW1lIGlzIGhpZGRlbi4nLFxyXG5cdFx0XHQndmF1bHRTd2l0Y2hlcidcclxuXHRcdCk7XHJcblxyXG5cdFx0dGhpcy5hZGRWaXNpYmlsaXR5U2V0dGluZyhcclxuXHRcdFx0dmF1bHRQcm9maWxlR3JvdXAsXHJcblx0XHRcdCdIZWxwIGJ1dHRvbicsXHJcblx0XHRcdCdIaWRlIGhlbHAgYnV0dG9uIHVudGlsIGhvdmVyLiBFbGVnYW50bHkgcmV2ZWFscyBvbiBob3Zlci4nLFxyXG5cdFx0XHQnaGVscEJ1dHRvbidcclxuXHRcdCk7XHJcblxyXG5cdFx0Ly8gUmVwbGFjZSBoZWxwIGJ1dHRvbiB3aXRoIGN1c3RvbSBhY3Rpb25cclxuXHRcdHRoaXMucmVuZGVySGVscEJ1dHRvblJlcGxhY2VtZW50KHZhdWx0UHJvZmlsZUdyb3VwKTtcclxuXHJcblx0XHR0aGlzLmFkZFZpc2liaWxpdHlTZXR0aW5nKFxyXG5cdFx0XHR2YXVsdFByb2ZpbGVHcm91cCxcclxuXHRcdFx0J1NldHRpbmdzIGJ1dHRvbicsXHJcblx0XHRcdCdIaWRlIHNldHRpbmdzIGJ1dHRvbiB1bnRpbCBob3Zlci4gRWxlZ2FudGx5IHJldmVhbHMgb24gaG92ZXIuJyxcclxuXHRcdFx0J3NldHRpbmdzQnV0dG9uJ1xyXG5cdFx0KTtcclxuXHJcblx0XHR2YXVsdFByb2ZpbGVHcm91cC5hZGRTZXR0aW5nKChzZXR0aW5nKTogdm9pZCA9PiB7XHJcblx0XHRcdHNldHRpbmdcclxuXHRcdFx0XHQuc2V0TmFtZSgnVmF1bHQgc3dpdGNoZXIgYmFja2dyb3VuZCB0cmFuc3BhcmVuY3knKVxyXG5cdFx0XHRcdC5zZXREZXNjKCdBZGp1c3QgdGhlIHRyYW5zcGFyZW5jeSBvZiB0aGUgdmF1bHQgc3dpdGNoZXIgYmFja2dyb3VuZCB3aGVuIGhpZGRlbi4gUmFuZ2U6IDAgKGZ1bGx5IHRyYW5zcGFyZW50KSB0byAxIChmdWxseSBvcGFxdWUpLicpXHJcblx0XHRcdFx0LmFkZFNsaWRlcigoc2xpZGVyKSA9PlxyXG5cdFx0XHRcdFx0c2xpZGVyXHJcblx0XHRcdFx0XHRcdC5zZXRMaW1pdHMoMCwgMSwgMC4wMSlcclxuXHRcdFx0XHRcdFx0LnNldFZhbHVlKHRoaXMuZ2V0U2V0dGluZ3MoKS52YXVsdFN3aXRjaGVyQmFja2dyb3VuZFRyYW5zcGFyZW5jeSlcclxuXHRcdFx0XHRcdFx0LnNldER5bmFtaWNUb29sdGlwKClcclxuXHRcdFx0XHRcdFx0Lm9uQ2hhbmdlKCh2YWx1ZSkgPT4ge1xyXG5cdFx0XHRcdFx0XHRcdHRoaXMuZ2V0U2V0dGluZ3MoKS52YXVsdFN3aXRjaGVyQmFja2dyb3VuZFRyYW5zcGFyZW5jeSA9IHZhbHVlO1xyXG5cdFx0XHRcdFx0XHRcdHZvaWQgdGhpcy5zYXZlU2V0dGluZ3MoKTtcclxuXHRcdFx0XHRcdFx0fSlcclxuXHRcdFx0XHQpO1xyXG5cdFx0fSk7XHJcblxyXG5cdFx0Ly8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxyXG5cdFx0Ly8gVGFiIGljb25zXHJcblx0XHQvLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XHJcblx0XHRjb25zdCB0YWJJY29uc0dyb3VwID0gY3JlYXRlU2V0dGluZ3NHcm91cChjb250YWluZXIsICdUYWIgaWNvbnMnLCAndWktdHdlYWtlcicpO1xyXG5cclxuXHRcdHRoaXMuYWRkVmlzaWJpbGl0eVNldHRpbmcoXHJcblx0XHRcdHRhYkljb25zR3JvdXAsXHJcblx0XHRcdCdIaWRlIHRhYiBsaXN0IGljb24nLFxyXG5cdFx0XHQnSGlkZXMgdGhlIHRhYiBsaXN0IGljb24uIFlvdSBjYW4gc3RpbGwgYWNjZXNzIHRhYnMgdmlhIG90aGVyIG1ldGhvZHMuJyxcclxuXHRcdFx0J3RhYkxpc3RJY29uJ1xyXG5cdFx0KTtcclxuXHJcblx0XHR0aGlzLmFkZFZpc2liaWxpdHlTZXR0aW5nKFxyXG5cdFx0XHR0YWJJY29uc0dyb3VwLFxyXG5cdFx0XHQnSGlkZSBuZXcgdGFiIGljb24nLFxyXG5cdFx0XHQnSGlkZXMgdGhlIG5ldyB0YWIgaWNvbi4gWW91IGNhbiBzdGlsbCBjcmVhdGUgbmV3IHRhYnMgd2l0aCBDdHJsK1QgKENtZCtUIG9uIE1hYykuJyxcclxuXHRcdFx0J25ld1RhYkljb24nXHJcblx0XHQpO1xyXG5cclxuXHRcdHRoaXMuYWRkVmlzaWJpbGl0eVNldHRpbmcoXHJcblx0XHRcdHRhYkljb25zR3JvdXAsXHJcblx0XHRcdCdIaWRlIHRhYiBjbG9zZSBidXR0b24nLFxyXG5cdFx0XHQnSGlkZXMgdGhlIGNsb3NlIGJ1dHRvbiBvbiB0YWJzLiBZb3UgY2FuIHN0aWxsIGNsb3NlIHRhYnMgd2l0aCBtaWRkbGUgY2xpY2sgb3Igb3RoZXIgbWV0aG9kcy4nLFxyXG5cdFx0XHQndGFiQ2xvc2VCdXR0b24nXHJcblx0XHQpO1xyXG5cclxuXHRcdC8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cclxuXHRcdC8vIFN0YXR1cyAmIFVJIGVsZW1lbnRzXHJcblx0XHQvLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XHJcblx0XHRjb25zdCBzdGF0dXNVSUdyb3VwID0gY3JlYXRlU2V0dGluZ3NHcm91cChjb250YWluZXIsICdTdGF0dXMgJiBVSSBlbGVtZW50cycsICd1aS10d2Vha2VyJyk7XHJcblxyXG5cdFx0dGhpcy5hZGRUb2dnbGVTZXR0aW5nKHN0YXR1c1VJR3JvdXAsICdIaWRlIHN0YXR1cyBiYXInLCAnSGlkZXMgd29yZCBjb3VudCwgY2hhcmFjdGVyIGNvdW50IGFuZCBiYWNrbGluayBjb3VudC4nLCAnc3RhdHVzQmFyJyk7XHJcblxyXG5cdFx0dGhpcy5hZGRWaXNpYmlsaXR5U2V0dGluZyhcclxuXHRcdFx0c3RhdHVzVUlHcm91cCxcclxuXHRcdFx0J1Njcm9sbCBiYXJzJyxcclxuXHRcdFx0J0NvbnRyb2wgc2Nyb2xsYmFyIHZpc2liaWxpdHkuIFJldmVhbCBvcHRpb24gaGlkZXMgc2Nyb2xsYmFycyB1bnRpbCBob3Zlci4nLFxyXG5cdFx0XHQnc2Nyb2xsQmFycydcclxuXHRcdCk7XHJcblxyXG5cdFx0dGhpcy5hZGRWaXNpYmlsaXR5U2V0dGluZyhcclxuXHRcdFx0c3RhdHVzVUlHcm91cCxcclxuXHRcdFx0J0hpZGUgbGVmdCBzaWRlYmFyIHRvZ2dsZSBidXR0b24nLFxyXG5cdFx0XHQnSGlkZXMgdGhlIGxlZnQgc2lkZWJhciB0b2dnbGUgYnV0dG9uLicsXHJcblx0XHRcdCdsZWZ0U2lkZWJhclRvZ2dsZUJ1dHRvbidcclxuXHRcdCk7XHJcblxyXG5cdFx0dGhpcy5hZGRWaXNpYmlsaXR5U2V0dGluZyhcclxuXHRcdFx0c3RhdHVzVUlHcm91cCxcclxuXHRcdFx0J0hpZGUgcmlnaHQgc2lkZWJhciB0b2dnbGUgYnV0dG9uJyxcclxuXHRcdFx0J0hpZGVzIHRoZSByaWdodCBzaWRlYmFyIHRvZ2dsZSBidXR0b24uJyxcclxuXHRcdFx0J3JpZ2h0U2lkZWJhclRvZ2dsZUJ1dHRvbidcclxuXHRcdCk7XHJcblxyXG5cdFx0dGhpcy5hZGRUb2dnbGVTZXR0aW5nKHN0YXR1c1VJR3JvdXAsICdIaWRlIHRvb2x0aXBzJywgJ0hpZGVzIGFsbCB0b29sdGlwcy4nLCAndG9vbHRpcHMnKTtcclxuXHJcblx0XHR0aGlzLmFkZFRvZ2dsZVNldHRpbmcoc3RhdHVzVUlHcm91cCwgJ0hpZGUgaW5zdHJ1Y3Rpb25zJywgJ0hpZGVzIGluc3RydWN0aW9uYWwgdGlwcyBpbiBtb2RhbHMuJywgJ2luc3RydWN0aW9ucycpO1xyXG5cclxuXHRcdC8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cclxuXHRcdC8vIFNlYXJjaFxyXG5cdFx0Ly8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxyXG5cdFx0Y29uc3Qgc2VhcmNoR3JvdXAgPSBjcmVhdGVTZXR0aW5nc0dyb3VwKGNvbnRhaW5lciwgJ1NlYXJjaCcsICd1aS10d2Vha2VyJyk7XHJcblxyXG5cdFx0dGhpcy5hZGRUb2dnbGVTZXR0aW5nKHNlYXJjaEdyb3VwLCAnSGlkZSBzZWFyY2ggc3VnZ2VzdGlvbnMnLCAnSGlkZXMgc3VnZ2VzdGlvbnMgaW4gc2VhcmNoIHBhbmUuJywgJ3NlYXJjaFN1Z2dlc3Rpb25zJyk7XHJcblxyXG5cdFx0dGhpcy5hZGRUb2dnbGVTZXR0aW5nKHNlYXJjaEdyb3VwLCAnSGlkZSBjb3VudCBvZiBzZWFyY2ggdGVybSBtYXRjaGVzJywgJ0hpZGVzIHRoZSBudW1iZXIgb2YgbWF0Y2hlcyB3aXRoaW4gZWFjaCBzZWFyY2ggcmVzdWx0LicsICdzZWFyY2hUZXJtQ291bnRzJyk7XHJcblxyXG5cdFx0Ly8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxyXG5cdFx0Ly8gUHJvcGVydGllc1xyXG5cdFx0Ly8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxyXG5cdFx0Y29uc3QgcHJvcGVydGllc0dyb3VwID0gY3JlYXRlU2V0dGluZ3NHcm91cChjb250YWluZXIsICdQcm9wZXJ0aWVzJywgJ3VpLXR3ZWFrZXInKTtcclxuXHJcblx0XHR0aGlzLmFkZFRvZ2dsZVNldHRpbmcocHJvcGVydGllc0dyb3VwLCAnSGlkZSBwcm9wZXJ0aWVzIGluIFJlYWRpbmcgdmlldycsICdIaWRlcyB0aGUgcHJvcGVydGllcyBzZWN0aW9uIGluIFJlYWRpbmcgdmlldy4nLCAncHJvcGVydGllc0luUmVhZGluZ1ZpZXcnKTtcclxuXHJcblx0XHR0aGlzLmFkZFRvZ2dsZVNldHRpbmcocHJvcGVydGllc0dyb3VwLCAnSGlkZSBwcm9wZXJ0aWVzIGhlYWRpbmcnLCAnSGlkZSBcIlByb3BlcnRpZXNcIiBoZWFkaW5nIGFib3ZlIHByb3BlcnRpZXMuJywgJ3Byb3BlcnRpZXNJbkhlYWRpbmcnKTtcclxuXHJcblx0XHR0aGlzLmFkZFRvZ2dsZVNldHRpbmcocHJvcGVydGllc0dyb3VwLCAnSGlkZSBcIkFkZCBwcm9wZXJ0eVwiIGJ1dHRvbicsICdIaWRlIFwiQWRkIHByb3BlcnR5XCIgYnV0dG9uIGJlbG93IHByb3BlcnRpZXMuJywgJ2FkZFByb3BlcnR5QnV0dG9uJyk7XHJcblx0fVxyXG5cclxuXHRwcml2YXRlIGFkZFZpc2liaWxpdHlTZXR0aW5nKGdyb3VwOiBTZXR0aW5nc0NvbnRhaW5lciwgbmFtZTogc3RyaW5nLCBkZXNjOiBzdHJpbmcsIGtleToga2V5b2YgVUlTZXR0aW5ncykge1xyXG5cdFx0Z3JvdXAuYWRkU2V0dGluZygoc2V0dGluZyk6IHZvaWQgPT4ge1xyXG5cdFx0XHRzZXR0aW5nXHJcblx0XHRcdFx0LnNldE5hbWUobmFtZSlcclxuXHRcdFx0XHQuc2V0RGVzYyhkZXNjKVxyXG5cdFx0XHRcdC5hZGREcm9wZG93bigoZHJvcGRvd24pID0+IHtcclxuXHRcdFx0XHRcdGNvbnN0IGN1cnJlbnRWYWx1ZSA9IHRoaXMuZ2V0U2V0dGluZ3MoKVtrZXldO1xyXG5cdFx0XHRcdFx0Y29uc3Qgc3RyaW5nVmFsdWUgPSB0eXBlb2YgY3VycmVudFZhbHVlID09PSAnc3RyaW5nJyA/IGN1cnJlbnRWYWx1ZSA6ICdzaG93JztcclxuXHRcdFx0XHRcdGRyb3Bkb3duXHJcblx0XHRcdFx0XHRcdC5hZGRPcHRpb24oJ3Nob3cnLCAnU2hvdycpXHJcblx0XHRcdFx0XHRcdC5hZGRPcHRpb24oJ2hpZGUnLCAnSGlkZScpXHJcblx0XHRcdFx0XHRcdC5hZGRPcHRpb24oJ3JldmVhbCcsICdSZXZlYWwnKVxyXG5cdFx0XHRcdFx0XHQuc2V0VmFsdWUoc3RyaW5nVmFsdWUpXHJcblx0XHRcdFx0XHRcdC5vbkNoYW5nZSgodmFsdWUpID0+IHtcclxuXHRcdFx0XHRcdFx0XHQodGhpcy5nZXRTZXR0aW5ncygpW2tleV0gYXMgVUlWaXNpYmlsaXR5U3RhdGUpID0gdmFsdWUgYXMgVUlWaXNpYmlsaXR5U3RhdGU7XHJcblx0XHRcdFx0XHRcdFx0dm9pZCB0aGlzLnNhdmVTZXR0aW5ncygpO1xyXG5cdFx0XHRcdFx0XHR9KTtcclxuXHRcdFx0XHR9KTtcclxuXHRcdH0pO1xyXG5cdH1cclxuXHJcblx0cHJpdmF0ZSBhZGRUb2dnbGVTZXR0aW5nKGdyb3VwOiBTZXR0aW5nc0NvbnRhaW5lciwgbmFtZTogc3RyaW5nLCBkZXNjOiBzdHJpbmcsIGtleToga2V5b2YgVUlTZXR0aW5ncykge1xyXG5cdFx0Z3JvdXAuYWRkU2V0dGluZygoc2V0dGluZyk6IHZvaWQgPT4ge1xyXG5cdFx0XHRzZXR0aW5nXHJcblx0XHRcdFx0LnNldE5hbWUobmFtZSlcclxuXHRcdFx0XHQuc2V0RGVzYyhkZXNjKVxyXG5cdFx0XHRcdC5hZGRUb2dnbGUoKHRvZ2dsZSkgPT5cclxuXHRcdFx0XHRcdHRvZ2dsZS5zZXRWYWx1ZShCb29sZWFuKHRoaXMuZ2V0U2V0dGluZ3MoKVtrZXldKSkub25DaGFuZ2UoKHZhbHVlKSA9PiB7XHJcblx0XHRcdFx0XHRcdCh0aGlzLmdldFNldHRpbmdzKClba2V5XSBhcyBib29sZWFuKSA9IHZhbHVlO1xyXG5cdFx0XHRcdFx0XHR2b2lkIHRoaXMuc2F2ZVNldHRpbmdzKCk7XHJcblx0XHRcdFx0XHR9KVxyXG5cdFx0XHRcdCk7XHJcblx0XHR9KTtcclxuXHR9XHJcblxyXG5cdHByaXZhdGUgcmVuZGVySGVscEJ1dHRvblJlcGxhY2VtZW50KGdyb3VwOiBTZXR0aW5nc0NvbnRhaW5lcik6IHZvaWQge1xyXG5cdFx0Y29uc3Qgc2V0dGluZ3MgPSB0aGlzLmdldFNldHRpbmdzKCk7XHJcblx0XHRpZiAoIXNldHRpbmdzLmhlbHBCdXR0b25SZXBsYWNlbWVudCkge1xyXG5cdFx0XHRzZXR0aW5ncy5oZWxwQnV0dG9uUmVwbGFjZW1lbnQgPSB7XHJcblx0XHRcdFx0ZW5hYmxlZDogZmFsc2UsXHJcblx0XHRcdFx0Y29tbWFuZElkOiAnJyxcclxuXHRcdFx0XHRpY29uSWQ6ICd3cmVuY2gnLFxyXG5cdFx0XHR9O1xyXG5cdFx0fVxyXG5cclxuXHRcdGdyb3VwLmFkZFNldHRpbmcoKHNldHRpbmcpOiB2b2lkID0+IHtcclxuXHRcdFx0c2V0dGluZ1xyXG5cdFx0XHRcdC5zZXROYW1lKCdSZXBsYWNlIGhlbHAgYnV0dG9uIHdpdGggY3VzdG9tIGFjdGlvbicpXHJcblx0XHRcdFx0LnNldERlc2MoJ1JlcGxhY2UgdGhlIGhlbHAgYnV0dG9uIHdpdGggYSBjdXN0b20gaWNvbiBhbmQgY29tbWFuZC4gVGhpcyB3aWxsIGhpZGUgdGhlIG9yaWdpbmFsIGhlbHAgYnV0dG9uIGFuZCBzaG93IHlvdXIgY3VzdG9tIGJ1dHRvbiBpbnN0ZWFkLicpXHJcblx0XHRcdFx0LmFkZFRvZ2dsZSgodG9nZ2xlKSA9PlxyXG5cdFx0XHRcdFx0dG9nZ2xlLnNldFZhbHVlKHNldHRpbmdzLmhlbHBCdXR0b25SZXBsYWNlbWVudC5lbmFibGVkKS5vbkNoYW5nZSgodmFsdWUpID0+IHtcclxuXHRcdFx0XHRcdFx0aWYgKCFzZXR0aW5ncy5oZWxwQnV0dG9uUmVwbGFjZW1lbnQpIHtcclxuXHRcdFx0XHRcdFx0XHRzZXR0aW5ncy5oZWxwQnV0dG9uUmVwbGFjZW1lbnQgPSB7XHJcblx0XHRcdFx0XHRcdFx0XHRlbmFibGVkOiB0cnVlLFxyXG5cdFx0XHRcdFx0XHRcdFx0Y29tbWFuZElkOiAnJyxcclxuXHRcdFx0XHRcdFx0XHRcdGljb25JZDogJ3dyZW5jaCcsXHJcblx0XHRcdFx0XHRcdFx0fTtcclxuXHRcdFx0XHRcdFx0fVxyXG5cdFx0XHRcdFx0XHRzZXR0aW5ncy5oZWxwQnV0dG9uUmVwbGFjZW1lbnQuZW5hYmxlZCA9IHZhbHVlO1xyXG5cdFx0XHRcdFx0XHR2b2lkIHRoaXMuc2F2ZVNldHRpbmdzKCk7XHJcblx0XHRcdFx0XHR9KVxyXG5cdFx0XHRcdCk7XHJcblx0XHR9KTtcclxuXHJcblx0XHQvLyBTaG93IGNvbW1hbmQgYW5kIGljb24gcGlja2VycyBvbmx5IGlmIHJlcGxhY2VtZW50IGlzIGVuYWJsZWRcclxuXHRcdGlmIChzZXR0aW5ncy5oZWxwQnV0dG9uUmVwbGFjZW1lbnQuZW5hYmxlZCkge1xyXG5cdFx0XHRjb25zdCBnZXRDb21tYW5kTmFtZSA9IChjb21tYW5kSWQ6IHN0cmluZyk6IHN0cmluZyA9PiB7XHJcblx0XHRcdFx0aWYgKCFjb21tYW5kSWQpIHJldHVybiAnU2VsZWN0IGNvbW1hbmQuLi4nO1xyXG5cdFx0XHRcdFxyXG5cdFx0XHRcdHRyeSB7XHJcblx0XHRcdFx0XHRjb25zdCBjb21tYW5kUmVnaXN0cnkgPSAodGhpcy5hcHAgYXMgeyBjb21tYW5kcz86IHsgbGlzdENvbW1hbmRzPzogKCkgPT4gQXJyYXk8eyBpZDogc3RyaW5nOyBuYW1lOiBzdHJpbmcgfT4gfSB9KS5jb21tYW5kcztcclxuXHRcdFx0XHRcdGlmIChjb21tYW5kUmVnaXN0cnkgJiYgdHlwZW9mIGNvbW1hbmRSZWdpc3RyeS5saXN0Q29tbWFuZHMgPT09ICdmdW5jdGlvbicpIHtcclxuXHRcdFx0XHRcdFx0Y29uc3QgY29tbWFuZHMgPSBjb21tYW5kUmVnaXN0cnkubGlzdENvbW1hbmRzKCk7XHJcblx0XHRcdFx0XHRcdGNvbnN0IGNvbW1hbmQgPSBjb21tYW5kcy5maW5kKChjbWQpID0+IFxyXG5cdFx0XHRcdFx0XHRcdGNtZCAmJiBjbWQubmFtZSAmJiAoXHJcblx0XHRcdFx0XHRcdFx0XHRjbWQuaWQgPT09IGNvbW1hbmRJZCB8fCBcclxuXHRcdFx0XHRcdFx0XHRcdGNtZC5pZCA9PT0gY29tbWFuZElkLnJlcGxhY2UoL151aS10d2Vha2VyOisvZywgJycpIHx8XHJcblx0XHRcdFx0XHRcdFx0XHRjbWQuaWQgPT09IGB1aS10d2Vha2VyOiR7Y29tbWFuZElkLnJlcGxhY2UoL151aS10d2Vha2VyOisvZywgJycpfWBcclxuXHRcdFx0XHRcdFx0XHQpXHJcblx0XHRcdFx0XHRcdCk7XHJcblx0XHRcdFx0XHRcdGlmIChjb21tYW5kPy5uYW1lKSB7XHJcblx0XHRcdFx0XHRcdFx0cmV0dXJuIGNvbW1hbmQubmFtZTtcclxuXHRcdFx0XHRcdFx0fVxyXG5cdFx0XHRcdFx0fVxyXG5cdFx0XHRcdH0gY2F0Y2gge1xyXG5cdFx0XHRcdFx0Ly8gRXJyb3IgZ2V0dGluZyBjb21tYW5kIG5hbWVcclxuXHRcdFx0XHR9XHJcblx0XHRcdFx0cmV0dXJuICdTZWxlY3QgY29tbWFuZC4uLic7XHJcblx0XHRcdH07XHJcblxyXG5cdFx0XHRjb25zdCBjb21tYW5kTmFtZSA9IGdldENvbW1hbmROYW1lKHNldHRpbmdzLmhlbHBCdXR0b25SZXBsYWNlbWVudC5jb21tYW5kSWQpO1xyXG5cdFx0XHRncm91cC5hZGRTZXR0aW5nKChzZXR0aW5nKTogdm9pZCA9PiB7XHJcblx0XHRcdFx0c2V0dGluZ1xyXG5cdFx0XHRcdFx0LnNldE5hbWUoJ0NvbW1hbmQnKVxyXG5cdFx0XHRcdFx0LnNldERlc2MoJ1NlbGVjdCB0aGUgY29tbWFuZCB0byBleGVjdXRlIHdoZW4gdGhlIGJ1dHRvbiBpcyBjbGlja2VkJylcclxuXHRcdFx0XHRcdC5hZGRCdXR0b24oKGJ1dHRvbikgPT5cclxuXHRcdFx0XHRcdFx0YnV0dG9uLnNldEJ1dHRvblRleHQoY29tbWFuZE5hbWUgfHwgJ1NlbGVjdCBjb21tYW5kLi4uJykub25DbGljaygoKSA9PiB7XHJcblx0XHRcdFx0XHRcdFx0Y29uc3QgbW9kYWwgPSBuZXcgQ29tbWFuZFBpY2tlck1vZGFsKHRoaXMuYXBwLCAoY29tbWFuZElkKSA9PiB7XHJcblx0XHRcdFx0XHRcdFx0XHRpZiAoIXNldHRpbmdzLmhlbHBCdXR0b25SZXBsYWNlbWVudCkge1xyXG5cdFx0XHRcdFx0XHRcdFx0XHRzZXR0aW5ncy5oZWxwQnV0dG9uUmVwbGFjZW1lbnQgPSB7XHJcblx0XHRcdFx0XHRcdFx0XHRcdFx0ZW5hYmxlZDogdHJ1ZSxcclxuXHRcdFx0XHRcdFx0XHRcdFx0XHRjb21tYW5kSWQ6ICcnLFxyXG5cdFx0XHRcdFx0XHRcdFx0XHRcdGljb25JZDogJ3dyZW5jaCcsXHJcblx0XHRcdFx0XHRcdFx0XHRcdH07XHJcblx0XHRcdFx0XHRcdFx0XHR9XHJcblx0XHRcdFx0XHRcdFx0XHRzZXR0aW5ncy5oZWxwQnV0dG9uUmVwbGFjZW1lbnQuY29tbWFuZElkID0gY29tbWFuZElkO1xyXG5cdFx0XHRcdFx0XHRcdFx0dm9pZCB0aGlzLnNhdmVTZXR0aW5ncygpO1xyXG5cdFx0XHRcdFx0XHRcdH0pO1xyXG5cdFx0XHRcdFx0XHRcdG1vZGFsLm9wZW4oKTtcclxuXHRcdFx0XHRcdFx0fSlcclxuXHRcdFx0XHRcdCk7XHJcblx0XHRcdH0pO1xyXG5cclxuXHRcdFx0Y29uc3QgZ2V0SWNvbk5hbWUgPSAoaWNvbklkOiBzdHJpbmcpOiBzdHJpbmcgPT4ge1xyXG5cdFx0XHRcdGlmICghaWNvbklkKSByZXR1cm4gJyc7XHJcblx0XHRcdFx0cmV0dXJuIGljb25JZFxyXG5cdFx0XHRcdFx0LnJlcGxhY2UoL15sdWNpZGUtLywgJycpXHJcblx0XHRcdFx0XHQuc3BsaXQoJy0nKVxyXG5cdFx0XHRcdFx0Lm1hcCgod29yZCkgPT4gd29yZC5jaGFyQXQoMCkudG9VcHBlckNhc2UoKSArIHdvcmQuc2xpY2UoMSkpXHJcblx0XHRcdFx0XHQuam9pbignICcpO1xyXG5cdFx0XHR9O1xyXG5cclxuXHRcdFx0Y29uc3QgaWNvbk5hbWUgPSBnZXRJY29uTmFtZShzZXR0aW5ncy5oZWxwQnV0dG9uUmVwbGFjZW1lbnQuaWNvbklkKTtcclxuXHRcdFx0Z3JvdXAuYWRkU2V0dGluZygoc2V0dGluZyk6IHZvaWQgPT4ge1xyXG5cdFx0XHRcdHNldHRpbmdcclxuXHRcdFx0XHRcdC5zZXROYW1lKCdJY29uJylcclxuXHRcdFx0XHRcdC5zZXREZXNjKCdTZWxlY3QgdGhlIGljb24gdG8gZGlzcGxheSBvbiB0aGUgYnV0dG9uJylcclxuXHRcdFx0XHRcdC5hZGRCdXR0b24oKGJ1dHRvbikgPT5cclxuXHRcdFx0XHRcdFx0YnV0dG9uLnNldEJ1dHRvblRleHQoaWNvbk5hbWUgfHwgJ1NlbGVjdCBpY29uLi4uJykub25DbGljaygoKSA9PiB7XHJcblx0XHRcdFx0XHRcdFx0Y29uc3QgbW9kYWwgPSBuZXcgSWNvblBpY2tlck1vZGFsKHRoaXMuYXBwLCAoaWNvbklkKSA9PiB7XHJcblx0XHRcdFx0XHRcdFx0XHRpZiAoIXNldHRpbmdzLmhlbHBCdXR0b25SZXBsYWNlbWVudCkge1xyXG5cdFx0XHRcdFx0XHRcdFx0XHRzZXR0aW5ncy5oZWxwQnV0dG9uUmVwbGFjZW1lbnQgPSB7XHJcblx0XHRcdFx0XHRcdFx0XHRcdFx0ZW5hYmxlZDogdHJ1ZSxcclxuXHRcdFx0XHRcdFx0XHRcdFx0XHRjb21tYW5kSWQ6ICdvcGVuLXNldHRpbmdzJyxcclxuXHRcdFx0XHRcdFx0XHRcdFx0XHRpY29uSWQ6ICd3cmVuY2gnLFxyXG5cdFx0XHRcdFx0XHRcdFx0XHR9O1xyXG5cdFx0XHRcdFx0XHRcdFx0fVxyXG5cdFx0XHRcdFx0XHRcdFx0c2V0dGluZ3MuaGVscEJ1dHRvblJlcGxhY2VtZW50Lmljb25JZCA9IGljb25JZDtcclxuXHRcdFx0XHRcdFx0XHRcdHZvaWQgdGhpcy5zYXZlU2V0dGluZ3MoKTtcclxuXHRcdFx0XHRcdFx0XHR9KTtcclxuXHRcdFx0XHRcdFx0XHRtb2RhbC5vcGVuKCk7XHJcblx0XHRcdFx0XHRcdH0pXHJcblx0XHRcdFx0XHQpO1xyXG5cdFx0XHR9KTtcclxuXHRcdH1cclxuXHR9XHJcbn1cclxuIiwgIi8qKlxyXG4gKiBUYWIgQmFyIFRhYiAtIEN1c3RvbSBjb21tYW5kIGJ1dHRvbnMgZm9yIHBhZ2UgaGVhZGVyc1xyXG4gKi9cclxuXHJcbmltcG9ydCB7IHNldEljb24gfSBmcm9tICdvYnNpZGlhbic7XHJcbmltcG9ydCB7IFRhYlJlbmRlcmVyIH0gZnJvbSAnLi4vY29tbW9uL1RhYlJlbmRlcmVyJztcclxuaW1wb3J0IHsgY3JlYXRlU2V0dGluZ3NHcm91cCB9IGZyb20gJy4uLy4uL3V0aWxzL3NldHRpbmdzLWNvbXBhdCc7XHJcbmltcG9ydCB7IENvbW1hbmRJY29uUGFpciB9IGZyb20gJy4uLy4uL3R5cGVzJztcclxuaW1wb3J0IHsgY2hvb3NlTmV3Q29tbWFuZCB9IGZyb20gJy4uLy4uL3V0aWxzL2Nob29zZUNvbW1hbmQnO1xyXG5pbXBvcnQgeyBJY29uUGlja2VyTW9kYWwgfSBmcm9tICcuLi8uLi9tb2RhbHMvSWNvblBpY2tlck1vZGFsJztcclxuaW1wb3J0IHsgc2V0Q3NzUHJvcHMgfSBmcm9tICcuLi8uLi91aU1hbmFnZXInO1xyXG5cclxuLy8gU2ltcGxlIGFycmF5IG1vdmUgdXRpbGl0eVxyXG5mdW5jdGlvbiBhcnJheU1vdmVNdXRhYmxlPFQ+KGFycmF5OiBUW10sIGZyb206IG51bWJlciwgdG86IG51bWJlcik6IHZvaWQge1xyXG5cdGNvbnN0IGl0ZW0gPSBhcnJheVtmcm9tXTtcclxuXHRhcnJheS5zcGxpY2UoZnJvbSwgMSk7XHJcblx0YXJyYXkuc3BsaWNlKHRvLCAwLCBpdGVtKTtcclxufVxyXG5cclxuZXhwb3J0IGNsYXNzIFRhYkJhclRhYiBleHRlbmRzIFRhYlJlbmRlcmVyIHtcclxuXHRwcml2YXRlIGV4cGFuZGVkU3RhdGVzID0gbmV3IE1hcDxzdHJpbmcsIGJvb2xlYW4+KCk7XHJcblxyXG5cdHJlbmRlcihjb250YWluZXI6IEhUTUxFbGVtZW50KTogdm9pZCB7XHJcblx0XHRjb250YWluZXIuZW1wdHkoKTtcclxuXHRcdGNvbnN0IHNldHRpbmdzID0gdGhpcy5nZXRTZXR0aW5ncygpO1xyXG5cdFx0XHJcblx0XHQvLyBFbnN1cmUgdGFiQmFyQ29tbWFuZHMgZXhpc3RzXHJcblx0XHRpZiAoIXNldHRpbmdzLnRhYkJhckNvbW1hbmRzKSB7XHJcblx0XHRcdHNldHRpbmdzLnRhYkJhckNvbW1hbmRzID0gW107XHJcblx0XHR9XHJcblxyXG5cdFx0Ly8gTGlzdCBvZiBjb21tYW5kcyB1c2luZyBTZXR0aW5nIGNvbXBvbmVudHMgKGxpa2UgSGlkZXJUYWIpXHJcblx0XHRzZXR0aW5ncy50YWJCYXJDb21tYW5kcy5mb3JFYWNoKChwYWlyLCBpbmRleCkgPT4ge1xyXG5cdFx0XHR0aGlzLnJlbmRlckNvbW1hbmRJdGVtKGNvbnRhaW5lciwgcGFpciwgaW5kZXgpO1xyXG5cdFx0fSk7XHJcblxyXG5cdFx0Ly8gQWRkIGNvbW1hbmQgYnV0dG9uIChhdCB0aGUgZW5kKVxyXG5cdFx0aWYgKHNldHRpbmdzLnRhYkJhckNvbW1hbmRzLmxlbmd0aCA+IDApIHtcclxuXHRcdFx0Ly8gQWRkIHNlcGFyYXRvclxyXG5cdFx0XHRjb250YWluZXIuY3JlYXRlRWwoJ2hyJyk7XHJcblx0XHR9XHJcblx0XHRcclxuXHRcdGNvbnN0IGFkZEdyb3VwID0gY3JlYXRlU2V0dGluZ3NHcm91cChjb250YWluZXIsIHVuZGVmaW5lZCwgJ3VpLXR3ZWFrZXInKTtcclxuXHRcdGFkZEdyb3VwLmFkZFNldHRpbmcoKHNldHRpbmcpOiB2b2lkID0+IHtcclxuXHRcdFx0c2V0dGluZ1xyXG5cdFx0XHRcdC5zZXROYW1lKCdBZGQgY29tbWFuZCcpXHJcblx0XHRcdFx0LnNldERlc2MoJ0FkZCBhIG5ldyBjb21tYW5kIGJ1dHRvbiB0byB0aGUgdGFiIGJhcicpXHJcblx0XHRcdFx0LmFkZEJ1dHRvbigoYnV0dG9uKSA9PiB7XHJcblx0XHRcdFx0XHQvLyBBZGQgaWNvbiB0byB0aGUgYnV0dG9uXHJcblx0XHRcdFx0XHRjb25zdCBidXR0b25FbCA9IGJ1dHRvbi5idXR0b25FbDtcclxuXHRcdFx0XHRcdGNvbnN0IGljb25Db250YWluZXIgPSBidXR0b25FbC5jcmVhdGVTcGFuKHsgY2xzOiAndWktdHdlYWtlci1hZGQtaWNvbicgfSk7XHJcblx0XHRcdFx0XHRzZXRJY29uKGljb25Db250YWluZXIsICdsdWNpZGUtaW1hZ2UtcGx1cycpO1xyXG5cdFx0XHRcdFx0YnV0dG9uRWwuaW5zZXJ0QmVmb3JlKGljb25Db250YWluZXIsIGJ1dHRvbkVsLmZpcnN0Q2hpbGQpO1xyXG5cdFx0XHRcdFx0YnV0dG9uLnNldEJ1dHRvblRleHQoJ0FkZCBjb21tYW5kJykuc2V0Q3RhKCkub25DbGljaygoKSA9PiB7XHJcblx0XHRcdFx0XHRcdHZvaWQgKGFzeW5jICgpID0+IHtcclxuXHRcdFx0XHRcdFx0XHR0cnkge1xyXG5cdFx0XHRcdFx0XHRcdFx0Y29uc3QgcGFpciA9IGF3YWl0IGNob29zZU5ld0NvbW1hbmQodGhpcy5wbHVnaW4pO1xyXG5cdFx0XHRcdFx0XHRcdFx0Ly8gYWRkQ29tbWFuZCB3aWxsIHB1c2ggdG8gc2V0dGluZ3MudGFiQmFyQ29tbWFuZHMgYW5kIHNhdmVcclxuXHRcdFx0XHRcdFx0XHRcdGF3YWl0IHRoaXMucGx1Z2luLnRhYkJhck1hbmFnZXI/LmFkZENvbW1hbmQocGFpcik7XHJcblx0XHRcdFx0XHRcdFx0XHR0aGlzLnJlbmRlcihjb250YWluZXIpO1xyXG5cdFx0XHRcdFx0XHRcdH0gY2F0Y2gge1xyXG5cdFx0XHRcdFx0XHRcdFx0Ly8gVXNlciBjYW5jZWxsZWRcclxuXHRcdFx0XHRcdFx0XHR9XHJcblx0XHRcdFx0XHRcdH0pKCk7XHJcblx0XHRcdFx0XHR9KTtcclxuXHRcdFx0XHR9KTtcclxuXHRcdH0pO1xyXG5cdH1cclxuXHJcblx0cHJpdmF0ZSByZW5kZXJDb21tYW5kSXRlbShjb250YWluZXI6IEhUTUxFbGVtZW50LCBwYWlyOiBDb21tYW5kSWNvblBhaXIsIGluZGV4OiBudW1iZXIpOiB2b2lkIHtcclxuXHRcdGNvbnN0IHNldHRpbmdzID0gdGhpcy5nZXRTZXR0aW5ncygpO1xyXG5cdFx0Y29uc3QgZ3JvdXAgPSBjcmVhdGVTZXR0aW5nc0dyb3VwKGNvbnRhaW5lciwgdW5kZWZpbmVkLCAndWktdHdlYWtlcicpO1xyXG5cdFx0XHJcblx0XHQvLyBTdG9yZSByZWZlcmVuY2UgdG8gb3RoZXIgc2V0dGluZ3MgZm9yIGNvbGxhcHNpYmxlIGZ1bmN0aW9uYWxpdHlcclxuXHRcdGNvbnN0IG90aGVyU2V0dGluZ3M6IEhUTUxFbGVtZW50W10gPSBbXTtcclxuXHRcdFxyXG5cdFx0Ly8gQ29tbWFuZCBuYW1lIHdpdGggZWRpdGFibGUgbmFtZSAobGlrZSBWYXVsdCBDTVMpIGFuZCBpY29uIHByZXZpZXcgd2l0aCBjb2xvclxyXG5cdFx0Y29uc3QgZGlzcGxheU5hbWUgPSBwYWlyLmRpc3BsYXlOYW1lIHx8IHBhaXIubmFtZTtcclxuXHRcdGdyb3VwLmFkZFNldHRpbmcoKHNldHRpbmcpOiB2b2lkID0+IHtcclxuXHRcdFx0Ly8gQ29tcGxldGVseSBwcmV2ZW50IGNvbGxhcHNlIG9uIHNldHRpbmcgZWxlbWVudCAtIE9OTFkgY2hldnJvbiBjYW4gdG9nZ2xlXHJcblx0XHRcdC8vIFVzZSBjYXB0dXJlIHBoYXNlIHRvIGludGVyY2VwdCBBTEwgY2xpY2tzIGJlZm9yZSB0aGV5IHJlYWNoIE9ic2lkaWFuJ3MgaGFuZGxlcnNcclxuXHRcdFx0c2V0dGluZy5zZXR0aW5nRWwuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoZSkgPT4ge1xyXG5cdFx0XHRcdGNvbnN0IHRhcmdldCA9IGUudGFyZ2V0IGFzIEhUTUxFbGVtZW50O1xyXG5cdFx0XHRcdC8vIEFsbG93IGNvbGxhcHNlIGlmIGNsaWNraW5nIG9uIGNoZXZyb24gaWNvbiBPUiBvbiBleHRyYSBidXR0b25zIChkZWxldGUsIG1vdmUgdXAvZG93biwgZXRjLilcclxuXHRcdFx0XHQvLyBPUiBvbiBuYW1lIGRpc3BsYXkvcGVuY2lsIGljb24gZm9yIHJlbmFtaW5nXHJcblx0XHRcdFx0Y29uc3QgaXNDaGV2cm9uQ2xpY2sgPSB0YXJnZXQuY2xvc2VzdCgnLnVpLXR3ZWFrZXItY29sbGFwc2UtaWNvbicpICE9PSBudWxsO1xyXG5cdFx0XHRcdGNvbnN0IGlzRXh0cmFCdXR0b24gPSB0YXJnZXQuY2xvc2VzdCgnLmV4dHJhLXNldHRpbmctYnV0dG9uJykgIT09IG51bGwgfHwgdGFyZ2V0LmNsb3Nlc3QoJy5jbGlja2FibGUtaWNvbi5leHRyYS1zZXR0aW5nLWJ1dHRvbicpICE9PSBudWxsO1xyXG5cdFx0XHRcdGNvbnN0IGlzTmFtZUVkaXQgPSB0YXJnZXQuY2xvc2VzdCgnLnVpLXR3ZWFrZXItbmFtZS1kaXNwbGF5JykgIT09IG51bGwgfHwgdGFyZ2V0LmNsb3Nlc3QoJy51aS10d2Vha2VyLWVkaXQtaWNvbicpICE9PSBudWxsIHx8IHRhcmdldC5jbG9zZXN0KCcudWktdHdlYWtlci1lZGl0YWJsZS1uYW1lJykgIT09IG51bGw7XHJcblx0XHRcdFx0aWYgKCFpc0NoZXZyb25DbGljayAmJiAhaXNFeHRyYUJ1dHRvbiAmJiAhaXNOYW1lRWRpdCkge1xyXG5cdFx0XHRcdFx0Ly8gQmxvY2sgQUxMIG90aGVyIGNsaWNrcyBmcm9tIGFmZmVjdGluZyBjb2xsYXBzZVxyXG5cdFx0XHRcdFx0ZS5zdG9wUHJvcGFnYXRpb24oKTtcclxuXHRcdFx0XHRcdGUuc3RvcEltbWVkaWF0ZVByb3BhZ2F0aW9uKCk7XHJcblx0XHRcdFx0XHRlLnByZXZlbnREZWZhdWx0KCk7XHJcblx0XHRcdFx0XHRyZXR1cm4gZmFsc2U7XHJcblx0XHRcdFx0fVxyXG5cdFx0XHR9LCB0cnVlKTsgLy8gQ2FwdHVyZSBwaGFzZSAtIHJ1bnMgYmVmb3JlIG90aGVyIGhhbmRsZXJzXHJcblx0XHRcdFxyXG5cdFx0XHQvLyBBbHNvIHByZXZlbnQgb24gYnViYmxlIHBoYXNlIGFzIGJhY2t1cFxyXG5cdFx0XHRzZXR0aW5nLnNldHRpbmdFbC5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIChlKSA9PiB7XHJcblx0XHRcdFx0Y29uc3QgdGFyZ2V0ID0gZS50YXJnZXQgYXMgSFRNTEVsZW1lbnQ7XHJcblx0XHRcdFx0Y29uc3QgaXNDaGV2cm9uQ2xpY2sgPSB0YXJnZXQuY2xvc2VzdCgnLnVpLXR3ZWFrZXItY29sbGFwc2UtaWNvbicpICE9PSBudWxsO1xyXG5cdFx0XHRcdGNvbnN0IGlzRXh0cmFCdXR0b24gPSB0YXJnZXQuY2xvc2VzdCgnLmV4dHJhLXNldHRpbmctYnV0dG9uJykgIT09IG51bGwgfHwgdGFyZ2V0LmNsb3Nlc3QoJy5jbGlja2FibGUtaWNvbi5leHRyYS1zZXR0aW5nLWJ1dHRvbicpICE9PSBudWxsO1xyXG5cdFx0XHRcdGNvbnN0IGlzTmFtZUVkaXQgPSB0YXJnZXQuY2xvc2VzdCgnLnVpLXR3ZWFrZXItbmFtZS1kaXNwbGF5JykgIT09IG51bGwgfHwgdGFyZ2V0LmNsb3Nlc3QoJy51aS10d2Vha2VyLWVkaXQtaWNvbicpICE9PSBudWxsIHx8IHRhcmdldC5jbG9zZXN0KCcudWktdHdlYWtlci1lZGl0YWJsZS1uYW1lJykgIT09IG51bGw7XHJcblx0XHRcdFx0aWYgKCFpc0NoZXZyb25DbGljayAmJiAhaXNFeHRyYUJ1dHRvbiAmJiAhaXNOYW1lRWRpdCkge1xyXG5cdFx0XHRcdFx0ZS5zdG9wUHJvcGFnYXRpb24oKTtcclxuXHRcdFx0XHRcdGUuc3RvcEltbWVkaWF0ZVByb3BhZ2F0aW9uKCk7XHJcblx0XHRcdFx0XHRlLnByZXZlbnREZWZhdWx0KCk7XHJcblx0XHRcdFx0XHRyZXR1cm4gZmFsc2U7XHJcblx0XHRcdFx0fVxyXG5cdFx0XHR9LCBmYWxzZSk7IC8vIEJ1YmJsZSBwaGFzZSAtIGJhY2t1cFxyXG5cdFx0XHRcclxuXHRcdFx0Ly8gTWFrZSBuYW1lRWwgYSBmbGV4IGNvbnRhaW5lciBzbyBjaGV2cm9uIGNhbiBiZSBwb3NpdGlvbmVkIHRvIHRoZSBsZWZ0XHJcblx0XHRcdGNvbnN0IG5hbWVFbCA9IHNldHRpbmcubmFtZUVsO1xyXG5cdFx0XHRzZXRDc3NQcm9wcyhuYW1lRWwsIHsgZGlzcGxheTogJ2ZsZXgnLCBhbGlnbkl0ZW1zOiAnY2VudGVyJywgZ2FwOiAnMC41cmVtJywgd2lkdGg6ICcxMDAlJyB9KTtcclxuXHRcdFx0XHJcblx0XHRcdC8vIEFkZCBjaGV2cm9ucy11cC1kb3duIGljb24gdG8gdGhlIExFRlQgb2YgdGhlIG5hbWUgKGJlZm9yZSBuYW1lIGNvbnRhaW5lcilcclxuXHRcdFx0Y29uc3QgY2hldnJvbkNvbnRhaW5lciA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xyXG5cdFx0XHRjaGV2cm9uQ29udGFpbmVyLmNsYXNzTmFtZSA9ICd1aS10d2Vha2VyLWNvbGxhcHNlLWljb24nO1xyXG5cdFx0XHRzZXRDc3NQcm9wcyhjaGV2cm9uQ29udGFpbmVyLCB7IFxyXG5cdFx0XHRcdGN1cnNvcjogJ2RlZmF1bHQnLFxyXG5cdFx0XHRcdGJhY2tncm91bmQ6ICd0cmFuc3BhcmVudCcsXHJcblx0XHRcdFx0cGFkZGluZzogJzAnLFxyXG5cdFx0XHRcdG1hcmdpbjogJzAnLFxyXG5cdFx0XHRcdGRpc3BsYXk6ICdpbmxpbmUtZmxleCcsXHJcblx0XHRcdFx0YWxpZ25JdGVtczogJ2NlbnRlcicsXHJcblx0XHRcdFx0anVzdGlmeUNvbnRlbnQ6ICdjZW50ZXInXHJcblx0XHRcdH0pO1xyXG5cdFx0XHQvLyBJbnNlcnQgYXMgZmlyc3QgY2hpbGQgdG8gZW5zdXJlIGl0J3Mgb24gdGhlIGxlZnRcclxuXHRcdFx0bmFtZUVsLmluc2VydEJlZm9yZShjaGV2cm9uQ29udGFpbmVyLCBuYW1lRWwuZmlyc3RDaGlsZCk7XHJcblx0XHRcdC8vIFJlc3RvcmUgY29sbGFwc2Ugc3RhdGUgZnJvbSBNYXAsIGRlZmF1bHQgdG8gZmFsc2UgaWYgbm90IHNldFxyXG5cdFx0XHRsZXQgaXNFeHBhbmRlZCA9IHRoaXMuZXhwYW5kZWRTdGF0ZXMuZ2V0KHBhaXIuaWQpID8/IGZhbHNlO1xyXG5cdFx0XHRzZXRJY29uKGNoZXZyb25Db250YWluZXIsIGlzRXhwYW5kZWQgPyAnY2hldnJvbnMtZG93bi11cCcgOiAnY2hldnJvbnMtdXAtZG93bicpO1xyXG5cdFx0XHRcclxuXHRcdFx0Ly8gVG9nZ2xlIG9uIGNoZXZyb24gY2xpY2sgLSBPTkxZIHdheSB0byBjaGFuZ2UgY29sbGFwc2Ugc3RhdGVcclxuXHRcdFx0Y2hldnJvbkNvbnRhaW5lci5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIChlKSA9PiB7XHJcblx0XHRcdFx0ZS5zdG9wUHJvcGFnYXRpb24oKTtcclxuXHRcdFx0XHRlLnN0b3BJbW1lZGlhdGVQcm9wYWdhdGlvbigpO1xyXG5cdFx0XHRcdGUucHJldmVudERlZmF1bHQoKTtcclxuXHRcdFx0XHRpc0V4cGFuZGVkID0gIWlzRXhwYW5kZWQ7XHJcblx0XHRcdFx0Ly8gU3RvcmUgc3RhdGUgaW4gTWFwIGZvciBwZXJzaXN0ZW5jZSBhY3Jvc3MgcmUtcmVuZGVyc1xyXG5cdFx0XHRcdHRoaXMuZXhwYW5kZWRTdGF0ZXMuc2V0KHBhaXIuaWQsIGlzRXhwYW5kZWQpO1xyXG5cdFx0XHRcdC8vIFN3YXAgaWNvbjogY2hldnJvbnMtdXAtZG93biAoY29sbGFwc2VkKSA8LT4gY2hldnJvbnMtZG93bi11cCAoZXhwYW5kZWQpXHJcblx0XHRcdFx0c2V0SWNvbihjaGV2cm9uQ29udGFpbmVyLCBpc0V4cGFuZGVkID8gJ2NoZXZyb25zLWRvd24tdXAnIDogJ2NoZXZyb25zLXVwLWRvd24nKTtcclxuXHRcdFx0XHRvdGhlclNldHRpbmdzLmZvckVhY2goc2V0dGluZ0VsID0+IHtcclxuXHRcdFx0XHRcdHNldENzc1Byb3BzKHNldHRpbmdFbCwgeyBkaXNwbGF5OiBpc0V4cGFuZGVkID8gJycgOiAnbm9uZScgfSk7XHJcblx0XHRcdFx0fSk7XHJcblx0XHRcdH0pO1xyXG5cdFx0XHRcclxuXHRcdFx0Ly8gQ3JlYXRlIGVkaXRhYmxlIG5hbWUgY29udGFpbmVyIHdpdGggcGVuY2lsIGljb25cclxuXHRcdFx0Y29uc3QgbmFtZUNvbnRhaW5lciA9IG5hbWVFbC5jcmVhdGVEaXYoeyBjbHM6ICd1aS10d2Vha2VyLWVkaXRhYmxlLW5hbWUnIH0pO1xyXG5cdFx0XHRzZXRDc3NQcm9wcyhuYW1lQ29udGFpbmVyLCB7IGRpc3BsYXk6ICdmbGV4JywgYWxpZ25JdGVtczogJ2NlbnRlcicsIGdhcDogJzAuNXJlbScgfSk7XHJcblx0XHRcdFxyXG5cdFx0XHQvLyBGdW5jdGlvbiB0byBjcmVhdGUgdGhlIGRpc3BsYXkgZWxlbWVudCB3aXRoIGNsaWNrIGhhbmRsZXJcclxuXHRcdFx0Y29uc3QgY3JlYXRlTmFtZURpc3BsYXkgPSAobmFtZTogc3RyaW5nKSA9PiB7XHJcblx0XHRcdFx0bmFtZUNvbnRhaW5lci5lbXB0eSgpO1xyXG5cdFx0XHRcdFxyXG5cdFx0XHRcdGNvbnN0IGRpc3BsYXkgPSBuYW1lQ29udGFpbmVyLmNyZWF0ZVNwYW4oeyBcclxuXHRcdFx0XHRcdHRleHQ6IG5hbWUgPT09IGRpc3BsYXlOYW1lID8gbmFtZSA6IGAke25hbWV9ICgke2Rpc3BsYXlOYW1lfSlgLFxyXG5cdFx0XHRcdFx0Y2xzOiAndWktdHdlYWtlci1uYW1lLWRpc3BsYXknXHJcblx0XHRcdFx0fSk7XHJcblx0XHRcdFx0XHJcblx0XHRcdFx0Ly8gQWRkIHBlbmNpbCBpY29uXHJcblx0XHRcdFx0Y29uc3QgaWNvbkNvbnRhaW5lciA9IG5hbWVDb250YWluZXIuY3JlYXRlRGl2KHsgY2xzOiAndWktdHdlYWtlci1lZGl0LWljb24nIH0pO1xyXG5cdFx0XHRcdHNldENzc1Byb3BzKGljb25Db250YWluZXIsIHsgb3BhY2l0eTogJzAuNicgfSk7XHJcblx0XHRcdFx0c2V0SWNvbihpY29uQ29udGFpbmVyLCAnbHVjaWRlLXBlbmNpbC1saW5lJyk7XHJcblx0XHRcdFx0XHJcblx0XHRcdFx0Ly8gTWFrZSBuYW1lIGFuZCBpY29uIGVkaXRhYmxlIG9uIGNsaWNrXHJcblx0XHRcdFx0Y29uc3Qgc3RhcnRFZGl0ID0gKCkgPT4ge1xyXG5cdFx0XHRcdFx0Y29uc3QgY3VycmVudE5hbWUgPSBwYWlyLm5hbWU7XHJcblx0XHRcdFx0XHRcclxuXHRcdFx0XHRcdC8vIENsZWFyIGNvbnRhaW5lclxyXG5cdFx0XHRcdFx0bmFtZUNvbnRhaW5lci5lbXB0eSgpO1xyXG5cdFx0XHRcdFx0XHJcblx0XHRcdFx0XHQvLyBDcmVhdGUgaW5wdXQgdXNpbmcgbmF0aXZlIE9ic2lkaWFuIHN0eWxpbmdcclxuXHRcdFx0XHRcdGNvbnN0IG5hbWVJbnB1dCA9IG5hbWVDb250YWluZXIuY3JlYXRlRWwoJ2lucHV0Jywge1xyXG5cdFx0XHRcdFx0XHR0eXBlOiAndGV4dCcsXHJcblx0XHRcdFx0XHRcdHZhbHVlOiBjdXJyZW50TmFtZVxyXG5cdFx0XHRcdFx0fSk7XHJcblx0XHRcdFx0XHRuYW1lSW5wdXQuYWRkQ2xhc3MoJ21vZC10ZXh0LWlucHV0Jyk7XHJcblx0XHRcdFx0XHRcclxuXHRcdFx0XHRcdC8vIEZvY3VzIGFuZCBzZWxlY3QgdGV4dFxyXG5cdFx0XHRcdFx0bmFtZUlucHV0LmZvY3VzKCk7XHJcblx0XHRcdFx0XHRuYW1lSW5wdXQuc2VsZWN0KCk7XHJcblx0XHRcdFx0XHRcclxuXHRcdFx0XHRcdC8vIFNhdmUgb24gYmx1clxyXG5cdFx0XHRcdFx0Y29uc3Qgc2F2ZU5hbWUgPSAoKSA9PiB7XHJcblx0XHRcdFx0XHRcdG5hbWVJbnB1dC5yZW1vdmVFdmVudExpc3RlbmVyKCdibHVyJywgc2F2ZU5hbWUpO1xyXG5cdFx0XHRcdFx0XHRcclxuXHRcdFx0XHRcdFx0bGV0IG5ld05hbWUgPSBuYW1lSW5wdXQudmFsdWUudHJpbSgpO1xyXG5cdFx0XHRcdFx0XHRpZiAoIW5ld05hbWUpIHtcclxuXHRcdFx0XHRcdFx0XHRuZXdOYW1lID0gY3VycmVudE5hbWU7IC8vIFJldmVydCB0byBvcmlnaW5hbCBpZiBlbXB0eVxyXG5cdFx0XHRcdFx0XHR9XHJcblx0XHRcdFx0XHRcdHBhaXIubmFtZSA9IG5ld05hbWU7XHJcblx0XHRcdFx0XHRcdFxyXG5cdFx0XHRcdFx0XHQvLyBVcGRhdGUgZXhpc3RpbmcgYnV0dG9ucyBpbW1lZGlhdGVseSAoZG9uJ3Qgd2FpdCBmb3IgcmUtcmVuZGVyKVxyXG5cdFx0XHRcdFx0XHR0aGlzLnBsdWdpbi50YWJCYXJNYW5hZ2VyPy51cGRhdGVCdXR0b25OYW1lcygpO1xyXG5cdFx0XHRcdFx0XHRcclxuXHRcdFx0XHRcdFx0Ly8gUmUtcmVuZGVyIHRvIHVwZGF0ZSBkaXNwbGF5IGFuZCBzYXZlXHJcblx0XHRcdFx0XHRcdHZvaWQgKGFzeW5jICgpID0+IHtcclxuXHRcdFx0XHRcdFx0XHRhd2FpdCB0aGlzLnNhdmVTZXR0aW5ncygpO1xyXG5cdFx0XHRcdFx0XHRcdHRoaXMucmVuZGVyKGNvbnRhaW5lcik7XHJcblx0XHRcdFx0XHRcdH0pKCk7XHJcblx0XHRcdFx0XHR9O1xyXG5cdFx0XHRcdFx0XHJcblx0XHRcdFx0XHQvLyBTYXZlIG9uIEVudGVyXHJcblx0XHRcdFx0XHRuYW1lSW5wdXQuYWRkRXZlbnRMaXN0ZW5lcigna2V5ZG93bicsIChlKSA9PiB7XHJcblx0XHRcdFx0XHRcdGlmIChlLmtleSA9PT0gJ0VudGVyJykge1xyXG5cdFx0XHRcdFx0XHRcdGUucHJldmVudERlZmF1bHQoKTtcclxuXHRcdFx0XHRcdFx0XHRzYXZlTmFtZSgpO1xyXG5cdFx0XHRcdFx0XHR9IGVsc2UgaWYgKGUua2V5ID09PSAnRXNjYXBlJykge1xyXG5cdFx0XHRcdFx0XHRcdGUucHJldmVudERlZmF1bHQoKTtcclxuXHRcdFx0XHRcdFx0XHQvLyBDYW5jZWw6IHJldmVydCB0byBvcmlnaW5hbFxyXG5cdFx0XHRcdFx0XHRcdGNyZWF0ZU5hbWVEaXNwbGF5KGN1cnJlbnROYW1lKTtcclxuXHRcdFx0XHRcdFx0fVxyXG5cdFx0XHRcdFx0fSk7XHJcblx0XHRcdFx0XHRcclxuXHRcdFx0XHRcdC8vIFNhdmUgb24gYmx1clxyXG5cdFx0XHRcdFx0bmFtZUlucHV0LmFkZEV2ZW50TGlzdGVuZXIoJ2JsdXInLCBzYXZlTmFtZSk7XHJcblx0XHRcdFx0fTtcclxuXHRcdFx0XHRcclxuXHRcdFx0XHQvLyBBZGQgY2xpY2sgaGFuZGxlcnMgdG8gYm90aCBuYW1lIGFuZCBpY29uXHJcblx0XHRcdFx0ZGlzcGxheS5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIHN0YXJ0RWRpdCk7XHJcblx0XHRcdFx0aWNvbkNvbnRhaW5lci5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIHN0YXJ0RWRpdCk7XHJcblx0XHRcdFx0XHJcblx0XHRcdFx0Ly8gQWRkIGhvdmVyIGVmZmVjdCB0byBpY29uXHJcblx0XHRcdFx0aWNvbkNvbnRhaW5lci5hZGRFdmVudExpc3RlbmVyKCdtb3VzZWVudGVyJywgKCkgPT4ge1xyXG5cdFx0XHRcdFx0c2V0Q3NzUHJvcHMoaWNvbkNvbnRhaW5lciwgeyBvcGFjaXR5OiAnMScgfSk7XHJcblx0XHRcdFx0fSk7XHJcblx0XHRcdFx0aWNvbkNvbnRhaW5lci5hZGRFdmVudExpc3RlbmVyKCdtb3VzZWxlYXZlJywgKCkgPT4ge1xyXG5cdFx0XHRcdFx0c2V0Q3NzUHJvcHMoaWNvbkNvbnRhaW5lciwgeyBvcGFjaXR5OiAnMC42JyB9KTtcclxuXHRcdFx0XHR9KTtcclxuXHRcdFx0fTtcclxuXHRcdFx0XHJcblx0XHRcdC8vIENyZWF0ZSBpbml0aWFsIGRpc3BsYXlcclxuXHRcdFx0Y3JlYXRlTmFtZURpc3BsYXkocGFpci5uYW1lKTtcclxuXHRcdFx0XHJcblx0XHRcdHNldHRpbmcuc2V0RGVzYygnJylcclxuXHRcdFx0XHQuYWRkRXh0cmFCdXR0b24oKGJ1dHRvbikgPT4ge1xyXG5cdFx0XHRcdFx0Ly8gQ2hhbmdlIGljb24gLSBwcmV2aWV3IHdpdGggY29sb3IgKHJlYWwtdGltZSB1cGRhdGVzKVxyXG5cdFx0XHRcdFx0Y29uc3QgaWNvbkVsID0gYnV0dG9uLmV4dHJhU2V0dGluZ3NFbDtcclxuXHRcdFx0XHRcdHNldEljb24oaWNvbkVsLCBwYWlyLmljb24pO1xyXG5cdFx0XHRcdFx0Ly8gU3RvcmUgcmVmZXJlbmNlIGZvciBjb2xvciB1cGRhdGVzXHJcblx0XHRcdFx0XHRpY29uRWwuc2V0QXR0cmlidXRlKCdkYXRhLWNvbW1hbmQtaWQnLCBwYWlyLmlkKTtcclxuXHRcdFx0XHRcdGlmIChwYWlyLmNvbG9yICYmIHBhaXIuY29sb3IgIT09ICcjMDAwMDAwJykge1xyXG5cdFx0XHRcdFx0XHRzZXRDc3NQcm9wcyhpY29uRWwsIHsgY29sb3I6IHBhaXIuY29sb3IgfSk7XHJcblx0XHRcdFx0XHR9IGVsc2Uge1xyXG5cdFx0XHRcdFx0XHRpY29uRWwuc3R5bGUucmVtb3ZlUHJvcGVydHkoJ2NvbG9yJyk7XHJcblx0XHRcdFx0XHR9XHJcblx0XHRcdFx0XHRidXR0b24uc2V0VG9vbHRpcCgnQ2hhbmdlIGljb24nKTtcclxuXHRcdFx0XHRcdGJ1dHRvbi5vbkNsaWNrKCgpID0+IHtcclxuXHRcdFx0XHRcdFx0Y29uc3QgbW9kYWwgPSBuZXcgSWNvblBpY2tlck1vZGFsKHRoaXMuYXBwLCAoaWNvbklkKSA9PiB7XHJcblx0XHRcdFx0XHRcdFx0dm9pZCAoYXN5bmMgKCkgPT4ge1xyXG5cdFx0XHRcdFx0XHRcdFx0aWYgKGljb25JZCAmJiBpY29uSWQgIT09IHBhaXIuaWNvbikge1xyXG5cdFx0XHRcdFx0XHRcdFx0XHRwYWlyLmljb24gPSBpY29uSWQ7XHJcblx0XHRcdFx0XHRcdFx0XHRcdGF3YWl0IHRoaXMuc2F2ZVNldHRpbmdzKCk7XHJcblx0XHRcdFx0XHRcdFx0XHRcdHRoaXMucGx1Z2luLnRhYkJhck1hbmFnZXI/LnJlb3JkZXIoKTtcclxuXHRcdFx0XHRcdFx0XHRcdFx0dGhpcy5yZW5kZXIoY29udGFpbmVyKTtcclxuXHRcdFx0XHRcdFx0XHRcdH1cclxuXHRcdFx0XHRcdFx0XHR9KSgpO1xyXG5cdFx0XHRcdFx0XHR9KTtcclxuXHRcdFx0XHRcdFx0bW9kYWwub3BlbigpO1xyXG5cdFx0XHRcdFx0fSk7XHJcblx0XHRcdFx0XHQvLyBQcmV2ZW50IGNvbGxhcHNlIG9uIGNsaWNrXHJcblx0XHRcdFx0XHRidXR0b24uZXh0cmFTZXR0aW5nc0VsLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKGUpID0+IGUuc3RvcFByb3BhZ2F0aW9uKCkpO1xyXG5cdFx0XHRcdH0pXHJcblx0XHRcdFx0LmFkZEV4dHJhQnV0dG9uKChidXR0b24pID0+IHtcclxuXHRcdFx0XHRcdC8vIE1vdmUgdXAgLSBhbHdheXMgc2hvdywgYnV0IGRpc2FibGUgd2hlbiBhdCB0b3BcclxuXHRcdFx0XHRcdGJ1dHRvbi5zZXRJY29uKCdjaGV2cm9uLXVwJyk7XHJcblx0XHRcdFx0XHRpZiAoaW5kZXggPiAwKSB7XHJcblx0XHRcdFx0XHRcdGJ1dHRvbi5zZXRUb29sdGlwKCdNb3ZlIHVwJyk7XHJcblx0XHRcdFx0XHRcdGJ1dHRvbi5vbkNsaWNrKCgpID0+IHtcclxuXHRcdFx0XHRcdFx0XHQvLyBQcmVzZXJ2ZSBzY3JvbGwgcG9zaXRpb24gdG8gcHJldmVudCBmbGlja2VyaW5nXHJcblx0XHRcdFx0XHRcdFx0Y29uc3Qgc2Nyb2xsQ29udGFpbmVyID0gY29udGFpbmVyLmNsb3Nlc3QoJy52ZXJ0aWNhbC10YWItY29udGVudCcpIHx8IFxyXG5cdFx0XHRcdFx0XHRcdFx0Y29udGFpbmVyLmNsb3Nlc3QoJy5zZXR0aW5ncy1jb250ZW50JykgfHwgXHJcblx0XHRcdFx0XHRcdFx0XHRjb250YWluZXIuY2xvc2VzdCgnLnZlcnRpY2FsLXRhYi1jb250ZW50LWNvbnRhaW5lcicpIHx8XHJcblx0XHRcdFx0XHRcdFx0XHRjb250YWluZXI7XHJcblx0XHRcdFx0XHRcdFx0Y29uc3Qgc2Nyb2xsUG9zID0gc2Nyb2xsQ29udGFpbmVyLnNjcm9sbFRvcDtcclxuXHRcdFx0XHRcdFx0XHR2b2lkIChhc3luYyAoKSA9PiB7XHJcblx0XHRcdFx0XHRcdFx0XHRhcnJheU1vdmVNdXRhYmxlKHNldHRpbmdzLnRhYkJhckNvbW1hbmRzLCBpbmRleCwgaW5kZXggLSAxKTtcclxuXHRcdFx0XHRcdFx0XHRcdGF3YWl0IHRoaXMuc2F2ZVNldHRpbmdzKCk7XHJcblx0XHRcdFx0XHRcdFx0XHR0aGlzLnBsdWdpbi50YWJCYXJNYW5hZ2VyPy5yZW9yZGVyKCk7XHJcblx0XHRcdFx0XHRcdFx0XHR0aGlzLnJlbmRlcihjb250YWluZXIpO1xyXG5cdFx0XHRcdFx0XHRcdFx0Ly8gUmVzdG9yZSBzY3JvbGwgcG9zaXRpb24gYWZ0ZXIgcmVuZGVyIHdpdGggbXVsdGlwbGUgYXR0ZW1wdHNcclxuXHRcdFx0XHRcdFx0XHRcdHJlcXVlc3RBbmltYXRpb25GcmFtZSgoKSA9PiB7XHJcblx0XHRcdFx0XHRcdFx0XHRcdHNjcm9sbENvbnRhaW5lci5zY3JvbGxUb3AgPSBzY3JvbGxQb3M7XHJcblx0XHRcdFx0XHRcdFx0XHRcdC8vIEFsc28gdHJ5IGFmdGVyIGEgc2hvcnQgZGVsYXkgaW4gY2FzZSBET00gaXNuJ3QgcmVhZHlcclxuXHRcdFx0XHRcdFx0XHRcdFx0c2V0VGltZW91dCgoKSA9PiB7XHJcblx0XHRcdFx0XHRcdFx0XHRcdFx0c2Nyb2xsQ29udGFpbmVyLnNjcm9sbFRvcCA9IHNjcm9sbFBvcztcclxuXHRcdFx0XHRcdFx0XHRcdFx0XHQvLyBPbmUgbW9yZSBhdHRlbXB0IGFmdGVyIGEgbG9uZ2VyIGRlbGF5XHJcblx0XHRcdFx0XHRcdFx0XHRcdFx0c2V0VGltZW91dCgoKSA9PiB7XHJcblx0XHRcdFx0XHRcdFx0XHRcdFx0XHRzY3JvbGxDb250YWluZXIuc2Nyb2xsVG9wID0gc2Nyb2xsUG9zO1xyXG5cdFx0XHRcdFx0XHRcdFx0XHRcdH0sIDUwKTtcclxuXHRcdFx0XHRcdFx0XHRcdFx0fSwgMCk7XHJcblx0XHRcdFx0XHRcdFx0XHR9KTtcclxuXHRcdFx0XHRcdFx0XHR9KSgpO1xyXG5cdFx0XHRcdFx0XHR9KTtcclxuXHRcdFx0XHRcdH0gZWxzZSB7XHJcblx0XHRcdFx0XHRcdGJ1dHRvbi5zZXRUb29sdGlwKCdBbHJlYWR5IGF0IHRvcCcpO1xyXG5cdFx0XHRcdFx0XHRidXR0b24uZXh0cmFTZXR0aW5nc0VsLmFkZENsYXNzKCd1aS10d2Vha2VyLWRpc2FibGVkLWJ1dHRvbicpO1xyXG5cdFx0XHRcdFx0XHQvLyBQcmV2ZW50IGhvdmVyIGVmZmVjdHMgb24gZGlzYWJsZWQgYnV0dG9uc1xyXG5cdFx0XHRcdFx0XHRzZXRDc3NQcm9wcyhidXR0b24uZXh0cmFTZXR0aW5nc0VsLCB7IHBvaW50ZXJFdmVudHM6ICdub25lJyB9KTtcclxuXHRcdFx0XHRcdH1cclxuXHRcdFx0XHRcdC8vIFByZXZlbnQgY29sbGFwc2Ugb24gY2xpY2tcclxuXHRcdFx0XHRcdGJ1dHRvbi5leHRyYVNldHRpbmdzRWwuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoZSkgPT4gZS5zdG9wUHJvcGFnYXRpb24oKSk7XHJcblx0XHRcdFx0fSlcclxuXHRcdFx0XHQuYWRkRXh0cmFCdXR0b24oKGJ1dHRvbikgPT4ge1xyXG5cdFx0XHRcdFx0Ly8gTW92ZSBkb3duIC0gYWx3YXlzIHNob3csIGJ1dCBkaXNhYmxlIHdoZW4gYXQgYm90dG9tXHJcblx0XHRcdFx0XHRidXR0b24uc2V0SWNvbignY2hldnJvbi1kb3duJyk7XHJcblx0XHRcdFx0XHRpZiAoaW5kZXggPCBzZXR0aW5ncy50YWJCYXJDb21tYW5kcy5sZW5ndGggLSAxKSB7XHJcblx0XHRcdFx0XHRcdGJ1dHRvbi5zZXRUb29sdGlwKCdNb3ZlIGRvd24nKTtcclxuXHRcdFx0XHRcdFx0YnV0dG9uLm9uQ2xpY2soKCkgPT4ge1xyXG5cdFx0XHRcdFx0XHRcdC8vIFByZXNlcnZlIHNjcm9sbCBwb3NpdGlvbiB0byBwcmV2ZW50IGZsaWNrZXJpbmdcclxuXHRcdFx0XHRcdFx0XHRjb25zdCBzY3JvbGxDb250YWluZXIgPSBjb250YWluZXIuY2xvc2VzdCgnLnZlcnRpY2FsLXRhYi1jb250ZW50JykgfHwgXHJcblx0XHRcdFx0XHRcdFx0XHRjb250YWluZXIuY2xvc2VzdCgnLnNldHRpbmdzLWNvbnRlbnQnKSB8fCBcclxuXHRcdFx0XHRcdFx0XHRcdGNvbnRhaW5lci5jbG9zZXN0KCcudmVydGljYWwtdGFiLWNvbnRlbnQtY29udGFpbmVyJykgfHxcclxuXHRcdFx0XHRcdFx0XHRcdGNvbnRhaW5lcjtcclxuXHRcdFx0XHRcdFx0XHRjb25zdCBzY3JvbGxQb3MgPSBzY3JvbGxDb250YWluZXIuc2Nyb2xsVG9wO1xyXG5cdFx0XHRcdFx0XHRcdHZvaWQgKGFzeW5jICgpID0+IHtcclxuXHRcdFx0XHRcdFx0XHRcdGFycmF5TW92ZU11dGFibGUoc2V0dGluZ3MudGFiQmFyQ29tbWFuZHMsIGluZGV4LCBpbmRleCArIDEpO1xyXG5cdFx0XHRcdFx0XHRcdFx0YXdhaXQgdGhpcy5zYXZlU2V0dGluZ3MoKTtcclxuXHRcdFx0XHRcdFx0XHRcdHRoaXMucGx1Z2luLnRhYkJhck1hbmFnZXI/LnJlb3JkZXIoKTtcclxuXHRcdFx0XHRcdFx0XHRcdHRoaXMucmVuZGVyKGNvbnRhaW5lcik7XHJcblx0XHRcdFx0XHRcdFx0XHQvLyBSZXN0b3JlIHNjcm9sbCBwb3NpdGlvbiBhZnRlciByZW5kZXIgd2l0aCBtdWx0aXBsZSBhdHRlbXB0c1xyXG5cdFx0XHRcdFx0XHRcdFx0cmVxdWVzdEFuaW1hdGlvbkZyYW1lKCgpID0+IHtcclxuXHRcdFx0XHRcdFx0XHRcdFx0c2Nyb2xsQ29udGFpbmVyLnNjcm9sbFRvcCA9IHNjcm9sbFBvcztcclxuXHRcdFx0XHRcdFx0XHRcdFx0Ly8gQWxzbyB0cnkgYWZ0ZXIgYSBzaG9ydCBkZWxheSBpbiBjYXNlIERPTSBpc24ndCByZWFkeVxyXG5cdFx0XHRcdFx0XHRcdFx0XHRzZXRUaW1lb3V0KCgpID0+IHtcclxuXHRcdFx0XHRcdFx0XHRcdFx0XHRzY3JvbGxDb250YWluZXIuc2Nyb2xsVG9wID0gc2Nyb2xsUG9zO1xyXG5cdFx0XHRcdFx0XHRcdFx0XHRcdC8vIE9uZSBtb3JlIGF0dGVtcHQgYWZ0ZXIgYSBsb25nZXIgZGVsYXlcclxuXHRcdFx0XHRcdFx0XHRcdFx0XHRzZXRUaW1lb3V0KCgpID0+IHtcclxuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdHNjcm9sbENvbnRhaW5lci5zY3JvbGxUb3AgPSBzY3JvbGxQb3M7XHJcblx0XHRcdFx0XHRcdFx0XHRcdFx0fSwgNTApO1xyXG5cdFx0XHRcdFx0XHRcdFx0XHR9LCAwKTtcclxuXHRcdFx0XHRcdFx0XHRcdH0pO1xyXG5cdFx0XHRcdFx0XHRcdH0pKCk7XHJcblx0XHRcdFx0XHRcdH0pO1xyXG5cdFx0XHRcdFx0fSBlbHNlIHtcclxuXHRcdFx0XHRcdFx0YnV0dG9uLnNldFRvb2x0aXAoJ0FscmVhZHkgYXQgYm90dG9tJyk7XHJcblx0XHRcdFx0XHRcdGJ1dHRvbi5leHRyYVNldHRpbmdzRWwuYWRkQ2xhc3MoJ3VpLXR3ZWFrZXItZGlzYWJsZWQtYnV0dG9uJyk7XHJcblx0XHRcdFx0XHRcdC8vIFByZXZlbnQgaG92ZXIgZWZmZWN0cyBvbiBkaXNhYmxlZCBidXR0b25zXHJcblx0XHRcdFx0XHRcdHNldENzc1Byb3BzKGJ1dHRvbi5leHRyYVNldHRpbmdzRWwsIHsgcG9pbnRlckV2ZW50czogJ25vbmUnIH0pO1xyXG5cdFx0XHRcdFx0fVxyXG5cdFx0XHRcdFx0Ly8gUHJldmVudCBjb2xsYXBzZSBvbiBjbGlja1xyXG5cdFx0XHRcdFx0YnV0dG9uLmV4dHJhU2V0dGluZ3NFbC5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIChlKSA9PiBlLnN0b3BQcm9wYWdhdGlvbigpKTtcclxuXHRcdFx0XHR9KVxyXG5cdFx0XHRcdC5hZGRFeHRyYUJ1dHRvbigoYnV0dG9uKSA9PiB7XHJcblx0XHRcdFx0XHQvLyBEZWxldGUgLSByZWQvd2FybmluZyBzdHlsZVxyXG5cdFx0XHRcdFx0YnV0dG9uLnNldEljb24oJ3RyYXNoJyk7XHJcblx0XHRcdFx0XHRidXR0b24uc2V0VG9vbHRpcCgnRGVsZXRlJyk7XHJcblx0XHRcdFx0XHRidXR0b24uZXh0cmFTZXR0aW5nc0VsLmFkZENsYXNzKCdtb2Qtd2FybmluZycpO1xyXG5cdFx0XHRcdFx0Ly8gTWFrZSBpY29uIHJlZFxyXG5cdFx0XHRcdFx0c2V0Q3NzUHJvcHMoYnV0dG9uLmV4dHJhU2V0dGluZ3NFbCwgeyBjb2xvcjogJ3ZhcigtLXRleHQtZXJyb3IpJyB9KTtcclxuXHRcdFx0XHRcdGJ1dHRvbi5vbkNsaWNrKCgpID0+IHtcclxuXHRcdFx0XHRcdFx0dm9pZCAoYXN5bmMgKCkgPT4ge1xyXG5cdFx0XHRcdFx0XHRcdHNldHRpbmdzLnRhYkJhckNvbW1hbmRzLnNwbGljZShpbmRleCwgMSk7XHJcblx0XHRcdFx0XHRcdFx0YXdhaXQgdGhpcy5zYXZlU2V0dGluZ3MoKTtcclxuXHRcdFx0XHRcdFx0XHRhd2FpdCB0aGlzLnBsdWdpbi50YWJCYXJNYW5hZ2VyPy5yZW1vdmVDb21tYW5kKHBhaXIpO1xyXG5cdFx0XHRcdFx0XHRcdHRoaXMucmVuZGVyKGNvbnRhaW5lcik7XHJcblx0XHRcdFx0XHRcdH0pKCk7XHJcblx0XHRcdFx0XHR9KTtcclxuXHRcdFx0XHRcdC8vIFByZXZlbnQgY29sbGFwc2Ugb24gY2xpY2tcclxuXHRcdFx0XHRcdGJ1dHRvbi5leHRyYVNldHRpbmdzRWwuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoZSkgPT4gZS5zdG9wUHJvcGFnYXRpb24oKSk7XHJcblx0XHRcdFx0fSk7XHJcblx0XHR9KTtcclxuXHJcblx0XHQvLyBNb2RlIHNlbGVjdGlvbiBkcm9wZG93blxyXG5cdFx0Z3JvdXAuYWRkU2V0dGluZygoc2V0dGluZyk6IHZvaWQgPT4ge1xyXG5cdFx0XHRvdGhlclNldHRpbmdzLnB1c2goc2V0dGluZy5zZXR0aW5nRWwpO1xyXG5cdFx0XHRzZXR0aW5nXHJcblx0XHRcdFx0LnNldE5hbWUoJ0RldmljZSBtb2RlJylcclxuXHRcdFx0XHQuc2V0RGVzYygnQ2hvb3NlIHdoaWNoIGRldmljZXMgdGhpcyBjb21tYW5kIGFwcGVhcnMgb24nKVxyXG5cdFx0XHRcdC5hZGREcm9wZG93bigoZHJvcGRvd24pID0+IHtcclxuXHRcdFx0XHRcdGNvbnN0IGFwcElkID0gKHRoaXMuYXBwIGFzIHsgYXBwSWQ/OiBzdHJpbmcgfSkuYXBwSWQgfHwgJ3RoaXMtZGV2aWNlJztcclxuXHRcdFx0XHRcdGRyb3Bkb3duXHJcblx0XHRcdFx0XHRcdC5hZGRPcHRpb24oJ2FueScsICdBbGwgZGV2aWNlcycpXHJcblx0XHRcdFx0XHRcdC5hZGRPcHRpb24oJ2Rlc2t0b3AnLCAnRGVza3RvcCBvbmx5JylcclxuXHRcdFx0XHRcdFx0LmFkZE9wdGlvbignbW9iaWxlJywgJ01vYmlsZSBvbmx5JylcclxuXHRcdFx0XHRcdFx0LmFkZE9wdGlvbihhcHBJZCwgJ1RoaXMgZGV2aWNlJyk7XHJcblx0XHRcdFx0XHRcclxuXHRcdFx0XHRcdC8vIFNldCBjdXJyZW50IHZhbHVlIC0gaWYgbW9kZSBpcyBub3Qgb25lIG9mIHRoZSBzdGFuZGFyZCBvbmVzLCBpdCdzIFwidGhpcyBkZXZpY2VcIlxyXG5cdFx0XHRcdFx0Y29uc3QgY3VycmVudFZhbHVlID0gKHBhaXIubW9kZSA9PT0gJ2FueScgfHwgcGFpci5tb2RlID09PSAnZGVza3RvcCcgfHwgcGFpci5tb2RlID09PSAnbW9iaWxlJykgXHJcblx0XHRcdFx0XHRcdD8gcGFpci5tb2RlIFxyXG5cdFx0XHRcdFx0XHQ6IGFwcElkO1xyXG5cdFx0XHRcdFx0ZHJvcGRvd24uc2V0VmFsdWUoY3VycmVudFZhbHVlKTtcclxuXHRcdFx0XHRcdFxyXG5cdFx0XHRcdFx0ZHJvcGRvd24ub25DaGFuZ2UoKHZhbHVlKSA9PiB7XHJcblx0XHRcdFx0XHRcdHZvaWQgKGFzeW5jICgpID0+IHtcclxuXHRcdFx0XHRcdFx0XHRwYWlyLm1vZGUgPSB2YWx1ZTtcclxuXHRcdFx0XHRcdFx0XHRhd2FpdCB0aGlzLnNhdmVTZXR0aW5ncygpO1xyXG5cdFx0XHRcdFx0XHRcdHRoaXMucGx1Z2luLnRhYkJhck1hbmFnZXI/LnJlb3JkZXIoKTtcclxuXHRcdFx0XHRcdFx0XHR0aGlzLnJlbmRlcihjb250YWluZXIpO1xyXG5cdFx0XHRcdFx0XHR9KSgpO1xyXG5cdFx0XHRcdFx0fSk7XHJcblx0XHRcdFx0XHQvLyBQcmV2ZW50IGNvbGxhcHNlIG9uIGNsaWNrXHJcblx0XHRcdFx0XHRkcm9wZG93bi5zZWxlY3RFbC5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIChlKSA9PiBlLnN0b3BQcm9wYWdhdGlvbigpKTtcclxuXHRcdFx0XHR9KTtcclxuXHRcdH0pO1xyXG5cclxuXHRcdC8vIEN1c3RvbSBjb2xvciBwaWNrZXIgd2l0aCByZXNldCBidXR0b24gKGxpa2UgQ29tbWFuZGVyIC0gYWx3YXlzIHNob3cgY29sb3IgcGlja2VyKVxyXG5cdFx0Z3JvdXAuYWRkU2V0dGluZygoc2V0dGluZyk6IHZvaWQgPT4ge1xyXG5cdFx0XHRvdGhlclNldHRpbmdzLnB1c2goc2V0dGluZy5zZXR0aW5nRWwpO1xyXG5cdFx0XHRjb25zdCBoYXNDb2xvciA9IHBhaXIuY29sb3IgIT09IHVuZGVmaW5lZDtcclxuXHRcdFx0XHJcblx0XHRcdHNldHRpbmdcclxuXHRcdFx0XHQuc2V0TmFtZSgnQ3VzdG9tIGNvbG9yJylcclxuXHRcdFx0XHQuc2V0RGVzYygnU2V0IGEgY3VzdG9tIGNvbG9yIGZvciB0aGlzIGljb24nKVxyXG5cdFx0XHRcdC5hZGRDb2xvclBpY2tlcigoY29sb3JQaWNrZXIpID0+IHtcclxuXHRcdFx0XHRcdC8vIFVzZSBDb21tYW5kZXIncyBhcHByb2FjaDogYWx3YXlzIHNob3cgY29sb3IgcGlja2VyLCBkZWZhdWx0IHRvICMwMDAgaWYgbm90IHNldFxyXG5cdFx0XHRcdFx0Y29uc3QgY3VycmVudENvbG9yID0gcGFpci5jb2xvciA/PyAnIzAwMDAwMCc7XHJcblx0XHRcdFx0XHRjb2xvclBpY2tlci5zZXRWYWx1ZShjdXJyZW50Q29sb3IpO1xyXG5cdFx0XHRcdFx0XHJcblx0XHRcdFx0XHQvLyBHZXQgdGhlIGNvbnRyb2wgZWxlbWVudCAtIGNvbG9yIHBpY2tlciBpcyBhZGRlZCB0byBpdFxyXG5cdFx0XHRcdFx0Y29uc3QgY29udHJvbEVsID0gc2V0dGluZy5jb250cm9sRWw7XHJcblx0XHRcdFx0XHRcclxuXHRcdFx0XHRcdC8vIFByZXZlbnQgY29sbGFwc2Ugb24gY29sb3IgcGlja2VyIGNsaWNrc1xyXG5cdFx0XHRcdFx0Y29udHJvbEVsLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKGUpID0+IGUuc3RvcFByb3BhZ2F0aW9uKCkpO1xyXG5cdFx0XHRcdFx0XHJcblx0XHRcdFx0XHQvLyBBZGQgZXZlbnQgaGFuZGxlciB0byB0aGUgYWN0dWFsIGNvbG9yIGlucHV0IGVsZW1lbnRcclxuXHRcdFx0XHRcdHNldFRpbWVvdXQoKCkgPT4ge1xyXG5cdFx0XHRcdFx0XHRjb25zdCBjb2xvcklucHV0ID0gY29udHJvbEVsLnF1ZXJ5U2VsZWN0b3IoJ2lucHV0W3R5cGU9XCJjb2xvclwiXScpIGFzIEhUTUxJbnB1dEVsZW1lbnQ7XHJcblx0XHRcdFx0XHRcdGlmIChjb2xvcklucHV0KSB7XHJcblx0XHRcdFx0XHRcdFx0Y29sb3JJbnB1dC5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIChlKSA9PiBlLnN0b3BQcm9wYWdhdGlvbigpKTtcclxuXHRcdFx0XHRcdFx0fVxyXG5cdFx0XHRcdFx0fSwgMCk7XHJcblx0XHRcdFx0XHRcclxuXHRcdFx0XHRcdC8vIEFkZCByZXNldCBidXR0b24gdG8gdGhlIGxlZnQgb2YgY29sb3IgcGlja2VyIGlmIGNvbG9yIGhhcyBiZWVuIHNldFxyXG5cdFx0XHRcdFx0Ly8gVXNlIHNldFRpbWVvdXQgdG8gZW5zdXJlIGNvbG9yIHBpY2tlciBpcyBhZGRlZCBmaXJzdCwgdGhlbiBpbnNlcnQgcmVzZXQgYnV0dG9uIGJlZm9yZSBpdFxyXG5cdFx0XHRcdFx0aWYgKGhhc0NvbG9yKSB7XHJcblx0XHRcdFx0XHRcdHNldFRpbWVvdXQoKCkgPT4ge1xyXG5cdFx0XHRcdFx0XHRcdC8vIEZpbmQgdGhlIGNvbG9yIHBpY2tlciBlbGVtZW50IChpdCdzIHR5cGljYWxseSB0aGUgbGFzdCBjaGlsZCBvciBoYXMgYSBzcGVjaWZpYyBjbGFzcylcclxuXHRcdFx0XHRcdFx0XHRjb25zdCBjb2xvclBpY2tlckVsID0gY29udHJvbEVsLnF1ZXJ5U2VsZWN0b3IoJy5jb2xvci1waWNrZXInKSB8fCBjb250cm9sRWwubGFzdEVsZW1lbnRDaGlsZDtcclxuXHRcdFx0XHRcdFx0XHRcclxuXHRcdFx0XHRcdFx0XHRjb25zdCByZXNldEJ1dHRvbiA9IGNvbnRyb2xFbC5jcmVhdGVFbCgnYnV0dG9uJywge1xyXG5cdFx0XHRcdFx0XHRcdFx0Y2xzOiAnY2xpY2thYmxlLWljb24gdWktdHdlYWtlci1jb2xvci1yZXNldCcsXHJcblx0XHRcdFx0XHRcdFx0XHRhdHRyOiB7ICdhcmlhLWxhYmVsJzogJ1Jlc2V0IHRvIGRlZmF1bHQgY29sb3InIH1cclxuXHRcdFx0XHRcdFx0XHR9KTtcclxuXHRcdFx0XHRcdFx0XHRzZXRJY29uKHJlc2V0QnV0dG9uLCAnbHVjaWRlLXJvdGF0ZS1jdycpO1xyXG5cdFx0XHRcdFx0XHRcdHNldENzc1Byb3BzKHJlc2V0QnV0dG9uLCB7IG1hcmdpblJpZ2h0OiAnMC41cmVtJyB9KTtcclxuXHRcdFx0XHRcdFx0XHRyZXNldEJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIChlKSA9PiB7XHJcblx0XHRcdFx0XHRcdFx0XHRlLnN0b3BQcm9wYWdhdGlvbigpO1xyXG5cdFx0XHRcdFx0XHRcdFx0ZS5zdG9wSW1tZWRpYXRlUHJvcGFnYXRpb24oKTtcclxuXHRcdFx0XHRcdFx0XHRcdGUucHJldmVudERlZmF1bHQoKTtcclxuXHRcdFx0XHRcdFx0XHRcdHZvaWQgKGFzeW5jICgpID0+IHtcclxuXHRcdFx0XHRcdFx0XHRcdFx0Ly8gUmVtb3ZlIGNvbG9yIGVudGlyZWx5XHJcblx0XHRcdFx0XHRcdFx0XHRcdHBhaXIuY29sb3IgPSB1bmRlZmluZWQ7XHJcblx0XHRcdFx0XHRcdFx0XHRcdFxyXG5cdFx0XHRcdFx0XHRcdFx0XHQvLyBVcGRhdGUgaWNvbiBwcmV2aWV3IHRvIHJlbW92ZSBjb2xvclxyXG5cdFx0XHRcdFx0XHRcdFx0XHRjb25zdCBpY29uQnV0dG9uID0gY29udGFpbmVyLnF1ZXJ5U2VsZWN0b3IoYFtkYXRhLWNvbW1hbmQtaWQ9XCIke3BhaXIuaWR9XCJdYCkgYXMgSFRNTEVsZW1lbnQ7XHJcblx0XHRcdFx0XHRcdFx0XHRcdGlmIChpY29uQnV0dG9uKSB7XHJcblx0XHRcdFx0XHRcdFx0XHRcdFx0aWNvbkJ1dHRvbi5zdHlsZS5yZW1vdmVQcm9wZXJ0eSgnY29sb3InKTtcclxuXHRcdFx0XHRcdFx0XHRcdFx0fVxyXG5cdFx0XHRcdFx0XHRcdFx0XHRcclxuXHRcdFx0XHRcdFx0XHRcdFx0YXdhaXQgdGhpcy5zYXZlU2V0dGluZ3MoKTtcclxuXHRcdFx0XHRcdFx0XHRcdFx0dGhpcy5wbHVnaW4udGFiQmFyTWFuYWdlcj8ucmVvcmRlcigpO1xyXG5cdFx0XHRcdFx0XHRcdFx0XHR0aGlzLnJlbmRlcihjb250YWluZXIpO1xyXG5cdFx0XHRcdFx0XHRcdFx0fSkoKTtcclxuXHRcdFx0XHRcdFx0XHR9KTtcclxuXHRcdFx0XHRcdFx0XHRcclxuXHRcdFx0XHRcdFx0XHQvLyBJbnNlcnQgcmVzZXQgYnV0dG9uIGJlZm9yZSBjb2xvciBwaWNrZXJcclxuXHRcdFx0XHRcdFx0XHRpZiAoY29sb3JQaWNrZXJFbCkge1xyXG5cdFx0XHRcdFx0XHRcdFx0Y29udHJvbEVsLmluc2VydEJlZm9yZShyZXNldEJ1dHRvbiwgY29sb3JQaWNrZXJFbCk7XHJcblx0XHRcdFx0XHRcdFx0fSBlbHNlIHtcclxuXHRcdFx0XHRcdFx0XHRcdC8vIEZhbGxiYWNrOiBpbnNlcnQgYXQgc3RhcnRcclxuXHRcdFx0XHRcdFx0XHRcdGNvbnRyb2xFbC5pbnNlcnRCZWZvcmUocmVzZXRCdXR0b24sIGNvbnRyb2xFbC5maXJzdENoaWxkKTtcclxuXHRcdFx0XHRcdFx0XHR9XHJcblx0XHRcdFx0XHRcdH0sIDApO1xyXG5cdFx0XHRcdFx0fVxyXG5cdFx0XHRcdFx0XHJcblx0XHRcdFx0XHRjb2xvclBpY2tlci5vbkNoYW5nZSgodmFsdWUpID0+IHtcclxuXHRcdFx0XHRcdFx0Ly8gSWYgc2V0IHRvIGJsYWNrICgjMDAwMDAwKSwgdHJlYXQgYXMgXCJubyBjdXN0b20gY29sb3JcIiBhbmQgcmVtb3ZlIGl0XHJcblx0XHRcdFx0XHRcdGlmICh2YWx1ZSA9PT0gJyMwMDAwMDAnKSB7XHJcblx0XHRcdFx0XHRcdFx0cGFpci5jb2xvciA9IHVuZGVmaW5lZDtcclxuXHRcdFx0XHRcdFx0fSBlbHNlIHtcclxuXHRcdFx0XHRcdFx0XHRwYWlyLmNvbG9yID0gdmFsdWU7XHJcblx0XHRcdFx0XHRcdH1cclxuXHRcdFx0XHRcdFx0XHJcblx0XHRcdFx0XHRcdC8vIFVwZGF0ZSBpY29uIHByZXZpZXcgY29sb3IgaW4gcmVhbC10aW1lXHJcblx0XHRcdFx0XHRcdGNvbnN0IGljb25CdXR0b24gPSBjb250YWluZXIucXVlcnlTZWxlY3RvcihgW2RhdGEtY29tbWFuZC1pZD1cIiR7cGFpci5pZH1cIl1gKSBhcyBIVE1MRWxlbWVudDtcclxuXHRcdFx0XHRcdFx0aWYgKGljb25CdXR0b24pIHtcclxuXHRcdFx0XHRcdFx0XHRpZiAocGFpci5jb2xvciAmJiBwYWlyLmNvbG9yICE9PSAnIzAwMDAwMCcpIHtcclxuXHRcdFx0XHRcdFx0XHRcdHNldENzc1Byb3BzKGljb25CdXR0b24sIHsgY29sb3I6IHBhaXIuY29sb3IgfSk7XHJcblx0XHRcdFx0XHRcdFx0fSBlbHNlIHtcclxuXHRcdFx0XHRcdFx0XHRcdGljb25CdXR0b24uc3R5bGUucmVtb3ZlUHJvcGVydHkoJ2NvbG9yJyk7XHJcblx0XHRcdFx0XHRcdFx0fVxyXG5cdFx0XHRcdFx0XHR9XHJcblx0XHRcdFx0XHRcdFxyXG5cdFx0XHRcdFx0XHQvLyBTYXZlIGFuZCByZW9yZGVyLCB0aGVuIHJlLXJlbmRlciB0byBzaG93L2hpZGUgcmVzZXQgYnV0dG9uXHJcblx0XHRcdFx0XHRcdHZvaWQgKGFzeW5jICgpID0+IHtcclxuXHRcdFx0XHRcdFx0XHRhd2FpdCB0aGlzLnNhdmVTZXR0aW5ncygpO1xyXG5cdFx0XHRcdFx0XHRcdHRoaXMucGx1Z2luLnRhYkJhck1hbmFnZXI/LnJlb3JkZXIoKTtcclxuXHRcdFx0XHRcdFx0XHR0aGlzLnJlbmRlcihjb250YWluZXIpO1xyXG5cdFx0XHRcdFx0XHR9KSgpO1xyXG5cdFx0XHRcdFx0fSk7XHJcblx0XHRcdFx0fSk7XHJcblx0XHR9KTtcclxuXHJcblx0XHQvLyBUb2dnbGUgaWNvbiBjb25maWd1cmF0aW9uXHJcblx0XHRncm91cC5hZGRTZXR0aW5nKChzZXR0aW5nKTogdm9pZCA9PiB7XHJcblx0XHRcdG90aGVyU2V0dGluZ3MucHVzaChzZXR0aW5nLnNldHRpbmdFbCk7XHJcblx0XHRcdGNvbnN0IGhhc1RvZ2dsZUljb24gPSBwYWlyLnRvZ2dsZUljb24gIT09IHVuZGVmaW5lZDtcclxuXHRcdFx0XHJcblx0XHRcdHNldHRpbmdcclxuXHRcdFx0XHQuc2V0TmFtZSgnVG9nZ2xlIGljb24nKVxyXG5cdFx0XHRcdC5zZXREZXNjKCdJY29uIHRvIHNob3cgd2hlbiBjb21tYW5kIGlzIHRvZ2dsZWQgb24gKGxlYXZlIGVtcHR5IHRvIGRpc2FibGUgdG9nZ2xlKS4gQ29tbWFuZHMgd2l0aCBjaGVjayBjYWxsYmFjayB3b3JrIGF1dG9tYXRpY2FsbHkuIFNlZSByZWFkbWUgZm9yIHBsdWdpbiBkZXZlbG9wZXIgY29tcGF0aWJpbGl0eSBub3Rlcy4nKVxyXG5cdFx0XHRcdC5zZXRUb29sdGlwKCdGb3IgcGx1Z2luIGRldmVsb3BlcnM6IENvbW1hbmRzIHdpdGggY2hlY2tDYWxsYmFjayB3b3JrIGF1dG9tYXRpY2FsbHkuIFNlZSBodHRwczovL2dpdGh1Yi5jb20vZGF2aWR2a2ltYmFsbC9vYnNpZGlhbi11aS10d2Vha2VyI3RvZ2dsZS1pY29uLWZlYXR1cmUtY29tcGF0aWJpbGl0eSBmb3IgZGV0YWlscy4nKVxyXG5cdFx0XHRcdC5hZGRCdXR0b24oKGJ1dHRvbikgPT4ge1xyXG5cdFx0XHRcdFx0Y29uc3QgY3VycmVudFRvZ2dsZUljb24gPSBwYWlyLnRvZ2dsZUljb24gfHwgJ05vbmUnO1xyXG5cdFx0XHRcdFx0YnV0dG9uLnNldEJ1dHRvblRleHQoY3VycmVudFRvZ2dsZUljb24gPT09ICdOb25lJyA/ICdTZXQgdG9nZ2xlIGljb24uLi4nIDogY3VycmVudFRvZ2dsZUljb24pLm9uQ2xpY2soKCkgPT4ge1xyXG5cdFx0XHRcdFx0XHRjb25zdCBtb2RhbCA9IG5ldyBJY29uUGlja2VyTW9kYWwodGhpcy5hcHAsIChpY29uSWQpID0+IHtcclxuXHRcdFx0XHRcdFx0XHR2b2lkIChhc3luYyAoKSA9PiB7XHJcblx0XHRcdFx0XHRcdFx0XHRpZiAoaWNvbklkKSB7XHJcblx0XHRcdFx0XHRcdFx0XHRcdHBhaXIudG9nZ2xlSWNvbiA9IGljb25JZDtcclxuXHRcdFx0XHRcdFx0XHRcdH0gZWxzZSB7XHJcblx0XHRcdFx0XHRcdFx0XHRcdHBhaXIudG9nZ2xlSWNvbiA9IHVuZGVmaW5lZDtcclxuXHRcdFx0XHRcdFx0XHRcdH1cclxuXHRcdFx0XHRcdFx0XHRcdGF3YWl0IHRoaXMuc2F2ZVNldHRpbmdzKCk7XHJcblx0XHRcdFx0XHRcdFx0XHR0aGlzLnBsdWdpbi50YWJCYXJNYW5hZ2VyPy5yZW9yZGVyKCk7XHJcblx0XHRcdFx0XHRcdFx0XHR0aGlzLnJlbmRlcihjb250YWluZXIpO1xyXG5cdFx0XHRcdFx0XHRcdH0pKCk7XHJcblx0XHRcdFx0XHRcdH0pO1xyXG5cdFx0XHRcdFx0XHRtb2RhbC5vcGVuKCk7XHJcblx0XHRcdFx0XHR9KTtcclxuXHRcdFx0XHRcdC8vIFByZXZlbnQgY29sbGFwc2Ugb24gY2xpY2tcclxuXHRcdFx0XHRcdGJ1dHRvbi5idXR0b25FbC5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIChlKSA9PiBlLnN0b3BQcm9wYWdhdGlvbigpKTtcclxuXHRcdFx0XHRcdFxyXG5cdFx0XHRcdFx0Ly8gQWRkIHJlc2V0IGJ1dHRvbiBpZiB0b2dnbGUgaWNvbiBpcyBzZXRcclxuXHRcdFx0XHRcdGlmIChoYXNUb2dnbGVJY29uKSB7XHJcblx0XHRcdFx0XHRcdHNldFRpbWVvdXQoKCkgPT4ge1xyXG5cdFx0XHRcdFx0XHRcdGNvbnN0IGNvbnRyb2xFbCA9IHNldHRpbmcuY29udHJvbEVsO1xyXG5cdFx0XHRcdFx0XHRcdGNvbnN0IGJ1dHRvbkVsID0gY29udHJvbEVsLnF1ZXJ5U2VsZWN0b3IoJ2J1dHRvbicpIHx8IGNvbnRyb2xFbC5sYXN0RWxlbWVudENoaWxkO1xyXG5cdFx0XHRcdFx0XHRcdFxyXG5cdFx0XHRcdFx0XHRcdGNvbnN0IHJlc2V0QnV0dG9uID0gY29udHJvbEVsLmNyZWF0ZUVsKCdidXR0b24nLCB7XHJcblx0XHRcdFx0XHRcdFx0XHRjbHM6ICdjbGlja2FibGUtaWNvbiB1aS10d2Vha2VyLXRvZ2dsZS1pY29uLXJlc2V0JyxcclxuXHRcdFx0XHRcdFx0XHRcdGF0dHI6IHsgJ2FyaWEtbGFiZWwnOiAnUmVzZXQgdG9nZ2xlIGljb24nIH1cclxuXHRcdFx0XHRcdFx0XHR9KTtcclxuXHRcdFx0XHRcdFx0XHRzZXRJY29uKHJlc2V0QnV0dG9uLCAnbHVjaWRlLXJvdGF0ZS1jdycpO1xyXG5cdFx0XHRcdFx0XHRcdHNldENzc1Byb3BzKHJlc2V0QnV0dG9uLCB7IG1hcmdpblJpZ2h0OiAnMC41cmVtJyB9KTtcclxuXHRcdFx0XHRcdFx0XHRyZXNldEJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIChlKSA9PiB7XHJcblx0XHRcdFx0XHRcdFx0XHRlLnN0b3BQcm9wYWdhdGlvbigpO1xyXG5cdFx0XHRcdFx0XHRcdFx0ZS5zdG9wSW1tZWRpYXRlUHJvcGFnYXRpb24oKTtcclxuXHRcdFx0XHRcdFx0XHRcdGUucHJldmVudERlZmF1bHQoKTtcclxuXHRcdFx0XHRcdFx0XHRcdC8vIFByZXNlcnZlIHNjcm9sbCBwb3NpdGlvbiB0byBwcmV2ZW50IGp1bXBpbmdcclxuXHRcdFx0XHRcdFx0XHRcdGNvbnN0IHNjcm9sbENvbnRhaW5lciA9IGNvbnRhaW5lci5jbG9zZXN0KCcudmVydGljYWwtdGFiLWNvbnRlbnQnKSB8fCBcclxuXHRcdFx0XHRcdFx0XHRcdFx0Y29udGFpbmVyLmNsb3Nlc3QoJy5zZXR0aW5ncy1jb250ZW50JykgfHwgXHJcblx0XHRcdFx0XHRcdFx0XHRcdGNvbnRhaW5lci5jbG9zZXN0KCcudmVydGljYWwtdGFiLWNvbnRlbnQtY29udGFpbmVyJykgfHxcclxuXHRcdFx0XHRcdFx0XHRcdFx0Y29udGFpbmVyO1xyXG5cdFx0XHRcdFx0XHRcdFx0Y29uc3Qgc2Nyb2xsUG9zID0gc2Nyb2xsQ29udGFpbmVyLnNjcm9sbFRvcDtcclxuXHRcdFx0XHRcdFx0XHRcdHZvaWQgKGFzeW5jICgpID0+IHtcclxuXHRcdFx0XHRcdFx0XHRcdFx0Ly8gUmVtb3ZlIHRvZ2dsZSBpY29uXHJcblx0XHRcdFx0XHRcdFx0XHRcdHBhaXIudG9nZ2xlSWNvbiA9IHVuZGVmaW5lZDtcclxuXHRcdFx0XHRcdFx0XHRcdFx0XHJcblx0XHRcdFx0XHRcdFx0XHRcdGF3YWl0IHRoaXMuc2F2ZVNldHRpbmdzKCk7XHJcblx0XHRcdFx0XHRcdFx0XHRcdHRoaXMucGx1Z2luLnRhYkJhck1hbmFnZXI/LnJlb3JkZXIoKTtcclxuXHRcdFx0XHRcdFx0XHRcdFx0dGhpcy5yZW5kZXIoY29udGFpbmVyKTtcclxuXHRcdFx0XHRcdFx0XHRcdFx0Ly8gUmVzdG9yZSBzY3JvbGwgcG9zaXRpb24gYWZ0ZXIgcmVuZGVyIHdpdGggbXVsdGlwbGUgYXR0ZW1wdHNcclxuXHRcdFx0XHRcdFx0XHRcdFx0cmVxdWVzdEFuaW1hdGlvbkZyYW1lKCgpID0+IHtcclxuXHRcdFx0XHRcdFx0XHRcdFx0XHRzY3JvbGxDb250YWluZXIuc2Nyb2xsVG9wID0gc2Nyb2xsUG9zO1xyXG5cdFx0XHRcdFx0XHRcdFx0XHRcdC8vIEFsc28gdHJ5IGFmdGVyIGEgc2hvcnQgZGVsYXkgaW4gY2FzZSBET00gaXNuJ3QgcmVhZHlcclxuXHRcdFx0XHRcdFx0XHRcdFx0XHRzZXRUaW1lb3V0KCgpID0+IHtcclxuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdHNjcm9sbENvbnRhaW5lci5zY3JvbGxUb3AgPSBzY3JvbGxQb3M7XHJcblx0XHRcdFx0XHRcdFx0XHRcdFx0fSwgMCk7XHJcblx0XHRcdFx0XHRcdFx0XHRcdH0pO1xyXG5cdFx0XHRcdFx0XHRcdFx0fSkoKTtcclxuXHRcdFx0XHRcdFx0XHR9KTtcclxuXHRcdFx0XHRcdFx0XHRcclxuXHRcdFx0XHRcdFx0XHQvLyBJbnNlcnQgcmVzZXQgYnV0dG9uIGJlZm9yZSB0aGUgbWFpbiBidXR0b25cclxuXHRcdFx0XHRcdFx0XHRpZiAoYnV0dG9uRWwpIHtcclxuXHRcdFx0XHRcdFx0XHRcdGNvbnRyb2xFbC5pbnNlcnRCZWZvcmUocmVzZXRCdXR0b24sIGJ1dHRvbkVsKTtcclxuXHRcdFx0XHRcdFx0XHR9IGVsc2Uge1xyXG5cdFx0XHRcdFx0XHRcdFx0Y29udHJvbEVsLmluc2VydEJlZm9yZShyZXNldEJ1dHRvbiwgY29udHJvbEVsLmZpcnN0Q2hpbGQpO1xyXG5cdFx0XHRcdFx0XHRcdH1cclxuXHRcdFx0XHRcdFx0fSwgMCk7XHJcblx0XHRcdFx0XHR9XHJcblx0XHRcdFx0fSk7XHJcblx0XHR9KTtcclxuXHJcblx0XHQvLyBTaG93IG9ubHkgb24gdGhlc2UgZmlsZSB0eXBlc1xyXG5cdFx0Z3JvdXAuYWRkU2V0dGluZygoc2V0dGluZyk6IHZvaWQgPT4ge1xyXG5cdFx0XHRvdGhlclNldHRpbmdzLnB1c2goc2V0dGluZy5zZXR0aW5nRWwpO1xyXG5cdFx0XHRzZXR0aW5nXHJcblx0XHRcdFx0LnNldE5hbWUoJ1Nob3cgb25seSBvbiB0aGVzZSBmaWxlIHR5cGVzJylcclxuXHRcdFx0XHQuc2V0RGVzYygnU2hvdyBidXR0b24gb25seSBvbiBzcGVjaWZpZWQgZmlsZSB0eXBlcyBvciB2aWV3cy4gRW50ZXIgY29tbWEtc2VwYXJhdGVkIGZpbGUgZXh0ZW5zaW9ucyAobGlrZSBcIm1kLG1keFwiKSBvciB2aWV3IHR5cGVzIGZvciB2aWV3cyB3aXRob3V0IGZpbGVzIChsaWtlIFwie3tncmFwaH19XCIpLiBMZWF2ZSBlbXB0eSB0byBzaG93IG9uIGFsbC4gVXNlIHt7Z3JhcGh9fSBmb3IgZ3JhcGggdmlldyBhbmQge3tlbXB0eX19IGZvciBibGFuay9uZXcgdGFicy4nKVxyXG5cdFx0XHRcdC5hZGRUZXh0KCh0ZXh0KSA9PiB7XHJcblx0XHRcdFx0XHR0ZXh0LnNldFBsYWNlaG9sZGVyKCdtZCwgbWR4Jyk7XHJcblx0XHRcdFx0XHR0ZXh0LnNldFZhbHVlKHBhaXIuc2hvd09uRmlsZVR5cGVzID8/ICcnKTtcclxuXHRcdFx0XHRcdHRleHQub25DaGFuZ2UoKHZhbHVlKSA9PiB7XHJcblx0XHRcdFx0XHRcdHZvaWQgKGFzeW5jICgpID0+IHtcclxuXHRcdFx0XHRcdFx0XHRwYWlyLnNob3dPbkZpbGVUeXBlcyA9IHZhbHVlLnRyaW0oKSB8fCB1bmRlZmluZWQ7XHJcblx0XHRcdFx0XHRcdFx0YXdhaXQgdGhpcy5zYXZlU2V0dGluZ3MoKTtcclxuXHRcdFx0XHRcdFx0XHR0aGlzLnBsdWdpbi50YWJCYXJNYW5hZ2VyPy5yZW9yZGVyKCk7XHJcblx0XHRcdFx0XHRcdH0pKCk7XHJcblx0XHRcdFx0XHR9KTtcclxuXHRcdFx0XHRcdC8vIFByZXZlbnQgY29sbGFwc2Ugb24gY2xpY2svZm9jdXNcclxuXHRcdFx0XHRcdHRleHQuaW5wdXRFbC5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIChlKSA9PiBlLnN0b3BQcm9wYWdhdGlvbigpKTtcclxuXHRcdFx0XHRcdHRleHQuaW5wdXRFbC5hZGRFdmVudExpc3RlbmVyKCdmb2N1cycsIChlKSA9PiBlLnN0b3BQcm9wYWdhdGlvbigpKTtcclxuXHRcdFx0XHR9KTtcclxuXHRcdH0pO1xyXG5cclxuXHRcdC8vIE5ldmVyIHNob3cgb24gdGhlc2UgZmlsZSB0eXBlc1xyXG5cdFx0Z3JvdXAuYWRkU2V0dGluZygoc2V0dGluZyk6IHZvaWQgPT4ge1xyXG5cdFx0XHRvdGhlclNldHRpbmdzLnB1c2goc2V0dGluZy5zZXR0aW5nRWwpO1xyXG5cdFx0XHRzZXR0aW5nXHJcblx0XHRcdFx0LnNldE5hbWUoJ05ldmVyIHNob3cgb24gdGhlc2UgZmlsZSB0eXBlcycpXHJcblx0XHRcdFx0LnNldERlc2MoJ0hpZGUgYnV0dG9uIG9uIHNwZWNpZmllZCBmaWxlIHR5cGVzIG9yIHZpZXdzLiBFbnRlciBjb21tYS1zZXBhcmF0ZWQgZmlsZSBleHRlbnNpb25zIChsaWtlIFwianBnLHBuZ1wiKSBvciB2aWV3IHR5cGVzIGZvciB2aWV3cyB3aXRob3V0IGZpbGVzIChsaWtlIFwie3tncmFwaH19XCIpLiBMZWF2ZSBlbXB0eSB0byBhbGxvdyBhbGwuIFVzZSB7e2dyYXBofX0gZm9yIGdyYXBoIHZpZXcgYW5kIHt7ZW1wdHl9fSBmb3IgYmxhbmsvbmV3IHRhYnMuJylcclxuXHRcdFx0XHQuYWRkVGV4dCgodGV4dCkgPT4ge1xyXG5cdFx0XHRcdFx0dGV4dC5zZXRQbGFjZWhvbGRlcigne3tncmFwaH19LHt7ZW1wdHl9fScpO1xyXG5cdFx0XHRcdFx0dGV4dC5zZXRWYWx1ZShwYWlyLmhpZGVPbkZpbGVUeXBlcyA/PyAnJyk7XHJcblx0XHRcdFx0XHR0ZXh0Lm9uQ2hhbmdlKCh2YWx1ZSkgPT4ge1xyXG5cdFx0XHRcdFx0XHR2b2lkIChhc3luYyAoKSA9PiB7XHJcblx0XHRcdFx0XHRcdFx0cGFpci5oaWRlT25GaWxlVHlwZXMgPSB2YWx1ZS50cmltKCkgfHwgdW5kZWZpbmVkO1xyXG5cdFx0XHRcdFx0XHRcdGF3YWl0IHRoaXMuc2F2ZVNldHRpbmdzKCk7XHJcblx0XHRcdFx0XHRcdFx0dGhpcy5wbHVnaW4udGFiQmFyTWFuYWdlcj8ucmVvcmRlcigpO1xyXG5cdFx0XHRcdFx0XHR9KSgpO1xyXG5cdFx0XHRcdFx0fSk7XHJcblx0XHRcdFx0XHQvLyBQcmV2ZW50IGNvbGxhcHNlIG9uIGNsaWNrL2ZvY3VzXHJcblx0XHRcdFx0XHR0ZXh0LmlucHV0RWwuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoZSkgPT4gZS5zdG9wUHJvcGFnYXRpb24oKSk7XHJcblx0XHRcdFx0XHR0ZXh0LmlucHV0RWwuYWRkRXZlbnRMaXN0ZW5lcignZm9jdXMnLCAoZSkgPT4gZS5zdG9wUHJvcGFnYXRpb24oKSk7XHJcblx0XHRcdFx0fSk7XHJcblx0XHR9KTtcclxuXHJcblx0XHRcdC8vIEFmdGVyIGFsbCBzZXR0aW5ncyBhcmUgYWRkZWQsIGFwcGx5IGNvbGxhcHNlIHN0YXRlIGZyb20gTWFwXHJcblx0XHRzZXRUaW1lb3V0KCgpID0+IHtcclxuXHRcdFx0Y29uc3Qgc2F2ZWRFeHBhbmRlZCA9IHRoaXMuZXhwYW5kZWRTdGF0ZXMuZ2V0KHBhaXIuaWQpID8/IGZhbHNlO1xyXG5cdFx0XHRvdGhlclNldHRpbmdzLmZvckVhY2goc2V0dGluZ0VsID0+IHtcclxuXHRcdFx0XHRzZXRDc3NQcm9wcyhzZXR0aW5nRWwsIHsgZGlzcGxheTogc2F2ZWRFeHBhbmRlZCA/ICcnIDogJ25vbmUnIH0pO1xyXG5cdFx0XHR9KTtcclxuXHRcdH0sIDApO1xyXG5cdH1cclxufVxyXG4iLCAiLyoqXHJcbiAqIE5hbWUgUGlja2VyIE1vZGFsXHJcbiAqIFNpbXBsZSBtb2RhbCBmb3IgZW50ZXJpbmcgYSBjdXN0b20gbmFtZVxyXG4gKi9cclxuXHJcbmltcG9ydCB7IEFwcCwgTW9kYWwsIFRleHRDb21wb25lbnQgfSBmcm9tICdvYnNpZGlhbic7XHJcblxyXG5leHBvcnQgY2xhc3MgTmFtZVBpY2tlck1vZGFsIGV4dGVuZHMgTW9kYWwge1xyXG5cdHByaXZhdGUgb25TdWJtaXQ6IChuYW1lOiBzdHJpbmcpID0+IHZvaWQ7XHJcblx0cHJpdmF0ZSBkZWZhdWx0TmFtZTogc3RyaW5nO1xyXG5cclxuXHRjb25zdHJ1Y3RvcihhcHA6IEFwcCwgZGVmYXVsdE5hbWU6IHN0cmluZywgb25TdWJtaXQ6IChuYW1lOiBzdHJpbmcpID0+IHZvaWQpIHtcclxuXHRcdHN1cGVyKGFwcCk7XHJcblx0XHR0aGlzLmRlZmF1bHROYW1lID0gZGVmYXVsdE5hbWU7XHJcblx0XHR0aGlzLm9uU3VibWl0ID0gb25TdWJtaXQ7XHJcblx0fVxyXG5cclxuXHRvbk9wZW4oKTogdm9pZCB7XHJcblx0XHRjb25zdCB7IGNvbnRlbnRFbCB9ID0gdGhpcztcclxuXHRcdGNvbnRlbnRFbC5lbXB0eSgpO1xyXG5cclxuXHRcdGNvbnRlbnRFbC5jcmVhdGVFbCgnaDInLCB7IHRleHQ6ICdFbnRlciBuYW1lJyB9KTtcclxuXHJcblx0XHRjb25zdCBpbnB1dENvbnRhaW5lciA9IGNvbnRlbnRFbC5jcmVhdGVEaXYoKTtcclxuXHRcdGNvbnN0IGlucHV0ID0gbmV3IFRleHRDb21wb25lbnQoaW5wdXRDb250YWluZXIpO1xyXG5cdFx0aW5wdXQuc2V0VmFsdWUodGhpcy5kZWZhdWx0TmFtZSk7XHJcblx0XHRpbnB1dC5zZXRQbGFjZWhvbGRlcignRW50ZXIgY3VzdG9tIG5hbWUuLi4nKTtcclxuXHRcdGlucHV0LmlucHV0RWwuYWRkQ2xhc3MoJ3VpLXR3ZWFrZXItbmFtZS1pbnB1dCcpO1xyXG5cdFx0aW5wdXQuaW5wdXRFbC5zZWxlY3QoKTtcclxuXHJcblx0XHRjb25zdCBidXR0b25Db250YWluZXIgPSBjb250ZW50RWwuY3JlYXRlRGl2KHsgY2xzOiAnbW9kYWwtYnV0dG9uLWNvbnRhaW5lcicgfSk7XHJcblx0XHRjb25zdCBzdWJtaXRCdXR0b24gPSBidXR0b25Db250YWluZXIuY3JlYXRlRWwoJ2J1dHRvbicsIHsgdGV4dDogJ09LJywgY2xzOiAnbW9kLWN0YScgfSk7XHJcblx0XHRjb25zdCBjYW5jZWxCdXR0b24gPSBidXR0b25Db250YWluZXIuY3JlYXRlRWwoJ2J1dHRvbicsIHsgdGV4dDogJ0NhbmNlbCcgfSk7XHJcblxyXG5cdFx0Y29uc3QgaGFuZGxlU3VibWl0ID0gKCk6IHZvaWQgPT4ge1xyXG5cdFx0XHRjb25zdCB2YWx1ZSA9IGlucHV0LmdldFZhbHVlKCkudHJpbSgpO1xyXG5cdFx0XHRpZiAodmFsdWUpIHtcclxuXHRcdFx0XHR0aGlzLm9uU3VibWl0KHZhbHVlKTtcclxuXHRcdFx0XHR0aGlzLmNsb3NlKCk7XHJcblx0XHRcdH1cclxuXHRcdH07XHJcblxyXG5cdFx0c3VibWl0QnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgaGFuZGxlU3VibWl0KTtcclxuXHRcdGNhbmNlbEJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHRoaXMuY2xvc2UoKSk7XHJcblx0XHRpbnB1dC5pbnB1dEVsLmFkZEV2ZW50TGlzdGVuZXIoJ2tleWRvd24nLCAoZXZ0KSA9PiB7XHJcblx0XHRcdGlmIChldnQua2V5ID09PSAnRW50ZXInKSB7XHJcblx0XHRcdFx0ZXZ0LnByZXZlbnREZWZhdWx0KCk7XHJcblx0XHRcdFx0aGFuZGxlU3VibWl0KCk7XHJcblx0XHRcdH1cclxuXHRcdFx0aWYgKGV2dC5rZXkgPT09ICdFc2NhcGUnKSB7XHJcblx0XHRcdFx0ZXZ0LnByZXZlbnREZWZhdWx0KCk7XHJcblx0XHRcdFx0dGhpcy5jbG9zZSgpO1xyXG5cdFx0XHR9XHJcblx0XHR9KTtcclxuXHR9XHJcblxyXG5cdG9uQ2xvc2UoKTogdm9pZCB7XHJcblx0XHRjb25zdCB7IGNvbnRlbnRFbCB9ID0gdGhpcztcclxuXHRcdGNvbnRlbnRFbC5lbXB0eSgpO1xyXG5cdH1cclxufVxyXG4iLCAiLyoqXHJcbiAqIEhlbHBlciBmdW5jdGlvbiB0byBjaG9vc2UgYSBuZXcgY29tbWFuZCAoc2ltaWxhciB0byBDb21tYW5kZXIncyBjaG9vc2VOZXdDb21tYW5kKVxyXG4gKi9cclxuXHJcbmltcG9ydCB7IENvbW1hbmQgfSBmcm9tICdvYnNpZGlhbic7XHJcbmltcG9ydCBVSVR3ZWFrZXJQbHVnaW4gZnJvbSAnLi4vbWFpbic7XHJcbmltcG9ydCB7IENvbW1hbmRJY29uUGFpciB9IGZyb20gJy4uL3R5cGVzJztcclxuaW1wb3J0IHsgQ29tbWFuZFBpY2tlck1vZGFsIH0gZnJvbSAnLi4vbW9kYWxzL0NvbW1hbmRQaWNrZXJNb2RhbCc7XHJcbmltcG9ydCB7IEljb25QaWNrZXJNb2RhbCB9IGZyb20gJy4uL21vZGFscy9JY29uUGlja2VyTW9kYWwnO1xyXG5pbXBvcnQgeyBOYW1lUGlja2VyTW9kYWwgfSBmcm9tICcuLi9tb2RhbHMvTmFtZVBpY2tlck1vZGFsJztcclxuXHJcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBjaG9vc2VOZXdDb21tYW5kKHBsdWdpbjogVUlUd2Vha2VyUGx1Z2luKTogUHJvbWlzZTxDb21tYW5kSWNvblBhaXI+IHtcclxuXHRyZXR1cm4gbmV3IFByb21pc2UoKHJlc29sdmUsIHJlamVjdCkgPT4ge1xyXG5cdFx0bGV0IGNvbW1hbmRTZWxlY3RlZCA9IGZhbHNlO1xyXG5cdFx0bGV0IGljb25TZWxlY3RlZCA9IGZhbHNlO1xyXG5cdFx0XHJcblx0XHQvLyBTdGVwIDE6IENob29zZSBjb21tYW5kXHJcblx0XHRjb25zdCBjb21tYW5kTW9kYWwgPSBuZXcgQ29tbWFuZFBpY2tlck1vZGFsKHBsdWdpbi5hcHAsIChjb21tYW5kSWQpID0+IHtcclxuXHRcdFx0Y29tbWFuZFNlbGVjdGVkID0gdHJ1ZTtcclxuXHRcdFx0XHJcblx0XHRcdC8vIEdldCBjb21tYW5kIHRvIGNoZWNrIGlmIGl0IGhhcyBhbiBpY29uXHJcblx0XHRcdGNvbnN0IGNvbW1hbmRzID0gKHBsdWdpbi5hcHAgYXMgeyBjb21tYW5kcz86IHsgY29tbWFuZHM/OiB7IFtpZDogc3RyaW5nXTogQ29tbWFuZCB9IH0gfSkuY29tbWFuZHM7XHJcblx0XHRcdGNvbnN0IGNvbW1hbmQgPSBjb21tYW5kcz8uY29tbWFuZHM/Lltjb21tYW5kSWRdO1xyXG5cdFx0XHRcclxuXHRcdFx0Ly8gQ2xvc2UgY29tbWFuZCBtb2RhbCBmaXJzdFxyXG5cdFx0XHRzZXRUaW1lb3V0KCgpID0+IHtcclxuXHRcdFx0XHRjb21tYW5kTW9kYWwuY2xvc2UoKTtcclxuXHRcdFx0fSwgMCk7XHJcblx0XHRcdFxyXG5cdFx0XHQvLyBBbHdheXMgc2hvdyBpY29uIHBpY2tlciAoZXZlbiBpZiBjb21tYW5kIGhhcyBhbiBpY29uLCBsZXQgdXNlciBjaG9vc2UpXHJcblx0XHRcdGNvbnN0IGRpc3BsYXlOYW1lID0gY29tbWFuZD8ubmFtZSB8fCAnQ3VzdG9tIENvbW1hbmQnO1xyXG5cdFx0XHRjb25zdCBpY29uTW9kYWwgPSBuZXcgSWNvblBpY2tlck1vZGFsKHBsdWdpbi5hcHAsIChpY29uSWQpID0+IHtcclxuXHRcdFx0XHRpY29uU2VsZWN0ZWQgPSB0cnVlO1xyXG5cdFx0XHRcdGljb25Nb2RhbC5jbG9zZSgpO1xyXG5cdFx0XHRcdFxyXG5cdFx0XHRcdC8vIFN0ZXAgMzogQ2hvb3NlIGN1c3RvbSBuYW1lXHJcblx0XHRcdFx0c2V0VGltZW91dCgoKSA9PiB7XHJcblx0XHRcdFx0XHRsZXQgbmFtZVNlbGVjdGVkID0gZmFsc2U7XHJcblx0XHRcdFx0XHRjb25zdCBuYW1lTW9kYWwgPSBuZXcgTmFtZVBpY2tlck1vZGFsKHBsdWdpbi5hcHAsIGRpc3BsYXlOYW1lLCAoY3VzdG9tTmFtZSkgPT4ge1xyXG5cdFx0XHRcdFx0XHRuYW1lU2VsZWN0ZWQgPSB0cnVlO1xyXG5cdFx0XHRcdFx0XHRuYW1lTW9kYWwuY2xvc2UoKTtcclxuXHRcdFx0XHRcdFx0XHJcblx0XHRcdFx0XHRcdHJlc29sdmUoe1xyXG5cdFx0XHRcdFx0XHRcdGlkOiBjb21tYW5kSWQsXHJcblx0XHRcdFx0XHRcdFx0aWNvbjogaWNvbklkLFxyXG5cdFx0XHRcdFx0XHRcdG5hbWU6IGN1c3RvbU5hbWUsXHJcblx0XHRcdFx0XHRcdFx0ZGlzcGxheU5hbWU6IGRpc3BsYXlOYW1lLFxyXG5cdFx0XHRcdFx0XHRcdG1vZGU6ICdhbnknLFxyXG5cdFx0XHRcdFx0XHR9KTtcclxuXHRcdFx0XHRcdH0pO1xyXG5cdFx0XHRcdFx0XHJcblx0XHRcdFx0XHRuYW1lTW9kYWwub25DbG9zZSA9ICgpID0+IHtcclxuXHRcdFx0XHRcdFx0c2V0VGltZW91dCgoKSA9PiB7XHJcblx0XHRcdFx0XHRcdFx0aWYgKCFuYW1lU2VsZWN0ZWQgJiYgaWNvblNlbGVjdGVkICYmIGNvbW1hbmRTZWxlY3RlZCkge1xyXG5cdFx0XHRcdFx0XHRcdFx0cmVqZWN0KG5ldyBFcnJvcignTm8gbmFtZSBzZWxlY3RlZCcpKTtcclxuXHRcdFx0XHRcdFx0XHR9XHJcblx0XHRcdFx0XHRcdH0sIDApO1xyXG5cdFx0XHRcdFx0fTtcclxuXHRcdFx0XHRcdFxyXG5cdFx0XHRcdFx0bmFtZU1vZGFsLm9wZW4oKTtcclxuXHRcdFx0XHR9LCAxMDApO1xyXG5cdFx0XHR9KTtcclxuXHRcdFx0XHJcblx0XHRcdGljb25Nb2RhbC5vbkNsb3NlID0gKCkgPT4ge1xyXG5cdFx0XHRcdC8vIFVzZSBzZXRUaW1lb3V0IHRvIGFsbG93IG9uU2VsZWN0IHRvIHNldCBpY29uU2VsZWN0ZWQgZmlyc3RcclxuXHRcdFx0XHRzZXRUaW1lb3V0KCgpID0+IHtcclxuXHRcdFx0XHRcdGlmICghaWNvblNlbGVjdGVkICYmIGNvbW1hbmRTZWxlY3RlZCkge1xyXG5cdFx0XHRcdFx0XHRyZWplY3QobmV3IEVycm9yKCdObyBpY29uIHNlbGVjdGVkJykpO1xyXG5cdFx0XHRcdFx0fVxyXG5cdFx0XHRcdH0sIDApO1xyXG5cdFx0XHR9O1xyXG5cdFx0XHRcclxuXHRcdFx0c2V0VGltZW91dCgoKSA9PiB7XHJcblx0XHRcdFx0aWNvbk1vZGFsLm9wZW4oKTtcclxuXHRcdFx0fSwgMTAwKTtcclxuXHRcdH0pO1xyXG5cdFx0XHJcblx0XHRjb21tYW5kTW9kYWwub25DbG9zZSA9ICgpID0+IHtcclxuXHRcdFx0Ly8gVXNlIHNldFRpbWVvdXQgdG8gYWxsb3cgb25DaG9vc2VJdGVtIHRvIHNldCBjb21tYW5kU2VsZWN0ZWQgZmlyc3RcclxuXHRcdFx0c2V0VGltZW91dCgoKSA9PiB7XHJcblx0XHRcdFx0aWYgKCFjb21tYW5kU2VsZWN0ZWQpIHtcclxuXHRcdFx0XHRcdHJlamVjdChuZXcgRXJyb3IoJ05vIGNvbW1hbmQgc2VsZWN0ZWQnKSk7XHJcblx0XHRcdFx0fVxyXG5cdFx0XHR9LCAwKTtcclxuXHRcdH07XHJcblx0XHRcclxuXHRcdGNvbW1hbmRNb2RhbC5vcGVuKCk7XHJcblx0fSk7XHJcbn1cclxuIiwgIi8qKlxyXG4gKiBTdGF0dXMgQmFyIFRhYiAtIFVuaWZpZWQgbGlzdCBvZiBleGlzdGluZyArIGN1c3RvbSBzdGF0dXMgYmFyIGl0ZW1zXHJcbiAqIEVYQUNUTFkgbWF0Y2hlcyBTdGF0dXMgQmFyIE9yZ2FuaXplcidzIGRlc2lnbiAxOjFcclxuICovXHJcblxyXG5pbXBvcnQgeyBzZXRJY29uLCBDb2xvckNvbXBvbmVudCB9IGZyb20gJ29ic2lkaWFuJztcclxuaW1wb3J0IHsgVGFiUmVuZGVyZXIgfSBmcm9tICcuLi9jb21tb24vVGFiUmVuZGVyZXInO1xyXG5pbXBvcnQgeyBTdGF0dXNCYXJJdGVtIH0gZnJvbSAnLi4vLi4vdHlwZXMnO1xyXG5pbXBvcnQgeyBVSVNldHRpbmdzIH0gZnJvbSAnLi4vLi4vc2V0dGluZ3MnO1xyXG5pbXBvcnQgeyBjaG9vc2VOZXdDb21tYW5kIH0gZnJvbSAnLi4vLi4vdXRpbHMvY2hvb3NlQ29tbWFuZCc7XHJcbmltcG9ydCB7IHNldENzc1Byb3BzIH0gZnJvbSAnLi4vLi4vdWlNYW5hZ2VyJztcclxuaW1wb3J0IHsgY3JlYXRlU2V0dGluZ3NHcm91cCB9IGZyb20gJy4uLy4uL3V0aWxzL3NldHRpbmdzLWNvbXBhdCc7XHJcblxyXG4vLyBTaW1wbGUgYXJyYXkgbW92ZSB1dGlsaXR5XHJcbmZ1bmN0aW9uIGFycmF5TW92ZU11dGFibGU8VD4oYXJyYXk6IFRbXSwgZnJvbTogbnVtYmVyLCB0bzogbnVtYmVyKTogdm9pZCB7XHJcblx0Y29uc3QgaXRlbSA9IGFycmF5W2Zyb21dO1xyXG5cdGFycmF5LnNwbGljZShmcm9tLCAxKTtcclxuXHRhcnJheS5zcGxpY2UodG8sIDAsIGl0ZW0pO1xyXG59XHJcblxyXG5sZXQgZHJhZ2dpbmcgPSBmYWxzZTtcclxuXHJcbmV4cG9ydCBjbGFzcyBTdGF0dXNCYXJUYWIgZXh0ZW5kcyBUYWJSZW5kZXJlciB7XHJcblx0cHJpdmF0ZSBjb250YWluZXI/OiBIVE1MRWxlbWVudDtcclxuXHRyZW5kZXIoY29udGFpbmVyOiBIVE1MRWxlbWVudCk6IHZvaWQge1xyXG5cdFx0Y29udGFpbmVyLmVtcHR5KCk7XHJcblx0XHRjb25zdCBzZXR0aW5ncyA9IHRoaXMuZ2V0U2V0dGluZ3MoKTtcclxuXHRcdC8vIFN0b3JlIGNvbnRhaW5lciByZWZlcmVuY2UgZm9yIHJlLXJlbmRlcnNcclxuXHRcdHRoaXMuY29udGFpbmVyID0gY29udGFpbmVyO1xyXG5cdFx0XHJcblx0XHQvLyBFbnN1cmUgc3RhdHVzQmFySXRlbXMgZXhpc3RzXHJcblx0XHRpZiAoIXNldHRpbmdzLnN0YXR1c0Jhckl0ZW1zKSB7XHJcblx0XHRcdHNldHRpbmdzLnN0YXR1c0Jhckl0ZW1zID0gW107XHJcblx0XHR9XHJcblxyXG5cdFx0Ly8gQ3JlYXRlIHdyYXBwZXJcclxuXHRcdGNvbnN0IHdyYXBwZXIgPSBjb250YWluZXIuY3JlYXRlRGl2KCd1aS10d2Vha2VyLXN0YXR1cy1iYXItcm93cy13cmFwcGVyJyk7XHJcblx0XHRcclxuXHRcdC8vIENyZWF0ZSByb3dzIGNvbnRhaW5lclxyXG5cdFx0Y29uc3Qgcm93c0NvbnRhaW5lciA9IHdyYXBwZXIuY3JlYXRlRGl2KCd1aS10d2Vha2VyLXN0YXR1cy1iYXItcm93cy1jb250YWluZXInKTtcclxuXHJcblx0XHQvLyBSZW5kZXIgYWxsIGl0ZW1zIGFzIHNpbXBsZSByb3dzIChleGFjdGx5IGxpa2UgU3RhdHVzIEJhciBPcmdhbml6ZXIpXHJcblx0XHRzZXR0aW5ncy5zdGF0dXNCYXJJdGVtcy5mb3JFYWNoKChpdGVtLCBpbmRleCkgPT4ge1xyXG5cdFx0XHRpZiAoaXRlbS50eXBlID09PSAnZXhpc3RpbmcnKSB7XHJcblx0XHRcdFx0dGhpcy5yZW5kZXJFeGlzdGluZ1Jvdyhyb3dzQ29udGFpbmVyLCBpdGVtLCBzZXR0aW5ncywgaW5kZXgsIHNldHRpbmdzLnN0YXR1c0Jhckl0ZW1zLmxlbmd0aCk7XHJcblx0XHRcdH0gZWxzZSB7XHJcblx0XHRcdFx0dGhpcy5yZW5kZXJDdXN0b21Sb3cocm93c0NvbnRhaW5lciwgaXRlbSwgc2V0dGluZ3MsIGluZGV4LCBzZXR0aW5ncy5zdGF0dXNCYXJJdGVtcy5sZW5ndGgpO1xyXG5cdFx0XHR9XHJcblx0XHR9KTtcclxuXHJcblx0XHQvLyBBZGQgY29tbWFuZCBidXR0b24gKGF0IHRoZSBlbmQpXHJcblx0XHRpZiAoc2V0dGluZ3Muc3RhdHVzQmFySXRlbXMubGVuZ3RoID4gMCkge1xyXG5cdFx0XHRjb250YWluZXIuY3JlYXRlRWwoJ2hyJyk7XHJcblx0XHR9XHJcblx0XHRcclxuXHRcdGNvbnN0IGFkZEdyb3VwID0gY3JlYXRlU2V0dGluZ3NHcm91cChjb250YWluZXIsIHVuZGVmaW5lZCwgJ3VpLXR3ZWFrZXInKTtcclxuXHRcdGFkZEdyb3VwLmFkZFNldHRpbmcoKHNldHRpbmcpOiB2b2lkID0+IHtcclxuXHRcdFx0c2V0dGluZ1xyXG5cdFx0XHRcdC5zZXROYW1lKCdBZGQgY29tbWFuZCcpXHJcblx0XHRcdFx0LnNldERlc2MoJ0FkZCBhIG5ldyBjb21tYW5kIGJ1dHRvbiB0byB0aGUgc3RhdHVzIGJhcicpXHJcblx0XHRcdFx0LmFkZEJ1dHRvbigoYnV0dG9uKSA9PiB7XHJcblx0XHRcdFx0XHQvLyBBZGQgaWNvbiB0byB0aGUgYnV0dG9uXHJcblx0XHRcdFx0XHRjb25zdCBidXR0b25FbCA9IGJ1dHRvbi5idXR0b25FbDtcclxuXHRcdFx0XHRcdGNvbnN0IGljb25Db250YWluZXIgPSBidXR0b25FbC5jcmVhdGVTcGFuKHsgY2xzOiAndWktdHdlYWtlci1hZGQtaWNvbicgfSk7XHJcblx0XHRcdFx0XHRzZXRJY29uKGljb25Db250YWluZXIsICdsdWNpZGUtaW1hZ2UtcGx1cycpO1xyXG5cdFx0XHRcdFx0YnV0dG9uRWwuaW5zZXJ0QmVmb3JlKGljb25Db250YWluZXIsIGJ1dHRvbkVsLmZpcnN0Q2hpbGQpO1xyXG5cdFx0XHRcdFx0YnV0dG9uLnNldEJ1dHRvblRleHQoJ0FkZCBjb21tYW5kJykuc2V0Q3RhKCkub25DbGljaygoKSA9PiB7XHJcblx0XHRcdFx0XHRcdHZvaWQgKGFzeW5jICgpID0+IHtcclxuXHRcdFx0XHRcdFx0XHR0cnkge1xyXG5cdFx0XHRcdFx0XHRcdFx0Y29uc3QgcGFpciA9IGF3YWl0IGNob29zZU5ld0NvbW1hbmQodGhpcy5wbHVnaW4pO1xyXG5cdFx0XHRcdFx0XHRcdFx0YXdhaXQgdGhpcy5wbHVnaW4uc3RhdHVzQmFyTWFuYWdlcj8uYWRkQ3VzdG9tQ29tbWFuZChwYWlyKTtcclxuXHRcdFx0XHRcdFx0XHRcdC8vIFNhdmUgc2Nyb2xsIHBvc2l0aW9uIGJlZm9yZSByZS1yZW5kZXJcclxuXHRcdFx0XHRcdFx0XHRcdGNvbnN0IHNjcm9sbENvbnRhaW5lciA9IGNvbnRhaW5lci5jbG9zZXN0KCcudmVydGljYWwtdGFiLWNvbnRlbnQnKSB8fCBcclxuXHRcdFx0XHRcdFx0XHRcdFx0Y29udGFpbmVyLmNsb3Nlc3QoJy5zZXR0aW5ncy1jb250ZW50JykgfHwgXHJcblx0XHRcdFx0XHRcdFx0XHRcdGNvbnRhaW5lci5wYXJlbnRFbGVtZW50O1xyXG5cdFx0XHRcdFx0XHRcdFx0Y29uc3Qgc2Nyb2xsVG9wID0gc2Nyb2xsQ29udGFpbmVyPy5zY3JvbGxUb3AgfHwgMDtcclxuXHRcdFx0XHRcdFx0XHRcdFxyXG5cdFx0XHRcdFx0XHRcdFx0Ly8gUmUtcmVuZGVyIGFuZCByZXN0b3JlIHNjcm9sbFxyXG5cdFx0XHRcdFx0XHRcdFx0dGhpcy5yZW5kZXIoY29udGFpbmVyKTtcclxuXHRcdFx0XHRcdFx0XHRcdHJlcXVlc3RBbmltYXRpb25GcmFtZSgoKSA9PiB7XHJcblx0XHRcdFx0XHRcdFx0XHRcdGlmIChzY3JvbGxDb250YWluZXIpIHtcclxuXHRcdFx0XHRcdFx0XHRcdFx0XHRzY3JvbGxDb250YWluZXIuc2Nyb2xsVG9wID0gc2Nyb2xsVG9wO1xyXG5cdFx0XHRcdFx0XHRcdFx0XHR9XHJcblx0XHRcdFx0XHRcdFx0XHR9KTtcclxuXHRcdFx0XHRcdFx0XHR9IGNhdGNoIHtcclxuXHRcdFx0XHRcdFx0XHRcdC8vIFVzZXIgY2FuY2VsbGVkXHJcblx0XHRcdFx0XHRcdFx0fVxyXG5cdFx0XHRcdFx0XHR9KSgpO1xyXG5cdFx0XHRcdFx0fSk7XHJcblx0XHRcdFx0fSk7XHJcblx0XHR9KTtcclxuXHR9XHJcblxyXG5cdC8qKlxyXG5cdCAqIFJlbmRlciBhbiBleGlzdGluZyBzdGF0dXMgYmFyIGl0ZW0gcm93IChFWEFDVExZIGxpa2UgU3RhdHVzIEJhciBPcmdhbml6ZXIpXHJcblx0ICovXHJcblx0cHJpdmF0ZSByZW5kZXJFeGlzdGluZ1Jvdyhyb3dzQ29udGFpbmVyOiBIVE1MRWxlbWVudCwgaXRlbTogU3RhdHVzQmFySXRlbSwgc2V0dGluZ3M6IFVJU2V0dGluZ3MsIGluZGV4OiBudW1iZXIsIHRvdGFsSXRlbXM6IG51bWJlcik6IHZvaWQge1xyXG5cdFx0Ly8gR2V0IHRoZSBhY3R1YWwgc3RhdHVzIGJhciBlbGVtZW50IGZvciBwcmV2aWV3XHJcblx0XHRjb25zdCBzdGF0dXNCYXJDb250YWluZXIgPSAodGhpcy5wbHVnaW4uYXBwIGFzIHsgc3RhdHVzQmFyPzogeyBjb250YWluZXJFbD86IEhUTUxFbGVtZW50IH0gfSkuc3RhdHVzQmFyPy5jb250YWluZXJFbDtcclxuXHRcdGNvbnN0IGFjdHVhbEVsZW1lbnQgPSBzdGF0dXNCYXJDb250YWluZXI/LnF1ZXJ5U2VsZWN0b3IoYFtkYXRhLXVpLXR3ZWFrZXItc3RhdHVzLWJhci1pZD1cIiR7aXRlbS5pZH1cIl1gKSBhcyBIVE1MRWxlbWVudDtcclxuXHRcdGNvbnN0IGV4aXN0cyA9ICEhYWN0dWFsRWxlbWVudDtcclxuXHJcblx0XHQvLyBDcmVhdGUgcm93XHJcblx0XHRjb25zdCBlbnRyeSA9IHJvd3NDb250YWluZXIuY3JlYXRlRGl2KCd1aS10d2Vha2VyLXN0YXR1cy1iYXItcm93Jyk7XHJcblx0XHRlbnRyeS5hZGRDbGFzcygndWktdHdlYWtlci1yb3cnKTtcclxuXHRcdGlmICghZXhpc3RzKSBlbnRyeS5hZGRDbGFzcygndWktdHdlYWtlci1zdGF0dXMtYmFyLXJvdy1kaXNhYmxlZCcpO1xyXG5cdFx0aWYgKGl0ZW0uaGlkZGVuKSBlbnRyeS5hZGRDbGFzcygndWktdHdlYWtlci1zdGF0dXMtYmFyLXJvdy1oaWRkZW4nKTtcclxuXHRcdGVudHJ5LnNldEF0dHJpYnV0ZSgnZGF0YS11aS10d2Vha2VyLWlkJywgaXRlbS5pZCk7XHJcblxyXG5cdFx0Ly8gRHJhZyBoYW5kbGVcclxuXHRcdGNvbnN0IGhhbmRsZSA9IGVudHJ5LmNyZWF0ZVNwYW4oJ3VpLXR3ZWFrZXItc3RhdHVzLWJhci1yb3ctaGFuZGxlJyk7XHJcblx0XHRoYW5kbGUuYWRkRXZlbnRMaXN0ZW5lcignbW91c2Vkb3duJywgKGV2ZW50KSA9PiBcclxuXHRcdFx0dGhpcy5oYW5kbGVNb3VzZURvd24oZXZlbnQsIHJvd3NDb250YWluZXIsIGl0ZW0sIHNldHRpbmdzKVxyXG5cdFx0KTtcclxuXHJcblx0XHQvLyBUaXRsZVxyXG5cdFx0Y29uc3QgdGl0bGVTcGFuID0gZW50cnkuY3JlYXRlU3BhbigndWktdHdlYWtlci1zdGF0dXMtYmFyLXJvdy10aXRsZScpO1xyXG5cdFx0dGl0bGVTcGFuLnRleHRDb250ZW50ID0gaXRlbS5uYW1lO1xyXG5cclxuXHRcdC8vIFByZXZpZXdcclxuXHRcdGNvbnN0IHByZXZpZXdTcGFuID0gZW50cnkuY3JlYXRlU3BhbigndWktdHdlYWtlci1zdGF0dXMtYmFyLXJvdy1wcmV2aWV3Jyk7XHJcblx0XHRpZiAoZXhpc3RzICYmIGFjdHVhbEVsZW1lbnQpIHtcclxuXHRcdFx0Ly8gQ2xvbmUgdGhlIGVsZW1lbnQgaW5zdGVhZCBvZiB1c2luZyBpbm5lckhUTUxcclxuXHRcdFx0Y29uc3QgY2xvbmVkID0gYWN0dWFsRWxlbWVudC5jbG9uZU5vZGUodHJ1ZSkgYXMgSFRNTEVsZW1lbnQ7XHJcblx0XHRcdC8vIEVuc3VyZSBjbG9uZWQgZWxlbWVudCBhbmQgYWxsIGNoaWxkcmVuIGFyZSB2aXNpYmxlXHJcblx0XHRcdHNldENzc1Byb3BzKGNsb25lZCwgeyBkaXNwbGF5OiAnJywgdmlzaWJpbGl0eTogJycsIG9wYWNpdHk6ICcnIH0pO1xyXG5cdFx0XHQvLyBNYWtlIHN1cmUgYWxsIGNoaWxkIGVsZW1lbnRzIGFyZSB2aXNpYmxlXHJcblx0XHRcdGNsb25lZC5xdWVyeVNlbGVjdG9yQWxsKCcqJykuZm9yRWFjaCgoY2hpbGQpID0+IHtcclxuXHRcdFx0XHRzZXRDc3NQcm9wcyhjaGlsZCBhcyBIVE1MRWxlbWVudCwgeyBkaXNwbGF5OiAnJywgdmlzaWJpbGl0eTogJycsIG9wYWNpdHk6ICcnIH0pO1xyXG5cdFx0XHR9KTtcclxuXHRcdFx0cHJldmlld1NwYW4uYXBwZW5kQ2hpbGQoY2xvbmVkKTtcclxuXHRcdH1cclxuXHJcblx0XHQvLyBFbXB0eSBzcGFucyBmb3IgY3VzdG9tIGl0ZW0gb3B0aW9ucyAoZXhpc3RpbmcgaXRlbXMgZG9uJ3QgaGF2ZSB0aGVzZSlcclxuXHRcdGVudHJ5LmNyZWF0ZVNwYW4oJ3VpLXR3ZWFrZXItc3RhdHVzLWJhci1yb3ctcmVzZXQtY29sb3InKTsgLy8gRW1wdHlcclxuXHRcdGVudHJ5LmNyZWF0ZVNwYW4oJ3VpLXR3ZWFrZXItc3RhdHVzLWJhci1yb3ctY29sb3ItcGlja2VyJyk7IC8vIEVtcHR5XHJcblx0XHQvLyBEZXZpY2UgbW9kZSBpY29uIHJlbW92ZWQgLSBzdGF0dXMgYmFyIG5vdCB2aXNpYmxlIG9uIG1vYmlsZSwgc28gbm8gbmVlZCBmb3IgZGV2aWNlIGluZGljYXRvcnNcclxuXHRcdGVudHJ5LmNyZWF0ZVNwYW4oJ3VpLXR3ZWFrZXItc3RhdHVzLWJhci1yb3ctbWQtb25seScpOyAvLyBFbXB0eVxyXG5cclxuXHRcdC8vIExvY2sgaWNvbiAobmV3IGZlYXR1cmUpXHJcblx0XHRjb25zdCBsb2NrU3BhbiA9IGVudHJ5LmNyZWF0ZVNwYW4oJ3VpLXR3ZWFrZXItc3RhdHVzLWJhci1yb3ctbG9jaycpO1xyXG5cdFx0bG9ja1NwYW4uc2V0QXR0cmlidXRlKCdhcmlhLWxhYmVsJywgaXRlbS5zdGlja3kgPyBgTG9ja2VkIHRvICR7aXRlbS5zdGlja3l9YCA6ICdVbmxvY2tlZCAtIGNsaWNrIHRvIGxvY2sgcG9zaXRpb24nKTtcclxuXHRcdGxvY2tTcGFuLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKGUpID0+IHtcclxuXHRcdFx0ZS5zdG9wUHJvcGFnYXRpb24oKTtcclxuXHRcdFx0dGhpcy50b2dnbGVMb2NrKGl0ZW0sIGxvY2tTcGFuLCBpbmRleCwgdG90YWxJdGVtcywgcm93c0NvbnRhaW5lciwgc2V0dGluZ3MpO1xyXG5cdFx0fSk7XHJcblx0XHRzZXRJY29uKGxvY2tTcGFuLCBpdGVtLnN0aWNreSA/ICdsb2NrJyA6ICd1bmxvY2snKTtcclxuXHRcdGlmIChpdGVtLnN0aWNreSkge1xyXG5cdFx0XHRsb2NrU3Bhbi5hZGRDbGFzcygndWktdHdlYWtlci1sb2NrZWQnKTtcclxuXHRcdH1cclxuXHJcblx0XHQvLyBEZWxldGUgaWNvbiBmb3IgY3VzdG9tIGl0ZW1zLCB2aXNpYmlsaXR5IGljb24gZm9yIGV4aXN0aW5nIGl0ZW1zXHJcblx0XHRjb25zdCB2aXNpYmlsaXR5U3BhbiA9IGVudHJ5LmNyZWF0ZVNwYW4oJ3VpLXR3ZWFrZXItc3RhdHVzLWJhci1yb3ctdmlzaWJpbGl0eScpO1xyXG5cdFx0aWYgKGl0ZW0udHlwZSA9PT0gJ2N1c3RvbScpIHtcclxuXHRcdFx0Ly8gQ3VzdG9tIGl0ZW1zOiBzaG93IHRyYXNoIGljb24gKHJlZC93YXJuaW5nKVxyXG5cdFx0XHR2aXNpYmlsaXR5U3Bhbi5zZXRBdHRyaWJ1dGUoJ2FyaWEtbGFiZWwnLCAnRGVsZXRlIGl0ZW0nKTtcclxuXHRcdFx0dmlzaWJpbGl0eVNwYW4uYWRkQ2xhc3MoJ21vZC13YXJuaW5nJyk7XHJcblx0XHRcdHNldENzc1Byb3BzKHZpc2liaWxpdHlTcGFuLCB7IGNvbG9yOiAndmFyKC0tdGV4dC1lcnJvciknIH0pO1xyXG5cdFx0XHR2aXNpYmlsaXR5U3Bhbi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHtcclxuXHRcdFx0XHR2b2lkIHRoaXMucmVtb3ZlSXRlbShyb3dzQ29udGFpbmVyLCBpdGVtLCBzZXR0aW5ncyk7XHJcblx0XHRcdH0pO1xyXG5cdFx0XHRzZXRJY29uKHZpc2liaWxpdHlTcGFuLCAndHJhc2gtMicpO1xyXG5cdFx0fSBlbHNlIHtcclxuXHRcdFx0Ly8gRXhpc3RpbmcgaXRlbXM6IHNob3cgdmlzaWJpbGl0eSB0b2dnbGVcclxuXHRcdFx0dmlzaWJpbGl0eVNwYW4uc2V0QXR0cmlidXRlKCdhcmlhLWxhYmVsJywgaXRlbS5oaWRkZW4gPyAnSGlkZGVuIC0gY2xpY2sgdG8gc2hvdycgOiAnVmlzaWJsZSAtIGNsaWNrIHRvIGhpZGUnKTtcclxuXHRcdFx0dmlzaWJpbGl0eVNwYW4uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB7XHJcblx0XHRcdFx0dGhpcy50b2dnbGVWaXNpYmlsaXR5KGl0ZW0sIHZpc2liaWxpdHlTcGFuLCBlbnRyeSk7XHJcblx0XHRcdFx0Ly8gdG9nZ2xlVmlzaWJpbGl0eSBhbHJlYWR5IGNhbGxzIHNhdmVTZXR0aW5ncygpXHJcblx0XHRcdH0pO1xyXG5cdFx0XHRzZXRJY29uKHZpc2liaWxpdHlTcGFuLCBpdGVtLmhpZGRlbiA/ICdleWUtb2ZmJyA6ICdleWUnKTtcclxuXHRcdH1cclxuXHR9XHJcblxyXG5cdC8qKlxyXG5cdCAqIFJlbmRlciBhIGN1c3RvbSBzdGF0dXMgYmFyIGl0ZW0gcm93IChFWEFDVExZIGxpa2UgU3RhdHVzIEJhciBPcmdhbml6ZXIsIGJ1dCB3aXRoIGVkaXRhYmxlIG5hbWUpXHJcblx0ICovXHJcblx0cHJpdmF0ZSByZW5kZXJDdXN0b21Sb3cocm93c0NvbnRhaW5lcjogSFRNTEVsZW1lbnQsIGl0ZW06IFN0YXR1c0Jhckl0ZW0sIHNldHRpbmdzOiBVSVNldHRpbmdzLCBpbmRleDogbnVtYmVyLCB0b3RhbEl0ZW1zOiBudW1iZXIpOiB2b2lkIHtcclxuXHRcdC8vIENyZWF0ZSByb3dcclxuXHRcdGNvbnN0IGVudHJ5ID0gcm93c0NvbnRhaW5lci5jcmVhdGVEaXYoJ3VpLXR3ZWFrZXItc3RhdHVzLWJhci1yb3cnKTtcclxuXHRcdGVudHJ5LmFkZENsYXNzKCd1aS10d2Vha2VyLXJvdycpO1xyXG5cdFx0aWYgKGl0ZW0uaGlkZGVuKSBlbnRyeS5hZGRDbGFzcygndWktdHdlYWtlci1zdGF0dXMtYmFyLXJvdy1oaWRkZW4nKTtcclxuXHRcdGVudHJ5LnNldEF0dHJpYnV0ZSgnZGF0YS11aS10d2Vha2VyLWlkJywgaXRlbS5pZCk7XHJcblxyXG5cdFx0Ly8gRHJhZyBoYW5kbGVcclxuXHRcdGNvbnN0IGhhbmRsZSA9IGVudHJ5LmNyZWF0ZVNwYW4oJ3VpLXR3ZWFrZXItc3RhdHVzLWJhci1yb3ctaGFuZGxlJyk7XHJcblx0XHRoYW5kbGUuYWRkRXZlbnRMaXN0ZW5lcignbW91c2Vkb3duJywgKGV2ZW50KSA9PiBcclxuXHRcdFx0dGhpcy5oYW5kbGVNb3VzZURvd24oZXZlbnQsIHJvd3NDb250YWluZXIsIGl0ZW0sIHNldHRpbmdzKVxyXG5cdFx0KTtcclxuXHJcblx0XHQvLyBUaXRsZSB3aXRoIGVkaXRhYmxlIG5hbWVcclxuXHRcdGNvbnN0IHRpdGxlU3BhbiA9IGVudHJ5LmNyZWF0ZVNwYW4oJ3VpLXR3ZWFrZXItc3RhdHVzLWJhci1yb3ctdGl0bGUnKTtcclxuXHRcdGNvbnN0IGRpc3BsYXlOYW1lID0gaXRlbS5kaXNwbGF5TmFtZSB8fCBpdGVtLm5hbWU7XHJcblx0XHRjb25zdCBuYW1lVGV4dCA9IGl0ZW0ubmFtZSA9PT0gZGlzcGxheU5hbWUgPyBpdGVtLm5hbWUgOiBgJHtpdGVtLm5hbWV9ICgke2Rpc3BsYXlOYW1lfSlgO1xyXG5cdFx0dGl0bGVTcGFuLnRleHRDb250ZW50ID0gbmFtZVRleHQ7XHJcblx0XHRcclxuXHRcdC8vIE1ha2UgdGl0bGUgZWRpdGFibGUgb24gY2xpY2tcclxuXHRcdHRpdGxlU3Bhbi5hZGRFdmVudExpc3RlbmVyKCdkYmxjbGljaycsICgpID0+IHtcclxuXHRcdFx0Y29uc3QgY3VycmVudE5hbWUgPSBpdGVtLm5hbWU7XHJcblx0XHRcdGNvbnN0IGlucHV0ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnaW5wdXQnKTtcclxuXHRcdFx0aW5wdXQudHlwZSA9ICd0ZXh0JztcclxuXHRcdFx0aW5wdXQudmFsdWUgPSBjdXJyZW50TmFtZTtcclxuXHRcdFx0aW5wdXQuYWRkQ2xhc3MoJ21vZC10ZXh0LWlucHV0Jyk7XHJcblx0XHRcdHNldENzc1Byb3BzKGlucHV0LCB7IHdpZHRoOiAnMTAwJScgfSk7XHJcblx0XHRcdHRpdGxlU3Bhbi5lbXB0eSgpO1xyXG5cdFx0XHR0aXRsZVNwYW4uYXBwZW5kQ2hpbGQoaW5wdXQpO1xyXG5cdFx0XHRpbnB1dC5mb2N1cygpO1xyXG5cdFx0XHRpbnB1dC5zZWxlY3QoKTtcclxuXHRcdFx0XHJcblx0XHRcdGNvbnN0IHNhdmVOYW1lID0gKCkgPT4ge1xyXG5cdFx0XHRcdGxldCBuZXdOYW1lID0gaW5wdXQudmFsdWUudHJpbSgpO1xyXG5cdFx0XHRcdGlmICghbmV3TmFtZSkgbmV3TmFtZSA9IGN1cnJlbnROYW1lO1xyXG5cdFx0XHRcdGl0ZW0ubmFtZSA9IG5ld05hbWU7XHJcblx0XHRcdFx0dGhpcy5wbHVnaW4uc3RhdHVzQmFyTWFuYWdlcj8udXBkYXRlQnV0dG9uTmFtZXMoKTtcclxuXHRcdFx0XHR0aXRsZVNwYW4udGV4dENvbnRlbnQgPSBuZXdOYW1lID09PSBkaXNwbGF5TmFtZSA/IG5ld05hbWUgOiBgJHtuZXdOYW1lfSAoJHtkaXNwbGF5TmFtZX0pYDtcclxuXHRcdFx0XHR2b2lkIHRoaXMuc2F2ZVNldHRpbmdzKCk7XHJcblx0XHRcdH07XHJcblx0XHRcdFxyXG5cdFx0XHRpbnB1dC5hZGRFdmVudExpc3RlbmVyKCdrZXlkb3duJywgKGUpID0+IHtcclxuXHRcdFx0XHRpZiAoZS5rZXkgPT09ICdFbnRlcicpIHtcclxuXHRcdFx0XHRcdGUucHJldmVudERlZmF1bHQoKTtcclxuXHRcdFx0XHRcdHNhdmVOYW1lKCk7XHJcblx0XHRcdFx0fSBlbHNlIGlmIChlLmtleSA9PT0gJ0VzY2FwZScpIHtcclxuXHRcdFx0XHRcdGUucHJldmVudERlZmF1bHQoKTtcclxuXHRcdFx0XHRcdHRpdGxlU3Bhbi50ZXh0Q29udGVudCA9IG5hbWVUZXh0O1xyXG5cdFx0XHRcdH1cclxuXHRcdFx0fSk7XHJcblx0XHRcdGlucHV0LmFkZEV2ZW50TGlzdGVuZXIoJ2JsdXInLCBzYXZlTmFtZSk7XHJcblx0XHR9KTtcclxuXHJcblx0XHQvLyBQcmV2aWV3XHJcblx0XHRjb25zdCBwcmV2aWV3U3BhbiA9IGVudHJ5LmNyZWF0ZVNwYW4oJ3VpLXR3ZWFrZXItc3RhdHVzLWJhci1yb3ctcHJldmlldycpO1xyXG5cdFx0aWYgKGl0ZW0uaWNvbikge1xyXG5cdFx0XHRjb25zdCBwcmV2aWV3SWNvbiA9IHByZXZpZXdTcGFuLmNyZWF0ZVNwYW4oJ3N0YXR1cy1iYXItaXRlbSBjbGlja2FibGUtaWNvbicpO1xyXG5cdFx0XHRzZXRJY29uKHByZXZpZXdJY29uLCBpdGVtLmljb24pO1xyXG5cdFx0XHRpZiAoaXRlbS5jb2xvciAmJiBpdGVtLmNvbG9yICE9PSAnIzAwMDAwMCcpIHtcclxuXHRcdFx0XHRzZXRDc3NQcm9wcyhwcmV2aWV3SWNvbiwgeyBjb2xvcjogaXRlbS5jb2xvciB9KTtcclxuXHRcdFx0fVxyXG5cdFx0fVxyXG5cclxuXHRcdC8vIFJlc2V0IGNvbG9yIGJ1dHRvbiAob25seSBzaG93IGlmIGNvbG9yIGlzIHNldClcclxuXHRcdGNvbnN0IHJlc2V0Q29sb3JDb250YWluZXIgPSBlbnRyeS5jcmVhdGVTcGFuKCd1aS10d2Vha2VyLXN0YXR1cy1iYXItcm93LXJlc2V0LWNvbG9yJyk7XHJcblx0XHRpZiAoaXRlbS5jb2xvcikge1xyXG5cdFx0XHRjb25zdCByZXNldEJ1dHRvbiA9IHJlc2V0Q29sb3JDb250YWluZXIuY3JlYXRlRWwoJ2J1dHRvbicsIHtcclxuXHRcdFx0XHRjbHM6ICdjbGlja2FibGUtaWNvbiB1aS10d2Vha2VyLWNvbG9yLXJlc2V0JyxcclxuXHRcdFx0XHRhdHRyOiB7ICdhcmlhLWxhYmVsJzogJ1Jlc2V0IHRvIGRlZmF1bHQgY29sb3InIH1cclxuXHRcdFx0fSk7XHJcblx0XHRcdHNldEljb24ocmVzZXRCdXR0b24sICdyb3RhdGUtY3cnKTtcclxuXHRcdFx0cmVzZXRCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoZSkgPT4ge1xyXG5cdFx0XHRcdGUuc3RvcFByb3BhZ2F0aW9uKCk7XHJcblx0XHRcdFx0aXRlbS5jb2xvciA9IHVuZGVmaW5lZDtcclxuXHRcdFx0XHQvLyBVcGRhdGUgcHJldmlldyBpY29uXHJcblx0XHRcdFx0Y29uc3QgcHJldmlld0ljb24gPSBwcmV2aWV3U3Bhbi5xdWVyeVNlbGVjdG9yKCcuY2xpY2thYmxlLWljb24nKSBhcyBIVE1MRWxlbWVudDtcclxuXHRcdFx0XHRpZiAocHJldmlld0ljb24pIHtcclxuXHRcdFx0XHRcdHByZXZpZXdJY29uLnN0eWxlLnJlbW92ZVByb3BlcnR5KCdjb2xvcicpO1xyXG5cdFx0XHRcdH1cclxuXHRcdFx0XHR0aGlzLnBsdWdpbi5zdGF0dXNCYXJNYW5hZ2VyPy5yZW9yZGVyKCk7XHJcblx0XHRcdFx0dm9pZCB0aGlzLnNhdmVTZXR0aW5ncygpO1xyXG5cdFx0XHRcdC8vIFJlLXJlbmRlciB0byB1cGRhdGUgVUlcclxuXHRcdFx0XHRpZiAodGhpcy5jb250YWluZXIpIHtcclxuXHRcdFx0XHRcdHRoaXMucmVuZGVyKHRoaXMuY29udGFpbmVyKTtcclxuXHRcdFx0XHR9XHJcblx0XHRcdH0pO1xyXG5cdFx0fVxyXG5cdFx0XHJcblx0XHQvLyBDb2xvciBwaWNrZXIgKE9ic2lkaWFuJ3MgbmF0aXZlIGNvbXBvbmVudClcclxuXHRcdGNvbnN0IGNvbG9yUGlja2VyQ29udGFpbmVyID0gZW50cnkuY3JlYXRlU3BhbigndWktdHdlYWtlci1zdGF0dXMtYmFyLXJvdy1jb2xvci1waWNrZXInKTtcclxuXHRcdGNvbnN0IGNvbG9yUGlja2VyRWwgPSBjb2xvclBpY2tlckNvbnRhaW5lci5jcmVhdGVEaXYoKTtcclxuXHRcdGNvbnN0IGNvbG9yUGlja2VyID0gbmV3IENvbG9yQ29tcG9uZW50KGNvbG9yUGlja2VyRWwpO1xyXG5cdFx0Y29sb3JQaWNrZXIuc2V0VmFsdWUoaXRlbS5jb2xvciB8fCAnIzAwMDAwMCcpO1xyXG5cdFx0Y29sb3JQaWNrZXIub25DaGFuZ2UoKHZhbHVlKSA9PiB7XHJcblx0XHRcdGlmICh2YWx1ZSA9PT0gJyMwMDAwMDAnKSB7XHJcblx0XHRcdFx0aXRlbS5jb2xvciA9IHVuZGVmaW5lZDtcclxuXHRcdFx0fSBlbHNlIHtcclxuXHRcdFx0XHRpdGVtLmNvbG9yID0gdmFsdWU7XHJcblx0XHRcdH1cclxuXHRcdFx0Ly8gVXBkYXRlIHByZXZpZXcgaWNvbiBjb2xvciBpbiByZWFsLXRpbWVcclxuXHRcdFx0Y29uc3QgcHJldmlld0ljb24gPSBwcmV2aWV3U3Bhbi5xdWVyeVNlbGVjdG9yKCcuY2xpY2thYmxlLWljb24nKSBhcyBIVE1MRWxlbWVudDtcclxuXHRcdFx0aWYgKHByZXZpZXdJY29uKSB7XHJcblx0XHRcdFx0aWYgKGl0ZW0uY29sb3IgJiYgaXRlbS5jb2xvciAhPT0gJyMwMDAwMDAnKSB7XHJcblx0XHRcdFx0XHRzZXRDc3NQcm9wcyhwcmV2aWV3SWNvbiwgeyBjb2xvcjogaXRlbS5jb2xvciB9KTtcclxuXHRcdFx0XHR9IGVsc2Uge1xyXG5cdFx0XHRcdFx0cHJldmlld0ljb24uc3R5bGUucmVtb3ZlUHJvcGVydHkoJ2NvbG9yJyk7XHJcblx0XHRcdFx0fVxyXG5cdFx0XHR9XHJcblx0XHRcdHRoaXMucGx1Z2luLnN0YXR1c0Jhck1hbmFnZXI/LnJlb3JkZXIoKTtcclxuXHRcdFx0dm9pZCB0aGlzLnNhdmVTZXR0aW5ncygpO1xyXG5cdFx0XHQvLyBSZS1yZW5kZXIgdG8gc2hvdy9oaWRlIHJlc2V0IGJ1dHRvblxyXG5cdFx0XHRpZiAodGhpcy5jb250YWluZXIpIHtcclxuXHRcdFx0XHR0aGlzLnJlbmRlcih0aGlzLmNvbnRhaW5lcik7XHJcblx0XHRcdH1cclxuXHRcdH0pO1xyXG5cdFx0XHJcblx0XHQvLyBEZXZpY2UgbW9kZSBpY29uIC0gcmVtb3ZlZCAoc3RhdHVzIGJhciBub3QgdmlzaWJsZSBvbiBtb2JpbGUsIHNvIG5vIG5lZWQgZm9yIGRldmljZSBpbmRpY2F0b3JzKVxyXG5cdFx0XHJcblx0XHQvLyBNRC1vbmx5IGljb25cclxuXHRcdGNvbnN0IG1kT25seVNwYW4gPSBlbnRyeS5jcmVhdGVTcGFuKCd1aS10d2Vha2VyLXN0YXR1cy1iYXItcm93LW1kLW9ubHknKTtcclxuXHRcdG1kT25seVNwYW4uc2V0QXR0cmlidXRlKCdhcmlhLWxhYmVsJywgaXRlbS5tZE9ubHkgPyAnT25seSBzaG93IG9uIE1hcmtkb3duIGZpbGVzIChlbmFibGVkKScgOiAnT25seSBzaG93IG9uIE1hcmtkb3duIGZpbGVzIChkaXNhYmxlZCknKTtcclxuXHRcdG1kT25seVNwYW4uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoZSkgPT4ge1xyXG5cdFx0XHRlLnN0b3BQcm9wYWdhdGlvbigpO1xyXG5cdFx0XHRpdGVtLm1kT25seSA9ICFpdGVtLm1kT25seTtcclxuXHRcdFx0c2V0SWNvbihtZE9ubHlTcGFuLCBpdGVtLm1kT25seSA/ICdmaWxlLWNoZWNrJyA6ICdmaWxlLXgnKTtcclxuXHRcdFx0bWRPbmx5U3Bhbi5zZXRBdHRyaWJ1dGUoJ2FyaWEtbGFiZWwnLCBpdGVtLm1kT25seSA/ICdPbmx5IHNob3cgb24gTWFya2Rvd24gZmlsZXMgKGVuYWJsZWQpJyA6ICdPbmx5IHNob3cgb24gTWFya2Rvd24gZmlsZXMgKGRpc2FibGVkKScpO1xyXG5cdFx0XHRpZiAoaXRlbS5tZE9ubHkpIHtcclxuXHRcdFx0XHRtZE9ubHlTcGFuLmFkZENsYXNzKCd1aS10d2Vha2VyLWFjdGl2ZScpO1xyXG5cdFx0XHR9IGVsc2Uge1xyXG5cdFx0XHRcdG1kT25seVNwYW4ucmVtb3ZlQ2xhc3MoJ3VpLXR3ZWFrZXItYWN0aXZlJyk7XHJcblx0XHRcdH1cclxuXHRcdFx0dGhpcy5wbHVnaW4uc3RhdHVzQmFyTWFuYWdlcj8ucmVvcmRlcigpO1xyXG5cdFx0XHR2b2lkIHRoaXMuc2F2ZVNldHRpbmdzKCk7XHJcblx0XHR9KTtcclxuXHRcdHNldEljb24obWRPbmx5U3BhbiwgaXRlbS5tZE9ubHkgPyAnZmlsZS1jaGVjaycgOiAnZmlsZS14Jyk7XHJcblx0XHRpZiAoaXRlbS5tZE9ubHkpIHtcclxuXHRcdFx0bWRPbmx5U3Bhbi5hZGRDbGFzcygndWktdHdlYWtlci1hY3RpdmUnKTtcclxuXHRcdH1cclxuXHJcblx0XHQvLyBMb2NrIGljb24gKG5ldyBmZWF0dXJlKVxyXG5cdFx0Y29uc3QgbG9ja1NwYW4gPSBlbnRyeS5jcmVhdGVTcGFuKCd1aS10d2Vha2VyLXN0YXR1cy1iYXItcm93LWxvY2snKTtcclxuXHRcdGxvY2tTcGFuLnNldEF0dHJpYnV0ZSgnYXJpYS1sYWJlbCcsIGl0ZW0uc3RpY2t5ID8gYExvY2tlZCB0byAke2l0ZW0uc3RpY2t5fWAgOiAnVW5sb2NrZWQgLSBjbGljayB0byBsb2NrIHBvc2l0aW9uJyk7XHJcblx0XHRsb2NrU3Bhbi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIChlKSA9PiB7XHJcblx0XHRcdGUuc3RvcFByb3BhZ2F0aW9uKCk7XHJcblx0XHRcdHRoaXMudG9nZ2xlTG9jayhpdGVtLCBsb2NrU3BhbiwgaW5kZXgsIHRvdGFsSXRlbXMsIHJvd3NDb250YWluZXIsIHNldHRpbmdzKTtcclxuXHRcdH0pO1xyXG5cdFx0c2V0SWNvbihsb2NrU3BhbiwgaXRlbS5zdGlja3kgPyAnbG9jaycgOiAndW5sb2NrJyk7XHJcblx0XHRpZiAoaXRlbS5zdGlja3kpIHtcclxuXHRcdFx0bG9ja1NwYW4uYWRkQ2xhc3MoJ3VpLXR3ZWFrZXItbG9ja2VkJyk7XHJcblx0XHR9XHJcblxyXG5cdFx0Ly8gRGVsZXRlIGljb24gZm9yIGN1c3RvbSBpdGVtcywgdmlzaWJpbGl0eSBpY29uIGZvciBleGlzdGluZyBpdGVtc1xyXG5cdFx0Y29uc3QgdmlzaWJpbGl0eVNwYW4gPSBlbnRyeS5jcmVhdGVTcGFuKCd1aS10d2Vha2VyLXN0YXR1cy1iYXItcm93LXZpc2liaWxpdHknKTtcclxuXHRcdGlmIChpdGVtLnR5cGUgPT09ICdjdXN0b20nKSB7XHJcblx0XHRcdC8vIEN1c3RvbSBpdGVtczogc2hvdyB0cmFzaCBpY29uIChyZWQvd2FybmluZylcclxuXHRcdFx0dmlzaWJpbGl0eVNwYW4uc2V0QXR0cmlidXRlKCdhcmlhLWxhYmVsJywgJ0RlbGV0ZSBpdGVtJyk7XHJcblx0XHRcdHZpc2liaWxpdHlTcGFuLmFkZENsYXNzKCdtb2Qtd2FybmluZycpO1xyXG5cdFx0XHRzZXRDc3NQcm9wcyh2aXNpYmlsaXR5U3BhbiwgeyBjb2xvcjogJ3ZhcigtLXRleHQtZXJyb3IpJyB9KTtcclxuXHRcdFx0dmlzaWJpbGl0eVNwYW4uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB7XHJcblx0XHRcdFx0dm9pZCB0aGlzLnJlbW92ZUl0ZW0ocm93c0NvbnRhaW5lciwgaXRlbSwgc2V0dGluZ3MpO1xyXG5cdFx0XHR9KTtcclxuXHRcdFx0c2V0SWNvbih2aXNpYmlsaXR5U3BhbiwgJ3RyYXNoLTInKTtcclxuXHRcdH0gZWxzZSB7XHJcblx0XHRcdC8vIEV4aXN0aW5nIGl0ZW1zOiBzaG93IHZpc2liaWxpdHkgdG9nZ2xlXHJcblx0XHRcdHZpc2liaWxpdHlTcGFuLnNldEF0dHJpYnV0ZSgnYXJpYS1sYWJlbCcsIGl0ZW0uaGlkZGVuID8gJ0hpZGRlbiAtIGNsaWNrIHRvIHNob3cnIDogJ1Zpc2libGUgLSBjbGljayB0byBoaWRlJyk7XHJcblx0XHRcdHZpc2liaWxpdHlTcGFuLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4ge1xyXG5cdFx0XHRcdHRoaXMudG9nZ2xlVmlzaWJpbGl0eShpdGVtLCB2aXNpYmlsaXR5U3BhbiwgZW50cnkpO1xyXG5cdFx0XHRcdC8vIHRvZ2dsZVZpc2liaWxpdHkgYWxyZWFkeSBjYWxscyBzYXZlU2V0dGluZ3MoKVxyXG5cdFx0XHR9KTtcclxuXHRcdFx0c2V0SWNvbih2aXNpYmlsaXR5U3BhbiwgaXRlbS5oaWRkZW4gPyAnZXllLW9mZicgOiAnZXllJyk7XHJcblx0XHR9XHJcblx0fVxyXG5cclxuXHQvKipcclxuXHQgKiBUb2dnbGUgbG9jayBwb3NpdGlvbiBiYXNlZCBvbiBjdXJyZW50IHBvc2l0aW9uXHJcblx0ICovXHJcblx0cHJpdmF0ZSB0b2dnbGVMb2NrKFxyXG5cdFx0aXRlbTogU3RhdHVzQmFySXRlbSwgXHJcblx0XHRsb2NrU3BhbjogSFRNTEVsZW1lbnQsIFxyXG5cdFx0Y3VycmVudEluZGV4OiBudW1iZXIsIFxyXG5cdFx0dG90YWxJdGVtczogbnVtYmVyLFxyXG5cdFx0cm93c0NvbnRhaW5lcjogSFRNTEVsZW1lbnQsXHJcblx0XHRzZXR0aW5nczogVUlTZXR0aW5nc1xyXG5cdCk6IHZvaWQge1xyXG5cdFx0Ly8gSWYgYWxyZWFkeSBsb2NrZWQsIHVubG9jayBpdFxyXG5cdFx0aWYgKGl0ZW0uc3RpY2t5KSB7XHJcblx0XHRcdGl0ZW0uc3RpY2t5ID0gZmFsc2U7XHJcblx0XHRcdHNldEljb24obG9ja1NwYW4sICd1bmxvY2snKTtcclxuXHRcdFx0bG9ja1NwYW4ucmVtb3ZlQ2xhc3MoJ3VpLXR3ZWFrZXItbG9ja2VkJyk7XHJcblx0XHRcdGxvY2tTcGFuLnNldEF0dHJpYnV0ZSgnYXJpYS1sYWJlbCcsICdVbmxvY2tlZCAtIGNsaWNrIHRvIGxvY2sgcG9zaXRpb24nKTtcclxuXHRcdH0gZWxzZSB7XHJcblx0XHRcdC8vIERldGVybWluZSBsb2NrIHBvc2l0aW9uIGJhc2VkIG9uIGN1cnJlbnQgaW5kZXhcclxuXHRcdFx0Ly8gUG9zaXRpb24gMCBvciAxIC0+IGxvY2sgbGVmdFxyXG5cdFx0XHQvLyBMYXN0IHBvc2l0aW9uIG9yIHNlY29uZC10by1sYXN0IC0+IGxvY2sgcmlnaHRcclxuXHRcdFx0aWYgKGN1cnJlbnRJbmRleCA9PT0gMCB8fCBjdXJyZW50SW5kZXggPT09IDEpIHtcclxuXHRcdFx0XHRpdGVtLnN0aWNreSA9ICdsZWZ0JztcclxuXHRcdFx0fSBlbHNlIGlmIChjdXJyZW50SW5kZXggPT09IHRvdGFsSXRlbXMgLSAxIHx8IGN1cnJlbnRJbmRleCA9PT0gdG90YWxJdGVtcyAtIDIpIHtcclxuXHRcdFx0XHRpdGVtLnN0aWNreSA9ICdyaWdodCc7XHJcblx0XHRcdH0gZWxzZSB7XHJcblx0XHRcdFx0Ly8gRm9yIGl0ZW1zIGluIHRoZSBtaWRkbGUsIGxvY2sgdG8gdGhlIG5lYXJlc3QgZW5kXHJcblx0XHRcdFx0Y29uc3QgZGlzdGFuY2VUb1N0YXJ0ID0gY3VycmVudEluZGV4O1xyXG5cdFx0XHRcdGNvbnN0IGRpc3RhbmNlVG9FbmQgPSB0b3RhbEl0ZW1zIC0gMSAtIGN1cnJlbnRJbmRleDtcclxuXHRcdFx0XHRpdGVtLnN0aWNreSA9IGRpc3RhbmNlVG9TdGFydCA8PSBkaXN0YW5jZVRvRW5kID8gJ2xlZnQnIDogJ3JpZ2h0JztcclxuXHRcdFx0fVxyXG5cdFx0XHRzZXRJY29uKGxvY2tTcGFuLCAnbG9jaycpO1xyXG5cdFx0XHRsb2NrU3Bhbi5hZGRDbGFzcygndWktdHdlYWtlci1sb2NrZWQnKTtcclxuXHRcdFx0bG9ja1NwYW4uc2V0QXR0cmlidXRlKCdhcmlhLWxhYmVsJywgYExvY2tlZCB0byAke2l0ZW0uc3RpY2t5fWApO1xyXG5cdFx0fVxyXG5cdFx0XHJcblx0XHQvLyBVcGRhdGUgc3RhdHVzIGJhciBvcmRlclxyXG5cdFx0dGhpcy5wbHVnaW4uc3RhdHVzQmFyTWFuYWdlcj8ucmVvcmRlcigpO1xyXG5cdFx0dm9pZCB0aGlzLnNhdmVTZXR0aW5ncygpO1xyXG5cdH1cclxuXHJcblx0LyoqXHJcblx0ICogVG9nZ2xlIHZpc2liaWxpdHkgKGV4YWN0bHkgbGlrZSBTdGF0dXMgQmFyIE9yZ2FuaXplcilcclxuXHQgKi9cclxuXHRwcml2YXRlIHRvZ2dsZVZpc2liaWxpdHkoaXRlbTogU3RhdHVzQmFySXRlbSwgdmlzaWJpbGl0eVNwYW46IEhUTUxFbGVtZW50LCBlbnRyeTogSFRNTEVsZW1lbnQpOiB2b2lkIHtcclxuXHRcdGl0ZW0uaGlkZGVuID0gIWl0ZW0uaGlkZGVuO1xyXG5cdFx0XHJcblx0XHRpZiAoaXRlbS5oaWRkZW4pIHtcclxuXHRcdFx0ZW50cnkuYWRkQ2xhc3MoJ3VpLXR3ZWFrZXItc3RhdHVzLWJhci1yb3ctaGlkZGVuJyk7XHJcblx0XHRcdHNldEljb24odmlzaWJpbGl0eVNwYW4sICdleWUtb2ZmJyk7XHJcblx0XHRcdHZpc2liaWxpdHlTcGFuLnNldEF0dHJpYnV0ZSgnYXJpYS1sYWJlbCcsICdIaWRkZW4gLSBjbGljayB0byBzaG93Jyk7XHJcblx0XHR9IGVsc2Uge1xyXG5cdFx0XHRlbnRyeS5yZW1vdmVDbGFzcygndWktdHdlYWtlci1zdGF0dXMtYmFyLXJvdy1oaWRkZW4nKTtcclxuXHRcdFx0c2V0SWNvbih2aXNpYmlsaXR5U3BhbiwgJ2V5ZScpO1xyXG5cdFx0XHR2aXNpYmlsaXR5U3Bhbi5zZXRBdHRyaWJ1dGUoJ2FyaWEtbGFiZWwnLCAnVmlzaWJsZSAtIGNsaWNrIHRvIGhpZGUnKTtcclxuXHRcdH1cclxuXHRcdFxyXG5cdFx0dGhpcy5wbHVnaW4uc3RhdHVzQmFyTWFuYWdlcj8ucmVvcmRlcigpO1xyXG5cdFx0dm9pZCB0aGlzLnNhdmVTZXR0aW5ncygpOyAvLyBTYXZlIHRoZSBoaWRkZW4gc3RhdGVcclxuXHR9XHJcblxyXG5cclxuXHQvKipcclxuXHQgKiBSZW1vdmUgaXRlbSAoZXhhY3RseSBsaWtlIFN0YXR1cyBCYXIgT3JnYW5pemVyKVxyXG5cdCAqL1xyXG5cdHByaXZhdGUgYXN5bmMgcmVtb3ZlSXRlbShyb3dzQ29udGFpbmVyOiBIVE1MRWxlbWVudCwgaXRlbTogU3RhdHVzQmFySXRlbSwgc2V0dGluZ3M6IFVJU2V0dGluZ3MpOiBQcm9taXNlPHZvaWQ+IHtcclxuXHRcdGNvbnN0IGVudHJ5ID0gcm93c0NvbnRhaW5lci5xdWVyeVNlbGVjdG9yKGBbZGF0YS11aS10d2Vha2VyLWlkPVwiJHtpdGVtLmlkfVwiXWApIGFzIEhUTUxFbGVtZW50O1xyXG5cdFx0aWYgKGVudHJ5KSB7XHJcblx0XHRcdHJvd3NDb250YWluZXIucmVtb3ZlQ2hpbGQoZW50cnkpO1xyXG5cdFx0fVxyXG5cdFx0XHJcblx0XHRhd2FpdCB0aGlzLnBsdWdpbi5zdGF0dXNCYXJNYW5hZ2VyPy5yZW1vdmVJdGVtKGl0ZW0pO1xyXG5cdFx0XHJcblx0XHQvLyBQb3NpdGlvbiBpcyBpbXBsaWNpdCBpbiBhcnJheSBvcmRlciAobGlrZSBTdGF0dXMgQmFyIE9yZ2FuaXplcilcclxuXHRcdFxyXG5cdFx0dm9pZCB0aGlzLnNhdmVTZXR0aW5ncygpO1xyXG5cdH1cclxuXHJcblx0LyoqXHJcblx0ICogSGFuZGxlIG1vdXNlIGRvd24gZm9yIGRyYWdnaW5nIChleGFjdGx5IGxpa2UgU3RhdHVzIEJhciBPcmdhbml6ZXIpXHJcblx0ICovXHJcblx0cHJpdmF0ZSBoYW5kbGVNb3VzZURvd24oXHJcblx0XHRldmVudDogTW91c2VFdmVudCxcclxuXHRcdHJvd3NDb250YWluZXI6IEhUTUxFbGVtZW50LFxyXG5cdFx0aXRlbTogU3RhdHVzQmFySXRlbSxcclxuXHRcdHNldHRpbmdzOiBVSVNldHRpbmdzXHJcblx0KTogdm9pZCB7XHJcblx0XHRpZiAoZHJhZ2dpbmcpIHJldHVybjtcclxuXHRcdGRyYWdnaW5nID0gdHJ1ZTtcclxuXHJcblx0XHRjb25zdCBlbnRyeSA9IHJvd3NDb250YWluZXIucXVlcnlTZWxlY3RvcihgW2RhdGEtdWktdHdlYWtlci1pZD1cIiR7aXRlbS5pZH1cIl1gKSBhcyBIVE1MRWxlbWVudDtcclxuXHRcdGlmICghZW50cnkpIHJldHVybjtcclxuXHJcblx0XHQvLyBDcmVhdGUgY2xvbmVcclxuXHRcdGNvbnN0IHN0YXRpb25hcnlSb3cgPSBlbnRyeTtcclxuXHRcdHN0YXRpb25hcnlSb3cuYWRkQ2xhc3MoJ3VpLXR3ZWFrZXItc3RhdHVzLWJhci1yb3ctY2xvbmUnKTtcclxuXHJcblx0XHRjb25zdCBtb3ZhYmxlUm93ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XHJcblx0XHRtb3ZhYmxlUm93LmFkZENsYXNzKCd1aS10d2Vha2VyLXN0YXR1cy1iYXItcm93Jyk7XHJcblx0XHRtb3ZhYmxlUm93LmFkZENsYXNzKCd1aS10d2Vha2VyLXN0YXR1cy1iYXItcm93LWRyYWcnKTtcclxuXHRcdC8vIEVuc3VyZSBncmlkIHN0cnVjdHVyZSBpcyBtYWludGFpbmVkXHJcblx0XHRzZXRDc3NQcm9wcyhtb3ZhYmxlUm93LCB7XHJcblx0XHRcdGRpc3BsYXk6ICdncmlkJyxcclxuXHRcdFx0Z3JpZFRlbXBsYXRlQ29sdW1uczogJzEuMjVlbSAwLjVmciAwLjhmciAyZW0gMmVtIDJlbSAyZW0gMmVtIDJlbSdcclxuXHRcdH0pO1xyXG5cdFx0aWYgKGl0ZW0uaGlkZGVuKSBtb3ZhYmxlUm93LmFkZENsYXNzKCd1aS10d2Vha2VyLXN0YXR1cy1iYXItcm93LWhpZGRlbicpO1xyXG5cdFx0aWYgKGl0ZW0udHlwZSA9PT0gJ2V4aXN0aW5nJykge1xyXG5cdFx0XHRjb25zdCBzdGF0dXNCYXJDb250YWluZXIgPSAodGhpcy5wbHVnaW4uYXBwIGFzIHsgc3RhdHVzQmFyPzogeyBjb250YWluZXJFbD86IEhUTUxFbGVtZW50IH0gfSkuc3RhdHVzQmFyPy5jb250YWluZXJFbDtcclxuXHRcdFx0Y29uc3QgYWN0dWFsRWxlbWVudCA9IHN0YXR1c0JhckNvbnRhaW5lcj8ucXVlcnlTZWxlY3RvcihgW2RhdGEtdWktdHdlYWtlci1pZD1cIiR7aXRlbS5pZH1cIl1gKSBhcyBIVE1MRWxlbWVudDtcclxuXHRcdFx0aWYgKCFhY3R1YWxFbGVtZW50KSBtb3ZhYmxlUm93LmFkZENsYXNzKCd1aS10d2Vha2VyLXN0YXR1cy1iYXItcm93LWRpc2FibGVkJyk7XHJcblx0XHR9XHJcblxyXG5cdFx0Ly8gR2V0IHRoZSB3cmFwcGVyIGNvbnRhaW5lclxyXG5cdFx0Y29uc3Qgd3JhcHBlciA9IHJvd3NDb250YWluZXIuY2xvc2VzdCgnLnVpLXR3ZWFrZXItc3RhdHVzLWJhci1yb3dzLXdyYXBwZXInKSB8fCBcclxuXHRcdFx0cm93c0NvbnRhaW5lci5wYXJlbnRFbGVtZW50IHx8IFxyXG5cdFx0XHRyb3dzQ29udGFpbmVyO1xyXG5cdFx0d3JhcHBlci5hcHBlbmRDaGlsZChtb3ZhYmxlUm93KTtcclxuXHJcblx0XHQvLyBHZXQgcG9zaXRpb24gcmVsYXRpdmUgdG8gd3JhcHBlciAoZXhhY3RseSBsaWtlIFN0YXR1cyBCYXIgT3JnYW5pemVyKVxyXG5cdFx0Y29uc3QgY29udGFpbmVyWCA9IHdyYXBwZXIuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCkubGVmdDtcclxuXHRcdGNvbnN0IGNvbnRhaW5lclkgPSB3cmFwcGVyLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpLnRvcDtcclxuXHJcblx0XHQvLyBQb3NpdGlvbiBtb3ZhYmxlIHJvdyAoZXhhY3RseSBsaWtlIFN0YXR1cyBCYXIgT3JnYW5pemVyKVxyXG5cdFx0Y29uc3Qgc3RhdGlvbmFyeVJlY3QgPSBzdGF0aW9uYXJ5Um93LmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpO1xyXG5cdFx0c2V0Q3NzUHJvcHMobW92YWJsZVJvdywgeyBcclxuXHRcdFx0cG9zaXRpb246ICdhYnNvbHV0ZScsXHJcblx0XHRcdGxlZnQ6IChzdGF0aW9uYXJ5UmVjdC5sZWZ0IC0gY29udGFpbmVyWCkgKyAncHgnLFxyXG5cdFx0XHR0b3A6IChzdGF0aW9uYXJ5UmVjdC50b3AgLSBjb250YWluZXJZKSArICdweCcsXHJcblx0XHRcdHdpZHRoOiBzdGF0aW9uYXJ5Um93Lm9mZnNldFdpZHRoICsgJ3B4J1xyXG5cdFx0fSk7XHJcblxyXG5cdFx0Ly8gQ3JlYXRlIHNpbXBsaWZpZWQgZHJhZyBwcmV2aWV3IChkb24ndCBjbG9uZSBjb21wbGV4IGVsZW1lbnRzIHRvIGF2b2lkIGJyZWFraW5nKVxyXG5cdFx0Ly8gSnVzdCBzaG93IHRpdGxlIGFuZCBwcmV2aWV3LCBza2lwIGludGVyYWN0aXZlIGVsZW1lbnRzXHJcblx0XHRtb3ZhYmxlUm93LmNyZWF0ZVNwYW4oJ3VpLXR3ZWFrZXItc3RhdHVzLWJhci1yb3ctaGFuZGxlJyk7XHJcblx0XHRjb25zdCBkcmFnVGl0bGUgPSBtb3ZhYmxlUm93LmNyZWF0ZVNwYW4oJ3VpLXR3ZWFrZXItc3RhdHVzLWJhci1yb3ctdGl0bGUnKTtcclxuXHRcdGRyYWdUaXRsZS50ZXh0Q29udGVudCA9IGl0ZW0ubmFtZTtcclxuXHRcdGNvbnN0IGRyYWdQcmV2aWV3ID0gbW92YWJsZVJvdy5jcmVhdGVTcGFuKCd1aS10d2Vha2VyLXN0YXR1cy1iYXItcm93LXByZXZpZXcnKTtcclxuXHRcdC8vIEZvciBleGlzdGluZyBpdGVtcywgdHJ5IHRvIGNsb25lIHByZXZpZXcgaWYgYXZhaWxhYmxlXHJcblx0XHRpZiAoaXRlbS50eXBlID09PSAnZXhpc3RpbmcnKSB7XHJcblx0XHRcdGNvbnN0IHN0YXR1c0JhckNvbnRhaW5lciA9ICh0aGlzLnBsdWdpbi5hcHAgYXMgeyBzdGF0dXNCYXI/OiB7IGNvbnRhaW5lckVsPzogSFRNTEVsZW1lbnQgfSB9KS5zdGF0dXNCYXI/LmNvbnRhaW5lckVsO1xyXG5cdFx0XHRjb25zdCBhY3R1YWxFbGVtZW50ID0gc3RhdHVzQmFyQ29udGFpbmVyPy5xdWVyeVNlbGVjdG9yKGBbZGF0YS11aS10d2Vha2VyLXN0YXR1cy1iYXItaWQ9XCIke2l0ZW0uaWR9XCJdYCkgYXMgSFRNTEVsZW1lbnQ7XHJcblx0XHRcdGlmIChhY3R1YWxFbGVtZW50KSB7XHJcblx0XHRcdFx0Y29uc3QgY2xvbmVkID0gYWN0dWFsRWxlbWVudC5jbG9uZU5vZGUodHJ1ZSkgYXMgSFRNTEVsZW1lbnQ7XHJcblx0XHRcdFx0Ly8gUmVtb3ZlIHRvb2x0aXAgYXR0cmlidXRlcyBmcm9tIGNsb25lZCBlbGVtZW50XHJcblx0XHRcdFx0Y2xvbmVkLnJlbW92ZUF0dHJpYnV0ZSgnYXJpYS1sYWJlbCcpO1xyXG5cdFx0XHRcdGNsb25lZC5yZW1vdmVBdHRyaWJ1dGUoJ3RpdGxlJyk7XHJcblx0XHRcdFx0Ly8gQWxzbyByZW1vdmUgZnJvbSBhbnkgY2hpbGRyZW5cclxuXHRcdFx0XHRjbG9uZWQucXVlcnlTZWxlY3RvckFsbCgnW2FyaWEtbGFiZWxdLCBbdGl0bGVdJykuZm9yRWFjaChlbCA9PiB7XHJcblx0XHRcdFx0XHRlbC5yZW1vdmVBdHRyaWJ1dGUoJ2FyaWEtbGFiZWwnKTtcclxuXHRcdFx0XHRcdGVsLnJlbW92ZUF0dHJpYnV0ZSgndGl0bGUnKTtcclxuXHRcdFx0XHR9KTtcclxuXHRcdFx0XHRkcmFnUHJldmlldy5hcHBlbmRDaGlsZChjbG9uZWQpO1xyXG5cdFx0XHR9XHJcblx0XHR9IGVsc2UgaWYgKGl0ZW0uaWNvbikge1xyXG5cdFx0XHRjb25zdCBwcmV2aWV3SWNvbiA9IGRyYWdQcmV2aWV3LmNyZWF0ZVNwYW4oJ3N0YXR1cy1iYXItaXRlbSBjbGlja2FibGUtaWNvbicpO1xyXG5cdFx0XHRzZXRJY29uKHByZXZpZXdJY29uLCBpdGVtLmljb24pO1xyXG5cdFx0XHQvLyBSZW1vdmUgYW55IHRvb2x0aXAgYXR0cmlidXRlcyBmcm9tIGRyYWcgcHJldmlld1xyXG5cdFx0XHRwcmV2aWV3SWNvbi5yZW1vdmVBdHRyaWJ1dGUoJ2FyaWEtbGFiZWwnKTtcclxuXHRcdFx0cHJldmlld0ljb24ucmVtb3ZlQXR0cmlidXRlKCd0aXRsZScpO1xyXG5cdFx0XHRpZiAoaXRlbS5jb2xvciAmJiBpdGVtLmNvbG9yICE9PSAnIzAwMDAwMCcpIHtcclxuXHRcdFx0XHRzZXRDc3NQcm9wcyhwcmV2aWV3SWNvbiwgeyBjb2xvcjogaXRlbS5jb2xvciB9KTtcclxuXHRcdFx0fVxyXG5cdFx0fVxyXG5cdFx0Ly8gQWRkIGVtcHR5IHNwYW5zIGZvciB0aGUgaWNvbiBjb2x1bW5zIHRvIG1haW50YWluIGdyaWQgc3RydWN0dXJlXHJcblx0XHRtb3ZhYmxlUm93LmNyZWF0ZVNwYW4oJ3VpLXR3ZWFrZXItc3RhdHVzLWJhci1yb3ctcmVzZXQtY29sb3InKTtcclxuXHRcdG1vdmFibGVSb3cuY3JlYXRlU3BhbigndWktdHdlYWtlci1zdGF0dXMtYmFyLXJvdy1jb2xvci1waWNrZXInKTtcclxuXHRcdC8vIERldmljZSBtb2RlIGljb24gcmVtb3ZlZCAtIHN0YXR1cyBiYXIgbm90IHZpc2libGUgb24gbW9iaWxlLCBzbyBubyBuZWVkIGZvciBkZXZpY2UgaW5kaWNhdG9yc1xyXG5cdFx0bW92YWJsZVJvdy5jcmVhdGVTcGFuKCd1aS10d2Vha2VyLXN0YXR1cy1iYXItcm93LW1kLW9ubHknKTtcclxuXHRcdGNvbnN0IGRyYWdMb2NrID0gbW92YWJsZVJvdy5jcmVhdGVTcGFuKCd1aS10d2Vha2VyLXN0YXR1cy1iYXItcm93LWxvY2snKTtcclxuXHRcdHNldEljb24oZHJhZ0xvY2ssIGl0ZW0uc3RpY2t5ID8gJ2xvY2snIDogJ3VubG9jaycpO1xyXG5cdFx0Y29uc3QgZHJhZ1Zpc2liaWxpdHkgPSBtb3ZhYmxlUm93LmNyZWF0ZVNwYW4oJ3VpLXR3ZWFrZXItc3RhdHVzLWJhci1yb3ctdmlzaWJpbGl0eScpO1xyXG5cdFx0c2V0SWNvbihkcmFnVmlzaWJpbGl0eSwgaXRlbS5oaWRkZW4gPyAnZXllLW9mZicgOiAnZXllJyk7XHJcblxyXG5cdFx0Ly8gQ2FsY3VsYXRlIG9mZnNldHMgKGV4YWN0bHkgbGlrZSBTdGF0dXMgQmFyIE9yZ2FuaXplcilcclxuXHRcdC8vIEZpcnN0IGdldCB0aGUgcG9zaXRpb24gcmVsYXRpdmUgdG8gdGhlIG1vdmFibGVSb3dcclxuXHRcdGxldCBvZmZzZXRYID0gZXZlbnQuY2xpZW50WCAtIG1vdmFibGVSb3cuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCkubGVmdDtcclxuXHRcdGxldCBvZmZzZXRZID0gZXZlbnQuY2xpZW50WSAtIG1vdmFibGVSb3cuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCkudG9wO1xyXG5cdFx0Ly8gVGhlbiBhZGQgY29udGFpbmVyIG9mZnNldCAoZXhhY3RseSBsaWtlIFN0YXR1cyBCYXIgT3JnYW5pemVyKVxyXG5cdFx0b2Zmc2V0WCA9IG9mZnNldFggKyBjb250YWluZXJYO1xyXG5cdFx0b2Zmc2V0WSA9IG9mZnNldFkgKyBjb250YWluZXJZO1xyXG5cdFx0bGV0IGluZGV4ID0gQXJyYXkuZnJvbShyb3dzQ29udGFpbmVyLmNoaWxkcmVuKS5pbmRleE9mKHN0YXRpb25hcnlSb3cpO1xyXG5cclxuXHRcdC8vIEhhbmRsZSBtb3VzZSBtb3ZlIChleGFjdGx5IGxpa2UgU3RhdHVzIEJhciBPcmdhbml6ZXIpXHJcblx0XHRjb25zdCBoYW5kbGVNb3VzZU1vdmUgPSAoZTogTW91c2VFdmVudCkgPT4ge1xyXG5cdFx0XHQvLyBVcGRhdGUgcG9zaXRpb24gKGV4YWN0bHkgbGlrZSBTdGF0dXMgQmFyIE9yZ2FuaXplcilcclxuXHRcdFx0Ly8gb2Zmc2V0WC9vZmZzZXRZIGFscmVhZHkgaW5jbHVkZSBjb250YWluZXJYL2NvbnRhaW5lcllcclxuXHRcdFx0c2V0Q3NzUHJvcHMobW92YWJsZVJvdywge1xyXG5cdFx0XHRcdGxlZnQ6IChlLmNsaWVudFggLSBvZmZzZXRYKSArICdweCcsXHJcblx0XHRcdFx0dG9wOiAoZS5jbGllbnRZIC0gb2Zmc2V0WSkgKyAncHgnXHJcblx0XHRcdH0pO1xyXG5cclxuXHRcdFx0Ly8gQ2FsY3VsYXRlIGRpc3RhbmNlIChsaWtlIFN0YXR1cyBCYXIgT3JnYW5pemVyKVxyXG5cdFx0XHRjb25zdCBkaXN0ID0gbW92YWJsZVJvdy5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKS50b3AgLSBzdGF0aW9uYXJ5Um93LmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpLnRvcDtcclxuXHRcdFx0XHJcblx0XHRcdC8vIElmIG1vdmVkIGZhciBlbm91Z2gsIGNoYW5nZSBwb3NpdGlvbiAobGlrZSBTdGF0dXMgQmFyIE9yZ2FuaXplcilcclxuXHRcdFx0aWYgKE1hdGguYWJzKGRpc3QpID4gc3RhdGlvbmFyeVJvdy5vZmZzZXRIZWlnaHQgKiAwLjc1KSB7XHJcblx0XHRcdFx0Y29uc3QgZGlyID0gZGlzdCAvIE1hdGguYWJzKGRpc3QpO1xyXG5cdFx0XHRcdGNvbnN0IG5ld0luZGV4ID0gTWF0aC5tYXgoMCwgTWF0aC5taW4oaW5kZXggKyBkaXIsIHJvd3NDb250YWluZXIuY2hpbGRyZW4ubGVuZ3RoIC0gMSkpO1xyXG5cdFx0XHRcdGlmIChuZXdJbmRleCAhPT0gaW5kZXgpIHtcclxuXHRcdFx0XHRcdC8vIE1vdmUgaW4gRE9NIChsaWtlIFN0YXR1cyBCYXIgT3JnYW5pemVyKVxyXG5cdFx0XHRcdFx0cm93c0NvbnRhaW5lci5yZW1vdmVDaGlsZChzdGF0aW9uYXJ5Um93KTtcclxuXHRcdFx0XHRcdGlmIChuZXdJbmRleCA8IHJvd3NDb250YWluZXIuY2hpbGRyZW4ubGVuZ3RoKSB7XHJcblx0XHRcdFx0XHRcdHJvd3NDb250YWluZXIuaW5zZXJ0QmVmb3JlKHN0YXRpb25hcnlSb3csIHJvd3NDb250YWluZXIuY2hpbGRyZW5bbmV3SW5kZXhdKTtcclxuXHRcdFx0XHRcdH0gZWxzZSB7XHJcblx0XHRcdFx0XHRcdHJvd3NDb250YWluZXIuYXBwZW5kQ2hpbGQoc3RhdGlvbmFyeVJvdyk7XHJcblx0XHRcdFx0XHR9XHJcblx0XHRcdFx0XHRcclxuXHRcdFx0XHRcdC8vIFVwZGF0ZSBhcnJheSBvcmRlciAoZG9uJ3Qgc2F2ZSBkdXJpbmcgZHJhZyAtIHdhaXQgZm9yIG1vdXNlIHVwKVxyXG5cdFx0XHRcdFx0aWYgKHNldHRpbmdzLnN0YXR1c0Jhckl0ZW1zKSB7XHJcblx0XHRcdFx0XHRcdGNvbnN0IG9sZEluZGV4ID0gc2V0dGluZ3Muc3RhdHVzQmFySXRlbXMuZmluZEluZGV4KChpOiBTdGF0dXNCYXJJdGVtKSA9PiBpLmlkID09PSBpdGVtLmlkKTtcclxuXHRcdFx0XHRcdFx0aWYgKG9sZEluZGV4ICE9PSAtMSAmJiBvbGRJbmRleCAhPT0gbmV3SW5kZXgpIHtcclxuXHRcdFx0XHRcdFx0XHRhcnJheU1vdmVNdXRhYmxlKHNldHRpbmdzLnN0YXR1c0Jhckl0ZW1zLCBvbGRJbmRleCwgbmV3SW5kZXgpO1xyXG5cdFx0XHRcdFx0XHRcdC8vIFVwZGF0ZSB0aGUgYWN0dWFsIHN0YXR1cyBiYXIgb3JkZXIgaW1tZWRpYXRlbHkgKHZpc3VhbCBmZWVkYmFjaylcclxuXHRcdFx0XHRcdFx0XHR0aGlzLnBsdWdpbi5zdGF0dXNCYXJNYW5hZ2VyPy5yZW9yZGVyKCk7XHJcblx0XHRcdFx0XHRcdFx0Ly8gRG9uJ3Qgc2F2ZVNldHRpbmdzIGR1cmluZyBkcmFnIC0gd2FpdCBmb3IgbW91c2UgdXAgdG8gc2F2ZSBwb3NpdGlvblxyXG5cdFx0XHRcdFx0XHR9XHJcblx0XHRcdFx0XHR9XHJcblx0XHRcdFx0XHRcclxuXHRcdFx0XHRcdGluZGV4ID0gbmV3SW5kZXg7XHJcblx0XHRcdFx0fVxyXG5cdFx0XHR9XHJcblx0XHR9O1xyXG5cclxuXHRcdC8vIEhhbmRsZSBtb3VzZSB1cFxyXG5cdFx0Y29uc3QgaGFuZGxlTW91c2VVcCA9ICgpID0+IHtcclxuXHRcdFx0Ly8gQ2xlYW4gdXAgZHJhZyB2aXN1YWxzXHJcblx0XHRcdHN0YXRpb25hcnlSb3cucmVtb3ZlQ2xhc3MoJ3VpLXR3ZWFrZXItc3RhdHVzLWJhci1yb3ctY2xvbmUnKTtcclxuXHRcdFx0aWYgKG1vdmFibGVSb3cucGFyZW50RWxlbWVudCA9PT0gd3JhcHBlcikge1xyXG5cdFx0XHRcdHdyYXBwZXIucmVtb3ZlQ2hpbGQobW92YWJsZVJvdyk7XHJcblx0XHRcdH1cclxuXHRcdFx0ZHJhZ2dpbmcgPSBmYWxzZTtcclxuXHRcdFx0d2luZG93LnJlbW92ZUV2ZW50TGlzdGVuZXIoJ21vdXNlbW92ZScsIGhhbmRsZU1vdXNlTW92ZSk7XHJcblx0XHRcdHdpbmRvdy5yZW1vdmVFdmVudExpc3RlbmVyKCdtb3VzZXVwJywgaGFuZGxlTW91c2VVcCk7XHJcblx0XHRcdFxyXG5cdFx0XHQvLyBVcGRhdGUgc3RhdHVzIGJhciBvcmRlciBhbmQgc2F2ZSBwb3NpdGlvbiBhZnRlciBkcmFnIGNvbXBsZXRlc1xyXG5cdFx0XHR0aGlzLnBsdWdpbi5zdGF0dXNCYXJNYW5hZ2VyPy5yZW9yZGVyKCk7XHJcblx0XHRcdHZvaWQgdGhpcy5zYXZlU2V0dGluZ3MoKTtcclxuXHRcdH07XHJcblxyXG5cdFx0d2luZG93LmFkZEV2ZW50TGlzdGVuZXIoJ21vdXNlbW92ZScsIGhhbmRsZU1vdXNlTW92ZSk7XHJcblx0XHR3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcignbW91c2V1cCcsIGhhbmRsZU1vdXNlVXApO1xyXG5cdH1cclxufVxyXG4iLCAiLyoqXHJcbiAqIEV4cGxvcmVyIFRhYiAtIEN1c3RvbSBjb21tYW5kIGJ1dHRvbnMgZm9yIGZpbGUgZXhwbG9yZXIgbmF2aWdhdGlvbiBhcmVhXHJcbiAqIEJhc2VkIG9uIFRhYkJhclRhYiwgYnV0IGZvciBleHBsb3JlciBidXR0b25zIHdpdGggbmF0aXZlIENTUyBjbGFzc2VzXHJcbiAqL1xyXG5cclxuaW1wb3J0IHsgc2V0SWNvbiB9IGZyb20gJ29ic2lkaWFuJztcclxuaW1wb3J0IHsgVGFiUmVuZGVyZXIgfSBmcm9tICcuLi9jb21tb24vVGFiUmVuZGVyZXInO1xyXG5pbXBvcnQgeyBjcmVhdGVTZXR0aW5nc0dyb3VwIH0gZnJvbSAnLi4vLi4vdXRpbHMvc2V0dGluZ3MtY29tcGF0JztcclxuaW1wb3J0IHsgQ29tbWFuZEljb25QYWlyLCBFeHBsb3JlckJ1dHRvbkl0ZW0gfSBmcm9tICcuLi8uLi90eXBlcyc7XHJcbmltcG9ydCB7IGNob29zZU5ld0NvbW1hbmQgfSBmcm9tICcuLi8uLi91dGlscy9jaG9vc2VDb21tYW5kJztcclxuaW1wb3J0IHsgSWNvblBpY2tlck1vZGFsIH0gZnJvbSAnLi4vLi4vbW9kYWxzL0ljb25QaWNrZXJNb2RhbCc7XHJcbmltcG9ydCB7IHNldENzc1Byb3BzIH0gZnJvbSAnLi4vLi4vdWlNYW5hZ2VyJztcclxuXHJcbi8vIFNpbXBsZSBhcnJheSBtb3ZlIHV0aWxpdHlcclxuZnVuY3Rpb24gYXJyYXlNb3ZlTXV0YWJsZTxUPihhcnJheTogVFtdLCBmcm9tOiBudW1iZXIsIHRvOiBudW1iZXIpOiB2b2lkIHtcclxuXHRjb25zdCBpdGVtID0gYXJyYXlbZnJvbV07XHJcblx0YXJyYXkuc3BsaWNlKGZyb20sIDEpO1xyXG5cdGFycmF5LnNwbGljZSh0bywgMCwgaXRlbSk7XHJcbn1cclxuXHJcbmV4cG9ydCBjbGFzcyBFeHBsb3JlclRhYiBleHRlbmRzIFRhYlJlbmRlcmVyIHtcclxuXHRwcml2YXRlIGV4cGFuZGVkU3RhdGVzID0gbmV3IE1hcDxzdHJpbmcsIGJvb2xlYW4+KCk7XHJcblxyXG5cdHJlbmRlcihjb250YWluZXI6IEhUTUxFbGVtZW50KTogdm9pZCB7XHJcblx0XHRjb250YWluZXIuZW1wdHkoKTtcclxuXHRcdGNvbnN0IHNldHRpbmdzID0gdGhpcy5nZXRTZXR0aW5ncygpO1xyXG5cdFx0XHJcblx0XHQvLyBFbnN1cmUgZXhwbG9yZXJDb21tYW5kcyBleGlzdHNcclxuXHRcdGlmICghc2V0dGluZ3MuZXhwbG9yZXJDb21tYW5kcykge1xyXG5cdFx0XHRzZXR0aW5ncy5leHBsb3JlckNvbW1hbmRzID0gW107XHJcblx0XHR9XHJcblxyXG5cdFx0Ly8gRW5zdXJlIGV4cGxvcmVyQnV0dG9uSXRlbXMgZXhpc3RzXHJcblx0XHRpZiAoIXNldHRpbmdzLmV4cGxvcmVyQnV0dG9uSXRlbXMpIHtcclxuXHRcdFx0c2V0dGluZ3MuZXhwbG9yZXJCdXR0b25JdGVtcyA9IFtdO1xyXG5cdFx0fVxyXG5cclxuXHRcdC8vIEVuc3VyZSBuYXRpdmVFeHBsb3JlckJ1dHRvbkNvbG9ycyBleGlzdHNcclxuXHRcdGlmICghc2V0dGluZ3MubmF0aXZlRXhwbG9yZXJCdXR0b25Db2xvcnMpIHtcclxuXHRcdFx0c2V0dGluZ3MubmF0aXZlRXhwbG9yZXJCdXR0b25Db2xvcnMgPSB7XHJcblx0XHRcdFx0bmV3Tm90ZTogdW5kZWZpbmVkLFxyXG5cdFx0XHRcdG5ld0ZvbGRlcjogdW5kZWZpbmVkLFxyXG5cdFx0XHRcdHNvcnRPcmRlcjogdW5kZWZpbmVkLFxyXG5cdFx0XHRcdGF1dG9SZXZlYWw6IHVuZGVmaW5lZCxcclxuXHRcdFx0XHRjb2xsYXBzZUFsbDogdW5kZWZpbmVkLFxyXG5cdFx0XHR9O1xyXG5cdFx0fVxyXG5cclxuXHRcdC8vIEVuc3VyZSBuYXRpdmVFeHBsb3JlckJ1dHRvbkljb25zIGV4aXN0c1xyXG5cdFx0aWYgKCFzZXR0aW5ncy5uYXRpdmVFeHBsb3JlckJ1dHRvbkljb25zKSB7XHJcblx0XHRcdHNldHRpbmdzLm5hdGl2ZUV4cGxvcmVyQnV0dG9uSWNvbnMgPSB7XHJcblx0XHRcdFx0bmV3Tm90ZTogdW5kZWZpbmVkLFxyXG5cdFx0XHRcdG5ld0ZvbGRlcjogdW5kZWZpbmVkLFxyXG5cdFx0XHRcdHNvcnRPcmRlcjogdW5kZWZpbmVkLFxyXG5cdFx0XHRcdGF1dG9SZXZlYWw6IHVuZGVmaW5lZCxcclxuXHRcdFx0XHRjb2xsYXBzZUFsbDogdW5kZWZpbmVkLFxyXG5cdFx0XHR9O1xyXG5cdFx0fVxyXG5cclxuXHRcdC8vIERvbid0IHRyaWdnZXIgY29uc29saWRhdGlvbiBvbiByZW5kZXIgLSBvbmx5IHdoZW4gc2V0dGluZ3MgYWN0dWFsbHkgY2hhbmdlXHJcblx0XHQvLyBUaGlzIHByZXZlbnRzIGZsaWNrZXJpbmcgd2hlbiBvcGVuaW5nIHNldHRpbmdzXHJcblxyXG5cdFx0Ly8gVW5pZmllZCBsaXN0IG9mIGFsbCBidXR0b25zIChuYXRpdmUsIGV4dGVybmFsLCBjdXN0b20pXHJcblx0XHRzZXR0aW5ncy5leHBsb3JlckJ1dHRvbkl0ZW1zLmZvckVhY2goKGl0ZW0sIGluZGV4KSA9PiB7XHJcblx0XHRcdHRoaXMucmVuZGVyQnV0dG9uSXRlbShjb250YWluZXIsIGl0ZW0sIGluZGV4KTtcclxuXHRcdH0pO1xyXG5cclxuXHRcdC8vIEFkZCBjb21tYW5kIGJ1dHRvbiAoYXQgdGhlIGVuZClcclxuXHRcdGlmIChzZXR0aW5ncy5leHBsb3JlckJ1dHRvbkl0ZW1zLmxlbmd0aCA+IDApIHtcclxuXHRcdFx0Ly8gQWRkIHNlcGFyYXRvclxyXG5cdFx0XHRjb250YWluZXIuY3JlYXRlRWwoJ2hyJyk7XHJcblx0XHR9XHJcblx0XHRcclxuXHRcdGNvbnN0IGFkZEdyb3VwID0gY3JlYXRlU2V0dGluZ3NHcm91cChjb250YWluZXIsIHVuZGVmaW5lZCwgJ3VpLXR3ZWFrZXInKTtcclxuXHRcdGFkZEdyb3VwLmFkZFNldHRpbmcoKHNldHRpbmcpOiB2b2lkID0+IHtcclxuXHRcdFx0c2V0dGluZ1xyXG5cdFx0XHRcdC5zZXROYW1lKCdBZGQgY29tbWFuZCcpXHJcblx0XHRcdFx0LnNldERlc2MoJ0FkZCBhIG5ldyBjb21tYW5kIGJ1dHRvbiB0byB0aGUgZmlsZSBleHBsb3JlciBuYXZpZ2F0aW9uIGFyZWEnKVxyXG5cdFx0XHRcdC5hZGRCdXR0b24oKGJ1dHRvbikgPT4ge1xyXG5cdFx0XHRcdFx0Ly8gQWRkIGljb24gdG8gdGhlIGJ1dHRvblxyXG5cdFx0XHRcdFx0Y29uc3QgYnV0dG9uRWwgPSBidXR0b24uYnV0dG9uRWw7XHJcblx0XHRcdFx0XHRjb25zdCBpY29uQ29udGFpbmVyID0gYnV0dG9uRWwuY3JlYXRlU3Bhbih7IGNsczogJ3VpLXR3ZWFrZXItYWRkLWljb24nIH0pO1xyXG5cdFx0XHRcdFx0c2V0SWNvbihpY29uQ29udGFpbmVyLCAnbHVjaWRlLWltYWdlLXBsdXMnKTtcclxuXHRcdFx0XHRcdGJ1dHRvbkVsLmluc2VydEJlZm9yZShpY29uQ29udGFpbmVyLCBidXR0b25FbC5maXJzdENoaWxkKTtcclxuXHRcdFx0XHRcdGJ1dHRvbi5zZXRCdXR0b25UZXh0KCdBZGQgY29tbWFuZCcpLnNldEN0YSgpLm9uQ2xpY2soKCkgPT4ge1xyXG5cdFx0XHRcdFx0XHR2b2lkIChhc3luYyAoKSA9PiB7XHJcblx0XHRcdFx0XHRcdFx0dHJ5IHtcclxuXHRcdFx0XHRcdFx0XHRcdGNvbnN0IHBhaXIgPSBhd2FpdCBjaG9vc2VOZXdDb21tYW5kKHRoaXMucGx1Z2luKTtcclxuXHRcdFx0XHRcdFx0XHRcdC8vIFB1c2ggdG8gZXhwbG9yZXJDb21tYW5kc1xyXG5cdFx0XHRcdFx0XHRcdFx0c2V0dGluZ3MuZXhwbG9yZXJDb21tYW5kcy5wdXNoKHBhaXIpO1xyXG5cdFx0XHRcdFx0XHRcdFx0Ly8gQ3JlYXRlIGNvcnJlc3BvbmRpbmcgRXhwbG9yZXJCdXR0b25JdGVtXHJcblx0XHRcdFx0XHRcdFx0XHRjb25zdCBpdGVtOiBFeHBsb3JlckJ1dHRvbkl0ZW0gPSB7XHJcblx0XHRcdFx0XHRcdFx0XHRcdGlkOiBgY3VzdG9tLSR7cGFpci5pZH1gLFxyXG5cdFx0XHRcdFx0XHRcdFx0XHRuYW1lOiBwYWlyLm5hbWUsXHJcblx0XHRcdFx0XHRcdFx0XHRcdGFyaWFMYWJlbDogcGFpci5uYW1lLFxyXG5cdFx0XHRcdFx0XHRcdFx0XHR0eXBlOiAnY3VzdG9tJyxcclxuXHRcdFx0XHRcdFx0XHRcdFx0Y29tbWFuZElkOiBwYWlyLmlkLFxyXG5cdFx0XHRcdFx0XHRcdFx0XHRpY29uOiBwYWlyLmljb24sXHJcblx0XHRcdFx0XHRcdFx0XHRcdGRpc3BsYXlOYW1lOiBwYWlyLmRpc3BsYXlOYW1lLFxyXG5cdFx0XHRcdFx0XHRcdFx0XHRtb2RlOiBwYWlyLm1vZGUsXHJcblx0XHRcdFx0XHRcdFx0XHRcdGNvbG9yOiBwYWlyLmNvbG9yLFxyXG5cdFx0XHRcdFx0XHRcdFx0XHRzaG93T25GaWxlVHlwZXM6IHBhaXIuc2hvd09uRmlsZVR5cGVzLFxyXG5cdFx0XHRcdFx0XHRcdFx0XHRoaWRlT25GaWxlVHlwZXM6IHBhaXIuaGlkZU9uRmlsZVR5cGVzLFxyXG5cdFx0XHRcdFx0XHRcdFx0XHR0b2dnbGVJY29uOiBwYWlyLnRvZ2dsZUljb24sXHJcblx0XHRcdFx0XHRcdFx0XHRcdHVzZUFjdGl2ZUNsYXNzOiBwYWlyLnVzZUFjdGl2ZUNsYXNzLFxyXG5cdFx0XHRcdFx0XHRcdFx0XHRoaWRkZW46IGZhbHNlLFxyXG5cdFx0XHRcdFx0XHRcdFx0fTtcclxuXHRcdFx0XHRcdFx0XHRcdHNldHRpbmdzLmV4cGxvcmVyQnV0dG9uSXRlbXMucHVzaChpdGVtKTtcclxuXHRcdFx0XHRcdFx0XHRcdGF3YWl0IHRoaXMuc2F2ZVNldHRpbmdzKCk7XHJcblx0XHRcdFx0XHRcdFx0XHR0aGlzLnBsdWdpbi5leHBsb3Jlck1hbmFnZXI/LnJlb3JkZXIoKTtcclxuXHRcdFx0XHRcdFx0XHRcdHRoaXMucmVuZGVyKGNvbnRhaW5lcik7XHJcblx0XHRcdFx0XHRcdFx0fSBjYXRjaCB7XHJcblx0XHRcdFx0XHRcdFx0XHQvLyBVc2VyIGNhbmNlbGxlZFxyXG5cdFx0XHRcdFx0XHRcdH1cclxuXHRcdFx0XHRcdFx0fSkoKTtcclxuXHRcdFx0XHRcdH0pO1xyXG5cdFx0XHRcdH0pO1xyXG5cdFx0fSk7XHJcblxyXG5cdFx0Ly8gQWRkIHdhcm5pbmcgbWVzc2FnZSAobGlrZSBDb21tYW5kZXIgcGx1Z2luKVxyXG5cdFx0Y29uc3Qgd2FybmluZ0RpdiA9IGNvbnRhaW5lci5jcmVhdGVFbCgnZGl2Jywge1xyXG5cdFx0XHRjbHM6ICdjYWxsb3V0JyxcclxuXHRcdFx0YXR0cjogeyAnZGF0YS1jYWxsb3V0JzogJ3dhcm5pbmcnIH1cclxuXHRcdH0pO1xyXG5cdFx0d2FybmluZ0Rpdi5jcmVhdGVFbCgncCcsIHtcclxuXHRcdFx0dGV4dDogJ1doZW4gY2xpY2tpbmcgb24gYSBjb21tYW5kIGluIHRoZSBleHBsb3JlciwgdGhlIGV4cGxvcmVyIHZpZXcgd2lsbCBiZWNvbWUgZm9jdXNlZC4gVGhpcyBtaWdodCBpbnRlcmZlcmUgd2l0aCBjb21tYW5kcyB0aGF0IGFyZSBzdXBwb3NlZCB0byBiZSBleGVjdXRlZCBvbiBhbiBhY3RpdmUgZmlsZSBvciBleHBsb3Jlci4nXHJcblx0XHR9KTtcclxuXHR9XHJcblxyXG5cdHByaXZhdGUgcmVuZGVyTmF0aXZlQnV0dG9uQ29udHJvbHMoY29udGFpbmVyOiBIVE1MRWxlbWVudCwgbWFpbkNvbnRhaW5lcj86IEhUTUxFbGVtZW50KTogdm9pZCB7XHJcblx0XHQvLyBDbGVhciBjb250YWluZXIgaWYgcmUtcmVuZGVyaW5nXHJcblx0XHRjb250YWluZXIuZW1wdHkoKTtcclxuXHRcdGNvbnN0IHNldHRpbmdzID0gdGhpcy5nZXRTZXR0aW5ncygpO1xyXG5cdFx0Y29uc3QgZ3JvdXAgPSBjcmVhdGVTZXR0aW5nc0dyb3VwKGNvbnRhaW5lciwgJ05hdGl2ZSBleHBsb3JlciBidXR0b25zJywgJ3VpLXR3ZWFrZXInKTtcclxuXHRcdFxyXG5cdFx0Ly8gVXNlIG1haW5Db250YWluZXIgZm9yIHNjcm9sbCBwb3NpdGlvbiBpZiBwcm92aWRlZCwgb3RoZXJ3aXNlIHVzZSBjb250YWluZXJcclxuXHRcdGNvbnN0IHNjcm9sbENvbnRhaW5lciA9IG1haW5Db250YWluZXIgfHwgY29udGFpbmVyO1xyXG5cclxuXHRcdC8vIEhlbHBlciB0byByZW5kZXIgYSBuYXRpdmUgYnV0dG9uIGNvbnRyb2xcclxuXHRcdGNvbnN0IHJlbmRlck5hdGl2ZUJ1dHRvbiA9IChcclxuXHRcdFx0bmFtZTogc3RyaW5nLFxyXG5cdFx0XHRzZXR0aW5nS2V5OiAnbmV3Tm90ZUJ1dHRvbicgfCAnbmV3Rm9sZGVyQnV0dG9uJyB8ICdzb3J0T3JkZXJCdXR0b24nIHwgJ2F1dG9SZXZlYWxCdXR0b24nIHwgJ2NvbGxhcHNlQWxsQnV0dG9uJyxcclxuXHRcdFx0Y29sb3JLZXk6ICduZXdOb3RlJyB8ICduZXdGb2xkZXInIHwgJ3NvcnRPcmRlcicgfCAnYXV0b1JldmVhbCcgfCAnY29sbGFwc2VBbGwnXHJcblx0XHQpID0+IHtcclxuXHRcdFx0Y29uc3QgaXNIaWRkZW4gPSBzZXR0aW5nc1tzZXR0aW5nS2V5XTtcclxuXHRcdFx0Y29uc3QgY29sb3IgPSBzZXR0aW5ncy5uYXRpdmVFeHBsb3JlckJ1dHRvbkNvbG9ycz8uW2NvbG9yS2V5XTtcclxuXHRcdFx0Y29uc3QgaWNvbk92ZXJyaWRlID0gc2V0dGluZ3MubmF0aXZlRXhwbG9yZXJCdXR0b25JY29ucz8uW2NvbG9yS2V5XTtcclxuXHJcblx0XHRcdGdyb3VwLmFkZFNldHRpbmcoKHNldHRpbmcpOiB2b2lkID0+IHtcclxuXHRcdFx0XHRzZXR0aW5nXHJcblx0XHRcdFx0XHQuc2V0TmFtZShuYW1lKVxyXG5cdFx0XHRcdFx0LnNldERlc2MoJycpXHJcblx0XHRcdFx0XHQuYWRkRXh0cmFCdXR0b24oKGJ1dHRvbikgPT4ge1xyXG5cdFx0XHRcdFx0XHQvLyBFeWViYWxsIHRvZ2dsZSAtIGV5ZSB3aGVuIHZpc2libGUsIGV5ZS1vZmYgd2hlbiBoaWRkZW5cclxuXHRcdFx0XHRcdFx0Y29uc3QgaWNvbkVsID0gYnV0dG9uLmV4dHJhU2V0dGluZ3NFbDtcclxuXHRcdFx0XHRcdFx0c2V0SWNvbihpY29uRWwsIGlzSGlkZGVuID8gJ2V5ZS1vZmYnIDogJ2V5ZScpO1xyXG5cdFx0XHRcdFx0XHRidXR0b24uc2V0VG9vbHRpcChpc0hpZGRlbiA/ICdTaG93IGJ1dHRvbicgOiAnSGlkZSBidXR0b24nKTtcclxuXHRcdFx0XHRcdFx0YnV0dG9uLm9uQ2xpY2soKCkgPT4ge1xyXG5cdFx0XHRcdFx0XHRcdHZvaWQgKGFzeW5jICgpID0+IHtcclxuXHRcdFx0XHRcdFx0XHRcdC8vIFJlYWQgY3VycmVudCB2YWx1ZSBmcm9tIHNldHRpbmdzIGluc3RlYWQgb2YgdXNpbmcgY2FwdHVyZWQgaXNIaWRkZW5cclxuXHRcdFx0XHRcdFx0XHRcdGNvbnN0IGN1cnJlbnRWYWx1ZSA9IHNldHRpbmdzW3NldHRpbmdLZXldO1xyXG5cdFx0XHRcdFx0XHRcdFx0c2V0dGluZ3Nbc2V0dGluZ0tleV0gPSAhY3VycmVudFZhbHVlO1xyXG5cdFx0XHRcdFx0XHRcdFx0YXdhaXQgdGhpcy5zYXZlU2V0dGluZ3MoKTtcclxuXHRcdFx0XHRcdFx0XHRcdC8vIFVwZGF0ZSBpY29uIGFuZCB0b29sdGlwIGluIHBsYWNlIGluc3RlYWQgb2YgZnVsbCByZS1yZW5kZXJcclxuXHRcdFx0XHRcdFx0XHRcdGNvbnN0IG5ld0lzSGlkZGVuID0gc2V0dGluZ3Nbc2V0dGluZ0tleV07XHJcblx0XHRcdFx0XHRcdFx0XHRzZXRJY29uKGljb25FbCwgbmV3SXNIaWRkZW4gPyAnZXllLW9mZicgOiAnZXllJyk7XHJcblx0XHRcdFx0XHRcdFx0XHRidXR0b24uc2V0VG9vbHRpcChuZXdJc0hpZGRlbiA/ICdTaG93IGJ1dHRvbicgOiAnSGlkZSBidXR0b24nKTtcclxuXHRcdFx0XHRcdFx0XHR9KSgpO1xyXG5cdFx0XHRcdFx0XHR9KTtcclxuXHRcdFx0XHRcdFx0Ly8gUHJldmVudCBjb2xsYXBzZSBvbiBjbGlja1xyXG5cdFx0XHRcdFx0XHRidXR0b24uZXh0cmFTZXR0aW5nc0VsLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKGUpID0+IGUuc3RvcFByb3BhZ2F0aW9uKCkpO1xyXG5cdFx0XHRcdFx0fSk7XHJcblxyXG5cdFx0XHRcdC8vIENvbG9yIHBpY2tlciAob25seSBzaG93IGlmIGNvbG9yIGlzIHNldCwgd2l0aCByZXNldCBidXR0b24pXHJcblx0XHRcdFx0aWYgKGNvbG9yKSB7XHJcblx0XHRcdFx0XHRzZXR0aW5nLmFkZENvbG9yUGlja2VyKChjb2xvclBpY2tlcikgPT4ge1xyXG5cdFx0XHRcdFx0XHRjb2xvclBpY2tlci5zZXRWYWx1ZShjb2xvcik7XHJcblx0XHRcdFx0XHRcdFxyXG5cdFx0XHRcdFx0XHRjb25zdCBjb250cm9sRWwgPSBzZXR0aW5nLmNvbnRyb2xFbDtcclxuXHRcdFx0XHRcdFx0XHJcblx0XHRcdFx0XHRcdC8vIFByZXZlbnQgY29sbGFwc2UgYW5kIHNjcm9sbCBqdW1waW5nIG9uIGNvbG9yIHBpY2tlciBjbGlja3NcclxuXHRcdFx0XHRcdFx0Y29udHJvbEVsLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKGUpID0+IGUuc3RvcFByb3BhZ2F0aW9uKCkpO1xyXG5cdFx0XHRcdFx0XHRcclxuXHRcdFx0XHRcdFx0Ly8gQWRkIGV2ZW50IGhhbmRsZXIgdG8gdGhlIGFjdHVhbCBjb2xvciBpbnB1dCBlbGVtZW50XHJcblx0XHRcdFx0XHRcdHNldFRpbWVvdXQoKCkgPT4ge1xyXG5cdFx0XHRcdFx0XHRcdGNvbnN0IGNvbG9ySW5wdXQgPSBjb250cm9sRWwucXVlcnlTZWxlY3RvcignaW5wdXRbdHlwZT1cImNvbG9yXCJdJykgYXMgSFRNTElucHV0RWxlbWVudDtcclxuXHRcdFx0XHRcdFx0XHRpZiAoY29sb3JJbnB1dCkge1xyXG5cdFx0XHRcdFx0XHRcdFx0Y29sb3JJbnB1dC5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIChlKSA9PiBlLnN0b3BQcm9wYWdhdGlvbigpKTtcclxuXHRcdFx0XHRcdFx0XHR9XHJcblx0XHRcdFx0XHRcdH0sIDApO1xyXG5cdFx0XHRcdFx0XHRcclxuXHRcdFx0XHRcdFx0Ly8gQWRkIHJlc2V0IGJ1dHRvblxyXG5cdFx0XHRcdFx0XHRzZXRUaW1lb3V0KCgpID0+IHtcclxuXHRcdFx0XHRcdFx0XHRjb25zdCBjb2xvclBpY2tlckVsID0gY29udHJvbEVsLnF1ZXJ5U2VsZWN0b3IoJy5jb2xvci1waWNrZXInKSB8fCBjb250cm9sRWwubGFzdEVsZW1lbnRDaGlsZDtcclxuXHRcdFx0XHRcdFx0XHRcclxuXHRcdFx0XHRcdFx0XHRjb25zdCByZXNldEJ1dHRvbiA9IGNvbnRyb2xFbC5jcmVhdGVFbCgnYnV0dG9uJywge1xyXG5cdFx0XHRcdFx0XHRcdFx0Y2xzOiAnY2xpY2thYmxlLWljb24gdWktdHdlYWtlci1jb2xvci1yZXNldCcsXHJcblx0XHRcdFx0XHRcdFx0XHRhdHRyOiB7ICdhcmlhLWxhYmVsJzogJ1Jlc2V0IHRvIGRlZmF1bHQgY29sb3InIH1cclxuXHRcdFx0XHRcdFx0XHR9KTtcclxuXHRcdFx0XHRcdFx0XHRzZXRJY29uKHJlc2V0QnV0dG9uLCAnbHVjaWRlLXJvdGF0ZS1jdycpO1xyXG5cdFx0XHRcdFx0XHRcdHNldENzc1Byb3BzKHJlc2V0QnV0dG9uLCB7IG1hcmdpblJpZ2h0OiAnMC41cmVtJyB9KTtcclxuXHRcdFx0XHRcdFx0XHRyZXNldEJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIChlKSA9PiB7XHJcblx0XHRcdFx0XHRcdFx0XHRlLnN0b3BQcm9wYWdhdGlvbigpO1xyXG5cdFx0XHRcdFx0XHRcdFx0ZS5zdG9wSW1tZWRpYXRlUHJvcGFnYXRpb24oKTtcclxuXHRcdFx0XHRcdFx0XHRcdGUucHJldmVudERlZmF1bHQoKTtcclxuXHRcdFx0XHRcdFx0XHRcdC8vIFByZXZlbnQgc2Nyb2xsIGp1bXBpbmdcclxuXHRcdFx0XHRcdFx0XHRcdGNvbnN0IHNjcm9sbFBvcyA9IHNjcm9sbENvbnRhaW5lci5zY3JvbGxUb3A7XHJcblx0XHRcdFx0XHRcdFx0XHR2b2lkIChhc3luYyAoKSA9PiB7XHJcblx0XHRcdFx0XHRcdFx0XHRcdGlmICghc2V0dGluZ3MubmF0aXZlRXhwbG9yZXJCdXR0b25Db2xvcnMpIHtcclxuXHRcdFx0XHRcdFx0XHRcdFx0XHRzZXR0aW5ncy5uYXRpdmVFeHBsb3JlckJ1dHRvbkNvbG9ycyA9IHt9O1xyXG5cdFx0XHRcdFx0XHRcdFx0XHR9XHJcblx0XHRcdFx0XHRcdFx0XHRcdHNldHRpbmdzLm5hdGl2ZUV4cGxvcmVyQnV0dG9uQ29sb3JzW2NvbG9yS2V5XSA9IHVuZGVmaW5lZDtcclxuXHRcdFx0XHRcdFx0XHRcdFx0YXdhaXQgdGhpcy5zYXZlU2V0dGluZ3MoKTtcclxuXHRcdFx0XHRcdFx0XHRcdFx0Ly8gQXBwbHkgY29sb3JzIHRvIG5hdGl2ZSBidXR0b25zIChyZW1vdmUgY29sb3IpXHJcblx0XHRcdFx0XHRcdFx0XHRcdHRoaXMucGx1Z2luLmV4cGxvcmVyTWFuYWdlcj8uYXBwbHlOYXRpdmVJY29uT3ZlcnJpZGVzKCk7XHJcblx0XHRcdFx0XHRcdFx0XHRcdC8vIFJlLXJlbmRlciBqdXN0IHRoZSBuYXRpdmUgYnV0dG9ucyBzZWN0aW9uXHJcblx0XHRcdFx0XHRcdFx0XHRcdHRoaXMucmVuZGVyTmF0aXZlQnV0dG9uQ29udHJvbHMoY29udGFpbmVyLCBtYWluQ29udGFpbmVyKTtcclxuXHRcdFx0XHRcdFx0XHRcdFx0Ly8gUmVzdG9yZSBzY3JvbGwgcG9zaXRpb24gYWZ0ZXIgcmVuZGVyXHJcblx0XHRcdFx0XHRcdFx0XHRcdHJlcXVlc3RBbmltYXRpb25GcmFtZSgoKSA9PiB7XHJcblx0XHRcdFx0XHRcdFx0XHRcdFx0c2Nyb2xsQ29udGFpbmVyLnNjcm9sbFRvcCA9IHNjcm9sbFBvcztcclxuXHRcdFx0XHRcdFx0XHRcdFx0fSk7XHJcblx0XHRcdFx0XHRcdFx0XHR9KSgpO1xyXG5cdFx0XHRcdFx0XHRcdH0pO1xyXG5cdFx0XHRcdFx0XHRcdFxyXG5cdFx0XHRcdFx0XHRcdGlmIChjb2xvclBpY2tlckVsKSB7XHJcblx0XHRcdFx0XHRcdFx0XHRjb250cm9sRWwuaW5zZXJ0QmVmb3JlKHJlc2V0QnV0dG9uLCBjb2xvclBpY2tlckVsKTtcclxuXHRcdFx0XHRcdFx0XHR9IGVsc2Uge1xyXG5cdFx0XHRcdFx0XHRcdFx0Y29udHJvbEVsLmluc2VydEJlZm9yZShyZXNldEJ1dHRvbiwgY29udHJvbEVsLmZpcnN0Q2hpbGQpO1xyXG5cdFx0XHRcdFx0XHRcdH1cclxuXHRcdFx0XHRcdFx0fSwgMCk7XHJcblx0XHRcdFx0XHRcdFxyXG5cdFx0XHRcdFx0XHRjb2xvclBpY2tlci5vbkNoYW5nZSgodmFsdWUpID0+IHtcclxuXHRcdFx0XHRcdFx0XHR2b2lkIChhc3luYyAoKSA9PiB7XHJcblx0XHRcdFx0XHRcdFx0XHRpZiAoIXNldHRpbmdzLm5hdGl2ZUV4cGxvcmVyQnV0dG9uQ29sb3JzKSB7XHJcblx0XHRcdFx0XHRcdFx0XHRcdHNldHRpbmdzLm5hdGl2ZUV4cGxvcmVyQnV0dG9uQ29sb3JzID0ge307XHJcblx0XHRcdFx0XHRcdFx0XHR9XHJcblx0XHRcdFx0XHRcdFx0XHRzZXR0aW5ncy5uYXRpdmVFeHBsb3JlckJ1dHRvbkNvbG9yc1tjb2xvcktleV0gPSB2YWx1ZTtcclxuXHRcdFx0XHRcdFx0XHRcdGF3YWl0IHRoaXMuc2F2ZVNldHRpbmdzKCk7XHJcblx0XHRcdFx0XHRcdFx0XHQvLyBBcHBseSBjb2xvcnMgdG8gbmF0aXZlIGJ1dHRvbnNcclxuXHRcdFx0XHRcdFx0XHRcdHRoaXMucGx1Z2luLmV4cGxvcmVyTWFuYWdlcj8uYXBwbHlOYXRpdmVJY29uT3ZlcnJpZGVzKCk7XHJcblx0XHRcdFx0XHRcdFx0fSkoKTtcclxuXHRcdFx0XHRcdFx0fSk7XHJcblx0XHRcdFx0XHR9KTtcclxuXHRcdFx0XHR9IGVsc2Uge1xyXG5cdFx0XHRcdFx0Ly8gU2hvdyBidXR0b24gdG8gYWRkIGNvbG9yIHBpY2tlclxyXG5cdFx0XHRcdFx0c2V0dGluZy5hZGRCdXR0b24oKGJ1dHRvbikgPT4ge1xyXG5cdFx0XHRcdFx0XHRidXR0b24uc2V0QnV0dG9uVGV4dCgnU2V0IGNvbG9yLi4uJykub25DbGljaygoKSA9PiB7XHJcblx0XHRcdFx0XHRcdFx0Ly8gUHJldmVudCBzY3JvbGwganVtcGluZ1xyXG5cdFx0XHRcdFx0XHRcdGNvbnN0IHNjcm9sbFBvcyA9IHNjcm9sbENvbnRhaW5lci5zY3JvbGxUb3A7XHJcblx0XHRcdFx0XHRcdFx0Ly8gSW5pdGlhbGl6ZSBjb2xvciB0byBibGFjayB0byBzaG93IHBpY2tlclxyXG5cdFx0XHRcdFx0XHRcdGlmICghc2V0dGluZ3MubmF0aXZlRXhwbG9yZXJCdXR0b25Db2xvcnMpIHtcclxuXHRcdFx0XHRcdFx0XHRcdHNldHRpbmdzLm5hdGl2ZUV4cGxvcmVyQnV0dG9uQ29sb3JzID0ge307XHJcblx0XHRcdFx0XHRcdFx0fVxyXG5cdFx0XHRcdFx0XHRcdHNldHRpbmdzLm5hdGl2ZUV4cGxvcmVyQnV0dG9uQ29sb3JzW2NvbG9yS2V5XSA9ICcjMDAwMDAwJztcclxuXHRcdFx0XHRcdFx0XHR2b2lkIChhc3luYyAoKSA9PiB7XHJcblx0XHRcdFx0XHRcdFx0XHRhd2FpdCB0aGlzLnNhdmVTZXR0aW5ncygpO1xyXG5cdFx0XHRcdFx0XHRcdFx0Ly8gQXBwbHkgY29sb3JzIHRvIG5hdGl2ZSBidXR0b25zXHJcblx0XHRcdFx0XHRcdFx0XHR0aGlzLnBsdWdpbi5leHBsb3Jlck1hbmFnZXI/LmFwcGx5TmF0aXZlSWNvbk92ZXJyaWRlcygpO1xyXG5cdFx0XHRcdFx0XHRcdFx0Ly8gUmUtcmVuZGVyIGp1c3QgdGhlIG5hdGl2ZSBidXR0b25zIHNlY3Rpb25cclxuXHRcdFx0XHRcdFx0XHRcdHRoaXMucmVuZGVyTmF0aXZlQnV0dG9uQ29udHJvbHMoY29udGFpbmVyLCBtYWluQ29udGFpbmVyKTtcclxuXHRcdFx0XHRcdFx0XHRcdC8vIFJlc3RvcmUgc2Nyb2xsIHBvc2l0aW9uIGFmdGVyIHJlbmRlclxyXG5cdFx0XHRcdFx0XHRcdFx0cmVxdWVzdEFuaW1hdGlvbkZyYW1lKCgpID0+IHtcclxuXHRcdFx0XHRcdFx0XHRcdFx0c2Nyb2xsQ29udGFpbmVyLnNjcm9sbFRvcCA9IHNjcm9sbFBvcztcclxuXHRcdFx0XHRcdFx0XHRcdH0pO1xyXG5cdFx0XHRcdFx0XHRcdH0pKCk7XHJcblx0XHRcdFx0XHRcdH0pO1xyXG5cdFx0XHRcdFx0XHQvLyBQcmV2ZW50IGNvbGxhcHNlIG9uIGJ1dHRvbiBjbGlja1xyXG5cdFx0XHRcdFx0XHRidXR0b24uYnV0dG9uRWwuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoZSkgPT4gZS5zdG9wUHJvcGFnYXRpb24oKSk7XHJcblx0XHRcdFx0XHR9KTtcclxuXHRcdFx0XHR9XHJcblxyXG5cdFx0XHRcdC8vIEljb24gb3ZlcnJpZGUgKGFsd2F5cyBzaG93IGljb24gcGlja2VyIGJ1dHRvbilcclxuXHRcdFx0XHRzZXR0aW5nLmFkZEJ1dHRvbigoYnV0dG9uKSA9PiB7XHJcblx0XHRcdFx0XHRjb25zdCBjdXJyZW50SWNvbiA9IGljb25PdmVycmlkZSB8fCAnRGVmYXVsdCc7XHJcblx0XHRcdFx0XHRidXR0b24uc2V0QnV0dG9uVGV4dChjdXJyZW50SWNvbiA9PT0gJ0RlZmF1bHQnID8gJ1NldCBpY29uLi4uJyA6IGN1cnJlbnRJY29uKS5vbkNsaWNrKCgpID0+IHtcclxuXHRcdFx0XHRcdFx0Y29uc3QgbW9kYWwgPSBuZXcgSWNvblBpY2tlck1vZGFsKHRoaXMuYXBwLCAoaWNvbklkKSA9PiB7XHJcblx0XHRcdFx0XHRcdFx0dm9pZCAoYXN5bmMgKCkgPT4ge1xyXG5cdFx0XHRcdFx0XHRcdFx0Ly8gUHJldmVudCBzY3JvbGwganVtcGluZ1xyXG5cdFx0XHRcdFx0XHRcdFx0Y29uc3Qgc2Nyb2xsUG9zID0gc2Nyb2xsQ29udGFpbmVyLnNjcm9sbFRvcDtcclxuXHRcdFx0XHRcdFx0XHRcdGlmICghc2V0dGluZ3MubmF0aXZlRXhwbG9yZXJCdXR0b25JY29ucykge1xyXG5cdFx0XHRcdFx0XHRcdFx0XHRzZXR0aW5ncy5uYXRpdmVFeHBsb3JlckJ1dHRvbkljb25zID0ge307XHJcblx0XHRcdFx0XHRcdFx0XHR9XHJcblx0XHRcdFx0XHRcdFx0XHRpZiAoaWNvbklkKSB7XHJcblx0XHRcdFx0XHRcdFx0XHRcdHNldHRpbmdzLm5hdGl2ZUV4cGxvcmVyQnV0dG9uSWNvbnNbY29sb3JLZXldID0gaWNvbklkO1xyXG5cdFx0XHRcdFx0XHRcdFx0fSBlbHNlIHtcclxuXHRcdFx0XHRcdFx0XHRcdFx0c2V0dGluZ3MubmF0aXZlRXhwbG9yZXJCdXR0b25JY29uc1tjb2xvcktleV0gPSB1bmRlZmluZWQ7XHJcblx0XHRcdFx0XHRcdFx0XHR9XHJcblx0XHRcdFx0XHRcdFx0XHRhd2FpdCB0aGlzLnNhdmVTZXR0aW5ncygpO1xyXG5cdFx0XHRcdFx0XHRcdFx0Ly8gQXBwbHkgaWNvbiBvdmVycmlkZSB0byBuYXRpdmUgYnV0dG9uc1xyXG5cdFx0XHRcdFx0XHRcdFx0dGhpcy5wbHVnaW4uZXhwbG9yZXJNYW5hZ2VyPy5hcHBseU5hdGl2ZUljb25PdmVycmlkZXMoKTtcclxuXHRcdFx0XHRcdFx0XHRcdC8vIFJlLXJlbmRlciBqdXN0IHRoZSBuYXRpdmUgYnV0dG9ucyBzZWN0aW9uXHJcblx0XHRcdFx0XHRcdFx0XHR0aGlzLnJlbmRlck5hdGl2ZUJ1dHRvbkNvbnRyb2xzKGNvbnRhaW5lciwgbWFpbkNvbnRhaW5lcik7XHJcblx0XHRcdFx0XHRcdFx0XHQvLyBSZXN0b3JlIHNjcm9sbCBwb3NpdGlvbiBhZnRlciByZW5kZXJcclxuXHRcdFx0XHRcdFx0XHRcdHJlcXVlc3RBbmltYXRpb25GcmFtZSgoKSA9PiB7XHJcblx0XHRcdFx0XHRcdFx0XHRcdHNjcm9sbENvbnRhaW5lci5zY3JvbGxUb3AgPSBzY3JvbGxQb3M7XHJcblx0XHRcdFx0XHRcdFx0XHR9KTtcclxuXHRcdFx0XHRcdFx0XHR9KSgpO1xyXG5cdFx0XHRcdFx0XHR9KTtcclxuXHRcdFx0XHRcdFx0bW9kYWwub3BlbigpO1xyXG5cdFx0XHRcdFx0fSk7XHJcblx0XHRcdFx0XHQvLyBQcmV2ZW50IGNvbGxhcHNlIG9uIGJ1dHRvbiBjbGlja1xyXG5cdFx0XHRcdFx0YnV0dG9uLmJ1dHRvbkVsLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKGUpID0+IGUuc3RvcFByb3BhZ2F0aW9uKCkpO1xyXG5cdFx0XHRcdFx0XHJcblx0XHRcdFx0XHQvLyBBZGQgcmVzZXQgYnV0dG9uIGlmIGljb24gaXMgc2V0XHJcblx0XHRcdFx0XHRpZiAoaWNvbk92ZXJyaWRlKSB7XHJcblx0XHRcdFx0XHRcdHNldFRpbWVvdXQoKCkgPT4ge1xyXG5cdFx0XHRcdFx0XHRcdGNvbnN0IGNvbnRyb2xFbCA9IHNldHRpbmcuY29udHJvbEVsO1xyXG5cdFx0XHRcdFx0XHRcdGNvbnN0IGJ1dHRvbkVsID0gY29udHJvbEVsLnF1ZXJ5U2VsZWN0b3IoJ2J1dHRvbicpIHx8IGNvbnRyb2xFbC5sYXN0RWxlbWVudENoaWxkO1xyXG5cdFx0XHRcdFx0XHRcdFxyXG5cdFx0XHRcdFx0XHRcdGNvbnN0IHJlc2V0QnV0dG9uID0gY29udHJvbEVsLmNyZWF0ZUVsKCdidXR0b24nLCB7XHJcblx0XHRcdFx0XHRcdFx0XHRjbHM6ICdjbGlja2FibGUtaWNvbiB1aS10d2Vha2VyLWljb24tcmVzZXQnLFxyXG5cdFx0XHRcdFx0XHRcdFx0YXR0cjogeyAnYXJpYS1sYWJlbCc6ICdSZXNldCB0byBkZWZhdWx0IGljb24nIH1cclxuXHRcdFx0XHRcdFx0XHR9KTtcclxuXHRcdFx0XHRcdFx0XHRzZXRJY29uKHJlc2V0QnV0dG9uLCAnbHVjaWRlLXJvdGF0ZS1jdycpO1xyXG5cdFx0XHRcdFx0XHRcdHNldENzc1Byb3BzKHJlc2V0QnV0dG9uLCB7IG1hcmdpblJpZ2h0OiAnMC41cmVtJyB9KTtcclxuXHRcdFx0XHRcdFx0XHRyZXNldEJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIChlKSA9PiB7XHJcblx0XHRcdFx0XHRcdFx0XHRlLnN0b3BQcm9wYWdhdGlvbigpO1xyXG5cdFx0XHRcdFx0XHRcdFx0ZS5zdG9wSW1tZWRpYXRlUHJvcGFnYXRpb24oKTtcclxuXHRcdFx0XHRcdFx0XHRcdGUucHJldmVudERlZmF1bHQoKTtcclxuXHRcdFx0XHRcdFx0XHRcdC8vIFByZXZlbnQgc2Nyb2xsIGp1bXBpbmdcclxuXHRcdFx0XHRcdFx0XHRcdGNvbnN0IHNjcm9sbFBvcyA9IHNjcm9sbENvbnRhaW5lci5zY3JvbGxUb3A7XHJcblx0XHRcdFx0XHRcdFx0XHR2b2lkIChhc3luYyAoKSA9PiB7XHJcblx0XHRcdFx0XHRcdFx0XHRcdGlmICghc2V0dGluZ3MubmF0aXZlRXhwbG9yZXJCdXR0b25JY29ucykge1xyXG5cdFx0XHRcdFx0XHRcdFx0XHRcdHNldHRpbmdzLm5hdGl2ZUV4cGxvcmVyQnV0dG9uSWNvbnMgPSB7fTtcclxuXHRcdFx0XHRcdFx0XHRcdFx0fVxyXG5cdFx0XHRcdFx0XHRcdFx0XHRzZXR0aW5ncy5uYXRpdmVFeHBsb3JlckJ1dHRvbkljb25zW2NvbG9yS2V5XSA9IHVuZGVmaW5lZDtcclxuXHRcdFx0XHRcdFx0XHRcdFx0YXdhaXQgdGhpcy5zYXZlU2V0dGluZ3MoKTtcclxuXHRcdFx0XHRcdFx0XHRcdFx0Ly8gQXBwbHkgaWNvbiBvdmVycmlkZSB0byBuYXRpdmUgYnV0dG9ucyAocmVtb3ZlIG92ZXJyaWRlKVxyXG5cdFx0XHRcdFx0XHRcdFx0XHR0aGlzLnBsdWdpbi5leHBsb3Jlck1hbmFnZXI/LmFwcGx5TmF0aXZlSWNvbk92ZXJyaWRlcygpO1xyXG5cdFx0XHRcdFx0XHRcdFx0XHQvLyBSZS1yZW5kZXIganVzdCB0aGUgbmF0aXZlIGJ1dHRvbnMgc2VjdGlvblxyXG5cdFx0XHRcdFx0XHRcdFx0XHR0aGlzLnJlbmRlck5hdGl2ZUJ1dHRvbkNvbnRyb2xzKGNvbnRhaW5lciwgbWFpbkNvbnRhaW5lcik7XHJcblx0XHRcdFx0XHRcdFx0XHRcdC8vIFJlc3RvcmUgc2Nyb2xsIHBvc2l0aW9uIGFmdGVyIHJlbmRlclxyXG5cdFx0XHRcdFx0XHRcdFx0XHRyZXF1ZXN0QW5pbWF0aW9uRnJhbWUoKCkgPT4ge1xyXG5cdFx0XHRcdFx0XHRcdFx0XHRcdHNjcm9sbENvbnRhaW5lci5zY3JvbGxUb3AgPSBzY3JvbGxQb3M7XHJcblx0XHRcdFx0XHRcdFx0XHRcdH0pO1xyXG5cdFx0XHRcdFx0XHRcdFx0fSkoKTtcclxuXHRcdFx0XHRcdFx0XHR9KTtcclxuXHRcdFx0XHRcdFx0XHRcclxuXHRcdFx0XHRcdFx0XHQvLyBJbnNlcnQgcmVzZXQgYnV0dG9uIGJlZm9yZSB0aGUgbWFpbiBidXR0b25cclxuXHRcdFx0XHRcdFx0XHRpZiAoYnV0dG9uRWwpIHtcclxuXHRcdFx0XHRcdFx0XHRcdGNvbnRyb2xFbC5pbnNlcnRCZWZvcmUocmVzZXRCdXR0b24sIGJ1dHRvbkVsKTtcclxuXHRcdFx0XHRcdFx0XHR9IGVsc2Uge1xyXG5cdFx0XHRcdFx0XHRcdFx0Y29udHJvbEVsLmluc2VydEJlZm9yZShyZXNldEJ1dHRvbiwgY29udHJvbEVsLmZpcnN0Q2hpbGQpO1xyXG5cdFx0XHRcdFx0XHRcdH1cclxuXHRcdFx0XHRcdFx0fSwgMCk7XHJcblx0XHRcdFx0XHR9XHJcblx0XHRcdFx0fSk7XHJcblx0XHRcdH0pO1xyXG5cdFx0fTtcclxuXHJcblx0XHQvLyBSZW5kZXIgYWxsIDUgbmF0aXZlIGJ1dHRvbnNcclxuXHRcdHJlbmRlck5hdGl2ZUJ1dHRvbignTmV3IG5vdGUnLCAnbmV3Tm90ZUJ1dHRvbicsICduZXdOb3RlJyk7XHJcblx0XHRyZW5kZXJOYXRpdmVCdXR0b24oJ05ldyBmb2xkZXInLCAnbmV3Rm9sZGVyQnV0dG9uJywgJ25ld0ZvbGRlcicpO1xyXG5cdFx0cmVuZGVyTmF0aXZlQnV0dG9uKCdTb3J0IG9yZGVyJywgJ3NvcnRPcmRlckJ1dHRvbicsICdzb3J0T3JkZXInKTtcclxuXHRcdHJlbmRlck5hdGl2ZUJ1dHRvbignQXV0by1yZXZlYWwnLCAnYXV0b1JldmVhbEJ1dHRvbicsICdhdXRvUmV2ZWFsJyk7XHJcblx0XHRyZW5kZXJOYXRpdmVCdXR0b24oJ0NvbGxhcHNlIGFsbCcsICdjb2xsYXBzZUFsbEJ1dHRvbicsICdjb2xsYXBzZUFsbCcpO1xyXG5cdH1cclxuXHJcblx0cHJpdmF0ZSByZW5kZXJCdXR0b25JdGVtKGNvbnRhaW5lcjogSFRNTEVsZW1lbnQsIGl0ZW06IEV4cGxvcmVyQnV0dG9uSXRlbSwgaW5kZXg6IG51bWJlcik6IHZvaWQge1xyXG5cdFx0Y29uc3Qgc2V0dGluZ3MgPSB0aGlzLmdldFNldHRpbmdzKCk7XHJcblx0XHRjb25zdCBncm91cCA9IGNyZWF0ZVNldHRpbmdzR3JvdXAoY29udGFpbmVyLCB1bmRlZmluZWQsICd1aS10d2Vha2VyJyk7XHJcblx0XHRcclxuXHRcdC8vIFN0b3JlIHJlZmVyZW5jZSB0byBvdGhlciBzZXR0aW5ncyBmb3IgY29sbGFwc2libGUgZnVuY3Rpb25hbGl0eVxyXG5cdFx0Y29uc3Qgb3RoZXJTZXR0aW5nczogSFRNTEVsZW1lbnRbXSA9IFtdO1xyXG5cclxuXHRcdC8vIEdldCB0aGUgY29tbWFuZCBwYWlyIGZvciBjdXN0b20gY29tbWFuZHNcclxuXHRcdGNvbnN0IHBhaXIgPSBpdGVtLnR5cGUgPT09ICdjdXN0b20nICYmIGl0ZW0uY29tbWFuZElkIFxyXG5cdFx0XHQ/IHNldHRpbmdzLmV4cGxvcmVyQ29tbWFuZHMuZmluZChjID0+IGMuaWQgPT09IGl0ZW0uY29tbWFuZElkKVxyXG5cdFx0XHQ6IG51bGw7XHJcblxyXG5cdFx0Ly8gRGV0ZXJtaW5lIGRpc3BsYXkgbmFtZVxyXG5cdFx0Y29uc3QgZGlzcGxheU5hbWUgPSBpdGVtLnR5cGUgPT09ICdjdXN0b20nICYmIHBhaXIgXHJcblx0XHRcdD8gKHBhaXIuZGlzcGxheU5hbWUgfHwgcGFpci5uYW1lKVxyXG5cdFx0XHQ6IGl0ZW0ubmFtZTtcclxuXHJcblx0XHQvLyBNYXAgbmF0aXZlIGJ1dHRvbiBJRHMgdG8gc2V0dGluZyBrZXlzXHJcblx0XHRjb25zdCBuYXRpdmVCdXR0b25NYXA6IFJlY29yZDxzdHJpbmcsIHsgc2V0dGluZ0tleTogJ25ld05vdGVCdXR0b24nIHwgJ25ld0ZvbGRlckJ1dHRvbicgfCAnc29ydE9yZGVyQnV0dG9uJyB8ICdhdXRvUmV2ZWFsQnV0dG9uJyB8ICdjb2xsYXBzZUFsbEJ1dHRvbicsIGNvbG9yS2V5OiAnbmV3Tm90ZScgfCAnbmV3Rm9sZGVyJyB8ICdzb3J0T3JkZXInIHwgJ2F1dG9SZXZlYWwnIHwgJ2NvbGxhcHNlQWxsJyB9PiA9IHtcclxuXHRcdFx0J25hdGl2ZS1uZXdOb3RlJzogeyBzZXR0aW5nS2V5OiAnbmV3Tm90ZUJ1dHRvbicsIGNvbG9yS2V5OiAnbmV3Tm90ZScgfSxcclxuXHRcdFx0J25hdGl2ZS1uZXdGb2xkZXInOiB7IHNldHRpbmdLZXk6ICduZXdGb2xkZXJCdXR0b24nLCBjb2xvcktleTogJ25ld0ZvbGRlcicgfSxcclxuXHRcdFx0J25hdGl2ZS1zb3J0T3JkZXInOiB7IHNldHRpbmdLZXk6ICdzb3J0T3JkZXJCdXR0b24nLCBjb2xvcktleTogJ3NvcnRPcmRlcicgfSxcclxuXHRcdFx0J25hdGl2ZS1hdXRvUmV2ZWFsJzogeyBzZXR0aW5nS2V5OiAnYXV0b1JldmVhbEJ1dHRvbicsIGNvbG9yS2V5OiAnYXV0b1JldmVhbCcgfSxcclxuXHRcdFx0J25hdGl2ZS1jb2xsYXBzZUFsbCc6IHsgc2V0dGluZ0tleTogJ2NvbGxhcHNlQWxsQnV0dG9uJywgY29sb3JLZXk6ICdjb2xsYXBzZUFsbCcgfSxcclxuXHRcdH07XHJcblxyXG5cdFx0Y29uc3QgbmF0aXZlQnV0dG9uSW5mbyA9IGl0ZW0udHlwZSA9PT0gJ25hdGl2ZScgPyBuYXRpdmVCdXR0b25NYXBbaXRlbS5pZF0gOiBudWxsO1xyXG5cdFx0Y29uc3QgaXNIaWRkZW4gPSBuYXRpdmVCdXR0b25JbmZvID8gc2V0dGluZ3NbbmF0aXZlQnV0dG9uSW5mby5zZXR0aW5nS2V5XSA6IGl0ZW0uaGlkZGVuO1xyXG5cdFx0Y29uc3QgY29sb3IgPSBuYXRpdmVCdXR0b25JbmZvIFxyXG5cdFx0XHQ/IHNldHRpbmdzLm5hdGl2ZUV4cGxvcmVyQnV0dG9uQ29sb3JzPy5bbmF0aXZlQnV0dG9uSW5mby5jb2xvcktleV1cclxuXHRcdFx0OiAoaXRlbS5jb2xvciAmJiBpdGVtLmNvbG9yICE9PSAnIzAwMDAwMCcgPyBpdGVtLmNvbG9yIDogdW5kZWZpbmVkKTtcclxuXHRcdGNvbnN0IGljb25PdmVycmlkZSA9IG5hdGl2ZUJ1dHRvbkluZm9cclxuXHRcdFx0PyBzZXR0aW5ncy5uYXRpdmVFeHBsb3JlckJ1dHRvbkljb25zPy5bbmF0aXZlQnV0dG9uSW5mby5jb2xvcktleV1cclxuXHRcdFx0OiAoaXRlbS5pY29uIHx8IHVuZGVmaW5lZCk7XHJcblxyXG5cdFx0Z3JvdXAuYWRkU2V0dGluZygoc2V0dGluZyk6IHZvaWQgPT4ge1xyXG5cdFx0XHQvLyBDb21wbGV0ZWx5IHByZXZlbnQgY29sbGFwc2Ugb24gc2V0dGluZyBlbGVtZW50IC0gT05MWSBjaGV2cm9uIGNhbiB0b2dnbGUgKGlmIHByZXNlbnQpXHJcblx0XHRcdC8vIEZvciBleHRlcm5hbCBidXR0b25zLCBwcmV2ZW50IGFsbCBjb2xsYXBzZSBzaW5jZSB0aGVyZSdzIG5vIGNoZXZyb25cclxuXHRcdFx0aWYgKGl0ZW0udHlwZSA9PT0gJ2V4dGVybmFsJykge1xyXG5cdFx0XHRcdHNldHRpbmcuc2V0dGluZ0VsLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKGUpID0+IHtcclxuXHRcdFx0XHRcdGNvbnN0IHRhcmdldCA9IGUudGFyZ2V0IGFzIEhUTUxFbGVtZW50O1xyXG5cdFx0XHRcdFx0Y29uc3QgaXNFeHRyYUJ1dHRvbiA9IHRhcmdldC5jbG9zZXN0KCcuZXh0cmEtc2V0dGluZy1idXR0b24nKSAhPT0gbnVsbCB8fCB0YXJnZXQuY2xvc2VzdCgnLmNsaWNrYWJsZS1pY29uLmV4dHJhLXNldHRpbmctYnV0dG9uJykgIT09IG51bGw7XHJcblx0XHRcdFx0XHRpZiAoIWlzRXh0cmFCdXR0b24pIHtcclxuXHRcdFx0XHRcdFx0ZS5zdG9wUHJvcGFnYXRpb24oKTtcclxuXHRcdFx0XHRcdFx0ZS5zdG9wSW1tZWRpYXRlUHJvcGFnYXRpb24oKTtcclxuXHRcdFx0XHRcdFx0ZS5wcmV2ZW50RGVmYXVsdCgpO1xyXG5cdFx0XHRcdFx0XHRyZXR1cm4gZmFsc2U7XHJcblx0XHRcdFx0XHR9XHJcblx0XHRcdFx0fSwgdHJ1ZSk7XHJcblx0XHRcdFx0XHJcblx0XHRcdFx0c2V0dGluZy5zZXR0aW5nRWwuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoZSkgPT4ge1xyXG5cdFx0XHRcdFx0Y29uc3QgdGFyZ2V0ID0gZS50YXJnZXQgYXMgSFRNTEVsZW1lbnQ7XHJcblx0XHRcdFx0XHRjb25zdCBpc0V4dHJhQnV0dG9uID0gdGFyZ2V0LmNsb3Nlc3QoJy5leHRyYS1zZXR0aW5nLWJ1dHRvbicpICE9PSBudWxsIHx8IHRhcmdldC5jbG9zZXN0KCcuY2xpY2thYmxlLWljb24uZXh0cmEtc2V0dGluZy1idXR0b24nKSAhPT0gbnVsbDtcclxuXHRcdFx0XHRcdGlmICghaXNFeHRyYUJ1dHRvbikge1xyXG5cdFx0XHRcdFx0XHRlLnN0b3BQcm9wYWdhdGlvbigpO1xyXG5cdFx0XHRcdFx0XHRlLnN0b3BJbW1lZGlhdGVQcm9wYWdhdGlvbigpO1xyXG5cdFx0XHRcdFx0XHRlLnByZXZlbnREZWZhdWx0KCk7XHJcblx0XHRcdFx0XHRcdHJldHVybiBmYWxzZTtcclxuXHRcdFx0XHRcdH1cclxuXHRcdFx0XHR9LCBmYWxzZSk7XHJcblx0XHRcdH0gZWxzZSB7XHJcblx0XHRcdFx0Ly8gRm9yIG5hdGl2ZSBhbmQgY3VzdG9tIGJ1dHRvbnMsIGFsbG93IGNoZXZyb24gdG8gdG9nZ2xlXHJcblx0XHRcdFx0c2V0dGluZy5zZXR0aW5nRWwuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoZSkgPT4ge1xyXG5cdFx0XHRcdFx0Y29uc3QgdGFyZ2V0ID0gZS50YXJnZXQgYXMgSFRNTEVsZW1lbnQ7XHJcblx0XHRcdFx0XHRjb25zdCBpc0NoZXZyb25DbGljayA9IHRhcmdldC5jbG9zZXN0KCcudWktdHdlYWtlci1jb2xsYXBzZS1pY29uJykgIT09IG51bGw7XHJcblx0XHRcdFx0XHRjb25zdCBpc0V4dHJhQnV0dG9uID0gdGFyZ2V0LmNsb3Nlc3QoJy5leHRyYS1zZXR0aW5nLWJ1dHRvbicpICE9PSBudWxsIHx8IHRhcmdldC5jbG9zZXN0KCcuY2xpY2thYmxlLWljb24uZXh0cmEtc2V0dGluZy1idXR0b24nKSAhPT0gbnVsbDtcclxuXHRcdFx0XHRcdGNvbnN0IGlzTmFtZUVkaXQgPSB0YXJnZXQuY2xvc2VzdCgnLnVpLXR3ZWFrZXItbmFtZS1kaXNwbGF5JykgIT09IG51bGwgfHwgdGFyZ2V0LmNsb3Nlc3QoJy51aS10d2Vha2VyLWVkaXQtaWNvbicpICE9PSBudWxsIHx8IHRhcmdldC5jbG9zZXN0KCcudWktdHdlYWtlci1lZGl0YWJsZS1uYW1lJykgIT09IG51bGw7XHJcblx0XHRcdFx0XHRpZiAoIWlzQ2hldnJvbkNsaWNrICYmICFpc0V4dHJhQnV0dG9uICYmICFpc05hbWVFZGl0KSB7XHJcblx0XHRcdFx0XHRcdGUuc3RvcFByb3BhZ2F0aW9uKCk7XHJcblx0XHRcdFx0XHRcdGUuc3RvcEltbWVkaWF0ZVByb3BhZ2F0aW9uKCk7XHJcblx0XHRcdFx0XHRcdGUucHJldmVudERlZmF1bHQoKTtcclxuXHRcdFx0XHRcdFx0cmV0dXJuIGZhbHNlO1xyXG5cdFx0XHRcdFx0fVxyXG5cdFx0XHRcdH0sIHRydWUpO1xyXG5cdFx0XHRcdFxyXG5cdFx0XHRcdHNldHRpbmcuc2V0dGluZ0VsLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKGUpID0+IHtcclxuXHRcdFx0XHRcdGNvbnN0IHRhcmdldCA9IGUudGFyZ2V0IGFzIEhUTUxFbGVtZW50O1xyXG5cdFx0XHRcdFx0Y29uc3QgaXNDaGV2cm9uQ2xpY2sgPSB0YXJnZXQuY2xvc2VzdCgnLnVpLXR3ZWFrZXItY29sbGFwc2UtaWNvbicpICE9PSBudWxsO1xyXG5cdFx0XHRcdFx0Y29uc3QgaXNFeHRyYUJ1dHRvbiA9IHRhcmdldC5jbG9zZXN0KCcuZXh0cmEtc2V0dGluZy1idXR0b24nKSAhPT0gbnVsbCB8fCB0YXJnZXQuY2xvc2VzdCgnLmNsaWNrYWJsZS1pY29uLmV4dHJhLXNldHRpbmctYnV0dG9uJykgIT09IG51bGw7XHJcblx0XHRcdFx0XHRjb25zdCBpc05hbWVFZGl0ID0gdGFyZ2V0LmNsb3Nlc3QoJy51aS10d2Vha2VyLW5hbWUtZGlzcGxheScpICE9PSBudWxsIHx8IHRhcmdldC5jbG9zZXN0KCcudWktdHdlYWtlci1lZGl0LWljb24nKSAhPT0gbnVsbCB8fCB0YXJnZXQuY2xvc2VzdCgnLnVpLXR3ZWFrZXItZWRpdGFibGUtbmFtZScpICE9PSBudWxsO1xyXG5cdFx0XHRcdFx0aWYgKCFpc0NoZXZyb25DbGljayAmJiAhaXNFeHRyYUJ1dHRvbiAmJiAhaXNOYW1lRWRpdCkge1xyXG5cdFx0XHRcdFx0XHRlLnN0b3BQcm9wYWdhdGlvbigpO1xyXG5cdFx0XHRcdFx0XHRlLnN0b3BJbW1lZGlhdGVQcm9wYWdhdGlvbigpO1xyXG5cdFx0XHRcdFx0XHRlLnByZXZlbnREZWZhdWx0KCk7XHJcblx0XHRcdFx0XHRcdHJldHVybiBmYWxzZTtcclxuXHRcdFx0XHRcdH1cclxuXHRcdFx0XHR9LCBmYWxzZSk7XHJcblx0XHRcdH1cclxuXHRcdFx0XHJcblx0XHRcdC8vIE1ha2UgbmFtZUVsIGEgZmxleCBjb250YWluZXIgc28gY2hldnJvbiBjYW4gYmUgcG9zaXRpb25lZCB0byB0aGUgbGVmdFxyXG5cdFx0XHRjb25zdCBuYW1lRWwgPSBzZXR0aW5nLm5hbWVFbDtcclxuXHRcdFx0c2V0Q3NzUHJvcHMobmFtZUVsLCB7IGRpc3BsYXk6ICdmbGV4JywgYWxpZ25JdGVtczogJ2NlbnRlcicsIGdhcDogJzAuNXJlbScsIHdpZHRoOiAnMTAwJScgfSk7XHJcblx0XHRcdFxyXG5cdFx0XHQvLyBBZGQgY2hldnJvbnMtdXAtZG93biBpY29uIHRvIHRoZSBMRUZUIG9mIHRoZSBuYW1lIChvbmx5IGZvciBuYXRpdmUgYW5kIGN1c3RvbSBidXR0b25zKVxyXG5cdFx0XHRsZXQgY2hldnJvbkNvbnRhaW5lcjogSFRNTEVsZW1lbnQgfCBudWxsID0gbnVsbDtcclxuXHRcdFx0bGV0IGlzRXhwYW5kZWQgPSBmYWxzZTtcclxuXHRcdFx0aWYgKGl0ZW0udHlwZSA9PT0gJ25hdGl2ZScgfHwgaXRlbS50eXBlID09PSAnY3VzdG9tJykge1xyXG5cdFx0XHRcdGNoZXZyb25Db250YWluZXIgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcclxuXHRcdFx0XHRjaGV2cm9uQ29udGFpbmVyLmNsYXNzTmFtZSA9ICd1aS10d2Vha2VyLWNvbGxhcHNlLWljb24nO1xyXG5cdFx0XHRcdHNldENzc1Byb3BzKGNoZXZyb25Db250YWluZXIsIHsgXHJcblx0XHRcdFx0XHRjdXJzb3I6ICdkZWZhdWx0JyxcclxuXHRcdFx0XHRcdGJhY2tncm91bmQ6ICd0cmFuc3BhcmVudCcsXHJcblx0XHRcdFx0XHRwYWRkaW5nOiAnMCcsXHJcblx0XHRcdFx0XHRtYXJnaW46ICcwJyxcclxuXHRcdFx0XHRcdGRpc3BsYXk6ICdpbmxpbmUtZmxleCcsXHJcblx0XHRcdFx0XHRhbGlnbkl0ZW1zOiAnY2VudGVyJyxcclxuXHRcdFx0XHRcdGp1c3RpZnlDb250ZW50OiAnY2VudGVyJ1xyXG5cdFx0XHRcdH0pO1xyXG5cdFx0XHRcdG5hbWVFbC5pbnNlcnRCZWZvcmUoY2hldnJvbkNvbnRhaW5lciwgbmFtZUVsLmZpcnN0Q2hpbGQpO1xyXG5cdFx0XHRcdGlzRXhwYW5kZWQgPSB0aGlzLmV4cGFuZGVkU3RhdGVzLmdldChpdGVtLmlkKSA/PyBmYWxzZTtcclxuXHRcdFx0XHRzZXRJY29uKGNoZXZyb25Db250YWluZXIsIGlzRXhwYW5kZWQgPyAnY2hldnJvbnMtZG93bi11cCcgOiAnY2hldnJvbnMtdXAtZG93bicpO1xyXG5cdFx0XHRcdFxyXG5cdFx0XHRcdC8vIFRvZ2dsZSBvbiBjaGV2cm9uIGNsaWNrXHJcblx0XHRcdFx0Y2hldnJvbkNvbnRhaW5lci5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIChlKSA9PiB7XHJcblx0XHRcdFx0XHRlLnN0b3BQcm9wYWdhdGlvbigpO1xyXG5cdFx0XHRcdFx0ZS5zdG9wSW1tZWRpYXRlUHJvcGFnYXRpb24oKTtcclxuXHRcdFx0XHRcdGUucHJldmVudERlZmF1bHQoKTtcclxuXHRcdFx0XHRcdGlzRXhwYW5kZWQgPSAhaXNFeHBhbmRlZDtcclxuXHRcdFx0XHRcdHRoaXMuZXhwYW5kZWRTdGF0ZXMuc2V0KGl0ZW0uaWQsIGlzRXhwYW5kZWQpO1xyXG5cdFx0XHRcdFx0c2V0SWNvbihjaGV2cm9uQ29udGFpbmVyISwgaXNFeHBhbmRlZCA/ICdjaGV2cm9ucy1kb3duLXVwJyA6ICdjaGV2cm9ucy11cC1kb3duJyk7XHJcblx0XHRcdFx0XHRvdGhlclNldHRpbmdzLmZvckVhY2goc2V0dGluZ0VsID0+IHtcclxuXHRcdFx0XHRcdFx0c2V0Q3NzUHJvcHMoc2V0dGluZ0VsLCB7IGRpc3BsYXk6IGlzRXhwYW5kZWQgPyAnJyA6ICdub25lJyB9KTtcclxuXHRcdFx0XHRcdH0pO1xyXG5cdFx0XHRcdH0pO1xyXG5cdFx0XHR9XHJcblx0XHRcdFxyXG5cdFx0XHQvLyBDcmVhdGUgbmFtZSBjb250YWluZXIgKGVkaXRhYmxlIG9ubHkgZm9yIGN1c3RvbSBidXR0b25zKVxyXG5cdFx0XHRjb25zdCBuYW1lQ29udGFpbmVyID0gbmFtZUVsLmNyZWF0ZURpdih7IGNsczogJ3VpLXR3ZWFrZXItZWRpdGFibGUtbmFtZScgfSk7XHJcblx0XHRcdHNldENzc1Byb3BzKG5hbWVDb250YWluZXIsIHsgZGlzcGxheTogJ2ZsZXgnLCBhbGlnbkl0ZW1zOiAnY2VudGVyJywgZ2FwOiAnMC41cmVtJyB9KTtcclxuXHRcdFx0XHJcblx0XHRcdC8vIEZ1bmN0aW9uIHRvIGNyZWF0ZSB0aGUgZGlzcGxheSBlbGVtZW50IHdpdGggY2xpY2sgaGFuZGxlclxyXG5cdFx0XHRjb25zdCBjcmVhdGVOYW1lRGlzcGxheSA9IChuYW1lOiBzdHJpbmcpID0+IHtcclxuXHRcdFx0XHRuYW1lQ29udGFpbmVyLmVtcHR5KCk7XHJcblx0XHRcdFx0XHJcblx0XHRcdFx0Y29uc3QgZGlzcGxheSA9IG5hbWVDb250YWluZXIuY3JlYXRlU3Bhbih7IFxyXG5cdFx0XHRcdFx0dGV4dDogbmFtZSA9PT0gZGlzcGxheU5hbWUgPyBuYW1lIDogYCR7bmFtZX0gKCR7ZGlzcGxheU5hbWV9KWAsXHJcblx0XHRcdFx0XHRjbHM6ICd1aS10d2Vha2VyLW5hbWUtZGlzcGxheSdcclxuXHRcdFx0XHR9KTtcclxuXHRcdFx0XHRcclxuXHRcdFx0XHQvLyBBZGQgcGVuY2lsIGljb24gKG9ubHkgZm9yIGN1c3RvbSBidXR0b25zLCBub3QgZXh0ZXJuYWwpXHJcblx0XHRcdFx0aWYgKGl0ZW0udHlwZSA9PT0gJ2N1c3RvbScpIHtcclxuXHRcdFx0XHRcdGNvbnN0IGljb25Db250YWluZXIgPSBuYW1lQ29udGFpbmVyLmNyZWF0ZURpdih7IGNsczogJ3VpLXR3ZWFrZXItZWRpdC1pY29uJyB9KTtcclxuXHRcdFx0XHRcdHNldENzc1Byb3BzKGljb25Db250YWluZXIsIHsgb3BhY2l0eTogJzAuNicgfSk7XHJcblx0XHRcdFx0XHRzZXRJY29uKGljb25Db250YWluZXIsICdsdWNpZGUtcGVuY2lsLWxpbmUnKTtcclxuXHRcdFx0XHRcdFxyXG5cdFx0XHRcdFx0Ly8gTWFrZSBuYW1lIGFuZCBpY29uIGVkaXRhYmxlIG9uIGNsaWNrXHJcblx0XHRcdFx0XHRjb25zdCBzdGFydEVkaXQgPSAoKSA9PiB7XHJcblx0XHRcdFx0XHRcdGNvbnN0IGN1cnJlbnROYW1lID0gaXRlbS5uYW1lO1xyXG5cdFx0XHRcdFx0XHRcclxuXHRcdFx0XHRcdFx0bmFtZUNvbnRhaW5lci5lbXB0eSgpO1xyXG5cdFx0XHRcdFx0XHRcclxuXHRcdFx0XHRcdFx0Y29uc3QgbmFtZUlucHV0ID0gbmFtZUNvbnRhaW5lci5jcmVhdGVFbCgnaW5wdXQnLCB7XHJcblx0XHRcdFx0XHRcdFx0dHlwZTogJ3RleHQnLFxyXG5cdFx0XHRcdFx0XHRcdHZhbHVlOiBjdXJyZW50TmFtZVxyXG5cdFx0XHRcdFx0XHR9KTtcclxuXHRcdFx0XHRcdFx0bmFtZUlucHV0LmFkZENsYXNzKCdtb2QtdGV4dC1pbnB1dCcpO1xyXG5cdFx0XHRcdFx0XHRcclxuXHRcdFx0XHRcdFx0bmFtZUlucHV0LmZvY3VzKCk7XHJcblx0XHRcdFx0XHRcdG5hbWVJbnB1dC5zZWxlY3QoKTtcclxuXHRcdFx0XHRcdFx0XHJcblx0XHRcdFx0XHRcdGNvbnN0IHNhdmVOYW1lID0gKCkgPT4ge1xyXG5cdFx0XHRcdFx0XHRcdG5hbWVJbnB1dC5yZW1vdmVFdmVudExpc3RlbmVyKCdibHVyJywgc2F2ZU5hbWUpO1xyXG5cdFx0XHRcdFx0XHRcdFxyXG5cdFx0XHRcdFx0XHRcdGxldCBuZXdOYW1lID0gbmFtZUlucHV0LnZhbHVlLnRyaW0oKTtcclxuXHRcdFx0XHRcdFx0XHRpZiAoIW5ld05hbWUpIHtcclxuXHRcdFx0XHRcdFx0XHRcdG5ld05hbWUgPSBjdXJyZW50TmFtZTtcclxuXHRcdFx0XHRcdFx0XHR9XHJcblx0XHRcdFx0XHRcdFx0aXRlbS5uYW1lID0gbmV3TmFtZTtcclxuXHRcdFx0XHRcdFx0XHRcclxuXHRcdFx0XHRcdFx0XHQvLyBVcGRhdGUgY29tbWFuZCBwYWlyIG5hbWUgaWYgY3VzdG9tXHJcblx0XHRcdFx0XHRcdFx0aWYgKHBhaXIpIHtcclxuXHRcdFx0XHRcdFx0XHRcdHBhaXIubmFtZSA9IG5ld05hbWU7XHJcblx0XHRcdFx0XHRcdFx0fVxyXG5cdFx0XHRcdFx0XHRcdFxyXG5cdFx0XHRcdFx0XHRcdC8vIFVwZGF0ZSBidXR0b24gbmFtZXNcclxuXHRcdFx0XHRcdFx0XHR0aGlzLnBsdWdpbi5leHBsb3Jlck1hbmFnZXI/LnVwZGF0ZUJ1dHRvbk5hbWVzKCk7XHJcblx0XHRcdFx0XHRcdFx0XHJcblx0XHRcdFx0XHRcdFx0dm9pZCAoYXN5bmMgKCkgPT4ge1xyXG5cdFx0XHRcdFx0XHRcdFx0YXdhaXQgdGhpcy5zYXZlU2V0dGluZ3MoKTtcclxuXHRcdFx0XHRcdFx0XHRcdHRoaXMucmVuZGVyKGNvbnRhaW5lcik7XHJcblx0XHRcdFx0XHRcdFx0fSkoKTtcclxuXHRcdFx0XHRcdFx0fTtcclxuXHRcdFx0XHRcdFx0XHJcblx0XHRcdFx0XHRcdG5hbWVJbnB1dC5hZGRFdmVudExpc3RlbmVyKCdrZXlkb3duJywgKGUpID0+IHtcclxuXHRcdFx0XHRcdFx0XHRpZiAoZS5rZXkgPT09ICdFbnRlcicpIHtcclxuXHRcdFx0XHRcdFx0XHRcdGUucHJldmVudERlZmF1bHQoKTtcclxuXHRcdFx0XHRcdFx0XHRcdHNhdmVOYW1lKCk7XHJcblx0XHRcdFx0XHRcdFx0fSBlbHNlIGlmIChlLmtleSA9PT0gJ0VzY2FwZScpIHtcclxuXHRcdFx0XHRcdFx0XHRcdGUucHJldmVudERlZmF1bHQoKTtcclxuXHRcdFx0XHRcdFx0XHRcdGNyZWF0ZU5hbWVEaXNwbGF5KGN1cnJlbnROYW1lKTtcclxuXHRcdFx0XHRcdFx0XHR9XHJcblx0XHRcdFx0XHRcdH0pO1xyXG5cdFx0XHRcdFx0XHRcclxuXHRcdFx0XHRcdFx0bmFtZUlucHV0LmFkZEV2ZW50TGlzdGVuZXIoJ2JsdXInLCBzYXZlTmFtZSk7XHJcblx0XHRcdFx0XHR9O1xyXG5cdFx0XHRcdFx0XHJcblx0XHRcdFx0XHRkaXNwbGF5LmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgc3RhcnRFZGl0KTtcclxuXHRcdFx0XHRcdGljb25Db250YWluZXIuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBzdGFydEVkaXQpO1xyXG5cdFx0XHRcdFx0XHJcblx0XHRcdFx0XHRpY29uQ29udGFpbmVyLmFkZEV2ZW50TGlzdGVuZXIoJ21vdXNlZW50ZXInLCAoKSA9PiB7XHJcblx0XHRcdFx0XHRcdHNldENzc1Byb3BzKGljb25Db250YWluZXIsIHsgb3BhY2l0eTogJzEnIH0pO1xyXG5cdFx0XHRcdFx0fSk7XHJcblx0XHRcdFx0XHRpY29uQ29udGFpbmVyLmFkZEV2ZW50TGlzdGVuZXIoJ21vdXNlbGVhdmUnLCAoKSA9PiB7XHJcblx0XHRcdFx0XHRcdHNldENzc1Byb3BzKGljb25Db250YWluZXIsIHsgb3BhY2l0eTogJzAuNicgfSk7XHJcblx0XHRcdFx0XHR9KTtcclxuXHRcdFx0XHR9XHJcblx0XHRcdH07XHJcblx0XHRcdFxyXG5cdFx0XHQvLyBDcmVhdGUgaW5pdGlhbCBkaXNwbGF5XHJcblx0XHRcdGNyZWF0ZU5hbWVEaXNwbGF5KGl0ZW0ubmFtZSk7XHJcblx0XHRcdFxyXG5cdFx0XHRzZXR0aW5nLnNldERlc2MoJycpXHJcblx0XHRcdFx0LmFkZEV4dHJhQnV0dG9uKChidXR0b24pID0+IHtcclxuXHRcdFx0XHRcdC8vIEljb24gcHJldmlldyAoZm9yIGN1c3RvbSBjb21tYW5kcyBhbmQgbmF0aXZlIHdpdGggb3ZlcnJpZGVzKVxyXG5cdFx0XHRcdFx0aWYgKGl0ZW0udHlwZSA9PT0gJ2N1c3RvbScgJiYgcGFpcikge1xyXG5cdFx0XHRcdFx0XHRjb25zdCBpY29uRWwgPSBidXR0b24uZXh0cmFTZXR0aW5nc0VsO1xyXG5cdFx0XHRcdFx0XHRzZXRJY29uKGljb25FbCwgcGFpci5pY29uKTtcclxuXHRcdFx0XHRcdFx0aWNvbkVsLnNldEF0dHJpYnV0ZSgnZGF0YS1leHBsb3Jlci1jb21tYW5kLWlkJywgcGFpci5pZCk7XHJcblx0XHRcdFx0XHRcdGlmIChwYWlyLmNvbG9yICYmIHBhaXIuY29sb3IgIT09ICcjMDAwMDAwJykge1xyXG5cdFx0XHRcdFx0XHRcdHNldENzc1Byb3BzKGljb25FbCwgeyBjb2xvcjogcGFpci5jb2xvciB9KTtcclxuXHRcdFx0XHRcdFx0fSBlbHNlIHtcclxuXHRcdFx0XHRcdFx0XHRpY29uRWwuc3R5bGUucmVtb3ZlUHJvcGVydHkoJ2NvbG9yJyk7XHJcblx0XHRcdFx0XHRcdH1cclxuXHRcdFx0XHRcdFx0YnV0dG9uLnNldFRvb2x0aXAoJ0NoYW5nZSBpY29uJyk7XHJcblx0XHRcdFx0XHRcdGJ1dHRvbi5vbkNsaWNrKCgpID0+IHtcclxuXHRcdFx0XHRcdFx0XHRjb25zdCBtb2RhbCA9IG5ldyBJY29uUGlja2VyTW9kYWwodGhpcy5hcHAsIChpY29uSWQpID0+IHtcclxuXHRcdFx0XHRcdFx0XHRcdHZvaWQgKGFzeW5jICgpID0+IHtcclxuXHRcdFx0XHRcdFx0XHRcdFx0aWYgKGljb25JZCAmJiBpY29uSWQgIT09IHBhaXIuaWNvbikge1xyXG5cdFx0XHRcdFx0XHRcdFx0XHRcdHBhaXIuaWNvbiA9IGljb25JZDtcclxuXHRcdFx0XHRcdFx0XHRcdFx0XHRpdGVtLmljb24gPSBpY29uSWQ7XHJcblx0XHRcdFx0XHRcdFx0XHRcdFx0YXdhaXQgdGhpcy5zYXZlU2V0dGluZ3MoKTtcclxuXHRcdFx0XHRcdFx0XHRcdFx0XHR0aGlzLnBsdWdpbi5leHBsb3Jlck1hbmFnZXI/LnJlb3JkZXIoKTtcclxuXHRcdFx0XHRcdFx0XHRcdFx0XHR0aGlzLnJlbmRlcihjb250YWluZXIpO1xyXG5cdFx0XHRcdFx0XHRcdFx0XHR9XHJcblx0XHRcdFx0XHRcdFx0XHR9KSgpO1xyXG5cdFx0XHRcdFx0XHRcdH0pO1xyXG5cdFx0XHRcdFx0XHRcdG1vZGFsLm9wZW4oKTtcclxuXHRcdFx0XHRcdFx0fSk7XHJcblx0XHRcdFx0XHR9IGVsc2UgaWYgKGl0ZW0udHlwZSA9PT0gJ25hdGl2ZScgJiYgaWNvbk92ZXJyaWRlKSB7XHJcblx0XHRcdFx0XHRcdGNvbnN0IGljb25FbCA9IGJ1dHRvbi5leHRyYVNldHRpbmdzRWw7XHJcblx0XHRcdFx0XHRcdHNldEljb24oaWNvbkVsLCBpY29uT3ZlcnJpZGUpO1xyXG5cdFx0XHRcdFx0XHRidXR0b24uc2V0VG9vbHRpcCgnQ2hhbmdlIGljb24nKTtcclxuXHRcdFx0XHRcdFx0YnV0dG9uLm9uQ2xpY2soKCkgPT4ge1xyXG5cdFx0XHRcdFx0XHRcdGNvbnN0IG1vZGFsID0gbmV3IEljb25QaWNrZXJNb2RhbCh0aGlzLmFwcCwgKGljb25JZCkgPT4ge1xyXG5cdFx0XHRcdFx0XHRcdFx0dm9pZCAoYXN5bmMgKCkgPT4ge1xyXG5cdFx0XHRcdFx0XHRcdFx0XHRpZiAoIW5hdGl2ZUJ1dHRvbkluZm8pIHJldHVybjtcclxuXHRcdFx0XHRcdFx0XHRcdFx0aWYgKCFzZXR0aW5ncy5uYXRpdmVFeHBsb3JlckJ1dHRvbkljb25zKSB7XHJcblx0XHRcdFx0XHRcdFx0XHRcdFx0c2V0dGluZ3MubmF0aXZlRXhwbG9yZXJCdXR0b25JY29ucyA9IHt9O1xyXG5cdFx0XHRcdFx0XHRcdFx0XHR9XHJcblx0XHRcdFx0XHRcdFx0XHRcdGlmIChpY29uSWQpIHtcclxuXHRcdFx0XHRcdFx0XHRcdFx0XHRzZXR0aW5ncy5uYXRpdmVFeHBsb3JlckJ1dHRvbkljb25zW25hdGl2ZUJ1dHRvbkluZm8uY29sb3JLZXldID0gaWNvbklkO1xyXG5cdFx0XHRcdFx0XHRcdFx0XHR9IGVsc2Uge1xyXG5cdFx0XHRcdFx0XHRcdFx0XHRcdHNldHRpbmdzLm5hdGl2ZUV4cGxvcmVyQnV0dG9uSWNvbnNbbmF0aXZlQnV0dG9uSW5mby5jb2xvcktleV0gPSB1bmRlZmluZWQ7XHJcblx0XHRcdFx0XHRcdFx0XHRcdH1cclxuXHRcdFx0XHRcdFx0XHRcdFx0YXdhaXQgdGhpcy5zYXZlU2V0dGluZ3MoKTtcclxuXHRcdFx0XHRcdFx0XHRcdFx0dGhpcy5wbHVnaW4uZXhwbG9yZXJNYW5hZ2VyPy5hcHBseU5hdGl2ZUljb25PdmVycmlkZXMoKTtcclxuXHRcdFx0XHRcdFx0XHRcdFx0dGhpcy5yZW5kZXIoY29udGFpbmVyKTtcclxuXHRcdFx0XHRcdFx0XHRcdH0pKCk7XHJcblx0XHRcdFx0XHRcdFx0fSk7XHJcblx0XHRcdFx0XHRcdFx0bW9kYWwub3BlbigpO1xyXG5cdFx0XHRcdFx0XHR9KTtcclxuXHRcdFx0XHRcdH0gZWxzZSB7XHJcblx0XHRcdFx0XHRcdC8vIE5vIGljb24gcHJldmlldyBmb3IgZXh0ZXJuYWwgYnV0dG9ucyBvciBuYXRpdmUgd2l0aG91dCBvdmVycmlkZVxyXG5cdFx0XHRcdFx0XHRzZXRDc3NQcm9wcyhidXR0b24uZXh0cmFTZXR0aW5nc0VsLCB7IGRpc3BsYXk6ICdub25lJyB9KTtcclxuXHRcdFx0XHRcdH1cclxuXHRcdFx0XHRcdC8vIFByZXZlbnQgaWNvbiBmbGlja2VyaW5nIG9uIGhvdmVyIGJ5IG5vdCB1cGRhdGluZyBvbiBob3ZlclxyXG5cdFx0XHRcdFx0YnV0dG9uLmV4dHJhU2V0dGluZ3NFbC5hZGRFdmVudExpc3RlbmVyKCdtb3VzZWVudGVyJywgKGUpID0+IGUuc3RvcFByb3BhZ2F0aW9uKCkpO1xyXG5cdFx0XHRcdFx0YnV0dG9uLmV4dHJhU2V0dGluZ3NFbC5hZGRFdmVudExpc3RlbmVyKCdtb3VzZWxlYXZlJywgKGUpID0+IGUuc3RvcFByb3BhZ2F0aW9uKCkpO1xyXG5cdFx0XHRcdFx0YnV0dG9uLmV4dHJhU2V0dGluZ3NFbC5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIChlKSA9PiBlLnN0b3BQcm9wYWdhdGlvbigpKTtcclxuXHRcdFx0XHR9KVxyXG5cdFx0XHRcdC5hZGRFeHRyYUJ1dHRvbigoYnV0dG9uKSA9PiB7XHJcblx0XHRcdFx0XHQvLyBNb3ZlIHVwXHJcblx0XHRcdFx0XHRidXR0b24uc2V0SWNvbignY2hldnJvbi11cCcpO1xyXG5cdFx0XHRcdFx0aWYgKGluZGV4ID4gMCkge1xyXG5cdFx0XHRcdFx0XHRidXR0b24uc2V0VG9vbHRpcCgnTW92ZSB1cCcpO1xyXG5cdFx0XHRcdFx0XHRidXR0b24ub25DbGljaygoKSA9PiB7XHJcblx0XHRcdFx0XHRcdFx0Ly8gUHJlc2VydmUgc2Nyb2xsIHBvc2l0aW9uIHRvIHByZXZlbnQgZmxpY2tlcmluZ1xyXG5cdFx0XHRcdFx0XHRcdGNvbnN0IHNjcm9sbENvbnRhaW5lciA9IGNvbnRhaW5lci5jbG9zZXN0KCcudmVydGljYWwtdGFiLWNvbnRlbnQnKSB8fCBcclxuXHRcdFx0XHRcdFx0XHRcdGNvbnRhaW5lci5jbG9zZXN0KCcuc2V0dGluZ3MtY29udGVudCcpIHx8IFxyXG5cdFx0XHRcdFx0XHRcdFx0Y29udGFpbmVyLmNsb3Nlc3QoJy52ZXJ0aWNhbC10YWItY29udGVudC1jb250YWluZXInKSB8fFxyXG5cdFx0XHRcdFx0XHRcdFx0Y29udGFpbmVyO1xyXG5cdFx0XHRcdFx0XHRcdGNvbnN0IHNjcm9sbFBvcyA9IHNjcm9sbENvbnRhaW5lci5zY3JvbGxUb3A7XHJcblx0XHRcdFx0XHRcdFx0dm9pZCAoYXN5bmMgKCkgPT4ge1xyXG5cdFx0XHRcdFx0XHRcdFx0YXJyYXlNb3ZlTXV0YWJsZShzZXR0aW5ncy5leHBsb3JlckJ1dHRvbkl0ZW1zLCBpbmRleCwgaW5kZXggLSAxKTtcclxuXHRcdFx0XHRcdFx0XHRcdGF3YWl0IHRoaXMuc2F2ZVNldHRpbmdzKCk7XHJcblx0XHRcdFx0XHRcdFx0XHR0aGlzLnBsdWdpbi5leHBsb3Jlck1hbmFnZXI/LnJlb3JkZXIoKTtcclxuXHRcdFx0XHRcdFx0XHRcdHRoaXMucmVuZGVyKGNvbnRhaW5lcik7XHJcblx0XHRcdFx0XHRcdFx0XHQvLyBSZXN0b3JlIHNjcm9sbCBwb3NpdGlvbiBhZnRlciByZW5kZXIgd2l0aCBtdWx0aXBsZSBhdHRlbXB0c1xyXG5cdFx0XHRcdFx0XHRcdFx0cmVxdWVzdEFuaW1hdGlvbkZyYW1lKCgpID0+IHtcclxuXHRcdFx0XHRcdFx0XHRcdFx0c2Nyb2xsQ29udGFpbmVyLnNjcm9sbFRvcCA9IHNjcm9sbFBvcztcclxuXHRcdFx0XHRcdFx0XHRcdFx0Ly8gQWxzbyB0cnkgYWZ0ZXIgYSBzaG9ydCBkZWxheSBpbiBjYXNlIERPTSBpc24ndCByZWFkeVxyXG5cdFx0XHRcdFx0XHRcdFx0XHRzZXRUaW1lb3V0KCgpID0+IHtcclxuXHRcdFx0XHRcdFx0XHRcdFx0XHRzY3JvbGxDb250YWluZXIuc2Nyb2xsVG9wID0gc2Nyb2xsUG9zO1xyXG5cdFx0XHRcdFx0XHRcdFx0XHRcdC8vIE9uZSBtb3JlIGF0dGVtcHQgYWZ0ZXIgYSBsb25nZXIgZGVsYXlcclxuXHRcdFx0XHRcdFx0XHRcdFx0XHRzZXRUaW1lb3V0KCgpID0+IHtcclxuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdHNjcm9sbENvbnRhaW5lci5zY3JvbGxUb3AgPSBzY3JvbGxQb3M7XHJcblx0XHRcdFx0XHRcdFx0XHRcdFx0fSwgNTApO1xyXG5cdFx0XHRcdFx0XHRcdFx0XHR9LCAwKTtcclxuXHRcdFx0XHRcdFx0XHRcdH0pO1xyXG5cdFx0XHRcdFx0XHRcdH0pKCk7XHJcblx0XHRcdFx0XHRcdH0pO1xyXG5cdFx0XHRcdFx0fSBlbHNlIHtcclxuXHRcdFx0XHRcdFx0YnV0dG9uLnNldFRvb2x0aXAoJ0FscmVhZHkgYXQgdG9wJyk7XHJcblx0XHRcdFx0XHRcdGJ1dHRvbi5leHRyYVNldHRpbmdzRWwuYWRkQ2xhc3MoJ3VpLXR3ZWFrZXItZGlzYWJsZWQtYnV0dG9uJyk7XHJcblx0XHRcdFx0XHRcdHNldENzc1Byb3BzKGJ1dHRvbi5leHRyYVNldHRpbmdzRWwsIHsgcG9pbnRlckV2ZW50czogJ25vbmUnIH0pO1xyXG5cdFx0XHRcdFx0fVxyXG5cdFx0XHRcdFx0YnV0dG9uLmV4dHJhU2V0dGluZ3NFbC5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIChlKSA9PiBlLnN0b3BQcm9wYWdhdGlvbigpKTtcclxuXHRcdFx0XHR9KVxyXG5cdFx0XHRcdC5hZGRFeHRyYUJ1dHRvbigoYnV0dG9uKSA9PiB7XHJcblx0XHRcdFx0XHQvLyBNb3ZlIGRvd25cclxuXHRcdFx0XHRcdGJ1dHRvbi5zZXRJY29uKCdjaGV2cm9uLWRvd24nKTtcclxuXHRcdFx0XHRcdGlmIChpbmRleCA8IHNldHRpbmdzLmV4cGxvcmVyQnV0dG9uSXRlbXMubGVuZ3RoIC0gMSkge1xyXG5cdFx0XHRcdFx0XHRidXR0b24uc2V0VG9vbHRpcCgnTW92ZSBkb3duJyk7XHJcblx0XHRcdFx0XHRcdGJ1dHRvbi5vbkNsaWNrKCgpID0+IHtcclxuXHRcdFx0XHRcdFx0XHQvLyBQcmVzZXJ2ZSBzY3JvbGwgcG9zaXRpb24gdG8gcHJldmVudCBmbGlja2VyaW5nXHJcblx0XHRcdFx0XHRcdFx0Y29uc3Qgc2Nyb2xsQ29udGFpbmVyID0gY29udGFpbmVyLmNsb3Nlc3QoJy52ZXJ0aWNhbC10YWItY29udGVudCcpIHx8IFxyXG5cdFx0XHRcdFx0XHRcdFx0Y29udGFpbmVyLmNsb3Nlc3QoJy5zZXR0aW5ncy1jb250ZW50JykgfHwgXHJcblx0XHRcdFx0XHRcdFx0XHRjb250YWluZXIuY2xvc2VzdCgnLnZlcnRpY2FsLXRhYi1jb250ZW50LWNvbnRhaW5lcicpIHx8XHJcblx0XHRcdFx0XHRcdFx0XHRjb250YWluZXI7XHJcblx0XHRcdFx0XHRcdFx0Y29uc3Qgc2Nyb2xsUG9zID0gc2Nyb2xsQ29udGFpbmVyLnNjcm9sbFRvcDtcclxuXHRcdFx0XHRcdFx0XHR2b2lkIChhc3luYyAoKSA9PiB7XHJcblx0XHRcdFx0XHRcdFx0XHRhcnJheU1vdmVNdXRhYmxlKHNldHRpbmdzLmV4cGxvcmVyQnV0dG9uSXRlbXMsIGluZGV4LCBpbmRleCArIDEpO1xyXG5cdFx0XHRcdFx0XHRcdFx0YXdhaXQgdGhpcy5zYXZlU2V0dGluZ3MoKTtcclxuXHRcdFx0XHRcdFx0XHRcdHRoaXMucGx1Z2luLmV4cGxvcmVyTWFuYWdlcj8ucmVvcmRlcigpO1xyXG5cdFx0XHRcdFx0XHRcdFx0dGhpcy5yZW5kZXIoY29udGFpbmVyKTtcclxuXHRcdFx0XHRcdFx0XHRcdC8vIFJlc3RvcmUgc2Nyb2xsIHBvc2l0aW9uIGFmdGVyIHJlbmRlciB3aXRoIG11bHRpcGxlIGF0dGVtcHRzXHJcblx0XHRcdFx0XHRcdFx0XHRyZXF1ZXN0QW5pbWF0aW9uRnJhbWUoKCkgPT4ge1xyXG5cdFx0XHRcdFx0XHRcdFx0XHRzY3JvbGxDb250YWluZXIuc2Nyb2xsVG9wID0gc2Nyb2xsUG9zO1xyXG5cdFx0XHRcdFx0XHRcdFx0XHQvLyBBbHNvIHRyeSBhZnRlciBhIHNob3J0IGRlbGF5IGluIGNhc2UgRE9NIGlzbid0IHJlYWR5XHJcblx0XHRcdFx0XHRcdFx0XHRcdHNldFRpbWVvdXQoKCkgPT4ge1xyXG5cdFx0XHRcdFx0XHRcdFx0XHRcdHNjcm9sbENvbnRhaW5lci5zY3JvbGxUb3AgPSBzY3JvbGxQb3M7XHJcblx0XHRcdFx0XHRcdFx0XHRcdFx0Ly8gT25lIG1vcmUgYXR0ZW1wdCBhZnRlciBhIGxvbmdlciBkZWxheVxyXG5cdFx0XHRcdFx0XHRcdFx0XHRcdHNldFRpbWVvdXQoKCkgPT4ge1xyXG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0c2Nyb2xsQ29udGFpbmVyLnNjcm9sbFRvcCA9IHNjcm9sbFBvcztcclxuXHRcdFx0XHRcdFx0XHRcdFx0XHR9LCA1MCk7XHJcblx0XHRcdFx0XHRcdFx0XHRcdH0sIDApO1xyXG5cdFx0XHRcdFx0XHRcdFx0fSk7XHJcblx0XHRcdFx0XHRcdFx0fSkoKTtcclxuXHRcdFx0XHRcdFx0fSk7XHJcblx0XHRcdFx0XHR9IGVsc2Uge1xyXG5cdFx0XHRcdFx0XHRidXR0b24uc2V0VG9vbHRpcCgnQWxyZWFkeSBhdCBib3R0b20nKTtcclxuXHRcdFx0XHRcdFx0YnV0dG9uLmV4dHJhU2V0dGluZ3NFbC5hZGRDbGFzcygndWktdHdlYWtlci1kaXNhYmxlZC1idXR0b24nKTtcclxuXHRcdFx0XHRcdFx0c2V0Q3NzUHJvcHMoYnV0dG9uLmV4dHJhU2V0dGluZ3NFbCwgeyBwb2ludGVyRXZlbnRzOiAnbm9uZScgfSk7XHJcblx0XHRcdFx0XHR9XHJcblx0XHRcdFx0XHRidXR0b24uZXh0cmFTZXR0aW5nc0VsLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKGUpID0+IGUuc3RvcFByb3BhZ2F0aW9uKCkpO1xyXG5cdFx0XHRcdH0pO1xyXG5cclxuXHRcdFx0Ly8gRGVsZXRlIGJ1dHRvbiAob25seSBmb3IgY3VzdG9tIGNvbW1hbmRzKVxyXG5cdFx0XHRpZiAoaXRlbS50eXBlID09PSAnY3VzdG9tJykge1xyXG5cdFx0XHRcdHNldHRpbmcuYWRkRXh0cmFCdXR0b24oKGJ1dHRvbikgPT4ge1xyXG5cdFx0XHRcdFx0YnV0dG9uLnNldEljb24oJ3RyYXNoJyk7XHJcblx0XHRcdFx0XHRidXR0b24uc2V0VG9vbHRpcCgnRGVsZXRlJyk7XHJcblx0XHRcdFx0XHRidXR0b24uZXh0cmFTZXR0aW5nc0VsLmFkZENsYXNzKCdtb2Qtd2FybmluZycpO1xyXG5cdFx0XHRcdFx0c2V0Q3NzUHJvcHMoYnV0dG9uLmV4dHJhU2V0dGluZ3NFbCwgeyBjb2xvcjogJ3ZhcigtLXRleHQtZXJyb3IpJyB9KTtcclxuXHRcdFx0XHRcdGJ1dHRvbi5vbkNsaWNrKCgpID0+IHtcclxuXHRcdFx0XHRcdFx0dm9pZCAoYXN5bmMgKCkgPT4ge1xyXG5cdFx0XHRcdFx0XHRcdC8vIFJlbW92ZSBmcm9tIGJvdGggYXJyYXlzXHJcblx0XHRcdFx0XHRcdFx0Y29uc3QgaXRlbUlkeCA9IHNldHRpbmdzLmV4cGxvcmVyQnV0dG9uSXRlbXMuaW5kZXhPZihpdGVtKTtcclxuXHRcdFx0XHRcdFx0XHRpZiAoaXRlbUlkeCA+IC0xKSB7XHJcblx0XHRcdFx0XHRcdFx0XHRzZXR0aW5ncy5leHBsb3JlckJ1dHRvbkl0ZW1zLnNwbGljZShpdGVtSWR4LCAxKTtcclxuXHRcdFx0XHRcdFx0XHR9XHJcblx0XHRcdFx0XHRcdFx0aWYgKHBhaXIpIHtcclxuXHRcdFx0XHRcdFx0XHRcdGNvbnN0IGNtZElkeCA9IHNldHRpbmdzLmV4cGxvcmVyQ29tbWFuZHMuaW5kZXhPZihwYWlyKTtcclxuXHRcdFx0XHRcdFx0XHRcdGlmIChjbWRJZHggPiAtMSkge1xyXG5cdFx0XHRcdFx0XHRcdFx0XHRzZXR0aW5ncy5leHBsb3JlckNvbW1hbmRzLnNwbGljZShjbWRJZHgsIDEpO1xyXG5cdFx0XHRcdFx0XHRcdFx0fVxyXG5cdFx0XHRcdFx0XHRcdH1cclxuXHRcdFx0XHRcdFx0XHRhd2FpdCB0aGlzLnNhdmVTZXR0aW5ncygpO1xyXG5cdFx0XHRcdFx0XHRcdHRoaXMucGx1Z2luLmV4cGxvcmVyTWFuYWdlcj8ucmVvcmRlcigpO1xyXG5cdFx0XHRcdFx0XHRcdHRoaXMucmVuZGVyKGNvbnRhaW5lcik7XHJcblx0XHRcdFx0XHRcdH0pKCk7XHJcblx0XHRcdFx0XHR9KTtcclxuXHRcdFx0XHRcdGJ1dHRvbi5leHRyYVNldHRpbmdzRWwuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoZSkgPT4gZS5zdG9wUHJvcGFnYXRpb24oKSk7XHJcblx0XHRcdFx0fSk7XHJcblx0XHRcdH1cclxuXHJcblx0XHRcdC8vIEhpZGUvU2hvdyB0b2dnbGUgKGZvciBuYXRpdmUgYW5kIGV4dGVybmFsIGJ1dHRvbnMpXHJcblx0XHRcdGlmICgoaXRlbS50eXBlID09PSAnbmF0aXZlJyAmJiBuYXRpdmVCdXR0b25JbmZvKSB8fCBpdGVtLnR5cGUgPT09ICdleHRlcm5hbCcpIHtcclxuXHRcdFx0XHRzZXR0aW5nLmFkZEV4dHJhQnV0dG9uKChidXR0b24pID0+IHtcclxuXHRcdFx0XHRcdGNvbnN0IGljb25FbCA9IGJ1dHRvbi5leHRyYVNldHRpbmdzRWw7XHJcblx0XHRcdFx0XHRzZXRJY29uKGljb25FbCwgaXNIaWRkZW4gPyAnZXllLW9mZicgOiAnZXllJyk7XHJcblx0XHRcdFx0XHRidXR0b24uc2V0VG9vbHRpcChpc0hpZGRlbiA/ICdTaG93IGJ1dHRvbicgOiAnSGlkZSBidXR0b24nKTtcclxuXHRcdFx0XHRcdGJ1dHRvbi5vbkNsaWNrKCgpID0+IHtcclxuXHRcdFx0XHRcdFx0dm9pZCAoYXN5bmMgKCkgPT4ge1xyXG5cdFx0XHRcdFx0XHRcdGlmIChpdGVtLnR5cGUgPT09ICduYXRpdmUnICYmIG5hdGl2ZUJ1dHRvbkluZm8pIHtcclxuXHRcdFx0XHRcdFx0XHRcdHNldHRpbmdzW25hdGl2ZUJ1dHRvbkluZm8uc2V0dGluZ0tleV0gPSAhc2V0dGluZ3NbbmF0aXZlQnV0dG9uSW5mby5zZXR0aW5nS2V5XTtcclxuXHRcdFx0XHRcdFx0XHRcdGl0ZW0uaGlkZGVuID0gc2V0dGluZ3NbbmF0aXZlQnV0dG9uSW5mby5zZXR0aW5nS2V5XTtcclxuXHRcdFx0XHRcdFx0XHR9IGVsc2UgaWYgKGl0ZW0udHlwZSA9PT0gJ2V4dGVybmFsJykge1xyXG5cdFx0XHRcdFx0XHRcdFx0aXRlbS5oaWRkZW4gPSAhaXRlbS5oaWRkZW47XHJcblx0XHRcdFx0XHRcdFx0fVxyXG5cdFx0XHRcdFx0XHRcdGF3YWl0IHRoaXMuc2F2ZVNldHRpbmdzKCk7XHJcblx0XHRcdFx0XHRcdFx0Y29uc3QgbmV3SXNIaWRkZW4gPSBpdGVtLmhpZGRlbjtcclxuXHRcdFx0XHRcdFx0XHRzZXRJY29uKGljb25FbCwgbmV3SXNIaWRkZW4gPyAnZXllLW9mZicgOiAnZXllJyk7XHJcblx0XHRcdFx0XHRcdFx0YnV0dG9uLnNldFRvb2x0aXAobmV3SXNIaWRkZW4gPyAnU2hvdyBidXR0b24nIDogJ0hpZGUgYnV0dG9uJyk7XHJcblx0XHRcdFx0XHRcdFx0dGhpcy5wbHVnaW4uZXhwbG9yZXJNYW5hZ2VyPy5yZW9yZGVyKCk7XHJcblx0XHRcdFx0XHRcdH0pKCk7XHJcblx0XHRcdFx0XHR9KTtcclxuXHRcdFx0XHRcdGJ1dHRvbi5leHRyYVNldHRpbmdzRWwuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoZSkgPT4gZS5zdG9wUHJvcGFnYXRpb24oKSk7XHJcblx0XHRcdFx0fSk7XHJcblx0XHRcdH1cclxuXHRcdH0pO1xyXG5cclxuXHRcdC8vIENvbGxhcHNpYmxlIHNldHRpbmdzIHNlY3Rpb24gKG9ubHkgZm9yIG5hdGl2ZSBhbmQgY3VzdG9tKVxyXG5cdFx0aWYgKGl0ZW0udHlwZSA9PT0gJ25hdGl2ZScgfHwgaXRlbS50eXBlID09PSAnY3VzdG9tJykge1xyXG5cdFx0XHQvLyBDb2xvciBwaWNrZXJcclxuXHRcdFx0aWYgKGl0ZW0udHlwZSA9PT0gJ25hdGl2ZScgJiYgbmF0aXZlQnV0dG9uSW5mbykge1xyXG5cdFx0XHRcdGdyb3VwLmFkZFNldHRpbmcoKHNldHRpbmcpOiB2b2lkID0+IHtcclxuXHRcdFx0XHRcdG90aGVyU2V0dGluZ3MucHVzaChzZXR0aW5nLnNldHRpbmdFbCk7XHJcblx0XHRcdFx0XHRjb25zdCBoYXNDb2xvciA9IGNvbG9yICE9PSB1bmRlZmluZWQ7XHJcblx0XHRcdFx0XHRcclxuXHRcdFx0XHRcdHNldHRpbmdcclxuXHRcdFx0XHRcdFx0LnNldE5hbWUoJ0N1c3RvbSBjb2xvcicpXHJcblx0XHRcdFx0XHRcdC5zZXREZXNjKCdTZXQgYSBjdXN0b20gY29sb3IgZm9yIHRoaXMgaWNvbicpXHJcblx0XHRcdFx0XHRcdC5hZGRDb2xvclBpY2tlcigoY29sb3JQaWNrZXIpID0+IHtcclxuXHRcdFx0XHRcdFx0XHRjb25zdCBjdXJyZW50Q29sb3IgPSBjb2xvciA/PyAnIzAwMDAwMCc7XHJcblx0XHRcdFx0XHRcdFx0Y29sb3JQaWNrZXIuc2V0VmFsdWUoY3VycmVudENvbG9yKTtcclxuXHRcdFx0XHRcdFx0XHRcclxuXHRcdFx0XHRcdFx0XHRjb25zdCBjb250cm9sRWwgPSBzZXR0aW5nLmNvbnRyb2xFbDtcclxuXHRcdFx0XHRcdFx0XHRjb250cm9sRWwuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoZSkgPT4gZS5zdG9wUHJvcGFnYXRpb24oKSk7XHJcblx0XHRcdFx0XHRcdFx0XHJcblx0XHRcdFx0XHRcdFx0c2V0VGltZW91dCgoKSA9PiB7XHJcblx0XHRcdFx0XHRcdFx0XHRjb25zdCBjb2xvcklucHV0ID0gY29udHJvbEVsLnF1ZXJ5U2VsZWN0b3IoJ2lucHV0W3R5cGU9XCJjb2xvclwiXScpIGFzIEhUTUxJbnB1dEVsZW1lbnQ7XHJcblx0XHRcdFx0XHRcdFx0XHRpZiAoY29sb3JJbnB1dCkge1xyXG5cdFx0XHRcdFx0XHRcdFx0XHRjb2xvcklucHV0LmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKGUpID0+IGUuc3RvcFByb3BhZ2F0aW9uKCkpO1xyXG5cdFx0XHRcdFx0XHRcdFx0fVxyXG5cdFx0XHRcdFx0XHRcdH0sIDApO1xyXG5cdFx0XHRcdFx0XHRcdFxyXG5cdFx0XHRcdFx0XHRcdGlmIChoYXNDb2xvcikge1xyXG5cdFx0XHRcdFx0XHRcdFx0c2V0VGltZW91dCgoKSA9PiB7XHJcblx0XHRcdFx0XHRcdFx0XHRcdGNvbnN0IGNvbG9yUGlja2VyRWwgPSBjb250cm9sRWwucXVlcnlTZWxlY3RvcignLmNvbG9yLXBpY2tlcicpIHx8IGNvbnRyb2xFbC5sYXN0RWxlbWVudENoaWxkO1xyXG5cdFx0XHRcdFx0XHRcdFx0XHRjb25zdCByZXNldEJ1dHRvbiA9IGNvbnRyb2xFbC5jcmVhdGVFbCgnYnV0dG9uJywge1xyXG5cdFx0XHRcdFx0XHRcdFx0XHRcdGNsczogJ2NsaWNrYWJsZS1pY29uIHVpLXR3ZWFrZXItY29sb3ItcmVzZXQnLFxyXG5cdFx0XHRcdFx0XHRcdFx0XHRcdGF0dHI6IHsgJ2FyaWEtbGFiZWwnOiAnUmVzZXQgdG8gZGVmYXVsdCBjb2xvcicgfVxyXG5cdFx0XHRcdFx0XHRcdFx0XHR9KTtcclxuXHRcdFx0XHRcdFx0XHRcdFx0c2V0SWNvbihyZXNldEJ1dHRvbiwgJ2x1Y2lkZS1yb3RhdGUtY3cnKTtcclxuXHRcdFx0XHRcdFx0XHRcdFx0c2V0Q3NzUHJvcHMocmVzZXRCdXR0b24sIHsgbWFyZ2luUmlnaHQ6ICcwLjVyZW0nIH0pO1xyXG5cdFx0XHRcdFx0XHRcdFx0XHRyZXNldEJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIChlKSA9PiB7XHJcblx0XHRcdFx0XHRcdFx0XHRcdFx0ZS5zdG9wUHJvcGFnYXRpb24oKTtcclxuXHRcdFx0XHRcdFx0XHRcdFx0XHRlLnN0b3BJbW1lZGlhdGVQcm9wYWdhdGlvbigpO1xyXG5cdFx0XHRcdFx0XHRcdFx0XHRcdGUucHJldmVudERlZmF1bHQoKTtcclxuXHRcdFx0XHRcdFx0XHRcdFx0XHR2b2lkIChhc3luYyAoKSA9PiB7XHJcblx0XHRcdFx0XHRcdFx0XHRcdFx0XHRpZiAoIXNldHRpbmdzLm5hdGl2ZUV4cGxvcmVyQnV0dG9uQ29sb3JzKSB7XHJcblx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdHNldHRpbmdzLm5hdGl2ZUV4cGxvcmVyQnV0dG9uQ29sb3JzID0ge307XHJcblx0XHRcdFx0XHRcdFx0XHRcdFx0XHR9XHJcblx0XHRcdFx0XHRcdFx0XHRcdFx0XHRzZXR0aW5ncy5uYXRpdmVFeHBsb3JlckJ1dHRvbkNvbG9yc1tuYXRpdmVCdXR0b25JbmZvLmNvbG9yS2V5XSA9IHVuZGVmaW5lZDtcclxuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdGF3YWl0IHRoaXMuc2F2ZVNldHRpbmdzKCk7XHJcblx0XHRcdFx0XHRcdFx0XHRcdFx0XHR0aGlzLnBsdWdpbi5leHBsb3Jlck1hbmFnZXI/LmFwcGx5TmF0aXZlSWNvbk92ZXJyaWRlcygpO1xyXG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0dGhpcy5yZW5kZXIoY29udGFpbmVyKTtcclxuXHRcdFx0XHRcdFx0XHRcdFx0XHR9KSgpO1xyXG5cdFx0XHRcdFx0XHRcdFx0XHR9KTtcclxuXHRcdFx0XHRcdFx0XHRcdFx0aWYgKGNvbG9yUGlja2VyRWwpIHtcclxuXHRcdFx0XHRcdFx0XHRcdFx0XHRjb250cm9sRWwuaW5zZXJ0QmVmb3JlKHJlc2V0QnV0dG9uLCBjb2xvclBpY2tlckVsKTtcclxuXHRcdFx0XHRcdFx0XHRcdFx0fVxyXG5cdFx0XHRcdFx0XHRcdFx0fSwgMCk7XHJcblx0XHRcdFx0XHRcdFx0fVxyXG5cdFx0XHRcdFx0XHRcdFxyXG5cdFx0XHRcdFx0XHRcdGNvbG9yUGlja2VyLm9uQ2hhbmdlKCh2YWx1ZSkgPT4ge1xyXG5cdFx0XHRcdFx0XHRcdFx0dm9pZCAoYXN5bmMgKCkgPT4ge1xyXG5cdFx0XHRcdFx0XHRcdFx0XHRpZiAoIXNldHRpbmdzLm5hdGl2ZUV4cGxvcmVyQnV0dG9uQ29sb3JzKSB7XHJcblx0XHRcdFx0XHRcdFx0XHRcdFx0c2V0dGluZ3MubmF0aXZlRXhwbG9yZXJCdXR0b25Db2xvcnMgPSB7fTtcclxuXHRcdFx0XHRcdFx0XHRcdFx0fVxyXG5cdFx0XHRcdFx0XHRcdFx0XHRjb25zdCBuZXdDb2xvciA9IHZhbHVlID09PSAnIzAwMDAwMCcgPyB1bmRlZmluZWQgOiB2YWx1ZTtcclxuXHRcdFx0XHRcdFx0XHRcdFx0c2V0dGluZ3MubmF0aXZlRXhwbG9yZXJCdXR0b25Db2xvcnNbbmF0aXZlQnV0dG9uSW5mby5jb2xvcktleV0gPSBuZXdDb2xvcjtcclxuXHRcdFx0XHRcdFx0XHRcdFx0YXdhaXQgdGhpcy5zYXZlU2V0dGluZ3MoKTtcclxuXHRcdFx0XHRcdFx0XHRcdFx0dGhpcy5wbHVnaW4uZXhwbG9yZXJNYW5hZ2VyPy5hcHBseU5hdGl2ZUljb25PdmVycmlkZXMoKTtcclxuXHRcdFx0XHRcdFx0XHRcdFx0XHJcblx0XHRcdFx0XHRcdFx0XHRcdC8vIFVwZGF0ZSByZXNldCBidXR0b24gdmlzaWJpbGl0eSB3aXRob3V0IGZ1bGwgcmUtcmVuZGVyXHJcblx0XHRcdFx0XHRcdFx0XHRcdGNvbnN0IGV4aXN0aW5nUmVzZXQgPSBjb250cm9sRWwucXVlcnlTZWxlY3RvcignLnVpLXR3ZWFrZXItY29sb3ItcmVzZXQnKTtcclxuXHRcdFx0XHRcdFx0XHRcdFx0aWYgKG5ld0NvbG9yICYmICFleGlzdGluZ1Jlc2V0KSB7XHJcblx0XHRcdFx0XHRcdFx0XHRcdFx0Ly8gQWRkIHJlc2V0IGJ1dHRvblxyXG5cdFx0XHRcdFx0XHRcdFx0XHRcdGNvbnN0IGNvbG9yUGlja2VyRWwgPSBjb250cm9sRWwucXVlcnlTZWxlY3RvcignLmNvbG9yLXBpY2tlcicpIHx8IGNvbnRyb2xFbC5sYXN0RWxlbWVudENoaWxkO1xyXG5cdFx0XHRcdFx0XHRcdFx0XHRcdGNvbnN0IHJlc2V0QnV0dG9uID0gY29udHJvbEVsLmNyZWF0ZUVsKCdidXR0b24nLCB7XHJcblx0XHRcdFx0XHRcdFx0XHRcdFx0XHRjbHM6ICdjbGlja2FibGUtaWNvbiB1aS10d2Vha2VyLWNvbG9yLXJlc2V0JyxcclxuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdGF0dHI6IHsgJ2FyaWEtbGFiZWwnOiAnUmVzZXQgdG8gZGVmYXVsdCBjb2xvcicgfVxyXG5cdFx0XHRcdFx0XHRcdFx0XHRcdH0pO1xyXG5cdFx0XHRcdFx0XHRcdFx0XHRcdHNldEljb24ocmVzZXRCdXR0b24sICdsdWNpZGUtcm90YXRlLWN3Jyk7XHJcblx0XHRcdFx0XHRcdFx0XHRcdFx0c2V0Q3NzUHJvcHMocmVzZXRCdXR0b24sIHsgbWFyZ2luUmlnaHQ6ICcwLjVyZW0nIH0pO1xyXG5cdFx0XHRcdFx0XHRcdFx0XHRcdHJlc2V0QnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKGUpID0+IHtcclxuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdGUuc3RvcFByb3BhZ2F0aW9uKCk7XHJcblx0XHRcdFx0XHRcdFx0XHRcdFx0XHRlLnN0b3BJbW1lZGlhdGVQcm9wYWdhdGlvbigpO1xyXG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0ZS5wcmV2ZW50RGVmYXVsdCgpO1xyXG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0dm9pZCAoYXN5bmMgKCkgPT4ge1xyXG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRpZiAoIXNldHRpbmdzLm5hdGl2ZUV4cGxvcmVyQnV0dG9uQ29sb3JzKSB7XHJcblx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0c2V0dGluZ3MubmF0aXZlRXhwbG9yZXJCdXR0b25Db2xvcnMgPSB7fTtcclxuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0fVxyXG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRzZXR0aW5ncy5uYXRpdmVFeHBsb3JlckJ1dHRvbkNvbG9yc1tuYXRpdmVCdXR0b25JbmZvLmNvbG9yS2V5XSA9IHVuZGVmaW5lZDtcclxuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0YXdhaXQgdGhpcy5zYXZlU2V0dGluZ3MoKTtcclxuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0dGhpcy5wbHVnaW4uZXhwbG9yZXJNYW5hZ2VyPy5hcHBseU5hdGl2ZUljb25PdmVycmlkZXMoKTtcclxuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0dGhpcy5yZW5kZXIoY29udGFpbmVyKTtcclxuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdH0pKCk7XHJcblx0XHRcdFx0XHRcdFx0XHRcdFx0fSk7XHJcblx0XHRcdFx0XHRcdFx0XHRcdFx0aWYgKGNvbG9yUGlja2VyRWwpIHtcclxuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdGNvbnRyb2xFbC5pbnNlcnRCZWZvcmUocmVzZXRCdXR0b24sIGNvbG9yUGlja2VyRWwpO1xyXG5cdFx0XHRcdFx0XHRcdFx0XHRcdH1cclxuXHRcdFx0XHRcdFx0XHRcdFx0fSBlbHNlIGlmICghbmV3Q29sb3IgJiYgZXhpc3RpbmdSZXNldCkge1xyXG5cdFx0XHRcdFx0XHRcdFx0XHRcdC8vIFJlbW92ZSByZXNldCBidXR0b25cclxuXHRcdFx0XHRcdFx0XHRcdFx0XHRleGlzdGluZ1Jlc2V0LnJlbW92ZSgpO1xyXG5cdFx0XHRcdFx0XHRcdFx0XHR9XHJcblx0XHRcdFx0XHRcdFx0XHR9KSgpO1xyXG5cdFx0XHRcdFx0XHRcdH0pO1xyXG5cdFx0XHRcdFx0XHR9KTtcclxuXHRcdFx0XHR9KTtcclxuXHJcblx0XHRcdFx0Ly8gSWNvbiBvdmVycmlkZVxyXG5cdFx0XHRcdGdyb3VwLmFkZFNldHRpbmcoKHNldHRpbmcpOiB2b2lkID0+IHtcclxuXHRcdFx0XHRcdG90aGVyU2V0dGluZ3MucHVzaChzZXR0aW5nLnNldHRpbmdFbCk7XHJcblx0XHRcdFx0XHRjb25zdCBoYXNJY29uT3ZlcnJpZGUgPSBpY29uT3ZlcnJpZGUgIT09IHVuZGVmaW5lZDtcclxuXHRcdFx0XHRcdFxyXG5cdFx0XHRcdFx0c2V0dGluZ1xyXG5cdFx0XHRcdFx0XHQuc2V0TmFtZSgnSWNvbiBvdmVycmlkZScpXHJcblx0XHRcdFx0XHRcdC5zZXREZXNjKCdPdmVycmlkZSB0aGUgZGVmYXVsdCBpY29uIGZvciB0aGlzIGJ1dHRvbicpXHJcblx0XHRcdFx0XHRcdC5hZGRCdXR0b24oKGJ1dHRvbikgPT4ge1xyXG5cdFx0XHRcdFx0XHRcdGNvbnN0IGN1cnJlbnRJY29uID0gaWNvbk92ZXJyaWRlIHx8ICdEZWZhdWx0JztcclxuXHRcdFx0XHRcdFx0XHRidXR0b24uc2V0QnV0dG9uVGV4dChjdXJyZW50SWNvbiA9PT0gJ0RlZmF1bHQnID8gJ1NldCBpY29uLi4uJyA6IGN1cnJlbnRJY29uKS5vbkNsaWNrKCgpID0+IHtcclxuXHRcdFx0XHRcdFx0XHRcdGNvbnN0IG1vZGFsID0gbmV3IEljb25QaWNrZXJNb2RhbCh0aGlzLmFwcCwgKGljb25JZCkgPT4ge1xyXG5cdFx0XHRcdFx0XHRcdFx0XHR2b2lkIChhc3luYyAoKSA9PiB7XHJcblx0XHRcdFx0XHRcdFx0XHRcdFx0aWYgKCFzZXR0aW5ncy5uYXRpdmVFeHBsb3JlckJ1dHRvbkljb25zKSB7XHJcblx0XHRcdFx0XHRcdFx0XHRcdFx0XHRzZXR0aW5ncy5uYXRpdmVFeHBsb3JlckJ1dHRvbkljb25zID0ge307XHJcblx0XHRcdFx0XHRcdFx0XHRcdFx0fVxyXG5cdFx0XHRcdFx0XHRcdFx0XHRcdGlmIChpY29uSWQpIHtcclxuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdHNldHRpbmdzLm5hdGl2ZUV4cGxvcmVyQnV0dG9uSWNvbnNbbmF0aXZlQnV0dG9uSW5mby5jb2xvcktleV0gPSBpY29uSWQ7XHJcblx0XHRcdFx0XHRcdFx0XHRcdFx0fSBlbHNlIHtcclxuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdHNldHRpbmdzLm5hdGl2ZUV4cGxvcmVyQnV0dG9uSWNvbnNbbmF0aXZlQnV0dG9uSW5mby5jb2xvcktleV0gPSB1bmRlZmluZWQ7XHJcblx0XHRcdFx0XHRcdFx0XHRcdFx0fVxyXG5cdFx0XHRcdFx0XHRcdFx0XHRcdGF3YWl0IHRoaXMuc2F2ZVNldHRpbmdzKCk7XHJcblx0XHRcdFx0XHRcdFx0XHRcdFx0dGhpcy5wbHVnaW4uZXhwbG9yZXJNYW5hZ2VyPy5hcHBseU5hdGl2ZUljb25PdmVycmlkZXMoKTtcclxuXHRcdFx0XHRcdFx0XHRcdFx0XHR0aGlzLnJlbmRlcihjb250YWluZXIpO1xyXG5cdFx0XHRcdFx0XHRcdFx0XHR9KSgpO1xyXG5cdFx0XHRcdFx0XHRcdFx0fSk7XHJcblx0XHRcdFx0XHRcdFx0XHRtb2RhbC5vcGVuKCk7XHJcblx0XHRcdFx0XHRcdFx0fSk7XHJcblx0XHRcdFx0XHRcdFx0YnV0dG9uLmJ1dHRvbkVsLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKGUpID0+IGUuc3RvcFByb3BhZ2F0aW9uKCkpO1xyXG5cdFx0XHRcdFx0XHRcdFxyXG5cdFx0XHRcdFx0XHRcdC8vIEFkZCByZXNldCBidXR0b24gaWYgaWNvbiBvdmVycmlkZSBpcyBzZXRcclxuXHRcdFx0XHRcdFx0XHRpZiAoaGFzSWNvbk92ZXJyaWRlKSB7XHJcblx0XHRcdFx0XHRcdFx0XHRzZXRUaW1lb3V0KCgpID0+IHtcclxuXHRcdFx0XHRcdFx0XHRcdFx0Y29uc3QgY29udHJvbEVsID0gc2V0dGluZy5jb250cm9sRWw7XHJcblx0XHRcdFx0XHRcdFx0XHRcdGNvbnN0IGJ1dHRvbkVsID0gY29udHJvbEVsLnF1ZXJ5U2VsZWN0b3IoJ2J1dHRvbicpIHx8IGNvbnRyb2xFbC5sYXN0RWxlbWVudENoaWxkO1xyXG5cdFx0XHRcdFx0XHRcdFx0XHRcclxuXHRcdFx0XHRcdFx0XHRcdFx0Y29uc3QgcmVzZXRCdXR0b24gPSBjb250cm9sRWwuY3JlYXRlRWwoJ2J1dHRvbicsIHtcclxuXHRcdFx0XHRcdFx0XHRcdFx0XHRjbHM6ICdjbGlja2FibGUtaWNvbiB1aS10d2Vha2VyLWljb24tb3ZlcnJpZGUtcmVzZXQnLFxyXG5cdFx0XHRcdFx0XHRcdFx0XHRcdGF0dHI6IHsgJ2FyaWEtbGFiZWwnOiAnUmVzZXQgaWNvbiBvdmVycmlkZScgfVxyXG5cdFx0XHRcdFx0XHRcdFx0XHR9KTtcclxuXHRcdFx0XHRcdFx0XHRcdFx0c2V0SWNvbihyZXNldEJ1dHRvbiwgJ2x1Y2lkZS1yb3RhdGUtY3cnKTtcclxuXHRcdFx0XHRcdFx0XHRcdFx0c2V0Q3NzUHJvcHMocmVzZXRCdXR0b24sIHsgbWFyZ2luUmlnaHQ6ICcwLjVyZW0nIH0pO1xyXG5cdFx0XHRcdFx0XHRcdFx0XHRyZXNldEJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIChlKSA9PiB7XHJcblx0XHRcdFx0XHRcdFx0XHRcdFx0ZS5zdG9wUHJvcGFnYXRpb24oKTtcclxuXHRcdFx0XHRcdFx0XHRcdFx0XHRlLnN0b3BJbW1lZGlhdGVQcm9wYWdhdGlvbigpO1xyXG5cdFx0XHRcdFx0XHRcdFx0XHRcdGUucHJldmVudERlZmF1bHQoKTtcclxuXHRcdFx0XHRcdFx0XHRcdFx0XHR2b2lkIChhc3luYyAoKSA9PiB7XHJcblx0XHRcdFx0XHRcdFx0XHRcdFx0XHRpZiAoIXNldHRpbmdzLm5hdGl2ZUV4cGxvcmVyQnV0dG9uSWNvbnMpIHtcclxuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0c2V0dGluZ3MubmF0aXZlRXhwbG9yZXJCdXR0b25JY29ucyA9IHt9O1xyXG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0fVxyXG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0c2V0dGluZ3MubmF0aXZlRXhwbG9yZXJCdXR0b25JY29uc1tuYXRpdmVCdXR0b25JbmZvLmNvbG9yS2V5XSA9IHVuZGVmaW5lZDtcclxuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdGF3YWl0IHRoaXMuc2F2ZVNldHRpbmdzKCk7XHJcblx0XHRcdFx0XHRcdFx0XHRcdFx0XHR0aGlzLnBsdWdpbi5leHBsb3Jlck1hbmFnZXI/LmFwcGx5TmF0aXZlSWNvbk92ZXJyaWRlcygpO1xyXG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0dGhpcy5yZW5kZXIoY29udGFpbmVyKTtcclxuXHRcdFx0XHRcdFx0XHRcdFx0XHR9KSgpO1xyXG5cdFx0XHRcdFx0XHRcdFx0XHR9KTtcclxuXHRcdFx0XHRcdFx0XHRcdFx0XHJcblx0XHRcdFx0XHRcdFx0XHRcdC8vIEluc2VydCByZXNldCBidXR0b24gYmVmb3JlIHRoZSBtYWluIGJ1dHRvblxyXG5cdFx0XHRcdFx0XHRcdFx0XHRpZiAoYnV0dG9uRWwpIHtcclxuXHRcdFx0XHRcdFx0XHRcdFx0XHRjb250cm9sRWwuaW5zZXJ0QmVmb3JlKHJlc2V0QnV0dG9uLCBidXR0b25FbCk7XHJcblx0XHRcdFx0XHRcdFx0XHRcdH0gZWxzZSB7XHJcblx0XHRcdFx0XHRcdFx0XHRcdFx0Y29udHJvbEVsLmluc2VydEJlZm9yZShyZXNldEJ1dHRvbiwgY29udHJvbEVsLmZpcnN0Q2hpbGQpO1xyXG5cdFx0XHRcdFx0XHRcdFx0XHR9XHJcblx0XHRcdFx0XHRcdFx0XHR9LCAwKTtcclxuXHRcdFx0XHRcdFx0XHR9XHJcblx0XHRcdFx0XHRcdH0pO1xyXG5cdFx0XHRcdH0pO1xyXG5cdFx0XHR9IGVsc2UgaWYgKGl0ZW0udHlwZSA9PT0gJ2N1c3RvbScgJiYgcGFpcikge1xyXG5cdFx0XHRcdC8vIEN1c3RvbSBjb21tYW5kIHNldHRpbmdzIChkZXZpY2UgbW9kZSwgY29sb3IsIHRvZ2dsZSBpY29uLCBldGMuKVxyXG5cdFx0XHRcdC8vIERldmljZSBtb2RlXHJcblx0XHRcdFx0Z3JvdXAuYWRkU2V0dGluZygoc2V0dGluZyk6IHZvaWQgPT4ge1xyXG5cdFx0XHRcdFx0b3RoZXJTZXR0aW5ncy5wdXNoKHNldHRpbmcuc2V0dGluZ0VsKTtcclxuXHRcdFx0XHRcdHNldHRpbmdcclxuXHRcdFx0XHRcdFx0LnNldE5hbWUoJ0RldmljZSBtb2RlJylcclxuXHRcdFx0XHRcdFx0LnNldERlc2MoJ0Nob29zZSB3aGljaCBkZXZpY2VzIHRoaXMgYnV0dG9uIGFwcGVhcnMgb24nKVxyXG5cdFx0XHRcdFx0XHQuYWRkRHJvcGRvd24oKGRyb3Bkb3duKSA9PiB7XHJcblx0XHRcdFx0XHRcdFx0Y29uc3QgYXBwSWQgPSAodGhpcy5hcHAgYXMgeyBhcHBJZD86IHN0cmluZyB9KS5hcHBJZCB8fCAndGhpcy1kZXZpY2UnO1xyXG5cdFx0XHRcdFx0XHRcdGRyb3Bkb3duXHJcblx0XHRcdFx0XHRcdFx0XHQuYWRkT3B0aW9uKCdhbnknLCAnQWxsIGRldmljZXMnKVxyXG5cdFx0XHRcdFx0XHRcdFx0LmFkZE9wdGlvbignZGVza3RvcCcsICdEZXNrdG9wIG9ubHknKVxyXG5cdFx0XHRcdFx0XHRcdFx0LmFkZE9wdGlvbignbW9iaWxlJywgJ01vYmlsZSBvbmx5JylcclxuXHRcdFx0XHRcdFx0XHRcdC5hZGRPcHRpb24oYXBwSWQsICdUaGlzIGRldmljZScpXHJcblx0XHRcdFx0XHRcdFx0XHQuc2V0VmFsdWUocGFpci5tb2RlIHx8ICdhbnknKVxyXG5cdFx0XHRcdFx0XHRcdFx0Lm9uQ2hhbmdlKCh2YWx1ZSkgPT4ge1xyXG5cdFx0XHRcdFx0XHRcdFx0XHR2b2lkIChhc3luYyAoKSA9PiB7XHJcblx0XHRcdFx0XHRcdFx0XHRcdFx0cGFpci5tb2RlID0gdmFsdWU7XHJcblx0XHRcdFx0XHRcdFx0XHRcdFx0aXRlbS5tb2RlID0gdmFsdWU7XHJcblx0XHRcdFx0XHRcdFx0XHRcdFx0YXdhaXQgdGhpcy5zYXZlU2V0dGluZ3MoKTtcclxuXHRcdFx0XHRcdFx0XHRcdFx0XHR0aGlzLnBsdWdpbi5leHBsb3Jlck1hbmFnZXI/LnJlb3JkZXIoKTtcclxuXHRcdFx0XHRcdFx0XHRcdFx0XHR0aGlzLnJlbmRlcihjb250YWluZXIpO1xyXG5cdFx0XHRcdFx0XHRcdFx0XHR9KSgpO1xyXG5cdFx0XHRcdFx0XHRcdFx0fSk7XHJcblx0XHRcdFx0XHRcdFx0ZHJvcGRvd24uc2VsZWN0RWwuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoZSkgPT4gZS5zdG9wUHJvcGFnYXRpb24oKSk7XHJcblx0XHRcdFx0XHRcdH0pO1xyXG5cdFx0XHRcdH0pO1xyXG5cclxuXHRcdFx0XHQvLyBDdXN0b20gY29sb3IgcGlja2VyXHJcblx0XHRcdFx0Z3JvdXAuYWRkU2V0dGluZygoc2V0dGluZyk6IHZvaWQgPT4ge1xyXG5cdFx0XHRcdFx0b3RoZXJTZXR0aW5ncy5wdXNoKHNldHRpbmcuc2V0dGluZ0VsKTtcclxuXHRcdFx0XHRcdGNvbnN0IGhhc0NvbG9yID0gcGFpci5jb2xvciAhPT0gdW5kZWZpbmVkO1xyXG5cdFx0XHRcdFx0XHJcblx0XHRcdFx0XHRzZXR0aW5nXHJcblx0XHRcdFx0XHRcdC5zZXROYW1lKCdDdXN0b20gY29sb3InKVxyXG5cdFx0XHRcdFx0XHQuc2V0RGVzYygnU2V0IGEgY3VzdG9tIGNvbG9yIGZvciB0aGlzIGljb24nKVxyXG5cdFx0XHRcdFx0XHQuYWRkQ29sb3JQaWNrZXIoKGNvbG9yUGlja2VyKSA9PiB7XHJcblx0XHRcdFx0XHRcdFx0Y29uc3QgY3VycmVudENvbG9yID0gcGFpci5jb2xvciA/PyAnIzAwMDAwMCc7XHJcblx0XHRcdFx0XHRcdFx0Y29sb3JQaWNrZXIuc2V0VmFsdWUoY3VycmVudENvbG9yKTtcclxuXHRcdFx0XHRcdFx0XHRcclxuXHRcdFx0XHRcdFx0XHRjb25zdCBjb250cm9sRWwgPSBzZXR0aW5nLmNvbnRyb2xFbDtcclxuXHRcdFx0XHRcdFx0XHRjb250cm9sRWwuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoZSkgPT4gZS5zdG9wUHJvcGFnYXRpb24oKSk7XHJcblx0XHRcdFx0XHRcdFx0XHJcblx0XHRcdFx0XHRcdFx0c2V0VGltZW91dCgoKSA9PiB7XHJcblx0XHRcdFx0XHRcdFx0XHRjb25zdCBjb2xvcklucHV0ID0gY29udHJvbEVsLnF1ZXJ5U2VsZWN0b3IoJ2lucHV0W3R5cGU9XCJjb2xvclwiXScpIGFzIEhUTUxJbnB1dEVsZW1lbnQ7XHJcblx0XHRcdFx0XHRcdFx0XHRpZiAoY29sb3JJbnB1dCkge1xyXG5cdFx0XHRcdFx0XHRcdFx0XHRjb2xvcklucHV0LmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKGUpID0+IGUuc3RvcFByb3BhZ2F0aW9uKCkpO1xyXG5cdFx0XHRcdFx0XHRcdFx0fVxyXG5cdFx0XHRcdFx0XHRcdH0sIDApO1xyXG5cdFx0XHRcdFx0XHRcdFxyXG5cdFx0XHRcdFx0XHRcdGlmIChoYXNDb2xvcikge1xyXG5cdFx0XHRcdFx0XHRcdFx0c2V0VGltZW91dCgoKSA9PiB7XHJcblx0XHRcdFx0XHRcdFx0XHRcdGNvbnN0IGNvbG9yUGlja2VyRWwgPSBjb250cm9sRWwucXVlcnlTZWxlY3RvcignLmNvbG9yLXBpY2tlcicpIHx8IGNvbnRyb2xFbC5sYXN0RWxlbWVudENoaWxkO1xyXG5cdFx0XHRcdFx0XHRcdFx0XHRjb25zdCByZXNldEJ1dHRvbiA9IGNvbnRyb2xFbC5jcmVhdGVFbCgnYnV0dG9uJywge1xyXG5cdFx0XHRcdFx0XHRcdFx0XHRcdGNsczogJ2NsaWNrYWJsZS1pY29uIHVpLXR3ZWFrZXItY29sb3ItcmVzZXQnLFxyXG5cdFx0XHRcdFx0XHRcdFx0XHRcdGF0dHI6IHsgJ2FyaWEtbGFiZWwnOiAnUmVzZXQgdG8gZGVmYXVsdCBjb2xvcicgfVxyXG5cdFx0XHRcdFx0XHRcdFx0XHR9KTtcclxuXHRcdFx0XHRcdFx0XHRcdFx0c2V0SWNvbihyZXNldEJ1dHRvbiwgJ2x1Y2lkZS1yb3RhdGUtY3cnKTtcclxuXHRcdFx0XHRcdFx0XHRcdFx0c2V0Q3NzUHJvcHMocmVzZXRCdXR0b24sIHsgbWFyZ2luUmlnaHQ6ICcwLjVyZW0nIH0pO1xyXG5cdFx0XHRcdFx0XHRcdFx0XHRyZXNldEJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIChlKSA9PiB7XHJcblx0XHRcdFx0XHRcdFx0XHRcdFx0ZS5zdG9wUHJvcGFnYXRpb24oKTtcclxuXHRcdFx0XHRcdFx0XHRcdFx0XHRlLnN0b3BJbW1lZGlhdGVQcm9wYWdhdGlvbigpO1xyXG5cdFx0XHRcdFx0XHRcdFx0XHRcdGUucHJldmVudERlZmF1bHQoKTtcclxuXHRcdFx0XHRcdFx0XHRcdFx0XHR2b2lkIChhc3luYyAoKSA9PiB7XHJcblx0XHRcdFx0XHRcdFx0XHRcdFx0XHRwYWlyLmNvbG9yID0gdW5kZWZpbmVkO1xyXG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0aXRlbS5jb2xvciA9IHVuZGVmaW5lZDtcclxuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdGF3YWl0IHRoaXMuc2F2ZVNldHRpbmdzKCk7XHJcblx0XHRcdFx0XHRcdFx0XHRcdFx0XHR0aGlzLnBsdWdpbi5leHBsb3Jlck1hbmFnZXI/LnJlb3JkZXIoKTtcclxuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdHRoaXMucmVuZGVyKGNvbnRhaW5lcik7XHJcblx0XHRcdFx0XHRcdFx0XHRcdFx0fSkoKTtcclxuXHRcdFx0XHRcdFx0XHRcdFx0fSk7XHJcblx0XHRcdFx0XHRcdFx0XHRcdGlmIChjb2xvclBpY2tlckVsKSB7XHJcblx0XHRcdFx0XHRcdFx0XHRcdFx0Y29udHJvbEVsLmluc2VydEJlZm9yZShyZXNldEJ1dHRvbiwgY29sb3JQaWNrZXJFbCk7XHJcblx0XHRcdFx0XHRcdFx0XHRcdH1cclxuXHRcdFx0XHRcdFx0XHRcdH0sIDApO1xyXG5cdFx0XHRcdFx0XHRcdH1cclxuXHRcdFx0XHRcdFx0XHRcclxuXHRcdFx0XHRcdFx0XHRjb2xvclBpY2tlci5vbkNoYW5nZSgodmFsdWUpID0+IHtcclxuXHRcdFx0XHRcdFx0XHRcdGNvbnN0IG5ld0NvbG9yID0gdmFsdWUgPT09ICcjMDAwMDAwJyA/IHVuZGVmaW5lZCA6IHZhbHVlO1xyXG5cdFx0XHRcdFx0XHRcdFx0cGFpci5jb2xvciA9IG5ld0NvbG9yO1xyXG5cdFx0XHRcdFx0XHRcdFx0aXRlbS5jb2xvciA9IG5ld0NvbG9yO1xyXG5cdFx0XHRcdFx0XHRcdFx0XHJcblx0XHRcdFx0XHRcdFx0XHQvLyBVcGRhdGUgaWNvbiBwcmV2aWV3IGNvbG9yIGluIHJlYWwtdGltZVxyXG5cdFx0XHRcdFx0XHRcdFx0Y29uc3QgaWNvbkJ1dHRvbiA9IGNvbnRhaW5lci5xdWVyeVNlbGVjdG9yKGBbZGF0YS1leHBsb3Jlci1jb21tYW5kLWlkPVwiJHtwYWlyLmlkfVwiXWApIGFzIEhUTUxFbGVtZW50O1xyXG5cdFx0XHRcdFx0XHRcdFx0aWYgKGljb25CdXR0b24pIHtcclxuXHRcdFx0XHRcdFx0XHRcdFx0aWYgKG5ld0NvbG9yICYmIG5ld0NvbG9yICE9PSAnIzAwMDAwMCcpIHtcclxuXHRcdFx0XHRcdFx0XHRcdFx0XHRzZXRDc3NQcm9wcyhpY29uQnV0dG9uLCB7IGNvbG9yOiBuZXdDb2xvciB9KTtcclxuXHRcdFx0XHRcdFx0XHRcdFx0fSBlbHNlIHtcclxuXHRcdFx0XHRcdFx0XHRcdFx0XHRpY29uQnV0dG9uLnN0eWxlLnJlbW92ZVByb3BlcnR5KCdjb2xvcicpO1xyXG5cdFx0XHRcdFx0XHRcdFx0XHR9XHJcblx0XHRcdFx0XHRcdFx0XHR9XHJcblx0XHRcdFx0XHRcdFx0XHRcclxuXHRcdFx0XHRcdFx0XHRcdC8vIFVwZGF0ZSByZXNldCBidXR0b24gdmlzaWJpbGl0eSB3aXRob3V0IGZ1bGwgcmUtcmVuZGVyXHJcblx0XHRcdFx0XHRcdFx0XHRjb25zdCBjb250cm9sRWwgPSBzZXR0aW5nLmNvbnRyb2xFbDtcclxuXHRcdFx0XHRcdFx0XHRcdGNvbnN0IGV4aXN0aW5nUmVzZXQgPSBjb250cm9sRWwucXVlcnlTZWxlY3RvcignLnVpLXR3ZWFrZXItY29sb3ItcmVzZXQnKTtcclxuXHRcdFx0XHRcdFx0XHRcdGlmIChuZXdDb2xvciAmJiAhZXhpc3RpbmdSZXNldCkge1xyXG5cdFx0XHRcdFx0XHRcdFx0XHQvLyBBZGQgcmVzZXQgYnV0dG9uXHJcblx0XHRcdFx0XHRcdFx0XHRcdGNvbnN0IGNvbG9yUGlja2VyRWwgPSBjb250cm9sRWwucXVlcnlTZWxlY3RvcignLmNvbG9yLXBpY2tlcicpIHx8IGNvbnRyb2xFbC5sYXN0RWxlbWVudENoaWxkO1xyXG5cdFx0XHRcdFx0XHRcdFx0XHRjb25zdCByZXNldEJ1dHRvbiA9IGNvbnRyb2xFbC5jcmVhdGVFbCgnYnV0dG9uJywge1xyXG5cdFx0XHRcdFx0XHRcdFx0XHRcdGNsczogJ2NsaWNrYWJsZS1pY29uIHVpLXR3ZWFrZXItY29sb3ItcmVzZXQnLFxyXG5cdFx0XHRcdFx0XHRcdFx0XHRcdGF0dHI6IHsgJ2FyaWEtbGFiZWwnOiAnUmVzZXQgdG8gZGVmYXVsdCBjb2xvcicgfVxyXG5cdFx0XHRcdFx0XHRcdFx0XHR9KTtcclxuXHRcdFx0XHRcdFx0XHRcdFx0c2V0SWNvbihyZXNldEJ1dHRvbiwgJ2x1Y2lkZS1yb3RhdGUtY3cnKTtcclxuXHRcdFx0XHRcdFx0XHRcdFx0c2V0Q3NzUHJvcHMocmVzZXRCdXR0b24sIHsgbWFyZ2luUmlnaHQ6ICcwLjVyZW0nIH0pO1xyXG5cdFx0XHRcdFx0XHRcdFx0XHRyZXNldEJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIChlKSA9PiB7XHJcblx0XHRcdFx0XHRcdFx0XHRcdFx0ZS5zdG9wUHJvcGFnYXRpb24oKTtcclxuXHRcdFx0XHRcdFx0XHRcdFx0XHRlLnN0b3BJbW1lZGlhdGVQcm9wYWdhdGlvbigpO1xyXG5cdFx0XHRcdFx0XHRcdFx0XHRcdGUucHJldmVudERlZmF1bHQoKTtcclxuXHRcdFx0XHRcdFx0XHRcdFx0XHR2b2lkIChhc3luYyAoKSA9PiB7XHJcblx0XHRcdFx0XHRcdFx0XHRcdFx0XHRwYWlyLmNvbG9yID0gdW5kZWZpbmVkO1xyXG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0aXRlbS5jb2xvciA9IHVuZGVmaW5lZDtcclxuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdGF3YWl0IHRoaXMuc2F2ZVNldHRpbmdzKCk7XHJcblx0XHRcdFx0XHRcdFx0XHRcdFx0XHR0aGlzLnBsdWdpbi5leHBsb3Jlck1hbmFnZXI/LnJlb3JkZXIoKTtcclxuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdHRoaXMucmVuZGVyKGNvbnRhaW5lcik7XHJcblx0XHRcdFx0XHRcdFx0XHRcdFx0fSkoKTtcclxuXHRcdFx0XHRcdFx0XHRcdFx0fSk7XHJcblx0XHRcdFx0XHRcdFx0XHRcdGlmIChjb2xvclBpY2tlckVsKSB7XHJcblx0XHRcdFx0XHRcdFx0XHRcdFx0Y29udHJvbEVsLmluc2VydEJlZm9yZShyZXNldEJ1dHRvbiwgY29sb3JQaWNrZXJFbCk7XHJcblx0XHRcdFx0XHRcdFx0XHRcdH1cclxuXHRcdFx0XHRcdFx0XHRcdH0gZWxzZSBpZiAoIW5ld0NvbG9yICYmIGV4aXN0aW5nUmVzZXQpIHtcclxuXHRcdFx0XHRcdFx0XHRcdFx0Ly8gUmVtb3ZlIHJlc2V0IGJ1dHRvblxyXG5cdFx0XHRcdFx0XHRcdFx0XHRleGlzdGluZ1Jlc2V0LnJlbW92ZSgpO1xyXG5cdFx0XHRcdFx0XHRcdFx0fVxyXG5cdFx0XHRcdFx0XHRcdFx0XHJcblx0XHRcdFx0XHRcdFx0XHR2b2lkIChhc3luYyAoKSA9PiB7XHJcblx0XHRcdFx0XHRcdFx0XHRcdGF3YWl0IHRoaXMuc2F2ZVNldHRpbmdzKCk7XHJcblx0XHRcdFx0XHRcdFx0XHRcdHRoaXMucGx1Z2luLmV4cGxvcmVyTWFuYWdlcj8ucmVvcmRlcigpO1xyXG5cdFx0XHRcdFx0XHRcdFx0fSkoKTtcclxuXHRcdFx0XHRcdFx0XHR9KTtcclxuXHRcdFx0XHRcdFx0fSk7XHJcblx0XHRcdFx0fSk7XHJcblxyXG5cdFx0XHRcdC8vIFRvZ2dsZSBpY29uIGNvbmZpZ3VyYXRpb25cclxuXHRcdFx0XHRncm91cC5hZGRTZXR0aW5nKChzZXR0aW5nKTogdm9pZCA9PiB7XHJcblx0XHRcdFx0XHRvdGhlclNldHRpbmdzLnB1c2goc2V0dGluZy5zZXR0aW5nRWwpO1xyXG5cdFx0XHRcdFx0XHJcblx0XHRcdFx0XHRzZXR0aW5nXHJcblx0XHRcdFx0XHRcdC5zZXROYW1lKCdUb2dnbGUgaWNvbicpXHJcblx0XHRcdFx0XHRcdC5zZXREZXNjKCdJY29uIHRvIHNob3cgd2hlbiBjb21tYW5kIGlzIHRvZ2dsZWQgb24gKGxlYXZlIGVtcHR5IHRvIGRpc2FibGUgdG9nZ2xlKS4gQ29tbWFuZHMgd2l0aCBjaGVjayBjYWxsYmFjayB3b3JrIGF1dG9tYXRpY2FsbHkuIFNlZSByZWFkbWUgZm9yIHBsdWdpbiBkZXZlbG9wZXIgY29tcGF0aWJpbGl0eSBub3Rlcy4nKVxyXG5cdFx0XHRcdFx0XHQuc2V0VG9vbHRpcCgnRm9yIHBsdWdpbiBkZXZlbG9wZXJzOiBDb21tYW5kcyB3aXRoIGNoZWNrQ2FsbGJhY2sgd29yayBhdXRvbWF0aWNhbGx5LiBTZWUgaHR0cHM6Ly9naXRodWIuY29tL2RhdmlkdmtpbWJhbGwvb2JzaWRpYW4tdWktdHdlYWtlciN0b2dnbGUtaWNvbi1mZWF0dXJlLWNvbXBhdGliaWxpdHkgZm9yIGRldGFpbHMuJylcclxuXHRcdFx0XHRcdFx0LmFkZEJ1dHRvbigoYnV0dG9uKSA9PiB7XHJcblx0XHRcdFx0XHRcdFx0Y29uc3QgY3VycmVudFRvZ2dsZUljb24gPSBwYWlyLnRvZ2dsZUljb24gfHwgJ05vbmUnO1xyXG5cdFx0XHRcdFx0XHRcdGJ1dHRvbi5zZXRCdXR0b25UZXh0KGN1cnJlbnRUb2dnbGVJY29uID09PSAnTm9uZScgPyAnU2V0IHRvZ2dsZSBpY29uLi4uJyA6IGN1cnJlbnRUb2dnbGVJY29uKS5vbkNsaWNrKCgpID0+IHtcclxuXHRcdFx0XHRcdFx0XHRcdGNvbnN0IG1vZGFsID0gbmV3IEljb25QaWNrZXJNb2RhbCh0aGlzLmFwcCwgKGljb25JZCkgPT4ge1xyXG5cdFx0XHRcdFx0XHRcdFx0XHR2b2lkIChhc3luYyAoKSA9PiB7XHJcblx0XHRcdFx0XHRcdFx0XHRcdFx0aWYgKGljb25JZCkge1xyXG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0cGFpci50b2dnbGVJY29uID0gaWNvbklkO1xyXG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0aXRlbS50b2dnbGVJY29uID0gaWNvbklkO1xyXG5cdFx0XHRcdFx0XHRcdFx0XHRcdH0gZWxzZSB7XHJcblx0XHRcdFx0XHRcdFx0XHRcdFx0XHRwYWlyLnRvZ2dsZUljb24gPSB1bmRlZmluZWQ7XHJcblx0XHRcdFx0XHRcdFx0XHRcdFx0XHRpdGVtLnRvZ2dsZUljb24gPSB1bmRlZmluZWQ7XHJcblx0XHRcdFx0XHRcdFx0XHRcdFx0fVxyXG5cdFx0XHRcdFx0XHRcdFx0XHRcdGF3YWl0IHRoaXMuc2F2ZVNldHRpbmdzKCk7XHJcblx0XHRcdFx0XHRcdFx0XHRcdFx0dGhpcy5wbHVnaW4uZXhwbG9yZXJNYW5hZ2VyPy5yZW9yZGVyKCk7XHJcblx0XHRcdFx0XHRcdFx0XHRcdFx0dGhpcy5yZW5kZXIoY29udGFpbmVyKTtcclxuXHRcdFx0XHRcdFx0XHRcdFx0fSkoKTtcclxuXHRcdFx0XHRcdFx0XHRcdH0pO1xyXG5cdFx0XHRcdFx0XHRcdFx0bW9kYWwub3BlbigpO1xyXG5cdFx0XHRcdFx0XHRcdH0pO1xyXG5cdFx0XHRcdFx0XHRcdGJ1dHRvbi5idXR0b25FbC5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIChlKSA9PiBlLnN0b3BQcm9wYWdhdGlvbigpKTtcclxuXHRcdFx0XHRcdFx0fSk7XHJcblx0XHRcdFx0fSk7XHJcblxyXG5cdFx0XHRcdC8vIFVzZSBhY3RpdmUgY2xhc3Mgb3B0aW9uXHJcblx0XHRcdFx0Z3JvdXAuYWRkU2V0dGluZygoc2V0dGluZyk6IHZvaWQgPT4ge1xyXG5cdFx0XHRcdFx0b3RoZXJTZXR0aW5ncy5wdXNoKHNldHRpbmcuc2V0dGluZ0VsKTtcclxuXHRcdFx0XHRcdHNldHRpbmdcclxuXHRcdFx0XHRcdFx0LnNldE5hbWUoJ1VzZSBhY3RpdmUgY2xhc3MgaW5zdGVhZCBvZiBpY29uIHN3YXAnKVxyXG5cdFx0XHRcdFx0XHQuc2V0RGVzYygnV2hlbiB0b2dnbGVkIG9uLCBhZGQgaXMtYWN0aXZlIGNsYXNzIGluc3RlYWQgb2Ygc3dhcHBpbmcgaWNvbiAoZXhwbG9yZXIgb25seSknKVxyXG5cdFx0XHRcdFx0XHQuYWRkVG9nZ2xlKCh0b2dnbGUpID0+IHtcclxuXHRcdFx0XHRcdFx0XHR0b2dnbGUuc2V0VmFsdWUocGFpci51c2VBY3RpdmVDbGFzcyA/PyBmYWxzZSk7XHJcblx0XHRcdFx0XHRcdFx0dG9nZ2xlLm9uQ2hhbmdlKCh2YWx1ZSkgPT4ge1xyXG5cdFx0XHRcdFx0XHRcdFx0dm9pZCAoYXN5bmMgKCkgPT4ge1xyXG5cdFx0XHRcdFx0XHRcdFx0XHRwYWlyLnVzZUFjdGl2ZUNsYXNzID0gdmFsdWU7XHJcblx0XHRcdFx0XHRcdFx0XHRcdGl0ZW0udXNlQWN0aXZlQ2xhc3MgPSB2YWx1ZTtcclxuXHRcdFx0XHRcdFx0XHRcdFx0YXdhaXQgdGhpcy5zYXZlU2V0dGluZ3MoKTtcclxuXHRcdFx0XHRcdFx0XHRcdFx0dGhpcy5wbHVnaW4uZXhwbG9yZXJNYW5hZ2VyPy5yZW9yZGVyKCk7XHJcblx0XHRcdFx0XHRcdFx0XHRcdHRoaXMucmVuZGVyKGNvbnRhaW5lcik7XHJcblx0XHRcdFx0XHRcdFx0XHR9KSgpO1xyXG5cdFx0XHRcdFx0XHRcdH0pO1xyXG5cdFx0XHRcdFx0XHRcdHRvZ2dsZS50b2dnbGVFbC5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIChlKSA9PiBlLnN0b3BQcm9wYWdhdGlvbigpKTtcclxuXHRcdFx0XHRcdFx0fSk7XHJcblx0XHRcdFx0fSk7XHJcblx0XHRcdH1cclxuXHRcdH1cclxuXHJcblx0XHQvLyBBcHBseSBjb2xsYXBzZSBzdGF0ZVxyXG5cdFx0c2V0VGltZW91dCgoKSA9PiB7XHJcblx0XHRcdGNvbnN0IHNhdmVkRXhwYW5kZWQgPSB0aGlzLmV4cGFuZGVkU3RhdGVzLmdldChpdGVtLmlkKSA/PyBmYWxzZTtcclxuXHRcdFx0b3RoZXJTZXR0aW5ncy5mb3JFYWNoKHNldHRpbmdFbCA9PiB7XHJcblx0XHRcdFx0c2V0Q3NzUHJvcHMoc2V0dGluZ0VsLCB7IGRpc3BsYXk6IHNhdmVkRXhwYW5kZWQgPyAnJyA6ICdub25lJyB9KTtcclxuXHRcdFx0fSk7XHJcblx0XHR9LCAwKTtcclxuXHR9XHJcblxyXG5cdHByaXZhdGUgcmVuZGVyQ29tbWFuZEl0ZW0oY29udGFpbmVyOiBIVE1MRWxlbWVudCwgcGFpcjogQ29tbWFuZEljb25QYWlyLCBpbmRleDogbnVtYmVyKTogdm9pZCB7XHJcblx0XHRjb25zdCBzZXR0aW5ncyA9IHRoaXMuZ2V0U2V0dGluZ3MoKTtcclxuXHRcdGNvbnN0IGdyb3VwID0gY3JlYXRlU2V0dGluZ3NHcm91cChjb250YWluZXIsIHVuZGVmaW5lZCwgJ3VpLXR3ZWFrZXInKTtcclxuXHRcdFxyXG5cdFx0Ly8gU3RvcmUgcmVmZXJlbmNlIHRvIG90aGVyIHNldHRpbmdzIGZvciBjb2xsYXBzaWJsZSBmdW5jdGlvbmFsaXR5XHJcblx0XHRjb25zdCBvdGhlclNldHRpbmdzOiBIVE1MRWxlbWVudFtdID0gW107XHJcblx0XHRcclxuXHRcdC8vIENvbW1hbmQgbmFtZSB3aXRoIGVkaXRhYmxlIG5hbWUgKGxpa2UgVmF1bHQgQ01TKSBhbmQgaWNvbiBwcmV2aWV3IHdpdGggY29sb3JcclxuXHRcdGNvbnN0IGRpc3BsYXlOYW1lID0gcGFpci5kaXNwbGF5TmFtZSB8fCBwYWlyLm5hbWU7XHJcblx0XHRncm91cC5hZGRTZXR0aW5nKChzZXR0aW5nKTogdm9pZCA9PiB7XHJcblx0XHRcdC8vIENvbXBsZXRlbHkgcHJldmVudCBjb2xsYXBzZSBvbiBzZXR0aW5nIGVsZW1lbnQgLSBPTkxZIGNoZXZyb24gY2FuIHRvZ2dsZVxyXG5cdFx0XHQvLyBVc2UgY2FwdHVyZSBwaGFzZSB0byBpbnRlcmNlcHQgQUxMIGNsaWNrcyBiZWZvcmUgdGhleSByZWFjaCBPYnNpZGlhbidzIGhhbmRsZXJzXHJcblx0XHRcdHNldHRpbmcuc2V0dGluZ0VsLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKGUpID0+IHtcclxuXHRcdFx0XHRjb25zdCB0YXJnZXQgPSBlLnRhcmdldCBhcyBIVE1MRWxlbWVudDtcclxuXHRcdFx0XHQvLyBBbGxvdyBjb2xsYXBzZSBpZiBjbGlja2luZyBvbiBjaGV2cm9uIGljb24gT1Igb24gZXh0cmEgYnV0dG9ucyAoZGVsZXRlLCBtb3ZlIHVwL2Rvd24sIGV0Yy4pXHJcblx0XHRcdFx0Ly8gT1Igb24gbmFtZSBkaXNwbGF5L3BlbmNpbCBpY29uIGZvciByZW5hbWluZ1xyXG5cdFx0XHRcdGNvbnN0IGlzQ2hldnJvbkNsaWNrID0gdGFyZ2V0LmNsb3Nlc3QoJy51aS10d2Vha2VyLWNvbGxhcHNlLWljb24nKSAhPT0gbnVsbDtcclxuXHRcdFx0XHRjb25zdCBpc0V4dHJhQnV0dG9uID0gdGFyZ2V0LmNsb3Nlc3QoJy5leHRyYS1zZXR0aW5nLWJ1dHRvbicpICE9PSBudWxsIHx8IHRhcmdldC5jbG9zZXN0KCcuY2xpY2thYmxlLWljb24uZXh0cmEtc2V0dGluZy1idXR0b24nKSAhPT0gbnVsbDtcclxuXHRcdFx0XHRjb25zdCBpc05hbWVFZGl0ID0gdGFyZ2V0LmNsb3Nlc3QoJy51aS10d2Vha2VyLW5hbWUtZGlzcGxheScpICE9PSBudWxsIHx8IHRhcmdldC5jbG9zZXN0KCcudWktdHdlYWtlci1lZGl0LWljb24nKSAhPT0gbnVsbCB8fCB0YXJnZXQuY2xvc2VzdCgnLnVpLXR3ZWFrZXItZWRpdGFibGUtbmFtZScpICE9PSBudWxsO1xyXG5cdFx0XHRcdGlmICghaXNDaGV2cm9uQ2xpY2sgJiYgIWlzRXh0cmFCdXR0b24gJiYgIWlzTmFtZUVkaXQpIHtcclxuXHRcdFx0XHRcdC8vIEJsb2NrIEFMTCBvdGhlciBjbGlja3MgZnJvbSBhZmZlY3RpbmcgY29sbGFwc2VcclxuXHRcdFx0XHRcdGUuc3RvcFByb3BhZ2F0aW9uKCk7XHJcblx0XHRcdFx0XHRlLnN0b3BJbW1lZGlhdGVQcm9wYWdhdGlvbigpO1xyXG5cdFx0XHRcdFx0ZS5wcmV2ZW50RGVmYXVsdCgpO1xyXG5cdFx0XHRcdFx0cmV0dXJuIGZhbHNlO1xyXG5cdFx0XHRcdH1cclxuXHRcdFx0fSwgdHJ1ZSk7IC8vIENhcHR1cmUgcGhhc2UgLSBydW5zIGJlZm9yZSBvdGhlciBoYW5kbGVyc1xyXG5cdFx0XHRcclxuXHRcdFx0Ly8gQWxzbyBwcmV2ZW50IG9uIGJ1YmJsZSBwaGFzZSBhcyBiYWNrdXBcclxuXHRcdFx0c2V0dGluZy5zZXR0aW5nRWwuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoZSkgPT4ge1xyXG5cdFx0XHRcdGNvbnN0IHRhcmdldCA9IGUudGFyZ2V0IGFzIEhUTUxFbGVtZW50O1xyXG5cdFx0XHRcdGNvbnN0IGlzQ2hldnJvbkNsaWNrID0gdGFyZ2V0LmNsb3Nlc3QoJy51aS10d2Vha2VyLWNvbGxhcHNlLWljb24nKSAhPT0gbnVsbDtcclxuXHRcdFx0XHRjb25zdCBpc0V4dHJhQnV0dG9uID0gdGFyZ2V0LmNsb3Nlc3QoJy5leHRyYS1zZXR0aW5nLWJ1dHRvbicpICE9PSBudWxsIHx8IHRhcmdldC5jbG9zZXN0KCcuY2xpY2thYmxlLWljb24uZXh0cmEtc2V0dGluZy1idXR0b24nKSAhPT0gbnVsbDtcclxuXHRcdFx0XHRjb25zdCBpc05hbWVFZGl0ID0gdGFyZ2V0LmNsb3Nlc3QoJy51aS10d2Vha2VyLW5hbWUtZGlzcGxheScpICE9PSBudWxsIHx8IHRhcmdldC5jbG9zZXN0KCcudWktdHdlYWtlci1lZGl0LWljb24nKSAhPT0gbnVsbCB8fCB0YXJnZXQuY2xvc2VzdCgnLnVpLXR3ZWFrZXItZWRpdGFibGUtbmFtZScpICE9PSBudWxsO1xyXG5cdFx0XHRcdGlmICghaXNDaGV2cm9uQ2xpY2sgJiYgIWlzRXh0cmFCdXR0b24gJiYgIWlzTmFtZUVkaXQpIHtcclxuXHRcdFx0XHRcdGUuc3RvcFByb3BhZ2F0aW9uKCk7XHJcblx0XHRcdFx0XHRlLnN0b3BJbW1lZGlhdGVQcm9wYWdhdGlvbigpO1xyXG5cdFx0XHRcdFx0ZS5wcmV2ZW50RGVmYXVsdCgpO1xyXG5cdFx0XHRcdFx0cmV0dXJuIGZhbHNlO1xyXG5cdFx0XHRcdH1cclxuXHRcdFx0fSwgZmFsc2UpOyAvLyBCdWJibGUgcGhhc2UgLSBiYWNrdXBcclxuXHRcdFx0XHJcblx0XHRcdC8vIE1ha2UgbmFtZUVsIGEgZmxleCBjb250YWluZXIgc28gY2hldnJvbiBjYW4gYmUgcG9zaXRpb25lZCB0byB0aGUgbGVmdFxyXG5cdFx0XHRjb25zdCBuYW1lRWwgPSBzZXR0aW5nLm5hbWVFbDtcclxuXHRcdFx0c2V0Q3NzUHJvcHMobmFtZUVsLCB7IGRpc3BsYXk6ICdmbGV4JywgYWxpZ25JdGVtczogJ2NlbnRlcicsIGdhcDogJzAuNXJlbScsIHdpZHRoOiAnMTAwJScgfSk7XHJcblx0XHRcdFxyXG5cdFx0XHQvLyBBZGQgY2hldnJvbnMtdXAtZG93biBpY29uIHRvIHRoZSBMRUZUIG9mIHRoZSBuYW1lIChiZWZvcmUgbmFtZSBjb250YWluZXIpXHJcblx0XHRcdGNvbnN0IGNoZXZyb25Db250YWluZXIgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcclxuXHRcdFx0Y2hldnJvbkNvbnRhaW5lci5jbGFzc05hbWUgPSAndWktdHdlYWtlci1jb2xsYXBzZS1pY29uJztcclxuXHRcdFx0c2V0Q3NzUHJvcHMoY2hldnJvbkNvbnRhaW5lciwgeyBcclxuXHRcdFx0XHRjdXJzb3I6ICdkZWZhdWx0JyxcclxuXHRcdFx0XHRiYWNrZ3JvdW5kOiAndHJhbnNwYXJlbnQnLFxyXG5cdFx0XHRcdHBhZGRpbmc6ICcwJyxcclxuXHRcdFx0XHRtYXJnaW46ICcwJyxcclxuXHRcdFx0XHRkaXNwbGF5OiAnaW5saW5lLWZsZXgnLFxyXG5cdFx0XHRcdGFsaWduSXRlbXM6ICdjZW50ZXInLFxyXG5cdFx0XHRcdGp1c3RpZnlDb250ZW50OiAnY2VudGVyJ1xyXG5cdFx0XHR9KTtcclxuXHRcdFx0Ly8gSW5zZXJ0IGFzIGZpcnN0IGNoaWxkIHRvIGVuc3VyZSBpdCdzIG9uIHRoZSBsZWZ0XHJcblx0XHRcdG5hbWVFbC5pbnNlcnRCZWZvcmUoY2hldnJvbkNvbnRhaW5lciwgbmFtZUVsLmZpcnN0Q2hpbGQpO1xyXG5cdFx0XHQvLyBSZXN0b3JlIGNvbGxhcHNlIHN0YXRlIGZyb20gTWFwLCBkZWZhdWx0IHRvIGZhbHNlIGlmIG5vdCBzZXRcclxuXHRcdFx0bGV0IGlzRXhwYW5kZWQgPSB0aGlzLmV4cGFuZGVkU3RhdGVzLmdldChwYWlyLmlkKSA/PyBmYWxzZTtcclxuXHRcdFx0c2V0SWNvbihjaGV2cm9uQ29udGFpbmVyLCBpc0V4cGFuZGVkID8gJ2NoZXZyb25zLWRvd24tdXAnIDogJ2NoZXZyb25zLXVwLWRvd24nKTtcclxuXHRcdFx0XHJcblx0XHRcdC8vIFRvZ2dsZSBvbiBjaGV2cm9uIGNsaWNrIC0gT05MWSB3YXkgdG8gY2hhbmdlIGNvbGxhcHNlIHN0YXRlXHJcblx0XHRcdGNoZXZyb25Db250YWluZXIuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoZSkgPT4ge1xyXG5cdFx0XHRcdGUuc3RvcFByb3BhZ2F0aW9uKCk7XHJcblx0XHRcdFx0ZS5zdG9wSW1tZWRpYXRlUHJvcGFnYXRpb24oKTtcclxuXHRcdFx0XHRlLnByZXZlbnREZWZhdWx0KCk7XHJcblx0XHRcdFx0aXNFeHBhbmRlZCA9ICFpc0V4cGFuZGVkO1xyXG5cdFx0XHRcdC8vIFN0b3JlIHN0YXRlIGluIE1hcCBmb3IgcGVyc2lzdGVuY2UgYWNyb3NzIHJlLXJlbmRlcnNcclxuXHRcdFx0XHR0aGlzLmV4cGFuZGVkU3RhdGVzLnNldChwYWlyLmlkLCBpc0V4cGFuZGVkKTtcclxuXHRcdFx0XHQvLyBTd2FwIGljb246IGNoZXZyb25zLXVwLWRvd24gKGNvbGxhcHNlZCkgPC0+IGNoZXZyb25zLWRvd24tdXAgKGV4cGFuZGVkKVxyXG5cdFx0XHRcdHNldEljb24oY2hldnJvbkNvbnRhaW5lciwgaXNFeHBhbmRlZCA/ICdjaGV2cm9ucy1kb3duLXVwJyA6ICdjaGV2cm9ucy11cC1kb3duJyk7XHJcblx0XHRcdFx0b3RoZXJTZXR0aW5ncy5mb3JFYWNoKHNldHRpbmdFbCA9PiB7XHJcblx0XHRcdFx0XHRzZXRDc3NQcm9wcyhzZXR0aW5nRWwsIHsgZGlzcGxheTogaXNFeHBhbmRlZCA/ICcnIDogJ25vbmUnIH0pO1xyXG5cdFx0XHRcdH0pO1xyXG5cdFx0XHR9KTtcclxuXHRcdFx0XHJcblx0XHRcdC8vIENyZWF0ZSBlZGl0YWJsZSBuYW1lIGNvbnRhaW5lciB3aXRoIHBlbmNpbCBpY29uXHJcblx0XHRcdGNvbnN0IG5hbWVDb250YWluZXIgPSBuYW1lRWwuY3JlYXRlRGl2KHsgY2xzOiAndWktdHdlYWtlci1lZGl0YWJsZS1uYW1lJyB9KTtcclxuXHRcdFx0c2V0Q3NzUHJvcHMobmFtZUNvbnRhaW5lciwgeyBkaXNwbGF5OiAnZmxleCcsIGFsaWduSXRlbXM6ICdjZW50ZXInLCBnYXA6ICcwLjVyZW0nIH0pO1xyXG5cdFx0XHRcclxuXHRcdFx0Ly8gRnVuY3Rpb24gdG8gY3JlYXRlIHRoZSBkaXNwbGF5IGVsZW1lbnQgd2l0aCBjbGljayBoYW5kbGVyXHJcblx0XHRcdGNvbnN0IGNyZWF0ZU5hbWVEaXNwbGF5ID0gKG5hbWU6IHN0cmluZykgPT4ge1xyXG5cdFx0XHRcdG5hbWVDb250YWluZXIuZW1wdHkoKTtcclxuXHRcdFx0XHRcclxuXHRcdFx0XHRjb25zdCBkaXNwbGF5ID0gbmFtZUNvbnRhaW5lci5jcmVhdGVTcGFuKHsgXHJcblx0XHRcdFx0XHR0ZXh0OiBuYW1lID09PSBkaXNwbGF5TmFtZSA/IG5hbWUgOiBgJHtuYW1lfSAoJHtkaXNwbGF5TmFtZX0pYCxcclxuXHRcdFx0XHRcdGNsczogJ3VpLXR3ZWFrZXItbmFtZS1kaXNwbGF5J1xyXG5cdFx0XHRcdH0pO1xyXG5cdFx0XHRcdFxyXG5cdFx0XHRcdC8vIEFkZCBwZW5jaWwgaWNvblxyXG5cdFx0XHRcdGNvbnN0IGljb25Db250YWluZXIgPSBuYW1lQ29udGFpbmVyLmNyZWF0ZURpdih7IGNsczogJ3VpLXR3ZWFrZXItZWRpdC1pY29uJyB9KTtcclxuXHRcdFx0XHRzZXRDc3NQcm9wcyhpY29uQ29udGFpbmVyLCB7IG9wYWNpdHk6ICcwLjYnIH0pO1xyXG5cdFx0XHRcdHNldEljb24oaWNvbkNvbnRhaW5lciwgJ2x1Y2lkZS1wZW5jaWwtbGluZScpO1xyXG5cdFx0XHRcdFxyXG5cdFx0XHRcdC8vIE1ha2UgbmFtZSBhbmQgaWNvbiBlZGl0YWJsZSBvbiBjbGlja1xyXG5cdFx0XHRcdGNvbnN0IHN0YXJ0RWRpdCA9ICgpID0+IHtcclxuXHRcdFx0XHRcdGNvbnN0IGN1cnJlbnROYW1lID0gcGFpci5uYW1lO1xyXG5cdFx0XHRcdFx0XHJcblx0XHRcdFx0XHQvLyBDbGVhciBjb250YWluZXJcclxuXHRcdFx0XHRcdG5hbWVDb250YWluZXIuZW1wdHkoKTtcclxuXHRcdFx0XHRcdFxyXG5cdFx0XHRcdFx0Ly8gQ3JlYXRlIGlucHV0IHVzaW5nIG5hdGl2ZSBPYnNpZGlhbiBzdHlsaW5nXHJcblx0XHRcdFx0XHRjb25zdCBuYW1lSW5wdXQgPSBuYW1lQ29udGFpbmVyLmNyZWF0ZUVsKCdpbnB1dCcsIHtcclxuXHRcdFx0XHRcdFx0dHlwZTogJ3RleHQnLFxyXG5cdFx0XHRcdFx0XHR2YWx1ZTogY3VycmVudE5hbWVcclxuXHRcdFx0XHRcdH0pO1xyXG5cdFx0XHRcdFx0bmFtZUlucHV0LmFkZENsYXNzKCdtb2QtdGV4dC1pbnB1dCcpO1xyXG5cdFx0XHRcdFx0XHJcblx0XHRcdFx0XHQvLyBGb2N1cyBhbmQgc2VsZWN0IHRleHRcclxuXHRcdFx0XHRcdG5hbWVJbnB1dC5mb2N1cygpO1xyXG5cdFx0XHRcdFx0bmFtZUlucHV0LnNlbGVjdCgpO1xyXG5cdFx0XHRcdFx0XHJcblx0XHRcdFx0XHQvLyBTYXZlIG9uIGJsdXJcclxuXHRcdFx0XHRcdGNvbnN0IHNhdmVOYW1lID0gKCkgPT4ge1xyXG5cdFx0XHRcdFx0XHRuYW1lSW5wdXQucmVtb3ZlRXZlbnRMaXN0ZW5lcignYmx1cicsIHNhdmVOYW1lKTtcclxuXHRcdFx0XHRcdFx0XHJcblx0XHRcdFx0XHRcdGxldCBuZXdOYW1lID0gbmFtZUlucHV0LnZhbHVlLnRyaW0oKTtcclxuXHRcdFx0XHRcdFx0aWYgKCFuZXdOYW1lKSB7XHJcblx0XHRcdFx0XHRcdFx0bmV3TmFtZSA9IGN1cnJlbnROYW1lOyAvLyBSZXZlcnQgdG8gb3JpZ2luYWwgaWYgZW1wdHlcclxuXHRcdFx0XHRcdFx0fVxyXG5cdFx0XHRcdFx0XHRwYWlyLm5hbWUgPSBuZXdOYW1lO1xyXG5cdFx0XHRcdFx0XHRcclxuXHRcdFx0XHRcdFx0Ly8gVXBkYXRlIGV4aXN0aW5nIGJ1dHRvbnMgaW1tZWRpYXRlbHkgKGRvbid0IHdhaXQgZm9yIHJlLXJlbmRlcilcclxuXHRcdFx0XHRcdFx0dGhpcy5wbHVnaW4uZXhwbG9yZXJNYW5hZ2VyPy51cGRhdGVCdXR0b25OYW1lcygpO1xyXG5cdFx0XHRcdFx0XHRcclxuXHRcdFx0XHRcdFx0Ly8gUmUtcmVuZGVyIHRvIHVwZGF0ZSBkaXNwbGF5IGFuZCBzYXZlXHJcblx0XHRcdFx0XHRcdHZvaWQgKGFzeW5jICgpID0+IHtcclxuXHRcdFx0XHRcdFx0XHRhd2FpdCB0aGlzLnNhdmVTZXR0aW5ncygpO1xyXG5cdFx0XHRcdFx0XHRcdHRoaXMucmVuZGVyKGNvbnRhaW5lcik7XHJcblx0XHRcdFx0XHRcdH0pKCk7XHJcblx0XHRcdFx0XHR9O1xyXG5cdFx0XHRcdFx0XHJcblx0XHRcdFx0XHQvLyBTYXZlIG9uIEVudGVyXHJcblx0XHRcdFx0XHRuYW1lSW5wdXQuYWRkRXZlbnRMaXN0ZW5lcigna2V5ZG93bicsIChlKSA9PiB7XHJcblx0XHRcdFx0XHRcdGlmIChlLmtleSA9PT0gJ0VudGVyJykge1xyXG5cdFx0XHRcdFx0XHRcdGUucHJldmVudERlZmF1bHQoKTtcclxuXHRcdFx0XHRcdFx0XHRzYXZlTmFtZSgpO1xyXG5cdFx0XHRcdFx0XHR9IGVsc2UgaWYgKGUua2V5ID09PSAnRXNjYXBlJykge1xyXG5cdFx0XHRcdFx0XHRcdGUucHJldmVudERlZmF1bHQoKTtcclxuXHRcdFx0XHRcdFx0XHQvLyBDYW5jZWw6IHJldmVydCB0byBvcmlnaW5hbFxyXG5cdFx0XHRcdFx0XHRcdGNyZWF0ZU5hbWVEaXNwbGF5KGN1cnJlbnROYW1lKTtcclxuXHRcdFx0XHRcdFx0fVxyXG5cdFx0XHRcdFx0fSk7XHJcblx0XHRcdFx0XHRcclxuXHRcdFx0XHRcdC8vIFNhdmUgb24gYmx1clxyXG5cdFx0XHRcdFx0bmFtZUlucHV0LmFkZEV2ZW50TGlzdGVuZXIoJ2JsdXInLCBzYXZlTmFtZSk7XHJcblx0XHRcdFx0fTtcclxuXHRcdFx0XHRcclxuXHRcdFx0XHQvLyBBZGQgY2xpY2sgaGFuZGxlcnMgdG8gYm90aCBuYW1lIGFuZCBpY29uXHJcblx0XHRcdFx0ZGlzcGxheS5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIHN0YXJ0RWRpdCk7XHJcblx0XHRcdFx0aWNvbkNvbnRhaW5lci5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIHN0YXJ0RWRpdCk7XHJcblx0XHRcdFx0XHJcblx0XHRcdFx0Ly8gQWRkIGhvdmVyIGVmZmVjdCB0byBpY29uXHJcblx0XHRcdFx0aWNvbkNvbnRhaW5lci5hZGRFdmVudExpc3RlbmVyKCdtb3VzZWVudGVyJywgKCkgPT4ge1xyXG5cdFx0XHRcdFx0c2V0Q3NzUHJvcHMoaWNvbkNvbnRhaW5lciwgeyBvcGFjaXR5OiAnMScgfSk7XHJcblx0XHRcdFx0fSk7XHJcblx0XHRcdFx0aWNvbkNvbnRhaW5lci5hZGRFdmVudExpc3RlbmVyKCdtb3VzZWxlYXZlJywgKCkgPT4ge1xyXG5cdFx0XHRcdFx0c2V0Q3NzUHJvcHMoaWNvbkNvbnRhaW5lciwgeyBvcGFjaXR5OiAnMC42JyB9KTtcclxuXHRcdFx0XHR9KTtcclxuXHRcdFx0fTtcclxuXHRcdFx0XHJcblx0XHRcdC8vIENyZWF0ZSBpbml0aWFsIGRpc3BsYXlcclxuXHRcdFx0Y3JlYXRlTmFtZURpc3BsYXkocGFpci5uYW1lKTtcclxuXHRcdFx0XHJcblx0XHRcdHNldHRpbmcuc2V0RGVzYygnJylcclxuXHRcdFx0XHQuYWRkRXh0cmFCdXR0b24oKGJ1dHRvbikgPT4ge1xyXG5cdFx0XHRcdFx0Ly8gQ2hhbmdlIGljb24gLSBwcmV2aWV3IHdpdGggY29sb3IgKHJlYWwtdGltZSB1cGRhdGVzKVxyXG5cdFx0XHRcdFx0Y29uc3QgaWNvbkVsID0gYnV0dG9uLmV4dHJhU2V0dGluZ3NFbDtcclxuXHRcdFx0XHRcdHNldEljb24oaWNvbkVsLCBwYWlyLmljb24pO1xyXG5cdFx0XHRcdFx0Ly8gU3RvcmUgcmVmZXJlbmNlIGZvciBjb2xvciB1cGRhdGVzXHJcblx0XHRcdFx0XHRpY29uRWwuc2V0QXR0cmlidXRlKCdkYXRhLWV4cGxvcmVyLWNvbW1hbmQtaWQnLCBwYWlyLmlkKTtcclxuXHRcdFx0XHRcdGlmIChwYWlyLmNvbG9yICYmIHBhaXIuY29sb3IgIT09ICcjMDAwMDAwJykge1xyXG5cdFx0XHRcdFx0XHRzZXRDc3NQcm9wcyhpY29uRWwsIHsgY29sb3I6IHBhaXIuY29sb3IgfSk7XHJcblx0XHRcdFx0XHR9IGVsc2Uge1xyXG5cdFx0XHRcdFx0XHRpY29uRWwuc3R5bGUucmVtb3ZlUHJvcGVydHkoJ2NvbG9yJyk7XHJcblx0XHRcdFx0XHR9XHJcblx0XHRcdFx0XHRidXR0b24uc2V0VG9vbHRpcCgnQ2hhbmdlIGljb24nKTtcclxuXHRcdFx0XHRcdGJ1dHRvbi5vbkNsaWNrKCgpID0+IHtcclxuXHRcdFx0XHRcdFx0Y29uc3QgbW9kYWwgPSBuZXcgSWNvblBpY2tlck1vZGFsKHRoaXMuYXBwLCAoaWNvbklkKSA9PiB7XHJcblx0XHRcdFx0XHRcdFx0dm9pZCAoYXN5bmMgKCkgPT4ge1xyXG5cdFx0XHRcdFx0XHRcdFx0aWYgKGljb25JZCAmJiBpY29uSWQgIT09IHBhaXIuaWNvbikge1xyXG5cdFx0XHRcdFx0XHRcdFx0XHRwYWlyLmljb24gPSBpY29uSWQ7XHJcblx0XHRcdFx0XHRcdFx0XHRcdGF3YWl0IHRoaXMuc2F2ZVNldHRpbmdzKCk7XHJcblx0XHRcdFx0XHRcdFx0XHRcdHRoaXMucGx1Z2luLmV4cGxvcmVyTWFuYWdlcj8ucmVvcmRlcigpO1xyXG5cdFx0XHRcdFx0XHRcdFx0XHR0aGlzLnJlbmRlcihjb250YWluZXIpO1xyXG5cdFx0XHRcdFx0XHRcdFx0fVxyXG5cdFx0XHRcdFx0XHRcdH0pKCk7XHJcblx0XHRcdFx0XHRcdH0pO1xyXG5cdFx0XHRcdFx0XHRtb2RhbC5vcGVuKCk7XHJcblx0XHRcdFx0XHR9KTtcclxuXHRcdFx0XHRcdC8vIFByZXZlbnQgY29sbGFwc2Ugb24gY2xpY2tcclxuXHRcdFx0XHRcdGJ1dHRvbi5leHRyYVNldHRpbmdzRWwuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoZSkgPT4gZS5zdG9wUHJvcGFnYXRpb24oKSk7XHJcblx0XHRcdFx0fSlcclxuXHRcdFx0XHQuYWRkRXh0cmFCdXR0b24oKGJ1dHRvbikgPT4ge1xyXG5cdFx0XHRcdFx0Ly8gTW92ZSB1cCAtIGFsd2F5cyBzaG93LCBidXQgZGlzYWJsZSB3aGVuIGF0IHRvcFxyXG5cdFx0XHRcdFx0YnV0dG9uLnNldEljb24oJ2NoZXZyb24tdXAnKTtcclxuXHRcdFx0XHRcdGlmIChpbmRleCA+IDApIHtcclxuXHRcdFx0XHRcdFx0YnV0dG9uLnNldFRvb2x0aXAoJ01vdmUgdXAnKTtcclxuXHRcdFx0XHRcdFx0YnV0dG9uLm9uQ2xpY2soKCkgPT4ge1xyXG5cdFx0XHRcdFx0XHRcdC8vIFByZXNlcnZlIHNjcm9sbCBwb3NpdGlvbiB0byBwcmV2ZW50IGZsaWNrZXJpbmdcclxuXHRcdFx0XHRcdFx0XHRjb25zdCBzY3JvbGxDb250YWluZXIgPSBjb250YWluZXIuY2xvc2VzdCgnLnZlcnRpY2FsLXRhYi1jb250ZW50JykgfHwgXHJcblx0XHRcdFx0XHRcdFx0XHRjb250YWluZXIuY2xvc2VzdCgnLnNldHRpbmdzLWNvbnRlbnQnKSB8fCBcclxuXHRcdFx0XHRcdFx0XHRcdGNvbnRhaW5lci5jbG9zZXN0KCcudmVydGljYWwtdGFiLWNvbnRlbnQtY29udGFpbmVyJykgfHxcclxuXHRcdFx0XHRcdFx0XHRcdGNvbnRhaW5lcjtcclxuXHRcdFx0XHRcdFx0XHRjb25zdCBzY3JvbGxQb3MgPSBzY3JvbGxDb250YWluZXIuc2Nyb2xsVG9wO1xyXG5cdFx0XHRcdFx0XHRcdHZvaWQgKGFzeW5jICgpID0+IHtcclxuXHRcdFx0XHRcdFx0XHRcdGFycmF5TW92ZU11dGFibGUoc2V0dGluZ3MuZXhwbG9yZXJDb21tYW5kcywgaW5kZXgsIGluZGV4IC0gMSk7XHJcblx0XHRcdFx0XHRcdFx0XHRhd2FpdCB0aGlzLnNhdmVTZXR0aW5ncygpO1xyXG5cdFx0XHRcdFx0XHRcdFx0dGhpcy5wbHVnaW4uZXhwbG9yZXJNYW5hZ2VyPy5yZW9yZGVyKCk7XHJcblx0XHRcdFx0XHRcdFx0XHR0aGlzLnJlbmRlcihjb250YWluZXIpO1xyXG5cdFx0XHRcdFx0XHRcdFx0Ly8gUmVzdG9yZSBzY3JvbGwgcG9zaXRpb24gYWZ0ZXIgcmVuZGVyIHdpdGggbXVsdGlwbGUgYXR0ZW1wdHNcclxuXHRcdFx0XHRcdFx0XHRcdHJlcXVlc3RBbmltYXRpb25GcmFtZSgoKSA9PiB7XHJcblx0XHRcdFx0XHRcdFx0XHRcdHNjcm9sbENvbnRhaW5lci5zY3JvbGxUb3AgPSBzY3JvbGxQb3M7XHJcblx0XHRcdFx0XHRcdFx0XHRcdC8vIEFsc28gdHJ5IGFmdGVyIGEgc2hvcnQgZGVsYXkgaW4gY2FzZSBET00gaXNuJ3QgcmVhZHlcclxuXHRcdFx0XHRcdFx0XHRcdFx0c2V0VGltZW91dCgoKSA9PiB7XHJcblx0XHRcdFx0XHRcdFx0XHRcdFx0c2Nyb2xsQ29udGFpbmVyLnNjcm9sbFRvcCA9IHNjcm9sbFBvcztcclxuXHRcdFx0XHRcdFx0XHRcdFx0XHQvLyBPbmUgbW9yZSBhdHRlbXB0IGFmdGVyIGEgbG9uZ2VyIGRlbGF5XHJcblx0XHRcdFx0XHRcdFx0XHRcdFx0c2V0VGltZW91dCgoKSA9PiB7XHJcblx0XHRcdFx0XHRcdFx0XHRcdFx0XHRzY3JvbGxDb250YWluZXIuc2Nyb2xsVG9wID0gc2Nyb2xsUG9zO1xyXG5cdFx0XHRcdFx0XHRcdFx0XHRcdH0sIDUwKTtcclxuXHRcdFx0XHRcdFx0XHRcdFx0fSwgMCk7XHJcblx0XHRcdFx0XHRcdFx0XHR9KTtcclxuXHRcdFx0XHRcdFx0XHR9KSgpO1xyXG5cdFx0XHRcdFx0XHR9KTtcclxuXHRcdFx0XHRcdH0gZWxzZSB7XHJcblx0XHRcdFx0XHRcdGJ1dHRvbi5zZXRUb29sdGlwKCdBbHJlYWR5IGF0IHRvcCcpO1xyXG5cdFx0XHRcdFx0XHRidXR0b24uZXh0cmFTZXR0aW5nc0VsLmFkZENsYXNzKCd1aS10d2Vha2VyLWRpc2FibGVkLWJ1dHRvbicpO1xyXG5cdFx0XHRcdFx0XHQvLyBQcmV2ZW50IGhvdmVyIGVmZmVjdHMgb24gZGlzYWJsZWQgYnV0dG9uc1xyXG5cdFx0XHRcdFx0XHRzZXRDc3NQcm9wcyhidXR0b24uZXh0cmFTZXR0aW5nc0VsLCB7IHBvaW50ZXJFdmVudHM6ICdub25lJyB9KTtcclxuXHRcdFx0XHRcdH1cclxuXHRcdFx0XHRcdC8vIFByZXZlbnQgY29sbGFwc2Ugb24gY2xpY2tcclxuXHRcdFx0XHRcdGJ1dHRvbi5leHRyYVNldHRpbmdzRWwuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoZSkgPT4gZS5zdG9wUHJvcGFnYXRpb24oKSk7XHJcblx0XHRcdFx0fSlcclxuXHRcdFx0XHQuYWRkRXh0cmFCdXR0b24oKGJ1dHRvbikgPT4ge1xyXG5cdFx0XHRcdFx0Ly8gTW92ZSBkb3duIC0gYWx3YXlzIHNob3csIGJ1dCBkaXNhYmxlIHdoZW4gYXQgYm90dG9tXHJcblx0XHRcdFx0XHRidXR0b24uc2V0SWNvbignY2hldnJvbi1kb3duJyk7XHJcblx0XHRcdFx0XHRpZiAoaW5kZXggPCBzZXR0aW5ncy5leHBsb3JlckNvbW1hbmRzLmxlbmd0aCAtIDEpIHtcclxuXHRcdFx0XHRcdFx0YnV0dG9uLnNldFRvb2x0aXAoJ01vdmUgZG93bicpO1xyXG5cdFx0XHRcdFx0XHRidXR0b24ub25DbGljaygoKSA9PiB7XHJcblx0XHRcdFx0XHRcdFx0Ly8gUHJlc2VydmUgc2Nyb2xsIHBvc2l0aW9uIHRvIHByZXZlbnQgZmxpY2tlcmluZ1xyXG5cdFx0XHRcdFx0XHRcdGNvbnN0IHNjcm9sbENvbnRhaW5lciA9IGNvbnRhaW5lci5jbG9zZXN0KCcudmVydGljYWwtdGFiLWNvbnRlbnQnKSB8fCBcclxuXHRcdFx0XHRcdFx0XHRcdGNvbnRhaW5lci5jbG9zZXN0KCcuc2V0dGluZ3MtY29udGVudCcpIHx8IFxyXG5cdFx0XHRcdFx0XHRcdFx0Y29udGFpbmVyLmNsb3Nlc3QoJy52ZXJ0aWNhbC10YWItY29udGVudC1jb250YWluZXInKSB8fFxyXG5cdFx0XHRcdFx0XHRcdFx0Y29udGFpbmVyO1xyXG5cdFx0XHRcdFx0XHRcdGNvbnN0IHNjcm9sbFBvcyA9IHNjcm9sbENvbnRhaW5lci5zY3JvbGxUb3A7XHJcblx0XHRcdFx0XHRcdFx0dm9pZCAoYXN5bmMgKCkgPT4ge1xyXG5cdFx0XHRcdFx0XHRcdFx0YXJyYXlNb3ZlTXV0YWJsZShzZXR0aW5ncy5leHBsb3JlckNvbW1hbmRzLCBpbmRleCwgaW5kZXggKyAxKTtcclxuXHRcdFx0XHRcdFx0XHRcdGF3YWl0IHRoaXMuc2F2ZVNldHRpbmdzKCk7XHJcblx0XHRcdFx0XHRcdFx0XHR0aGlzLnBsdWdpbi5leHBsb3Jlck1hbmFnZXI/LnJlb3JkZXIoKTtcclxuXHRcdFx0XHRcdFx0XHRcdHRoaXMucmVuZGVyKGNvbnRhaW5lcik7XHJcblx0XHRcdFx0XHRcdFx0XHQvLyBSZXN0b3JlIHNjcm9sbCBwb3NpdGlvbiBhZnRlciByZW5kZXIgd2l0aCBtdWx0aXBsZSBhdHRlbXB0c1xyXG5cdFx0XHRcdFx0XHRcdFx0cmVxdWVzdEFuaW1hdGlvbkZyYW1lKCgpID0+IHtcclxuXHRcdFx0XHRcdFx0XHRcdFx0c2Nyb2xsQ29udGFpbmVyLnNjcm9sbFRvcCA9IHNjcm9sbFBvcztcclxuXHRcdFx0XHRcdFx0XHRcdFx0Ly8gQWxzbyB0cnkgYWZ0ZXIgYSBzaG9ydCBkZWxheSBpbiBjYXNlIERPTSBpc24ndCByZWFkeVxyXG5cdFx0XHRcdFx0XHRcdFx0XHRzZXRUaW1lb3V0KCgpID0+IHtcclxuXHRcdFx0XHRcdFx0XHRcdFx0XHRzY3JvbGxDb250YWluZXIuc2Nyb2xsVG9wID0gc2Nyb2xsUG9zO1xyXG5cdFx0XHRcdFx0XHRcdFx0XHRcdC8vIE9uZSBtb3JlIGF0dGVtcHQgYWZ0ZXIgYSBsb25nZXIgZGVsYXlcclxuXHRcdFx0XHRcdFx0XHRcdFx0XHRzZXRUaW1lb3V0KCgpID0+IHtcclxuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdHNjcm9sbENvbnRhaW5lci5zY3JvbGxUb3AgPSBzY3JvbGxQb3M7XHJcblx0XHRcdFx0XHRcdFx0XHRcdFx0fSwgNTApO1xyXG5cdFx0XHRcdFx0XHRcdFx0XHR9LCAwKTtcclxuXHRcdFx0XHRcdFx0XHRcdH0pO1xyXG5cdFx0XHRcdFx0XHRcdH0pKCk7XHJcblx0XHRcdFx0XHRcdH0pO1xyXG5cdFx0XHRcdFx0fSBlbHNlIHtcclxuXHRcdFx0XHRcdFx0YnV0dG9uLnNldFRvb2x0aXAoJ0FscmVhZHkgYXQgYm90dG9tJyk7XHJcblx0XHRcdFx0XHRcdGJ1dHRvbi5leHRyYVNldHRpbmdzRWwuYWRkQ2xhc3MoJ3VpLXR3ZWFrZXItZGlzYWJsZWQtYnV0dG9uJyk7XHJcblx0XHRcdFx0XHRcdC8vIFByZXZlbnQgaG92ZXIgZWZmZWN0cyBvbiBkaXNhYmxlZCBidXR0b25zXHJcblx0XHRcdFx0XHRcdHNldENzc1Byb3BzKGJ1dHRvbi5leHRyYVNldHRpbmdzRWwsIHsgcG9pbnRlckV2ZW50czogJ25vbmUnIH0pO1xyXG5cdFx0XHRcdFx0fVxyXG5cdFx0XHRcdFx0Ly8gUHJldmVudCBjb2xsYXBzZSBvbiBjbGlja1xyXG5cdFx0XHRcdFx0YnV0dG9uLmV4dHJhU2V0dGluZ3NFbC5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIChlKSA9PiBlLnN0b3BQcm9wYWdhdGlvbigpKTtcclxuXHRcdFx0XHR9KVxyXG5cdFx0XHRcdC5hZGRFeHRyYUJ1dHRvbigoYnV0dG9uKSA9PiB7XHJcblx0XHRcdFx0XHQvLyBEZWxldGUgLSByZWQvd2FybmluZyBzdHlsZVxyXG5cdFx0XHRcdFx0YnV0dG9uLnNldEljb24oJ3RyYXNoJyk7XHJcblx0XHRcdFx0XHRidXR0b24uc2V0VG9vbHRpcCgnRGVsZXRlJyk7XHJcblx0XHRcdFx0XHRidXR0b24uZXh0cmFTZXR0aW5nc0VsLmFkZENsYXNzKCdtb2Qtd2FybmluZycpO1xyXG5cdFx0XHRcdFx0Ly8gTWFrZSBpY29uIHJlZFxyXG5cdFx0XHRcdFx0c2V0Q3NzUHJvcHMoYnV0dG9uLmV4dHJhU2V0dGluZ3NFbCwgeyBjb2xvcjogJ3ZhcigtLXRleHQtZXJyb3IpJyB9KTtcclxuXHRcdFx0XHRcdGJ1dHRvbi5vbkNsaWNrKCgpID0+IHtcclxuXHRcdFx0XHRcdFx0dm9pZCAoYXN5bmMgKCkgPT4ge1xyXG5cdFx0XHRcdFx0XHRcdGNvbnN0IGlkeCA9IHNldHRpbmdzLmV4cGxvcmVyQ29tbWFuZHMuaW5kZXhPZihwYWlyKTtcclxuXHRcdFx0XHRcdFx0XHRpZiAoaWR4ID4gLTEpIHtcclxuXHRcdFx0XHRcdFx0XHRcdHNldHRpbmdzLmV4cGxvcmVyQ29tbWFuZHMuc3BsaWNlKGlkeCwgMSk7XHJcblx0XHRcdFx0XHRcdFx0XHRhd2FpdCB0aGlzLnNhdmVTZXR0aW5ncygpO1xyXG5cdFx0XHRcdFx0XHRcdFx0dGhpcy5wbHVnaW4uZXhwbG9yZXJNYW5hZ2VyPy5yZW9yZGVyKCk7XHJcblx0XHRcdFx0XHRcdFx0XHR0aGlzLnJlbmRlcihjb250YWluZXIpO1xyXG5cdFx0XHRcdFx0XHRcdH1cclxuXHRcdFx0XHRcdFx0fSkoKTtcclxuXHRcdFx0XHRcdH0pO1xyXG5cdFx0XHRcdFx0Ly8gUHJldmVudCBjb2xsYXBzZSBvbiBjbGlja1xyXG5cdFx0XHRcdFx0YnV0dG9uLmV4dHJhU2V0dGluZ3NFbC5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIChlKSA9PiBlLnN0b3BQcm9wYWdhdGlvbigpKTtcclxuXHRcdFx0XHR9KTtcclxuXHRcdH0pO1xyXG5cclxuXHRcdC8vIERldmljZSBtb2RlIGRyb3Bkb3duXHJcblx0XHRncm91cC5hZGRTZXR0aW5nKChzZXR0aW5nKTogdm9pZCA9PiB7XHJcblx0XHRcdG90aGVyU2V0dGluZ3MucHVzaChzZXR0aW5nLnNldHRpbmdFbCk7XHJcblx0XHRcdHNldHRpbmdcclxuXHRcdFx0XHQuc2V0TmFtZSgnRGV2aWNlIG1vZGUnKVxyXG5cdFx0XHRcdC5zZXREZXNjKCdDaG9vc2Ugd2hpY2ggZGV2aWNlcyB0aGlzIGJ1dHRvbiBhcHBlYXJzIG9uJylcclxuXHRcdFx0XHQuYWRkRHJvcGRvd24oKGRyb3Bkb3duKSA9PiB7XHJcblx0XHRcdFx0XHRjb25zdCBhcHBJZCA9ICh0aGlzLmFwcCBhcyB7IGFwcElkPzogc3RyaW5nIH0pLmFwcElkIHx8ICd0aGlzLWRldmljZSc7XHJcblx0XHRcdFx0XHRkcm9wZG93blxyXG5cdFx0XHRcdFx0XHQuYWRkT3B0aW9uKCdhbnknLCAnQWxsIGRldmljZXMnKVxyXG5cdFx0XHRcdFx0XHQuYWRkT3B0aW9uKCdkZXNrdG9wJywgJ0Rlc2t0b3Agb25seScpXHJcblx0XHRcdFx0XHRcdC5hZGRPcHRpb24oJ21vYmlsZScsICdNb2JpbGUgb25seScpXHJcblx0XHRcdFx0XHRcdC5hZGRPcHRpb24oYXBwSWQsICdUaGlzIGRldmljZScpXHJcblx0XHRcdFx0XHRcdC5zZXRWYWx1ZShwYWlyLm1vZGUgfHwgJ2FueScpXHJcblx0XHRcdFx0XHRcdC5vbkNoYW5nZSgodmFsdWUpID0+IHtcclxuXHRcdFx0XHRcdFx0XHR2b2lkIChhc3luYyAoKSA9PiB7XHJcblx0XHRcdFx0XHRcdFx0XHRwYWlyLm1vZGUgPSB2YWx1ZTtcclxuXHRcdFx0XHRcdFx0XHRcdGF3YWl0IHRoaXMuc2F2ZVNldHRpbmdzKCk7XHJcblx0XHRcdFx0XHRcdFx0XHR0aGlzLnBsdWdpbi5leHBsb3Jlck1hbmFnZXI/LnJlb3JkZXIoKTtcclxuXHRcdFx0XHRcdFx0XHRcdHRoaXMucmVuZGVyKGNvbnRhaW5lcik7XHJcblx0XHRcdFx0XHRcdFx0fSkoKTtcclxuXHRcdFx0XHRcdFx0fSk7XHJcblx0XHRcdFx0XHQvLyBQcmV2ZW50IGNvbGxhcHNlIG9uIGNsaWNrXHJcblx0XHRcdFx0XHRkcm9wZG93bi5zZWxlY3RFbC5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIChlKSA9PiBlLnN0b3BQcm9wYWdhdGlvbigpKTtcclxuXHRcdFx0XHR9KTtcclxuXHRcdH0pO1xyXG5cclxuXHRcdC8vIEN1c3RvbSBjb2xvciBwaWNrZXIgd2l0aCByZXNldCBidXR0b24gKGxpa2UgQ29tbWFuZGVyIC0gYWx3YXlzIHNob3cgY29sb3IgcGlja2VyKVxyXG5cdFx0Z3JvdXAuYWRkU2V0dGluZygoc2V0dGluZyk6IHZvaWQgPT4ge1xyXG5cdFx0XHRvdGhlclNldHRpbmdzLnB1c2goc2V0dGluZy5zZXR0aW5nRWwpO1xyXG5cdFx0XHRjb25zdCBoYXNDb2xvciA9IHBhaXIuY29sb3IgIT09IHVuZGVmaW5lZDtcclxuXHRcdFx0XHJcblx0XHRcdHNldHRpbmdcclxuXHRcdFx0XHQuc2V0TmFtZSgnQ3VzdG9tIGNvbG9yJylcclxuXHRcdFx0XHQuc2V0RGVzYygnU2V0IGEgY3VzdG9tIGNvbG9yIGZvciB0aGlzIGljb24nKVxyXG5cdFx0XHRcdC5hZGRDb2xvclBpY2tlcigoY29sb3JQaWNrZXIpID0+IHtcclxuXHRcdFx0XHRcdC8vIFVzZSBDb21tYW5kZXIncyBhcHByb2FjaDogYWx3YXlzIHNob3cgY29sb3IgcGlja2VyLCBkZWZhdWx0IHRvICMwMDAgaWYgbm90IHNldFxyXG5cdFx0XHRcdFx0Y29uc3QgY3VycmVudENvbG9yID0gcGFpci5jb2xvciA/PyAnIzAwMDAwMCc7XHJcblx0XHRcdFx0XHRjb2xvclBpY2tlci5zZXRWYWx1ZShjdXJyZW50Q29sb3IpO1xyXG5cdFx0XHRcdFx0XHJcblx0XHRcdFx0XHQvLyBHZXQgdGhlIGNvbnRyb2wgZWxlbWVudCAtIGNvbG9yIHBpY2tlciBpcyBhZGRlZCB0byBpdFxyXG5cdFx0XHRcdFx0Y29uc3QgY29udHJvbEVsID0gc2V0dGluZy5jb250cm9sRWw7XHJcblx0XHRcdFx0XHRcclxuXHRcdFx0XHRcdC8vIFByZXZlbnQgY29sbGFwc2Ugb24gY29sb3IgcGlja2VyIGNsaWNrc1xyXG5cdFx0XHRcdFx0Y29udHJvbEVsLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKGUpID0+IGUuc3RvcFByb3BhZ2F0aW9uKCkpO1xyXG5cdFx0XHRcdFx0XHJcblx0XHRcdFx0XHQvLyBBZGQgZXZlbnQgaGFuZGxlciB0byB0aGUgYWN0dWFsIGNvbG9yIGlucHV0IGVsZW1lbnRcclxuXHRcdFx0XHRcdHNldFRpbWVvdXQoKCkgPT4ge1xyXG5cdFx0XHRcdFx0XHRjb25zdCBjb2xvcklucHV0ID0gY29udHJvbEVsLnF1ZXJ5U2VsZWN0b3IoJ2lucHV0W3R5cGU9XCJjb2xvclwiXScpIGFzIEhUTUxJbnB1dEVsZW1lbnQ7XHJcblx0XHRcdFx0XHRcdGlmIChjb2xvcklucHV0KSB7XHJcblx0XHRcdFx0XHRcdFx0Y29sb3JJbnB1dC5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIChlKSA9PiBlLnN0b3BQcm9wYWdhdGlvbigpKTtcclxuXHRcdFx0XHRcdFx0fVxyXG5cdFx0XHRcdFx0fSwgMCk7XHJcblx0XHRcdFx0XHRcclxuXHRcdFx0XHRcdC8vIEFkZCByZXNldCBidXR0b24gdG8gdGhlIGxlZnQgb2YgY29sb3IgcGlja2VyIGlmIGNvbG9yIGhhcyBiZWVuIHNldFxyXG5cdFx0XHRcdFx0Ly8gVXNlIHNldFRpbWVvdXQgdG8gZW5zdXJlIGNvbG9yIHBpY2tlciBpcyBhZGRlZCBmaXJzdCwgdGhlbiBpbnNlcnQgcmVzZXQgYnV0dG9uIGJlZm9yZSBpdFxyXG5cdFx0XHRcdFx0aWYgKGhhc0NvbG9yKSB7XHJcblx0XHRcdFx0XHRcdHNldFRpbWVvdXQoKCkgPT4ge1xyXG5cdFx0XHRcdFx0XHRcdC8vIEZpbmQgdGhlIGNvbG9yIHBpY2tlciBlbGVtZW50IChpdCdzIHR5cGljYWxseSB0aGUgbGFzdCBjaGlsZCBvciBoYXMgYSBzcGVjaWZpYyBjbGFzcylcclxuXHRcdFx0XHRcdFx0XHRjb25zdCBjb2xvclBpY2tlckVsID0gY29udHJvbEVsLnF1ZXJ5U2VsZWN0b3IoJy5jb2xvci1waWNrZXInKSB8fCBjb250cm9sRWwubGFzdEVsZW1lbnRDaGlsZDtcclxuXHRcdFx0XHRcdFx0XHRcclxuXHRcdFx0XHRcdFx0XHRjb25zdCByZXNldEJ1dHRvbiA9IGNvbnRyb2xFbC5jcmVhdGVFbCgnYnV0dG9uJywge1xyXG5cdFx0XHRcdFx0XHRcdFx0Y2xzOiAnY2xpY2thYmxlLWljb24gdWktdHdlYWtlci1jb2xvci1yZXNldCcsXHJcblx0XHRcdFx0XHRcdFx0XHRhdHRyOiB7ICdhcmlhLWxhYmVsJzogJ1Jlc2V0IHRvIGRlZmF1bHQgY29sb3InIH1cclxuXHRcdFx0XHRcdFx0XHR9KTtcclxuXHRcdFx0XHRcdFx0XHRzZXRJY29uKHJlc2V0QnV0dG9uLCAnbHVjaWRlLXJvdGF0ZS1jdycpO1xyXG5cdFx0XHRcdFx0XHRcdHNldENzc1Byb3BzKHJlc2V0QnV0dG9uLCB7IG1hcmdpblJpZ2h0OiAnMC41cmVtJyB9KTtcclxuXHRcdFx0XHRcdFx0XHRyZXNldEJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIChlKSA9PiB7XHJcblx0XHRcdFx0XHRcdFx0XHRlLnN0b3BQcm9wYWdhdGlvbigpO1xyXG5cdFx0XHRcdFx0XHRcdFx0ZS5zdG9wSW1tZWRpYXRlUHJvcGFnYXRpb24oKTtcclxuXHRcdFx0XHRcdFx0XHRcdGUucHJldmVudERlZmF1bHQoKTtcclxuXHRcdFx0XHRcdFx0XHRcdHZvaWQgKGFzeW5jICgpID0+IHtcclxuXHRcdFx0XHRcdFx0XHRcdFx0Ly8gUmVtb3ZlIGNvbG9yIGVudGlyZWx5XHJcblx0XHRcdFx0XHRcdFx0XHRcdHBhaXIuY29sb3IgPSB1bmRlZmluZWQ7XHJcblx0XHRcdFx0XHRcdFx0XHRcdFxyXG5cdFx0XHRcdFx0XHRcdFx0XHQvLyBVcGRhdGUgaWNvbiBwcmV2aWV3IHRvIHJlbW92ZSBjb2xvclxyXG5cdFx0XHRcdFx0XHRcdFx0XHRjb25zdCBpY29uQnV0dG9uID0gY29udGFpbmVyLnF1ZXJ5U2VsZWN0b3IoYFtkYXRhLWV4cGxvcmVyLWNvbW1hbmQtaWQ9XCIke3BhaXIuaWR9XCJdYCkgYXMgSFRNTEVsZW1lbnQ7XHJcblx0XHRcdFx0XHRcdFx0XHRcdGlmIChpY29uQnV0dG9uKSB7XHJcblx0XHRcdFx0XHRcdFx0XHRcdFx0aWNvbkJ1dHRvbi5zdHlsZS5yZW1vdmVQcm9wZXJ0eSgnY29sb3InKTtcclxuXHRcdFx0XHRcdFx0XHRcdFx0fVxyXG5cdFx0XHRcdFx0XHRcdFx0XHRcclxuXHRcdFx0XHRcdFx0XHRcdFx0YXdhaXQgdGhpcy5zYXZlU2V0dGluZ3MoKTtcclxuXHRcdFx0XHRcdFx0XHRcdFx0dGhpcy5wbHVnaW4uZXhwbG9yZXJNYW5hZ2VyPy5yZW9yZGVyKCk7XHJcblx0XHRcdFx0XHRcdFx0XHRcdHRoaXMucmVuZGVyKGNvbnRhaW5lcik7XHJcblx0XHRcdFx0XHRcdFx0XHR9KSgpO1xyXG5cdFx0XHRcdFx0XHRcdH0pO1xyXG5cdFx0XHRcdFx0XHRcdFxyXG5cdFx0XHRcdFx0XHRcdC8vIEluc2VydCByZXNldCBidXR0b24gYmVmb3JlIGNvbG9yIHBpY2tlclxyXG5cdFx0XHRcdFx0XHRcdGlmIChjb2xvclBpY2tlckVsKSB7XHJcblx0XHRcdFx0XHRcdFx0XHRjb250cm9sRWwuaW5zZXJ0QmVmb3JlKHJlc2V0QnV0dG9uLCBjb2xvclBpY2tlckVsKTtcclxuXHRcdFx0XHRcdFx0XHR9IGVsc2Uge1xyXG5cdFx0XHRcdFx0XHRcdFx0Ly8gRmFsbGJhY2s6IGluc2VydCBhdCBzdGFydFxyXG5cdFx0XHRcdFx0XHRcdFx0Y29udHJvbEVsLmluc2VydEJlZm9yZShyZXNldEJ1dHRvbiwgY29udHJvbEVsLmZpcnN0Q2hpbGQpO1xyXG5cdFx0XHRcdFx0XHRcdH1cclxuXHRcdFx0XHRcdFx0fSwgMCk7XHJcblx0XHRcdFx0XHR9XHJcblx0XHRcdFx0XHRcclxuXHRcdFx0XHRcdGNvbG9yUGlja2VyLm9uQ2hhbmdlKCh2YWx1ZSkgPT4ge1xyXG5cdFx0XHRcdFx0XHQvLyBJZiBzZXQgdG8gYmxhY2sgKCMwMDAwMDApLCB0cmVhdCBhcyBcIm5vIGN1c3RvbSBjb2xvclwiIGFuZCByZW1vdmUgaXRcclxuXHRcdFx0XHRcdFx0Y29uc3QgbmV3Q29sb3IgPSB2YWx1ZSA9PT0gJyMwMDAwMDAnID8gdW5kZWZpbmVkIDogdmFsdWU7XHJcblx0XHRcdFx0XHRcdHBhaXIuY29sb3IgPSBuZXdDb2xvcjtcclxuXHRcdFx0XHRcdFx0XHJcblx0XHRcdFx0XHRcdC8vIFVwZGF0ZSBpY29uIHByZXZpZXcgY29sb3IgaW4gcmVhbC10aW1lXHJcblx0XHRcdFx0XHRcdGNvbnN0IGljb25CdXR0b24gPSBjb250YWluZXIucXVlcnlTZWxlY3RvcihgW2RhdGEtZXhwbG9yZXItY29tbWFuZC1pZD1cIiR7cGFpci5pZH1cIl1gKSBhcyBIVE1MRWxlbWVudDtcclxuXHRcdFx0XHRcdFx0aWYgKGljb25CdXR0b24pIHtcclxuXHRcdFx0XHRcdFx0XHRpZiAobmV3Q29sb3IgJiYgbmV3Q29sb3IgIT09ICcjMDAwMDAwJykge1xyXG5cdFx0XHRcdFx0XHRcdFx0c2V0Q3NzUHJvcHMoaWNvbkJ1dHRvbiwgeyBjb2xvcjogbmV3Q29sb3IgfSk7XHJcblx0XHRcdFx0XHRcdFx0fSBlbHNlIHtcclxuXHRcdFx0XHRcdFx0XHRcdGljb25CdXR0b24uc3R5bGUucmVtb3ZlUHJvcGVydHkoJ2NvbG9yJyk7XHJcblx0XHRcdFx0XHRcdFx0fVxyXG5cdFx0XHRcdFx0XHR9XHJcblx0XHRcdFx0XHRcdFxyXG5cdFx0XHRcdFx0XHQvLyBVcGRhdGUgcmVzZXQgYnV0dG9uIHZpc2liaWxpdHkgd2l0aG91dCBmdWxsIHJlLXJlbmRlclxyXG5cdFx0XHRcdFx0XHRjb25zdCBjb250cm9sRWwgPSBzZXR0aW5nLmNvbnRyb2xFbDtcclxuXHRcdFx0XHRcdFx0Y29uc3QgZXhpc3RpbmdSZXNldCA9IGNvbnRyb2xFbC5xdWVyeVNlbGVjdG9yKCcudWktdHdlYWtlci1jb2xvci1yZXNldCcpO1xyXG5cdFx0XHRcdFx0XHRpZiAobmV3Q29sb3IgJiYgIWV4aXN0aW5nUmVzZXQpIHtcclxuXHRcdFx0XHRcdFx0XHQvLyBBZGQgcmVzZXQgYnV0dG9uXHJcblx0XHRcdFx0XHRcdFx0Y29uc3QgY29sb3JQaWNrZXJFbCA9IGNvbnRyb2xFbC5xdWVyeVNlbGVjdG9yKCcuY29sb3ItcGlja2VyJykgfHwgY29udHJvbEVsLmxhc3RFbGVtZW50Q2hpbGQ7XHJcblx0XHRcdFx0XHRcdFx0Y29uc3QgcmVzZXRCdXR0b24gPSBjb250cm9sRWwuY3JlYXRlRWwoJ2J1dHRvbicsIHtcclxuXHRcdFx0XHRcdFx0XHRcdGNsczogJ2NsaWNrYWJsZS1pY29uIHVpLXR3ZWFrZXItY29sb3ItcmVzZXQnLFxyXG5cdFx0XHRcdFx0XHRcdFx0YXR0cjogeyAnYXJpYS1sYWJlbCc6ICdSZXNldCB0byBkZWZhdWx0IGNvbG9yJyB9XHJcblx0XHRcdFx0XHRcdFx0fSk7XHJcblx0XHRcdFx0XHRcdFx0c2V0SWNvbihyZXNldEJ1dHRvbiwgJ2x1Y2lkZS1yb3RhdGUtY3cnKTtcclxuXHRcdFx0XHRcdFx0XHRzZXRDc3NQcm9wcyhyZXNldEJ1dHRvbiwgeyBtYXJnaW5SaWdodDogJzAuNXJlbScgfSk7XHJcblx0XHRcdFx0XHRcdFx0cmVzZXRCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoZSkgPT4ge1xyXG5cdFx0XHRcdFx0XHRcdFx0ZS5zdG9wUHJvcGFnYXRpb24oKTtcclxuXHRcdFx0XHRcdFx0XHRcdGUuc3RvcEltbWVkaWF0ZVByb3BhZ2F0aW9uKCk7XHJcblx0XHRcdFx0XHRcdFx0XHRlLnByZXZlbnREZWZhdWx0KCk7XHJcblx0XHRcdFx0XHRcdFx0XHR2b2lkIChhc3luYyAoKSA9PiB7XHJcblx0XHRcdFx0XHRcdFx0XHRcdC8vIFJlbW92ZSBjb2xvciBlbnRpcmVseVxyXG5cdFx0XHRcdFx0XHRcdFx0XHRwYWlyLmNvbG9yID0gdW5kZWZpbmVkO1xyXG5cdFx0XHRcdFx0XHRcdFx0XHRcclxuXHRcdFx0XHRcdFx0XHRcdFx0Ly8gVXBkYXRlIGljb24gcHJldmlldyB0byByZW1vdmUgY29sb3JcclxuXHRcdFx0XHRcdFx0XHRcdFx0Y29uc3QgaWNvbkJ1dHRvbiA9IGNvbnRhaW5lci5xdWVyeVNlbGVjdG9yKGBbZGF0YS1leHBsb3Jlci1jb21tYW5kLWlkPVwiJHtwYWlyLmlkfVwiXWApIGFzIEhUTUxFbGVtZW50O1xyXG5cdFx0XHRcdFx0XHRcdFx0XHRpZiAoaWNvbkJ1dHRvbikge1xyXG5cdFx0XHRcdFx0XHRcdFx0XHRcdGljb25CdXR0b24uc3R5bGUucmVtb3ZlUHJvcGVydHkoJ2NvbG9yJyk7XHJcblx0XHRcdFx0XHRcdFx0XHRcdH1cclxuXHRcdFx0XHRcdFx0XHRcdFx0XHJcblx0XHRcdFx0XHRcdFx0XHRcdGF3YWl0IHRoaXMuc2F2ZVNldHRpbmdzKCk7XHJcblx0XHRcdFx0XHRcdFx0XHRcdHRoaXMucGx1Z2luLmV4cGxvcmVyTWFuYWdlcj8ucmVvcmRlcigpO1xyXG5cdFx0XHRcdFx0XHRcdFx0XHR0aGlzLnJlbmRlcihjb250YWluZXIpO1xyXG5cdFx0XHRcdFx0XHRcdFx0fSkoKTtcclxuXHRcdFx0XHRcdFx0XHR9KTtcclxuXHRcdFx0XHRcdFx0XHRcclxuXHRcdFx0XHRcdFx0XHQvLyBJbnNlcnQgcmVzZXQgYnV0dG9uIGJlZm9yZSBjb2xvciBwaWNrZXJcclxuXHRcdFx0XHRcdFx0XHRpZiAoY29sb3JQaWNrZXJFbCkge1xyXG5cdFx0XHRcdFx0XHRcdFx0Y29udHJvbEVsLmluc2VydEJlZm9yZShyZXNldEJ1dHRvbiwgY29sb3JQaWNrZXJFbCk7XHJcblx0XHRcdFx0XHRcdFx0fSBlbHNlIHtcclxuXHRcdFx0XHRcdFx0XHRcdC8vIEZhbGxiYWNrOiBpbnNlcnQgYXQgc3RhcnRcclxuXHRcdFx0XHRcdFx0XHRcdGNvbnRyb2xFbC5pbnNlcnRCZWZvcmUocmVzZXRCdXR0b24sIGNvbnRyb2xFbC5maXJzdENoaWxkKTtcclxuXHRcdFx0XHRcdFx0XHR9XHJcblx0XHRcdFx0XHRcdH0gZWxzZSBpZiAoIW5ld0NvbG9yICYmIGV4aXN0aW5nUmVzZXQpIHtcclxuXHRcdFx0XHRcdFx0XHQvLyBSZW1vdmUgcmVzZXQgYnV0dG9uXHJcblx0XHRcdFx0XHRcdFx0ZXhpc3RpbmdSZXNldC5yZW1vdmUoKTtcclxuXHRcdFx0XHRcdFx0fVxyXG5cdFx0XHRcdFx0XHRcclxuXHRcdFx0XHRcdFx0Ly8gU2F2ZSBhbmQgcmVvcmRlciAobm8gZnVsbCByZS1yZW5kZXIgdG8gcHJldmVudCBmbGlja2VyaW5nKVxyXG5cdFx0XHRcdFx0XHR2b2lkIChhc3luYyAoKSA9PiB7XHJcblx0XHRcdFx0XHRcdFx0YXdhaXQgdGhpcy5zYXZlU2V0dGluZ3MoKTtcclxuXHRcdFx0XHRcdFx0XHR0aGlzLnBsdWdpbi5leHBsb3Jlck1hbmFnZXI/LnJlb3JkZXIoKTtcclxuXHRcdFx0XHRcdFx0fSkoKTtcclxuXHRcdFx0XHRcdH0pO1xyXG5cdFx0XHRcdH0pO1xyXG5cdFx0fSk7XHJcblxyXG5cdFx0Ly8gVG9nZ2xlIGljb24gY29uZmlndXJhdGlvblxyXG5cdFx0Z3JvdXAuYWRkU2V0dGluZygoc2V0dGluZyk6IHZvaWQgPT4ge1xyXG5cdFx0XHRvdGhlclNldHRpbmdzLnB1c2goc2V0dGluZy5zZXR0aW5nRWwpO1xyXG5cdFx0XHRjb25zdCBoYXNUb2dnbGVJY29uID0gcGFpci50b2dnbGVJY29uICE9PSB1bmRlZmluZWQ7XHJcblx0XHRcdFxyXG5cdFx0XHRzZXR0aW5nXHJcblx0XHRcdFx0LnNldE5hbWUoJ1RvZ2dsZSBpY29uJylcclxuXHRcdFx0XHQuc2V0RGVzYygnSWNvbiB0byBzaG93IHdoZW4gY29tbWFuZCBpcyB0b2dnbGVkIG9uIChsZWF2ZSBlbXB0eSB0byBkaXNhYmxlIHRvZ2dsZSkuIENvbW1hbmRzIHdpdGggY2hlY2sgY2FsbGJhY2sgd29yayBhdXRvbWF0aWNhbGx5LiBTZWUgcmVhZG1lIGZvciBwbHVnaW4gZGV2ZWxvcGVyIGNvbXBhdGliaWxpdHkgbm90ZXMuJylcclxuXHRcdFx0XHQuc2V0VG9vbHRpcCgnRm9yIHBsdWdpbiBkZXZlbG9wZXJzOiBDb21tYW5kcyB3aXRoIGNoZWNrQ2FsbGJhY2sgd29yayBhdXRvbWF0aWNhbGx5LiBTZWUgaHR0cHM6Ly9naXRodWIuY29tL2RhdmlkdmtpbWJhbGwvb2JzaWRpYW4tdWktdHdlYWtlciN0b2dnbGUtaWNvbi1mZWF0dXJlLWNvbXBhdGliaWxpdHkgZm9yIGRldGFpbHMuJylcclxuXHRcdFx0XHQuYWRkQnV0dG9uKChidXR0b24pID0+IHtcclxuXHRcdFx0XHRcdGNvbnN0IGN1cnJlbnRUb2dnbGVJY29uID0gcGFpci50b2dnbGVJY29uIHx8ICdOb25lJztcclxuXHRcdFx0XHRcdGJ1dHRvbi5zZXRCdXR0b25UZXh0KGN1cnJlbnRUb2dnbGVJY29uID09PSAnTm9uZScgPyAnU2V0IHRvZ2dsZSBpY29uLi4uJyA6IGN1cnJlbnRUb2dnbGVJY29uKS5vbkNsaWNrKCgpID0+IHtcclxuXHRcdFx0XHRcdFx0Y29uc3QgbW9kYWwgPSBuZXcgSWNvblBpY2tlck1vZGFsKHRoaXMuYXBwLCAoaWNvbklkKSA9PiB7XHJcblx0XHRcdFx0XHRcdFx0dm9pZCAoYXN5bmMgKCkgPT4ge1xyXG5cdFx0XHRcdFx0XHRcdFx0aWYgKGljb25JZCkge1xyXG5cdFx0XHRcdFx0XHRcdFx0XHRwYWlyLnRvZ2dsZUljb24gPSBpY29uSWQ7XHJcblx0XHRcdFx0XHRcdFx0XHR9IGVsc2Uge1xyXG5cdFx0XHRcdFx0XHRcdFx0XHRwYWlyLnRvZ2dsZUljb24gPSB1bmRlZmluZWQ7XHJcblx0XHRcdFx0XHRcdFx0XHR9XHJcblx0XHRcdFx0XHRcdFx0XHRhd2FpdCB0aGlzLnNhdmVTZXR0aW5ncygpO1xyXG5cdFx0XHRcdFx0XHRcdFx0dGhpcy5wbHVnaW4uZXhwbG9yZXJNYW5hZ2VyPy5yZW9yZGVyKCk7XHJcblx0XHRcdFx0XHRcdFx0XHR0aGlzLnJlbmRlcihjb250YWluZXIpO1xyXG5cdFx0XHRcdFx0XHRcdH0pKCk7XHJcblx0XHRcdFx0XHRcdH0pO1xyXG5cdFx0XHRcdFx0XHRtb2RhbC5vcGVuKCk7XHJcblx0XHRcdFx0XHR9KTtcclxuXHRcdFx0XHRcdC8vIFByZXZlbnQgY29sbGFwc2Ugb24gY2xpY2tcclxuXHRcdFx0XHRcdGJ1dHRvbi5idXR0b25FbC5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIChlKSA9PiBlLnN0b3BQcm9wYWdhdGlvbigpKTtcclxuXHRcdFx0XHRcdFxyXG5cdFx0XHRcdFx0Ly8gQWRkIHJlc2V0IGJ1dHRvbiBpZiB0b2dnbGUgaWNvbiBpcyBzZXRcclxuXHRcdFx0XHRcdGlmIChoYXNUb2dnbGVJY29uKSB7XHJcblx0XHRcdFx0XHRcdHNldFRpbWVvdXQoKCkgPT4ge1xyXG5cdFx0XHRcdFx0XHRcdGNvbnN0IGNvbnRyb2xFbCA9IHNldHRpbmcuY29udHJvbEVsO1xyXG5cdFx0XHRcdFx0XHRcdGNvbnN0IGJ1dHRvbkVsID0gY29udHJvbEVsLnF1ZXJ5U2VsZWN0b3IoJ2J1dHRvbicpIHx8IGNvbnRyb2xFbC5sYXN0RWxlbWVudENoaWxkO1xyXG5cdFx0XHRcdFx0XHRcdFxyXG5cdFx0XHRcdFx0XHRcdGNvbnN0IHJlc2V0QnV0dG9uID0gY29udHJvbEVsLmNyZWF0ZUVsKCdidXR0b24nLCB7XHJcblx0XHRcdFx0XHRcdFx0XHRjbHM6ICdjbGlja2FibGUtaWNvbiB1aS10d2Vha2VyLXRvZ2dsZS1pY29uLXJlc2V0JyxcclxuXHRcdFx0XHRcdFx0XHRcdGF0dHI6IHsgJ2FyaWEtbGFiZWwnOiAnUmVzZXQgdG9nZ2xlIGljb24nIH1cclxuXHRcdFx0XHRcdFx0XHR9KTtcclxuXHRcdFx0XHRcdFx0XHRzZXRJY29uKHJlc2V0QnV0dG9uLCAnbHVjaWRlLXJvdGF0ZS1jdycpO1xyXG5cdFx0XHRcdFx0XHRcdHNldENzc1Byb3BzKHJlc2V0QnV0dG9uLCB7IG1hcmdpblJpZ2h0OiAnMC41cmVtJyB9KTtcclxuXHRcdFx0XHRcdFx0XHRyZXNldEJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIChlKSA9PiB7XHJcblx0XHRcdFx0XHRcdFx0XHRlLnN0b3BQcm9wYWdhdGlvbigpO1xyXG5cdFx0XHRcdFx0XHRcdFx0ZS5zdG9wSW1tZWRpYXRlUHJvcGFnYXRpb24oKTtcclxuXHRcdFx0XHRcdFx0XHRcdGUucHJldmVudERlZmF1bHQoKTtcclxuXHRcdFx0XHRcdFx0XHRcdC8vIFByZXNlcnZlIHNjcm9sbCBwb3NpdGlvbiB0byBwcmV2ZW50IGp1bXBpbmdcclxuXHRcdFx0XHRcdFx0XHRcdGNvbnN0IHNjcm9sbENvbnRhaW5lciA9IGNvbnRhaW5lci5jbG9zZXN0KCcudmVydGljYWwtdGFiLWNvbnRlbnQnKSB8fCBcclxuXHRcdFx0XHRcdFx0XHRcdFx0Y29udGFpbmVyLmNsb3Nlc3QoJy5zZXR0aW5ncy1jb250ZW50JykgfHwgXHJcblx0XHRcdFx0XHRcdFx0XHRcdGNvbnRhaW5lci5jbG9zZXN0KCcudmVydGljYWwtdGFiLWNvbnRlbnQtY29udGFpbmVyJykgfHxcclxuXHRcdFx0XHRcdFx0XHRcdFx0Y29udGFpbmVyO1xyXG5cdFx0XHRcdFx0XHRcdFx0Y29uc3Qgc2Nyb2xsUG9zID0gc2Nyb2xsQ29udGFpbmVyLnNjcm9sbFRvcDtcclxuXHRcdFx0XHRcdFx0XHRcdHZvaWQgKGFzeW5jICgpID0+IHtcclxuXHRcdFx0XHRcdFx0XHRcdFx0Ly8gUmVtb3ZlIHRvZ2dsZSBpY29uXHJcblx0XHRcdFx0XHRcdFx0XHRcdHBhaXIudG9nZ2xlSWNvbiA9IHVuZGVmaW5lZDtcclxuXHRcdFx0XHRcdFx0XHRcdFx0XHJcblx0XHRcdFx0XHRcdFx0XHRcdGF3YWl0IHRoaXMuc2F2ZVNldHRpbmdzKCk7XHJcblx0XHRcdFx0XHRcdFx0XHRcdHRoaXMucGx1Z2luLmV4cGxvcmVyTWFuYWdlcj8ucmVvcmRlcigpO1xyXG5cdFx0XHRcdFx0XHRcdFx0XHR0aGlzLnJlbmRlcihjb250YWluZXIpO1xyXG5cdFx0XHRcdFx0XHRcdFx0XHQvLyBSZXN0b3JlIHNjcm9sbCBwb3NpdGlvbiBhZnRlciByZW5kZXIgd2l0aCBtdWx0aXBsZSBhdHRlbXB0c1xyXG5cdFx0XHRcdFx0XHRcdFx0XHRyZXF1ZXN0QW5pbWF0aW9uRnJhbWUoKCkgPT4ge1xyXG5cdFx0XHRcdFx0XHRcdFx0XHRcdHNjcm9sbENvbnRhaW5lci5zY3JvbGxUb3AgPSBzY3JvbGxQb3M7XHJcblx0XHRcdFx0XHRcdFx0XHRcdFx0Ly8gQWxzbyB0cnkgYWZ0ZXIgYSBzaG9ydCBkZWxheSBpbiBjYXNlIERPTSBpc24ndCByZWFkeVxyXG5cdFx0XHRcdFx0XHRcdFx0XHRcdHNldFRpbWVvdXQoKCkgPT4ge1xyXG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0c2Nyb2xsQ29udGFpbmVyLnNjcm9sbFRvcCA9IHNjcm9sbFBvcztcclxuXHRcdFx0XHRcdFx0XHRcdFx0XHR9LCAwKTtcclxuXHRcdFx0XHRcdFx0XHRcdFx0fSk7XHJcblx0XHRcdFx0XHRcdFx0XHR9KSgpO1xyXG5cdFx0XHRcdFx0XHRcdH0pO1xyXG5cdFx0XHRcdFx0XHRcdFxyXG5cdFx0XHRcdFx0XHRcdC8vIEluc2VydCByZXNldCBidXR0b24gYmVmb3JlIHRoZSBtYWluIGJ1dHRvblxyXG5cdFx0XHRcdFx0XHRcdGlmIChidXR0b25FbCkge1xyXG5cdFx0XHRcdFx0XHRcdFx0Y29udHJvbEVsLmluc2VydEJlZm9yZShyZXNldEJ1dHRvbiwgYnV0dG9uRWwpO1xyXG5cdFx0XHRcdFx0XHRcdH0gZWxzZSB7XHJcblx0XHRcdFx0XHRcdFx0XHRjb250cm9sRWwuaW5zZXJ0QmVmb3JlKHJlc2V0QnV0dG9uLCBjb250cm9sRWwuZmlyc3RDaGlsZCk7XHJcblx0XHRcdFx0XHRcdFx0fVxyXG5cdFx0XHRcdFx0XHR9LCAwKTtcclxuXHRcdFx0XHRcdH1cclxuXHRcdFx0XHR9KTtcclxuXHRcdH0pO1xyXG5cclxuXHRcdC8vIFVzZSBhY3RpdmUgY2xhc3Mgb3B0aW9uIChleHBsb3JlciBvbmx5KVxyXG5cdFx0Z3JvdXAuYWRkU2V0dGluZygoc2V0dGluZyk6IHZvaWQgPT4ge1xyXG5cdFx0XHRvdGhlclNldHRpbmdzLnB1c2goc2V0dGluZy5zZXR0aW5nRWwpO1xyXG5cdFx0XHRzZXR0aW5nXHJcblx0XHRcdFx0LnNldE5hbWUoJ1VzZSBhY3RpdmUgY2xhc3MgaW5zdGVhZCBvZiBpY29uIHN3YXAnKVxyXG5cdFx0XHRcdC5zZXREZXNjKCdXaGVuIHRvZ2dsZWQgb24sIGFkZCBpcy1hY3RpdmUgY2xhc3MgaW5zdGVhZCBvZiBzd2FwcGluZyBpY29uIChleHBsb3JlciBvbmx5KScpXHJcblx0XHRcdFx0LmFkZFRvZ2dsZSgodG9nZ2xlKSA9PiB7XHJcblx0XHRcdFx0XHR0b2dnbGUuc2V0VmFsdWUocGFpci51c2VBY3RpdmVDbGFzcyA/PyBmYWxzZSk7XHJcblx0XHRcdFx0XHR0b2dnbGUub25DaGFuZ2UoKHZhbHVlKSA9PiB7XHJcblx0XHRcdFx0XHRcdHZvaWQgKGFzeW5jICgpID0+IHtcclxuXHRcdFx0XHRcdFx0XHRwYWlyLnVzZUFjdGl2ZUNsYXNzID0gdmFsdWU7XHJcblx0XHRcdFx0XHRcdFx0YXdhaXQgdGhpcy5zYXZlU2V0dGluZ3MoKTtcclxuXHRcdFx0XHRcdFx0XHR0aGlzLnBsdWdpbi5leHBsb3Jlck1hbmFnZXI/LnJlb3JkZXIoKTtcclxuXHRcdFx0XHRcdFx0XHR0aGlzLnJlbmRlcihjb250YWluZXIpO1xyXG5cdFx0XHRcdFx0XHR9KSgpO1xyXG5cdFx0XHRcdFx0fSk7XHJcblx0XHRcdFx0XHQvLyBQcmV2ZW50IGNvbGxhcHNlIG9uIGNsaWNrXHJcblx0XHRcdFx0XHR0b2dnbGUudG9nZ2xlRWwuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoZSkgPT4gZS5zdG9wUHJvcGFnYXRpb24oKSk7XHJcblx0XHRcdFx0fSk7XHJcblx0XHR9KTtcclxuXHJcblx0XHRcdC8vIEFmdGVyIGFsbCBzZXR0aW5ncyBhcmUgYWRkZWQsIGFwcGx5IGNvbGxhcHNlIHN0YXRlIGZyb20gTWFwXHJcblx0XHRzZXRUaW1lb3V0KCgpID0+IHtcclxuXHRcdFx0Y29uc3Qgc2F2ZWRFeHBhbmRlZCA9IHRoaXMuZXhwYW5kZWRTdGF0ZXMuZ2V0KHBhaXIuaWQpID8/IGZhbHNlO1xyXG5cdFx0XHRvdGhlclNldHRpbmdzLmZvckVhY2goc2V0dGluZ0VsID0+IHtcclxuXHRcdFx0XHRzZXRDc3NQcm9wcyhzZXR0aW5nRWwsIHsgZGlzcGxheTogc2F2ZWRFeHBhbmRlZCA/ICcnIDogJ25vbmUnIH0pO1xyXG5cdFx0XHR9KTtcclxuXHRcdH0sIDApO1xyXG5cdH1cclxufVxyXG4iLCAiLyoqXHJcbiAqIE1vYmlsZSBUYWIgLSBBbGwgbW9iaWxlLXNwZWNpZmljIHNldHRpbmdzXHJcbiAqL1xyXG5cclxuaW1wb3J0IHsgVGFiUmVuZGVyZXIgfSBmcm9tICcuLi9jb21tb24vVGFiUmVuZGVyZXInO1xyXG5pbXBvcnQgeyBjcmVhdGVTZXR0aW5nc0dyb3VwLCBTZXR0aW5nc0NvbnRhaW5lciB9IGZyb20gJy4uLy4uL3V0aWxzL3NldHRpbmdzLWNvbXBhdCc7XHJcbmltcG9ydCB7IENvbW1hbmRQaWNrZXJNb2RhbCB9IGZyb20gJy4uLy4uL21vZGFscy9Db21tYW5kUGlja2VyTW9kYWwnO1xyXG5pbXBvcnQgeyBJY29uUGlja2VyTW9kYWwgfSBmcm9tICcuLi8uLi9tb2RhbHMvSWNvblBpY2tlck1vZGFsJztcclxuaW1wb3J0IHsgVUlTZXR0aW5ncyB9IGZyb20gJy4uLy4uL3NldHRpbmdzJztcclxuXHJcbmV4cG9ydCBjbGFzcyBNb2JpbGVUYWIgZXh0ZW5kcyBUYWJSZW5kZXJlciB7XHJcblx0cmVuZGVyKGNvbnRhaW5lcjogSFRNTEVsZW1lbnQpOiB2b2lkIHtcclxuXHRcdC8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cclxuXHRcdC8vIE1vYmlsZVxyXG5cdFx0Ly8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxyXG5cdFx0Y29uc3QgbW9iaWxlR3JvdXAgPSBjcmVhdGVTZXR0aW5nc0dyb3VwKGNvbnRhaW5lciwgJ01vYmlsZScsICd1aS10d2Vha2VyJyk7XHJcblxyXG5cdFx0dGhpcy5hZGRUb2dnbGVTZXR0aW5nKG1vYmlsZUdyb3VwLCAnSGlkZSBcIk1vYmlsZSBjaGV2cm9uc1wiIGljb24nLCAnSGlkZSBcIk1vYmlsZSBjaGV2cm9uc1wiIGljb24gKGxvbmctcHJlc3MgZmxhaXIpIGluIG1vYmlsZSBuYXZiYXIuJywgJ21vYmlsZUNoZXZyb25zSWNvbicpO1xyXG5cclxuXHRcdHRoaXMuYWRkVG9nZ2xlU2V0dGluZyhtb2JpbGVHcm91cCwgJ0hpZGUgXCJOYXZpZ2F0ZSBiYWNrXCIgYnV0dG9uJywgJ0hpZGUgXCJOYXZpZ2F0ZSBiYWNrXCIgYnV0dG9uIGluIG1vYmlsZSBuYXZiYXIuJywgJ25hdmlnYXRlQmFja0J1dHRvbicpO1xyXG5cclxuXHRcdHRoaXMuYWRkVG9nZ2xlU2V0dGluZyhtb2JpbGVHcm91cCwgJ0hpZGUgXCJOYXZpZ2F0ZSBmb3J3YXJkXCIgYnV0dG9uJywgJ0hpZGUgXCJOYXZpZ2F0ZSBmb3J3YXJkXCIgYnV0dG9uIGluIG1vYmlsZSBuYXZiYXIuJywgJ25hdmlnYXRlRm9yd2FyZEJ1dHRvbicpO1xyXG5cclxuXHRcdHRoaXMuYWRkVG9nZ2xlU2V0dGluZyhtb2JpbGVHcm91cCwgJ0hpZGUgXCJRdWljayBzd2l0Y2hlclwiIGJ1dHRvbicsICdIaWRlIFwiUXVpY2sgc3dpdGNoZXJcIiBidXR0b24gaW4gbW9iaWxlIG5hdmJhci4nLCAncXVpY2tTd2l0Y2hlckJ1dHRvbicpO1xyXG5cclxuXHRcdHRoaXMuYWRkVG9nZ2xlU2V0dGluZyhtb2JpbGVHcm91cCwgJ0hpZGUgXCJOZXcgdGFiXCIgYnV0dG9uJywgJ0hpZGUgXCJOZXcgdGFiXCIgYnV0dG9uIGluIG1vYmlsZSBuYXZiYXIuJywgJ21vYmlsZU5ld1RhYkJ1dHRvbicpO1xyXG5cclxuXHRcdHRoaXMuYWRkVG9nZ2xlU2V0dGluZyhtb2JpbGVHcm91cCwgJ0hpZGUgXCJPcGVuIHRhYnNcIiBidXR0b24nLCAnSGlkZSBcIk9wZW4gdGFic1wiIGJ1dHRvbiBpbiBtb2JpbGUgbmF2YmFyLicsICdvcGVuVGFiQnV0dG9uJyk7XHJcblxyXG5cdFx0dGhpcy5hZGRUb2dnbGVTZXR0aW5nKG1vYmlsZUdyb3VwLCAnSGlkZSBcIlJpYmJvbiBtZW51XCIgYnV0dG9uJywgJ0hpZGUgXCJSaWJib24gbWVudVwiIGJ1dHRvbiBpbiBtb2JpbGUgbmF2YmFyLicsICdyaWJib25NZW51QnV0dG9uJyk7XHJcblxyXG5cdFx0Ly8gU3dhcCBidXR0b24gaWNvblxyXG5cdFx0dGhpcy5hZGRUb2dnbGVTZXR0aW5nKG1vYmlsZUdyb3VwLCAnU3dhcCBtb2JpbGUgbmV3IHRhYiBpY29uJywgJ1JlcGxhY2UgdGhlIG5ldyB0YWIgcGx1cyBpY29uIHdpdGggYSBob21lIGJ1dHRvbiBpY29uIGluIG1vYmlsZSBuYXZiYXIuJywgJ3N3YXBNb2JpbGVOZXdUYWJJY29uJyk7XHJcblxyXG5cdFx0dGhpcy5hZGRUb2dnbGVTZXR0aW5nKG1vYmlsZUdyb3VwLCAnSGlkZSB0aXRsZScsICdIaWRlIHRoZSB0aXRsZSBpbiBtb2JpbGUgdmlldyBoZWFkZXJzLicsICdoaWRlTW9iaWxlVGl0bGUnKTtcclxuXHJcblx0XHR0aGlzLmFkZFRvZ2dsZVNldHRpbmcobW9iaWxlR3JvdXAsICdIaWRlIHN5bmMgaWNvbicsICdIaWRlIHN5bmMgc3RhdHVzIGljb25zIGluIG1vYmlsZSBpbnRlcmZhY2UuJywgJ2hpZGVNb2JpbGVTeW5jSWNvbicpO1xyXG5cclxuXHRcdC8vIFJlcGxhY2Ugc3luYyBidXR0b24gd2l0aCBjdXN0b20gYWN0aW9uXHJcblx0XHR0aGlzLnJlbmRlclN5bmNCdXR0b25SZXBsYWNlbWVudChtb2JpbGVHcm91cCk7XHJcblxyXG5cdFx0Ly8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxyXG5cdFx0Ly8gTW9iaWxlIG5hdmlnYXRpb24gbWVudVxyXG5cdFx0Ly8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxyXG5cdFx0Y29uc3QgbW9iaWxlTmF2R3JvdXAgPSBjcmVhdGVTZXR0aW5nc0dyb3VwKGNvbnRhaW5lciwgJ01vYmlsZSBuYXZpZ2F0aW9uIG1lbnUnLCAndWktdHdlYWtlcicpO1xyXG5cclxuXHRcdHRoaXMuYWRkUG9zaXRpb25TZXR0aW5nKG1vYmlsZU5hdkdyb3VwLCAnXCJOYXZpZ2F0ZSBiYWNrXCIgYnV0dG9uIHBvc2l0aW9uJywgJ1NlbGVjdCB0aGUgcG9zaXRpb24gZm9yIHRoZSBcIk5hdmlnYXRlIGJhY2tcIiBidXR0b24gKGRlZmF1bHQgMSkuJywgJ25hdmlnYXRlQnV0dG9uUG9zaXRpb24nKTtcclxuXHJcblx0XHR0aGlzLmFkZFBvc2l0aW9uU2V0dGluZyhtb2JpbGVOYXZHcm91cCwgJ1wiTmF2aWdhdGUgZm9yd2FyZFwiIGJ1dHRvbiBwb3NpdGlvbicsICdTZWxlY3QgdGhlIHBvc2l0aW9uIGZvciB0aGUgXCJOYXZpZ2F0ZSBmb3J3YXJkXCIgYnV0dG9uIChkZWZhdWx0IDIpLicsICduYXZpZ2F0aW9uQnV0dG9uUG9zaXRpb24nKTtcclxuXHJcblx0XHR0aGlzLmFkZFBvc2l0aW9uU2V0dGluZyhtb2JpbGVOYXZHcm91cCwgJ1wiUXVpY2sgc3dpdGNoZXJcIiBidXR0b24gcG9zaXRpb24nLCAnU2VsZWN0IHRoZSBwb3NpdGlvbiBmb3IgdGhlIFwiUXVpY2sgc3dpdGNoZXJcIiBidXR0b24gKGRlZmF1bHQgMykuJywgJ3F1aWNrU3dpdGNoZXJQb3NpdGlvbicpO1xyXG5cclxuXHRcdHRoaXMuYWRkUG9zaXRpb25TZXR0aW5nKG1vYmlsZU5hdkdyb3VwLCAnXCJOZXcgdGFiXCIgYnV0dG9uIHBvc2l0aW9uJywgJ1NlbGVjdCB0aGUgcG9zaXRpb24gZm9yIHRoZSBcIk5ldyB0YWJcIiBidXR0b24gKGRlZmF1bHQgNCkuJywgJ25ld1RhYlBvc2l0aW9uJyk7XHJcblxyXG5cdFx0dGhpcy5hZGRQb3NpdGlvblNldHRpbmcobW9iaWxlTmF2R3JvdXAsICdcIk9wZW4gdGFic1wiIGJ1dHRvbiBwb3NpdGlvbicsICdTZWxlY3QgdGhlIHBvc2l0aW9uIGZvciB0aGUgXCJPcGVuIHRhYnNcIiBidXR0b24gKGRlZmF1bHQgNSkuJywgJ29wZW5UYWJzUG9zaXRpb24nKTtcclxuXHJcblx0XHR0aGlzLmFkZFBvc2l0aW9uU2V0dGluZyhtb2JpbGVOYXZHcm91cCwgJ1wiUmliYm9uIG1lbnVcIiBidXR0b24gcG9zaXRpb24nLCAnU2VsZWN0IHRoZSBwb3NpdGlvbiBmb3IgdGhlIFwiUmliYm9uIG1lbnVcIiBidXR0b24gKGRlZmF1bHQgNikuJywgJ3JpYmJvbk1lbnVQb3NpdGlvbicpO1xyXG5cdH1cclxuXHJcblx0cHJpdmF0ZSBhZGRUb2dnbGVTZXR0aW5nKGdyb3VwOiBTZXR0aW5nc0NvbnRhaW5lciwgbmFtZTogc3RyaW5nLCBkZXNjOiBzdHJpbmcsIGtleToga2V5b2YgVUlTZXR0aW5ncykge1xyXG5cdFx0Z3JvdXAuYWRkU2V0dGluZygoc2V0dGluZyk6IHZvaWQgPT4ge1xyXG5cdFx0XHRzZXR0aW5nXHJcblx0XHRcdFx0LnNldE5hbWUobmFtZSlcclxuXHRcdFx0XHQuc2V0RGVzYyhkZXNjKVxyXG5cdFx0XHRcdC5hZGRUb2dnbGUoKHRvZ2dsZSkgPT5cclxuXHRcdFx0XHRcdHRvZ2dsZS5zZXRWYWx1ZShCb29sZWFuKHRoaXMuZ2V0U2V0dGluZ3MoKVtrZXldKSkub25DaGFuZ2UoKHZhbHVlKSA9PiB7XHJcblx0XHRcdFx0XHRcdCh0aGlzLmdldFNldHRpbmdzKClba2V5XSBhcyBib29sZWFuKSA9IHZhbHVlO1xyXG5cdFx0XHRcdFx0XHR2b2lkIHRoaXMuc2F2ZVNldHRpbmdzKCk7XHJcblx0XHRcdFx0XHR9KVxyXG5cdFx0XHRcdCk7XHJcblx0XHR9KTtcclxuXHR9XHJcblxyXG5cdHByaXZhdGUgYWRkUG9zaXRpb25TZXR0aW5nKGdyb3VwOiBTZXR0aW5nc0NvbnRhaW5lciwgbmFtZTogc3RyaW5nLCBkZXNjOiBzdHJpbmcsIGtleToga2V5b2YgVUlTZXR0aW5ncykge1xyXG5cdFx0Z3JvdXAuYWRkU2V0dGluZygoc2V0dGluZyk6IHZvaWQgPT4ge1xyXG5cdFx0XHRzZXR0aW5nXHJcblx0XHRcdFx0LnNldE5hbWUobmFtZSlcclxuXHRcdFx0XHQuc2V0RGVzYyhkZXNjKVxyXG5cdFx0XHRcdC5hZGREcm9wZG93bigoZHJvcGRvd24pID0+IHtcclxuXHRcdFx0XHRcdGZvciAobGV0IGkgPSAxOyBpIDw9IDY7IGkrKykge1xyXG5cdFx0XHRcdFx0XHRkcm9wZG93bi5hZGRPcHRpb24oU3RyaW5nKGkpLCBTdHJpbmcoaSkpO1xyXG5cdFx0XHRcdFx0fVxyXG5cdFx0XHRcdFx0Y29uc3QgY3VycmVudFZhbHVlID0gdGhpcy5nZXRTZXR0aW5ncygpW2tleV07XHJcblx0XHRcdFx0XHRjb25zdCBzdHJpbmdWYWx1ZSA9IHR5cGVvZiBjdXJyZW50VmFsdWUgPT09ICdzdHJpbmcnID8gY3VycmVudFZhbHVlIDogJzEnO1xyXG5cdFx0XHRcdFx0ZHJvcGRvd24uc2V0VmFsdWUoc3RyaW5nVmFsdWUpLm9uQ2hhbmdlKCh2YWx1ZSkgPT4ge1xyXG5cdFx0XHRcdFx0XHQodGhpcy5nZXRTZXR0aW5ncygpW2tleV0gYXMgc3RyaW5nKSA9IHZhbHVlO1xyXG5cdFx0XHRcdFx0XHR2b2lkIHRoaXMuc2F2ZVNldHRpbmdzKCk7XHJcblx0XHRcdFx0XHR9KTtcclxuXHRcdFx0XHR9KTtcclxuXHRcdH0pO1xyXG5cdH1cclxuXHJcblx0cHJpdmF0ZSByZW5kZXJTeW5jQnV0dG9uUmVwbGFjZW1lbnQoZ3JvdXA6IFNldHRpbmdzQ29udGFpbmVyKTogdm9pZCB7XHJcblx0XHRjb25zdCBzZXR0aW5ncyA9IHRoaXMuZ2V0U2V0dGluZ3MoKTtcclxuXHRcdGlmICghc2V0dGluZ3Muc3luY0J1dHRvblJlcGxhY2VtZW50KSB7XHJcblx0XHRcdHNldHRpbmdzLnN5bmNCdXR0b25SZXBsYWNlbWVudCA9IHtcclxuXHRcdFx0XHRlbmFibGVkOiBmYWxzZSxcclxuXHRcdFx0XHRjb21tYW5kSWQ6ICdvcGVuLXNldHRpbmdzJyxcclxuXHRcdFx0XHRpY29uSWQ6ICd3cmVuY2gnLFxyXG5cdFx0XHR9O1xyXG5cdFx0fVxyXG5cclxuXHRcdGdyb3VwLmFkZFNldHRpbmcoKHNldHRpbmcpOiB2b2lkID0+IHtcclxuXHRcdFx0c2V0dGluZ1xyXG5cdFx0XHRcdC5zZXROYW1lKCdSZXBsYWNlIHN5bmMgYnV0dG9uIHdpdGggY3VzdG9tIGFjdGlvbicpXHJcblx0XHRcdFx0LnNldERlc2MoJ1JlcGxhY2UgdGhlIHN5bmMgYnV0dG9uIGluIHRoZSBtb2JpbGUgc2lkZWJhciB3aXRoIGEgY3VzdG9tIGljb24gYW5kIGNvbW1hbmQuIFRoaXMgd2lsbCBoaWRlIHRoZSBvcmlnaW5hbCBzeW5jIGJ1dHRvbiBhbmQgc2hvdyB5b3VyIGN1c3RvbSBidXR0b24gaW5zdGVhZC4nKVxyXG5cdFx0XHRcdC5hZGRUb2dnbGUoKHRvZ2dsZSkgPT5cclxuXHRcdFx0XHRcdHRvZ2dsZS5zZXRWYWx1ZShzZXR0aW5ncy5zeW5jQnV0dG9uUmVwbGFjZW1lbnQuZW5hYmxlZCkub25DaGFuZ2UoKHZhbHVlKSA9PiB7XHJcblx0XHRcdFx0XHRcdGlmICghc2V0dGluZ3Muc3luY0J1dHRvblJlcGxhY2VtZW50KSB7XHJcblx0XHRcdFx0XHRcdFx0c2V0dGluZ3Muc3luY0J1dHRvblJlcGxhY2VtZW50ID0ge1xyXG5cdFx0XHRcdFx0XHRcdFx0ZW5hYmxlZDogdHJ1ZSxcclxuXHRcdFx0XHRcdFx0XHRcdGNvbW1hbmRJZDogJycsXHJcblx0XHRcdFx0XHRcdFx0XHRpY29uSWQ6ICd3cmVuY2gnLFxyXG5cdFx0XHRcdFx0XHRcdH07XHJcblx0XHRcdFx0XHRcdH1cclxuXHRcdFx0XHRcdFx0c2V0dGluZ3Muc3luY0J1dHRvblJlcGxhY2VtZW50LmVuYWJsZWQgPSB2YWx1ZTtcclxuXHRcdFx0XHRcdFx0dm9pZCB0aGlzLnNhdmVTZXR0aW5ncygpO1xyXG5cdFx0XHRcdFx0fSlcclxuXHRcdFx0XHQpO1xyXG5cdFx0fSk7XHJcblxyXG5cdFx0Ly8gU2hvdyBjb21tYW5kIGFuZCBpY29uIHBpY2tlcnMgb25seSBpZiByZXBsYWNlbWVudCBpcyBlbmFibGVkXHJcblx0XHRpZiAoc2V0dGluZ3Muc3luY0J1dHRvblJlcGxhY2VtZW50LmVuYWJsZWQpIHtcclxuXHRcdFx0Y29uc3QgZ2V0Q29tbWFuZE5hbWUgPSAoY29tbWFuZElkOiBzdHJpbmcpOiBzdHJpbmcgPT4ge1xyXG5cdFx0XHRcdGlmICghY29tbWFuZElkKSByZXR1cm4gJ1NlbGVjdCBjb21tYW5kLi4uJztcclxuXHRcdFx0XHRcclxuXHRcdFx0XHR0cnkge1xyXG5cdFx0XHRcdFx0Y29uc3QgY29tbWFuZFJlZ2lzdHJ5ID0gKHRoaXMuYXBwIGFzIHsgY29tbWFuZHM/OiB7IGxpc3RDb21tYW5kcz86ICgpID0+IEFycmF5PHsgaWQ6IHN0cmluZzsgbmFtZTogc3RyaW5nIH0+IH0gfSkuY29tbWFuZHM7XHJcblx0XHRcdFx0XHRpZiAoY29tbWFuZFJlZ2lzdHJ5ICYmIHR5cGVvZiBjb21tYW5kUmVnaXN0cnkubGlzdENvbW1hbmRzID09PSAnZnVuY3Rpb24nKSB7XHJcblx0XHRcdFx0XHRcdGNvbnN0IGNvbW1hbmRzID0gY29tbWFuZFJlZ2lzdHJ5Lmxpc3RDb21tYW5kcygpO1xyXG5cdFx0XHRcdFx0XHRjb25zdCBjb21tYW5kID0gY29tbWFuZHMuZmluZCgoY21kKSA9PiBcclxuXHRcdFx0XHRcdFx0XHRjbWQgJiYgY21kLm5hbWUgJiYgKFxyXG5cdFx0XHRcdFx0XHRcdFx0Y21kLmlkID09PSBjb21tYW5kSWQgfHwgXHJcblx0XHRcdFx0XHRcdFx0XHRjbWQuaWQgPT09IGNvbW1hbmRJZC5yZXBsYWNlKC9edWktdHdlYWtlcjorL2csICcnKSB8fFxyXG5cdFx0XHRcdFx0XHRcdFx0Y21kLmlkID09PSBgdWktdHdlYWtlcjoke2NvbW1hbmRJZC5yZXBsYWNlKC9edWktdHdlYWtlcjorL2csICcnKX1gXHJcblx0XHRcdFx0XHRcdFx0KVxyXG5cdFx0XHRcdFx0XHQpO1xyXG5cdFx0XHRcdFx0XHRpZiAoY29tbWFuZD8ubmFtZSkge1xyXG5cdFx0XHRcdFx0XHRcdHJldHVybiBjb21tYW5kLm5hbWU7XHJcblx0XHRcdFx0XHRcdH1cclxuXHRcdFx0XHRcdH1cclxuXHRcdFx0XHR9IGNhdGNoIHtcclxuXHRcdFx0XHRcdC8vIEVycm9yIGdldHRpbmcgY29tbWFuZCBuYW1lXHJcblx0XHRcdFx0fVxyXG5cdFx0XHRcdHJldHVybiAnU2VsZWN0IGNvbW1hbmQuLi4nO1xyXG5cdFx0XHR9O1xyXG5cclxuXHRcdFx0Y29uc3QgY29tbWFuZE5hbWUgPSBnZXRDb21tYW5kTmFtZShzZXR0aW5ncy5zeW5jQnV0dG9uUmVwbGFjZW1lbnQuY29tbWFuZElkKTtcclxuXHRcdFx0Z3JvdXAuYWRkU2V0dGluZygoc2V0dGluZyk6IHZvaWQgPT4ge1xyXG5cdFx0XHRcdHNldHRpbmdcclxuXHRcdFx0XHRcdC5zZXROYW1lKCdDb21tYW5kJylcclxuXHRcdFx0XHRcdC5zZXREZXNjKCdTZWxlY3QgdGhlIGNvbW1hbmQgdG8gZXhlY3V0ZSB3aGVuIHRoZSBidXR0b24gaXMgY2xpY2tlZCcpXHJcblx0XHRcdFx0XHQuYWRkQnV0dG9uKChidXR0b24pID0+XHJcblx0XHRcdFx0XHRcdGJ1dHRvbi5zZXRCdXR0b25UZXh0KGNvbW1hbmROYW1lIHx8ICdTZWxlY3QgY29tbWFuZC4uLicpLm9uQ2xpY2soKCkgPT4ge1xyXG5cdFx0XHRcdFx0XHRcdGNvbnN0IG1vZGFsID0gbmV3IENvbW1hbmRQaWNrZXJNb2RhbCh0aGlzLmFwcCwgKGNvbW1hbmRJZCkgPT4ge1xyXG5cdFx0XHRcdFx0XHRcdFx0aWYgKCFzZXR0aW5ncy5zeW5jQnV0dG9uUmVwbGFjZW1lbnQpIHtcclxuXHRcdFx0XHRcdFx0XHRcdFx0c2V0dGluZ3Muc3luY0J1dHRvblJlcGxhY2VtZW50ID0ge1xyXG5cdFx0XHRcdFx0XHRcdFx0XHRcdGVuYWJsZWQ6IHRydWUsXHJcblx0XHRcdFx0XHRcdFx0XHRcdFx0Y29tbWFuZElkOiAnJyxcclxuXHRcdFx0XHRcdFx0XHRcdFx0XHRpY29uSWQ6ICd3cmVuY2gnLFxyXG5cdFx0XHRcdFx0XHRcdFx0XHR9O1xyXG5cdFx0XHRcdFx0XHRcdFx0fVxyXG5cdFx0XHRcdFx0XHRcdFx0c2V0dGluZ3Muc3luY0J1dHRvblJlcGxhY2VtZW50LmNvbW1hbmRJZCA9IGNvbW1hbmRJZDtcclxuXHRcdFx0XHRcdFx0XHRcdHZvaWQgdGhpcy5zYXZlU2V0dGluZ3MoKTtcclxuXHRcdFx0XHRcdFx0XHR9KTtcclxuXHRcdFx0XHRcdFx0XHRtb2RhbC5vcGVuKCk7XHJcblx0XHRcdFx0XHRcdH0pXHJcblx0XHRcdFx0XHQpO1xyXG5cdFx0XHR9KTtcclxuXHJcblx0XHRcdGNvbnN0IGdldEljb25OYW1lID0gKGljb25JZDogc3RyaW5nKTogc3RyaW5nID0+IHtcclxuXHRcdFx0XHRpZiAoIWljb25JZCkgcmV0dXJuICcnO1xyXG5cdFx0XHRcdHJldHVybiBpY29uSWRcclxuXHRcdFx0XHRcdC5yZXBsYWNlKC9ebHVjaWRlLS8sICcnKVxyXG5cdFx0XHRcdFx0LnNwbGl0KCctJylcclxuXHRcdFx0XHRcdC5tYXAoKHdvcmQpID0+IHdvcmQuY2hhckF0KDApLnRvVXBwZXJDYXNlKCkgKyB3b3JkLnNsaWNlKDEpKVxyXG5cdFx0XHRcdFx0LmpvaW4oJyAnKTtcclxuXHRcdFx0fTtcclxuXHJcblx0XHRcdGNvbnN0IGljb25OYW1lID0gZ2V0SWNvbk5hbWUoc2V0dGluZ3Muc3luY0J1dHRvblJlcGxhY2VtZW50Lmljb25JZCk7XHJcblx0XHRcdGdyb3VwLmFkZFNldHRpbmcoKHNldHRpbmcpOiB2b2lkID0+IHtcclxuXHRcdFx0XHRzZXR0aW5nXHJcblx0XHRcdFx0XHQuc2V0TmFtZSgnSWNvbicpXHJcblx0XHRcdFx0XHQuc2V0RGVzYygnU2VsZWN0IHRoZSBpY29uIHRvIGRpc3BsYXkgb24gdGhlIGJ1dHRvbicpXHJcblx0XHRcdFx0XHQuYWRkQnV0dG9uKChidXR0b24pID0+XHJcblx0XHRcdFx0XHRcdGJ1dHRvbi5zZXRCdXR0b25UZXh0KGljb25OYW1lIHx8ICdTZWxlY3QgaWNvbi4uLicpLm9uQ2xpY2soKCkgPT4ge1xyXG5cdFx0XHRcdFx0XHRcdGNvbnN0IG1vZGFsID0gbmV3IEljb25QaWNrZXJNb2RhbCh0aGlzLmFwcCwgKGljb25JZCkgPT4ge1xyXG5cdFx0XHRcdFx0XHRcdFx0aWYgKCFzZXR0aW5ncy5zeW5jQnV0dG9uUmVwbGFjZW1lbnQpIHtcclxuXHRcdFx0XHRcdFx0XHRcdFx0c2V0dGluZ3Muc3luY0J1dHRvblJlcGxhY2VtZW50ID0ge1xyXG5cdFx0XHRcdFx0XHRcdFx0XHRcdGVuYWJsZWQ6IHRydWUsXHJcblx0XHRcdFx0XHRcdFx0XHRcdFx0Y29tbWFuZElkOiAnb3Blbi1zZXR0aW5ncycsXHJcblx0XHRcdFx0XHRcdFx0XHRcdFx0aWNvbklkOiAnd3JlbmNoJyxcclxuXHRcdFx0XHRcdFx0XHRcdFx0fTtcclxuXHRcdFx0XHRcdFx0XHRcdH1cclxuXHRcdFx0XHRcdFx0XHRcdHNldHRpbmdzLnN5bmNCdXR0b25SZXBsYWNlbWVudC5pY29uSWQgPSBpY29uSWQ7XHJcblx0XHRcdFx0XHRcdFx0XHR2b2lkIHRoaXMuc2F2ZVNldHRpbmdzKCk7XHJcblx0XHRcdFx0XHRcdFx0fSk7XHJcblx0XHRcdFx0XHRcdFx0bW9kYWwub3BlbigpO1xyXG5cdFx0XHRcdFx0XHR9KVxyXG5cdFx0XHRcdFx0KTtcclxuXHRcdFx0fSk7XHJcblx0XHR9XHJcblx0fVxyXG59XHJcbiIsICIvKipcclxuICogVGFiIEJhciBNYW5hZ2VyIC0gTWFuYWdlcyBjdXN0b20gY29tbWFuZCBidXR0b25zIGluIHBhZ2UgaGVhZGVycyAodGFiIGJhcilcclxuICogQmFzZWQgb24gQ29tbWFuZGVyJ3MgUGFnZUhlYWRlck1hbmFnZXIgd2l0aCBtZC9tZHgtb25seSBmaWx0ZXJpbmdcclxuICovXHJcblxyXG5pbXBvcnQgeyBJdGVtVmlldywgTWVudSwgV29ya3NwYWNlTGVhZiwgc2V0SWNvbiB9IGZyb20gJ29ic2lkaWFuJztcclxuaW1wb3J0IFVJVHdlYWtlclBsdWdpbiBmcm9tICcuLi9tYWluJztcclxuaW1wb3J0IHsgQ29tbWFuZEljb25QYWlyIH0gZnJvbSAnLi4vdHlwZXMnO1xyXG5pbXBvcnQgeyBtYXRjaGVzRmlsZVR5cGVGaWx0ZXIsIGlzTW9kZUFjdGl2ZSwgaXNDb21tYW5kQ2hlY2tlZCB9IGZyb20gJy4uL3V0aWxzL2NvbW1hbmRVdGlscyc7XHJcbmltcG9ydCB7IEljb25QaWNrZXJNb2RhbCB9IGZyb20gJy4uL21vZGFscy9JY29uUGlja2VyTW9kYWwnO1xyXG5pbXBvcnQgeyBzZXRDc3NQcm9wcyB9IGZyb20gJy4uL3VpTWFuYWdlcic7XHJcblxyXG5leHBvcnQgY2xhc3MgVGFiQmFyTWFuYWdlciB7XHJcblx0cHJpdmF0ZSBwbHVnaW46IFVJVHdlYWtlclBsdWdpbjtcclxuXHRwcml2YXRlIGJ1dHRvbnMgPSBuZXcgV2Vha01hcDxJdGVtVmlldywgTWFwPHN0cmluZywgSFRNTEVsZW1lbnQ+PigpO1xyXG5cclxuXHRjb25zdHJ1Y3RvcihwbHVnaW46IFVJVHdlYWtlclBsdWdpbikge1xyXG5cdFx0dGhpcy5wbHVnaW4gPSBwbHVnaW47XHJcblx0XHR0aGlzLmluaXQoKTtcclxuXHR9XHJcblxyXG5cdHByaXZhdGUgZ2V0IHBhaXJzKCk6IENvbW1hbmRJY29uUGFpcltdIHtcclxuXHRcdHJldHVybiB0aGlzLnBsdWdpbi5zZXR0aW5ncy50YWJCYXJDb21tYW5kcyB8fCBbXTtcclxuXHR9XHJcblxyXG5cdHByaXZhdGUgaW5pdCgpOiB2b2lkIHtcclxuXHRcdHRoaXMucGx1Z2luLnJlZ2lzdGVyKCgpID0+IHtcclxuXHRcdFx0Ly8gUmVtb3ZlIGFsbCBidXR0b25zIG9uIHBsdWdpbiB1bmxvYWRcclxuXHRcdFx0dGhpcy5yZW1vdmVCdXR0b25zRnJvbUFsbExlYXZlcygpO1xyXG5cdFx0fSk7XHJcblx0XHRcclxuXHRcdHRoaXMucGx1Z2luLnJlZ2lzdGVyRXZlbnQoXHJcblx0XHRcdHRoaXMucGx1Z2luLmFwcC53b3Jrc3BhY2Uub24oJ2xheW91dC1jaGFuZ2UnLCAoKSA9PiB7XHJcblx0XHRcdFx0dGhpcy5hZGRCdXR0b25zVG9BbGxMZWF2ZXMoKTtcclxuXHRcdFx0fSlcclxuXHRcdCk7XHJcblx0XHRcclxuXHRcdHRoaXMucGx1Z2luLmFwcC53b3Jrc3BhY2Uub25MYXlvdXRSZWFkeSgoKSA9PlxyXG5cdFx0XHRzZXRUaW1lb3V0KCgpID0+IHRoaXMuYWRkQnV0dG9uc1RvQWxsTGVhdmVzKCksIDEwMClcclxuXHRcdCk7XHJcblx0fVxyXG5cclxuXHRwcml2YXRlIGFkZFBhZ2VIZWFkZXJCdXR0b24obGVhZjogV29ya3NwYWNlTGVhZiwgcGFpcjogQ29tbWFuZEljb25QYWlyKTogdm9pZCB7XHJcblx0XHRjb25zdCB7IGlkIH0gPSBwYWlyO1xyXG5cdFx0Ly8gVXNlIHVzZXItc2V0IG5hbWUgZm9yIHRoZSBidXR0b24gdG9vbHRpcFxyXG5cdFx0Y29uc3QgbmFtZSA9IHBhaXIubmFtZTtcclxuXHRcdGNvbnN0IHsgdmlldyB9ID0gbGVhZjtcclxuXHRcdGlmICghKHZpZXcgaW5zdGFuY2VvZiBJdGVtVmlldykpIHtcclxuXHRcdFx0cmV0dXJuO1xyXG5cdFx0fVxyXG5cdFx0XHJcblx0XHRjb25zdCBidXR0b25zID0gdGhpcy5idXR0b25zRm9yKGxlYWYsIHRydWUpO1xyXG5cdFx0aWYgKCFidXR0b25zKSB7XHJcblx0XHRcdHJldHVybjtcclxuXHRcdH1cclxuXHRcdFxyXG5cdFx0Ly8gSWYgYnV0dG9uIGFscmVhZHkgZXhpc3RzLCB1cGRhdGUgaXRzIG5hbWUgYW5kIGNvbG9yIGluc3RlYWQgb2YgY3JlYXRpbmcgbmV3IG9uZVxyXG5cdFx0aWYgKGJ1dHRvbnMuaGFzKGlkKSkge1xyXG5cdFx0XHRjb25zdCBleGlzdGluZ0J1dHRvbiA9IGJ1dHRvbnMuZ2V0KGlkKTtcclxuXHRcdFx0aWYgKGV4aXN0aW5nQnV0dG9uKSB7XHJcblx0XHRcdFx0Ly8gVXBkYXRlIHRvb2x0aXAvYXJpYS1sYWJlbCB3aXRoIG5ldyBuYW1lXHJcblx0XHRcdFx0ZXhpc3RpbmdCdXR0b24uc2V0QXR0cmlidXRlKCdhcmlhLWxhYmVsJywgbmFtZSk7XHJcblx0XHRcdFx0ZXhpc3RpbmdCdXR0b24uc2V0QXR0cmlidXRlKCd0aXRsZScsIG5hbWUpO1xyXG5cdFx0XHRcdC8vIFVwZGF0ZSBjb2xvciBpZiBuZWVkZWQgKG9ubHkgaWYgbm90IGJsYWNrIC0gYmxhY2sgPSBkZWZhdWx0KVxyXG5cdFx0XHRcdGlmIChwYWlyLmNvbG9yICYmIHBhaXIuY29sb3IgIT09ICcjMDAwMDAwJykge1xyXG5cdFx0XHRcdFx0c2V0Q3NzUHJvcHMoZXhpc3RpbmdCdXR0b24sIHsgY29sb3I6IHBhaXIuY29sb3IgfSk7XHJcblx0XHRcdFx0fSBlbHNlIHtcclxuXHRcdFx0XHRcdGV4aXN0aW5nQnV0dG9uLnN0eWxlLnJlbW92ZVByb3BlcnR5KCdjb2xvcicpO1xyXG5cdFx0XHRcdH1cclxuXHRcdFx0XHQvLyBVcGRhdGUgdG9nZ2xlIHN0YXRlXHJcblx0XHRcdFx0dGhpcy51cGRhdGVCdXR0b25Ub2dnbGVTdGF0ZShleGlzdGluZ0J1dHRvbiwgcGFpcik7XHJcblx0XHRcdFx0cmV0dXJuO1xyXG5cdFx0XHR9XHJcblx0XHR9XHJcblxyXG5cdFx0Ly8gQ2hlY2sgZmlsZSB0eXBlIGZpbHRlcnNcclxuXHRcdGlmICghbWF0Y2hlc0ZpbGVUeXBlRmlsdGVyKGxlYWYsIHBhaXIuc2hvd09uRmlsZVR5cGVzLCBwYWlyLmhpZGVPbkZpbGVUeXBlcykpIHtcclxuXHRcdFx0cmV0dXJuO1xyXG5cdFx0fVxyXG5cclxuXHRcdC8vIERldGVybWluZSBpbml0aWFsIGljb24gYmFzZWQgb24gdG9nZ2xlIHN0YXRlXHJcblx0XHRjb25zdCBpbml0aWFsSWNvbiA9IHRoaXMuZ2V0SWNvbkZvclRvZ2dsZVN0YXRlKHBhaXIpO1xyXG5cdFx0XHJcblx0XHRjb25zdCBidXR0b25JY29uID0gdmlldy5hZGRBY3Rpb24oaW5pdGlhbEljb24sIG5hbWUsICgpID0+IHtcclxuXHRcdFx0dGhpcy5wbHVnaW4uYXBwLndvcmtzcGFjZS5zZXRBY3RpdmVMZWFmKGxlYWYsIHsgZm9jdXM6IHRydWUgfSk7XHJcblx0XHRcdGNvbnN0IGNvbW1hbmRzID0gKHRoaXMucGx1Z2luLmFwcCBhcyB7IGNvbW1hbmRzPzogeyBleGVjdXRlQ29tbWFuZEJ5SWQ/OiAoaWQ6IHN0cmluZykgPT4gUHJvbWlzZTx2b2lkPiB9IH0pLmNvbW1hbmRzO1xyXG5cdFx0XHRpZiAoY29tbWFuZHM/LmV4ZWN1dGVDb21tYW5kQnlJZCkge1xyXG5cdFx0XHRcdC8vIENvbW1hbmQgZXhlY3V0aW9uIGlzIHRyYWNrZWQgYnkgdGhlIGludGVyY2VwdG9yIGluIG1haW4udHNcclxuXHRcdFx0XHQvLyBKdXN0IGV4ZWN1dGUgdGhlIGNvbW1hbmQgLSB0aGUgaW50ZXJjZXB0b3Igd2lsbCBoYW5kbGUgdG9nZ2xlIHRyYWNraW5nXHJcblx0XHRcdFx0dm9pZCBjb21tYW5kcy5leGVjdXRlQ29tbWFuZEJ5SWQoaWQpO1xyXG5cdFx0XHRcdC8vIFVwZGF0ZSB0b2dnbGUgc3RhdGUgYWZ0ZXIgY29tbWFuZCBleGVjdXRpb25cclxuXHRcdFx0XHQvLyBUaGUgaW50ZXJjZXB0b3Igd2lsbCBhbHNvIHJlZnJlc2gsIGJ1dCB3ZSB1cGRhdGUgdGhpcyBidXR0b24gaW1tZWRpYXRlbHkgZm9yIHJlc3BvbnNpdmVuZXNzXHJcblx0XHRcdFx0c2V0VGltZW91dCgoKSA9PiB7XHJcblx0XHRcdFx0XHR0aGlzLnVwZGF0ZUJ1dHRvblRvZ2dsZVN0YXRlKGJ1dHRvbkljb24sIHBhaXIpO1xyXG5cdFx0XHRcdFx0Ly8gQWxzbyB1cGRhdGUgYWxsIG90aGVyIGJ1dHRvbnMgZm9yIHRoaXMgY29tbWFuZFxyXG5cdFx0XHRcdFx0dGhpcy51cGRhdGVBbGxCdXR0b25zRm9yQ29tbWFuZChpZCk7XHJcblx0XHRcdFx0fSwgMTAwKTtcclxuXHRcdFx0fVxyXG5cdFx0fSk7XHJcblx0XHRidXR0b25zLnNldChpZCwgYnV0dG9uSWNvbik7XHJcblxyXG5cdFx0YnV0dG9uSWNvbi5hZGRDbGFzc2VzKFsndWktdHdlYWtlci10YWItYmFyLWJ1dHRvbicsIGlkXSk7XHJcblx0XHQvLyBPbmx5IGFwcGx5IGNvbG9yIGlmIGl0J3Mgc2V0IGFuZCBub3QgYmxhY2sgKGJsYWNrID0gZGVmYXVsdClcclxuXHRcdGlmIChwYWlyLmNvbG9yICYmIHBhaXIuY29sb3IgIT09ICcjMDAwMDAwJykge1xyXG5cdFx0XHRzZXRDc3NQcm9wcyhidXR0b25JY29uLCB7IGNvbG9yOiBwYWlyLmNvbG9yIH0pO1xyXG5cdFx0fVxyXG5cdFx0XHJcblx0XHQvLyBVcGRhdGUgdG9nZ2xlIHN0YXRlIGFmdGVyIGNyZWF0aW9uXHJcblx0XHR0aGlzLnVwZGF0ZUJ1dHRvblRvZ2dsZVN0YXRlKGJ1dHRvbkljb24sIHBhaXIpO1xyXG5cclxuXHRcdGJ1dHRvbkljb24uYWRkRXZlbnRMaXN0ZW5lcignY29udGV4dG1lbnUnLCAoZXZlbnQpID0+IHtcclxuXHRcdFx0ZXZlbnQuc3RvcEltbWVkaWF0ZVByb3BhZ2F0aW9uKCk7XHJcblx0XHRcdG5ldyBNZW51KClcclxuXHRcdFx0XHQuYWRkSXRlbSgoaXRlbSkgPT4ge1xyXG5cdFx0XHRcdFx0aXRlbS5zZXRUaXRsZSgnQ2hhbmdlIGljb24nKVxyXG5cdFx0XHRcdFx0XHQuc2V0SWNvbignbHVjaWRlLWltYWdlLXBsdXMnKVxyXG5cdFx0XHRcdFx0XHQub25DbGljaygoKSA9PiB7XHJcblx0XHRcdFx0XHRcdFx0Y29uc3QgbW9kYWwgPSBuZXcgSWNvblBpY2tlck1vZGFsKHRoaXMucGx1Z2luLmFwcCwgKGljb25JZCkgPT4ge1xyXG5cdFx0XHRcdFx0XHRcdFx0aWYgKGljb25JZCAmJiBpY29uSWQgIT09IHBhaXIuaWNvbikge1xyXG5cdFx0XHRcdFx0XHRcdFx0XHRwYWlyLmljb24gPSBpY29uSWQ7XHJcblx0XHRcdFx0XHRcdFx0XHRcdHZvaWQgdGhpcy5wbHVnaW4uc2F2ZVNldHRpbmdzKCk7XHJcblx0XHRcdFx0XHRcdFx0XHRcdHRoaXMucmVvcmRlcigpO1xyXG5cdFx0XHRcdFx0XHRcdFx0fVxyXG5cdFx0XHRcdFx0XHRcdH0pO1xyXG5cdFx0XHRcdFx0XHRcdG1vZGFsLm9wZW4oKTtcclxuXHRcdFx0XHRcdFx0fSk7XHJcblx0XHRcdFx0fSlcclxuXHRcdFx0XHQuYWRkSXRlbSgoaXRlbSkgPT4ge1xyXG5cdFx0XHRcdFx0aXRlbS5zZXRUaXRsZSgnRGVsZXRlJylcclxuXHRcdFx0XHRcdFx0LnNldEljb24oJ2x1Y2lkZS10cmFzaCcpXHJcblx0XHRcdFx0XHRcdC5vbkNsaWNrKCgpID0+IHtcclxuXHRcdFx0XHRcdFx0XHR2b2lkIHRoaXMucmVtb3ZlQ29tbWFuZChwYWlyKTtcclxuXHRcdFx0XHRcdFx0fSk7XHJcblx0XHRcdFx0XHQvLyBBZGQgd2FybmluZyBjbGFzcyB0byBtYWtlIHRleHQgYW5kIGljb24gcmVkXHJcblx0XHRcdFx0XHQvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L25vLXVuc2FmZS1tZW1iZXItYWNjZXNzLCBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tZXhwbGljaXQtYW55LCBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tdW5zYWZlLWFzc2lnbm1lbnRcclxuXHRcdFx0XHRcdGNvbnN0IGRvbSA9IChpdGVtIGFzIGFueSkuZG9tO1xyXG5cdFx0XHRcdFx0aWYgKGRvbSkge1xyXG5cdFx0XHRcdFx0XHQvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L25vLXVuc2FmZS1jYWxsLCBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tdW5zYWZlLW1lbWJlci1hY2Nlc3NcclxuXHRcdFx0XHRcdFx0ZG9tLmNsYXNzTGlzdC5hZGQoJ21vZC13YXJuaW5nJyk7XHJcblx0XHRcdFx0XHRcdC8vIEFsc28gbWFrZSB0aGUgaWNvbiByZWRcclxuXHRcdFx0XHRcdFx0Ly8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9uby11bnNhZmUtYXNzaWdubWVudCwgQHR5cGVzY3JpcHQtZXNsaW50L25vLXVuc2FmZS1jYWxsLCBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tdW5zYWZlLW1lbWJlci1hY2Nlc3NcclxuXHRcdFx0XHRcdFx0Y29uc3QgaWNvbkVsID0gZG9tLnF1ZXJ5U2VsZWN0b3IoJy5tZW51LWl0ZW0taWNvbiBzdmcnKTtcclxuXHRcdFx0XHRcdFx0aWYgKGljb25FbCkge1xyXG5cdFx0XHRcdFx0XHRcdC8vIFVzZSBzZXRDc3NQcm9wcyB0byBzZXQgY29sb3IgKGFscmVhZHkgaW1wb3J0ZWQgZnJvbSB1aU1hbmFnZXIpXHJcblx0XHRcdFx0XHRcdFx0c2V0Q3NzUHJvcHMoaWNvbkVsIGFzIEhUTUxFbGVtZW50LCB7IGNvbG9yOiAndmFyKC0tdGV4dC1lcnJvciknIH0pO1xyXG5cdFx0XHRcdFx0XHR9XHJcblx0XHRcdFx0XHR9XHJcblx0XHRcdFx0fSlcclxuXHRcdFx0XHQuc2hvd0F0TW91c2VFdmVudChldmVudCk7XHJcblx0XHR9KTtcclxuXHR9XHJcblxyXG5cdHByaXZhdGUgYnV0dG9uc0ZvcihsZWFmOiBXb3Jrc3BhY2VMZWFmLCBjcmVhdGUgPSBmYWxzZSkge1xyXG5cdFx0aWYgKCEobGVhZi52aWV3IGluc3RhbmNlb2YgSXRlbVZpZXcpKSByZXR1cm47XHJcblx0XHRpZiAoY3JlYXRlICYmICF0aGlzLmJ1dHRvbnMuaGFzKGxlYWYudmlldykpXHJcblx0XHRcdHRoaXMuYnV0dG9ucy5zZXQobGVhZi52aWV3LCBuZXcgTWFwKCkpO1xyXG5cdFx0cmV0dXJuIHRoaXMuYnV0dG9ucy5nZXQobGVhZi52aWV3KTtcclxuXHR9XHJcblxyXG5cdHByaXZhdGUgYWRkQnV0dG9uc1RvQWxsTGVhdmVzKHJlZnJlc2ggPSBmYWxzZSk6IHZvaWQge1xyXG5cdFx0cmVxdWVzdEFuaW1hdGlvbkZyYW1lKCgpID0+IHtcclxuXHRcdFx0dGhpcy5wbHVnaW4uYXBwLndvcmtzcGFjZS5pdGVyYXRlQWxsTGVhdmVzKChsZWFmKSA9PiB7XHJcblx0XHRcdFx0dGhpcy5hZGRCdXR0b25zVG9MZWFmKGxlYWYsIHJlZnJlc2gpO1xyXG5cdFx0XHR9KTtcclxuXHRcdH0pO1xyXG5cdH1cclxuXHJcblx0cHJpdmF0ZSByZW1vdmVCdXR0b25zRnJvbUFsbExlYXZlcygpOiB2b2lkIHtcclxuXHRcdHJlcXVlc3RBbmltYXRpb25GcmFtZSgoKSA9PlxyXG5cdFx0XHR0aGlzLnBsdWdpbi5hcHAud29ya3NwYWNlLml0ZXJhdGVBbGxMZWF2ZXMoKGxlYWYpID0+XHJcblx0XHRcdFx0dGhpcy5yZW1vdmVCdXR0b25zRnJvbUxlYWYobGVhZilcclxuXHRcdFx0KVxyXG5cdFx0KTtcclxuXHR9XHJcblxyXG5cdHByaXZhdGUgYWRkQnV0dG9uc1RvTGVhZihsZWFmOiBXb3Jrc3BhY2VMZWFmLCByZWZyZXNoID0gZmFsc2UpOiB2b2lkIHtcclxuXHRcdGlmICghKGxlYWYudmlldyBpbnN0YW5jZW9mIEl0ZW1WaWV3KSkge1xyXG5cdFx0XHRyZXR1cm47XHJcblx0XHR9XHJcblx0XHRpZiAocmVmcmVzaCkge1xyXG5cdFx0XHR0aGlzLnJlbW92ZUJ1dHRvbnNGcm9tTGVhZihsZWFmKTtcclxuXHRcdH0gZWxzZSBpZiAodGhpcy5idXR0b25zRm9yKGxlYWYpPy5zaXplKSB7XHJcblx0XHRcdC8vIFZpZXcgYWxyZWFkeSBoYXMgYnV0dG9ucyBhbmQgd2UncmUgbm90IGRvaW5nIGEgZnVsbCByZWZyZXNoXHJcblx0XHRcdHJldHVybjtcclxuXHRcdH1cclxuXHRcdGZvciAobGV0IGkgPSB0aGlzLnBhaXJzLmxlbmd0aCAtIDE7IGkgPj0gMDsgaS0tKSB7XHJcblx0XHRcdGNvbnN0IHBhaXIgPSB0aGlzLnBhaXJzW2ldO1xyXG5cdFx0XHRpZiAoaXNNb2RlQWN0aXZlKHBhaXIubW9kZSwgdGhpcy5wbHVnaW4pKSB7XHJcblx0XHRcdFx0dGhpcy5hZGRQYWdlSGVhZGVyQnV0dG9uKGxlYWYsIHBhaXIpO1xyXG5cdFx0XHR9XHJcblx0XHR9XHJcblx0fVxyXG5cclxuXHRwcml2YXRlIHJlbW92ZUJ1dHRvbnNGcm9tTGVhZihsZWFmOiBXb3Jrc3BhY2VMZWFmKSB7XHJcblx0XHRjb25zdCBidXR0b25zID0gdGhpcy5idXR0b25zRm9yKGxlYWYpO1xyXG5cdFx0aWYgKGJ1dHRvbnMpIHtcclxuXHRcdFx0Zm9yIChjb25zdCBidXR0b24gb2YgYnV0dG9ucy52YWx1ZXMoKSkgYnV0dG9uLmRldGFjaCgpO1xyXG5cdFx0XHRidXR0b25zPy5jbGVhcigpO1xyXG5cdFx0fVxyXG5cdH1cclxuXHJcblx0cHVibGljIHJlb3JkZXIoKTogdm9pZCB7XHJcblx0XHR0aGlzLmFkZEJ1dHRvbnNUb0FsbExlYXZlcyh0cnVlKTtcclxuXHR9XHJcblxyXG5cdC8qKlxyXG5cdCAqIFVwZGF0ZSBidXR0b24gbmFtZXMvdG9vbHRpcHMgZm9yIGFsbCBleGlzdGluZyBidXR0b25zXHJcblx0ICovXHJcblx0cHVibGljIHVwZGF0ZUJ1dHRvbk5hbWVzKCk6IHZvaWQge1xyXG5cdFx0dGhpcy5wbHVnaW4uYXBwLndvcmtzcGFjZS5pdGVyYXRlQWxsTGVhdmVzKChsZWFmKSA9PiB7XHJcblx0XHRcdGlmICghKGxlYWYudmlldyBpbnN0YW5jZW9mIEl0ZW1WaWV3KSkgcmV0dXJuO1xyXG5cdFx0XHRjb25zdCBidXR0b25zID0gdGhpcy5idXR0b25zRm9yKGxlYWYpO1xyXG5cdFx0XHRpZiAoIWJ1dHRvbnMpIHJldHVybjtcclxuXHRcdFx0XHJcblx0XHRcdGZvciAoY29uc3QgW2lkLCBidXR0b25dIG9mIGJ1dHRvbnMuZW50cmllcygpKSB7XHJcblx0XHRcdFx0Y29uc3QgcGFpciA9IHRoaXMucGFpcnMuZmluZChwID0+IHAuaWQgPT09IGlkKTtcclxuXHRcdFx0XHRpZiAocGFpcikge1xyXG5cdFx0XHRcdFx0Ly8gVXBkYXRlIHRvb2x0aXAvYXJpYS1sYWJlbCB3aXRoIGN1cnJlbnQgbmFtZVxyXG5cdFx0XHRcdFx0YnV0dG9uLnNldEF0dHJpYnV0ZSgnYXJpYS1sYWJlbCcsIHBhaXIubmFtZSk7XHJcblx0XHRcdFx0XHRidXR0b24uc2V0QXR0cmlidXRlKCd0aXRsZScsIHBhaXIubmFtZSk7XHJcblx0XHRcdFx0XHQvLyBVcGRhdGUgY29sb3IgaWYgbmVlZGVkXHJcblx0XHRcdFx0XHRpZiAocGFpci5jb2xvciAmJiBwYWlyLmNvbG9yICE9PSAnIzAwMDAwMCcpIHtcclxuXHRcdFx0XHRcdFx0c2V0Q3NzUHJvcHMoYnV0dG9uLCB7IGNvbG9yOiBwYWlyLmNvbG9yIH0pO1xyXG5cdFx0XHRcdFx0fSBlbHNlIHtcclxuXHRcdFx0XHRcdFx0YnV0dG9uLnN0eWxlLnJlbW92ZVByb3BlcnR5KCdjb2xvcicpO1xyXG5cdFx0XHRcdFx0fVxyXG5cdFx0XHRcdFx0Ly8gVXBkYXRlIHRvZ2dsZSBzdGF0ZVxyXG5cdFx0XHRcdFx0dGhpcy51cGRhdGVCdXR0b25Ub2dnbGVTdGF0ZShidXR0b24sIHBhaXIpO1xyXG5cdFx0XHRcdH1cclxuXHRcdFx0fVxyXG5cdFx0fSk7XHJcblx0fVxyXG5cclxuXHQvKipcclxuXHQgKiBHZXQgaWNvbiBmb3IgY3VycmVudCB0b2dnbGUgc3RhdGVcclxuXHQgKi9cclxuXHRwcml2YXRlIGdldEljb25Gb3JUb2dnbGVTdGF0ZShwYWlyOiBDb21tYW5kSWNvblBhaXIpOiBzdHJpbmcge1xyXG5cdFx0aWYgKCFwYWlyLnRvZ2dsZUljb24pIHtcclxuXHRcdFx0cmV0dXJuIHBhaXIuaWNvbjtcclxuXHRcdH1cclxuXHRcdGNvbnN0IGlzQ2hlY2tlZCA9IGlzQ29tbWFuZENoZWNrZWQocGFpci5pZCwgdGhpcy5wbHVnaW4pO1xyXG5cdFx0cmV0dXJuIGlzQ2hlY2tlZCA/IHBhaXIudG9nZ2xlSWNvbiA6IHBhaXIuaWNvbjtcclxuXHR9XHJcblxyXG5cdC8qKlxyXG5cdCAqIFVwZGF0ZSBidXR0b24gdG9nZ2xlIHN0YXRlIChpY29uIHN3YXAgb25seSBmb3IgdGFiIGJhcilcclxuXHQgKi9cclxuXHRwcml2YXRlIHVwZGF0ZUJ1dHRvblRvZ2dsZVN0YXRlKGJ1dHRvbjogSFRNTEVsZW1lbnQsIHBhaXI6IENvbW1hbmRJY29uUGFpcik6IHZvaWQge1xyXG5cdFx0aWYgKCFwYWlyLnRvZ2dsZUljb24pIHtcclxuXHRcdFx0Ly8gTm8gdG9nZ2xlIGNvbmZpZ3VyZWQgLSB1c2UgZGVmYXVsdCBpY29uXHJcblx0XHRcdHNldEljb24oYnV0dG9uLCBwYWlyLmljb24pO1xyXG5cdFx0XHRyZXR1cm47XHJcblx0XHR9XHJcblxyXG5cdFx0Ly8gQ2hlY2sgaWYgY29tbWFuZCBpcyBjdXJyZW50bHkgdG9nZ2xlZCBvblxyXG5cdFx0Y29uc3QgaXNDaGVja2VkID0gaXNDb21tYW5kQ2hlY2tlZChwYWlyLmlkLCB0aGlzLnBsdWdpbik7XHJcblx0XHRcclxuXHRcdC8vIFN3YXAgaWNvbiBiYXNlZCBvbiB0b2dnbGUgc3RhdGVcclxuXHRcdHNldEljb24oYnV0dG9uLCBpc0NoZWNrZWQgPyBwYWlyLnRvZ2dsZUljb24gOiBwYWlyLmljb24pO1xyXG5cdH1cclxuXHJcblx0LyoqXHJcblx0ICogVXBkYXRlIGFsbCBidXR0b25zIGZvciBhIHNwZWNpZmljIGNvbW1hbmQgSUQgYWNyb3NzIGFsbCBsZWF2ZXNcclxuXHQgKi9cclxuXHRwcml2YXRlIHVwZGF0ZUFsbEJ1dHRvbnNGb3JDb21tYW5kKGNvbW1hbmRJZDogc3RyaW5nKTogdm9pZCB7XHJcblx0XHRjb25zdCBwYWlyID0gdGhpcy5wYWlycy5maW5kKHAgPT4gcC5pZCA9PT0gY29tbWFuZElkKTtcclxuXHRcdGlmICghcGFpcikgcmV0dXJuO1xyXG5cclxuXHRcdHRoaXMucGx1Z2luLmFwcC53b3Jrc3BhY2UuaXRlcmF0ZUFsbExlYXZlcygobGVhZikgPT4ge1xyXG5cdFx0XHRpZiAoIShsZWFmLnZpZXcgaW5zdGFuY2VvZiBJdGVtVmlldykpIHJldHVybjtcclxuXHRcdFx0Y29uc3QgYnV0dG9ucyA9IHRoaXMuYnV0dG9uc0ZvcihsZWFmKTtcclxuXHRcdFx0aWYgKCFidXR0b25zKSByZXR1cm47XHJcblxyXG5cdFx0XHRjb25zdCBidXR0b24gPSBidXR0b25zLmdldChjb21tYW5kSWQpO1xyXG5cdFx0XHRpZiAoYnV0dG9uKSB7XHJcblx0XHRcdFx0dGhpcy51cGRhdGVCdXR0b25Ub2dnbGVTdGF0ZShidXR0b24sIHBhaXIpO1xyXG5cdFx0XHR9XHJcblx0XHR9KTtcclxuXHR9XHJcblxyXG5cdC8qKlxyXG5cdCAqIFJlZnJlc2ggdG9nZ2xlIHN0YXRlcyBmb3IgYWxsIGJ1dHRvbnNcclxuXHQgKi9cclxuXHRwdWJsaWMgcmVmcmVzaFRvZ2dsZVN0YXRlcygpOiB2b2lkIHtcclxuXHRcdHRoaXMucGx1Z2luLmFwcC53b3Jrc3BhY2UuaXRlcmF0ZUFsbExlYXZlcygobGVhZikgPT4ge1xyXG5cdFx0XHRpZiAoIShsZWFmLnZpZXcgaW5zdGFuY2VvZiBJdGVtVmlldykpIHJldHVybjtcclxuXHRcdFx0Y29uc3QgYnV0dG9ucyA9IHRoaXMuYnV0dG9uc0ZvcihsZWFmKTtcclxuXHRcdFx0aWYgKCFidXR0b25zKSByZXR1cm47XHJcblxyXG5cdFx0XHRmb3IgKGNvbnN0IFtpZCwgYnV0dG9uXSBvZiBidXR0b25zLmVudHJpZXMoKSkge1xyXG5cdFx0XHRcdGNvbnN0IHBhaXIgPSB0aGlzLnBhaXJzLmZpbmQocCA9PiBwLmlkID09PSBpZCk7XHJcblx0XHRcdFx0aWYgKHBhaXIgJiYgcGFpci50b2dnbGVJY29uKSB7XHJcblx0XHRcdFx0XHR0aGlzLnVwZGF0ZUJ1dHRvblRvZ2dsZVN0YXRlKGJ1dHRvbiwgcGFpcik7XHJcblx0XHRcdFx0fVxyXG5cdFx0XHR9XHJcblx0XHR9KTtcclxuXHR9XHJcblxyXG5cdHB1YmxpYyBhc3luYyBhZGRDb21tYW5kKHBhaXI6IENvbW1hbmRJY29uUGFpcik6IFByb21pc2U8dm9pZD4ge1xyXG5cdFx0aWYgKCF0aGlzLnBsdWdpbi5zZXR0aW5ncy50YWJCYXJDb21tYW5kcykge1xyXG5cdFx0XHR0aGlzLnBsdWdpbi5zZXR0aW5ncy50YWJCYXJDb21tYW5kcyA9IFtdO1xyXG5cdFx0fVxyXG5cdFx0dGhpcy5wbHVnaW4uc2V0dGluZ3MudGFiQmFyQ29tbWFuZHMucHVzaChwYWlyKTtcclxuXHRcdHRoaXMuYWRkQnV0dG9uc1RvQWxsTGVhdmVzKHRydWUpO1xyXG5cdFx0YXdhaXQgdGhpcy5wbHVnaW4uc2F2ZVNldHRpbmdzKCk7XHJcblx0fVxyXG5cclxuXHRwdWJsaWMgYXN5bmMgcmVtb3ZlQ29tbWFuZChwYWlyOiBDb21tYW5kSWNvblBhaXIpOiBQcm9taXNlPHZvaWQ+IHtcclxuXHRcdGlmICghdGhpcy5wbHVnaW4uc2V0dGluZ3MudGFiQmFyQ29tbWFuZHMpIHJldHVybjtcclxuXHRcdGNvbnN0IGluZGV4ID0gdGhpcy5wbHVnaW4uc2V0dGluZ3MudGFiQmFyQ29tbWFuZHMuaW5kZXhPZihwYWlyKTtcclxuXHRcdGlmIChpbmRleCA+IC0xKSB7XHJcblx0XHRcdHRoaXMucGx1Z2luLnNldHRpbmdzLnRhYkJhckNvbW1hbmRzLnNwbGljZShpbmRleCwgMSk7XHJcblx0XHR9XHJcblx0XHR0aGlzLmFkZEJ1dHRvbnNUb0FsbExlYXZlcyh0cnVlKTtcclxuXHRcdGF3YWl0IHRoaXMucGx1Z2luLnNhdmVTZXR0aW5ncygpO1xyXG5cdH1cclxuXHJcblx0cHVibGljIGFzeW5jIHVwZGF0ZUNvbW1hbmQob2xkUGFpcjogQ29tbWFuZEljb25QYWlyLCBuZXdQYWlyOiBDb21tYW5kSWNvblBhaXIpOiBQcm9taXNlPHZvaWQ+IHtcclxuXHRcdGlmICghdGhpcy5wbHVnaW4uc2V0dGluZ3MudGFiQmFyQ29tbWFuZHMpIHJldHVybjtcclxuXHRcdGNvbnN0IGluZGV4ID0gdGhpcy5wbHVnaW4uc2V0dGluZ3MudGFiQmFyQ29tbWFuZHMuaW5kZXhPZihvbGRQYWlyKTtcclxuXHRcdGlmIChpbmRleCA+IC0xKSB7XHJcblx0XHRcdHRoaXMucGx1Z2luLnNldHRpbmdzLnRhYkJhckNvbW1hbmRzW2luZGV4XSA9IG5ld1BhaXI7XHJcblx0XHRcdHRoaXMuYWRkQnV0dG9uc1RvQWxsTGVhdmVzKHRydWUpO1xyXG5cdFx0XHRhd2FpdCB0aGlzLnBsdWdpbi5zYXZlU2V0dGluZ3MoKTtcclxuXHRcdH1cclxuXHR9XHJcbn1cclxuIiwgIi8qKlxyXG4gKiBVdGlsaXR5IGZ1bmN0aW9ucyBmb3IgY29tbWFuZCBtYW5hZ2VtZW50XHJcbiAqL1xyXG5cclxuaW1wb3J0IHsgQ29tbWFuZCwgTWFya2Rvd25WaWV3LCBXb3Jrc3BhY2VMZWFmLCBURmlsZSB9IGZyb20gJ29ic2lkaWFuJztcclxuaW1wb3J0IFVJVHdlYWtlclBsdWdpbiBmcm9tICcuLi9tYWluJztcclxuaW1wb3J0IHsgTW9kZSB9IGZyb20gJy4uL3R5cGVzJztcclxuXHJcbi8qKlxyXG4gKiBDaGVjayBpZiBhIHZpZXcgaXMgYSBtYXJrZG93biBvciBtYXJrZG93bnggZmlsZVxyXG4gKi9cclxuZXhwb3J0IGZ1bmN0aW9uIGlzTWFya2Rvd25WaWV3KGxlYWY6IFdvcmtzcGFjZUxlYWYgfCBudWxsKTogYm9vbGVhbiB7XHJcblx0aWYgKCFsZWFmPy52aWV3KSByZXR1cm4gZmFsc2U7XHJcblx0XHJcblx0aWYgKGxlYWYudmlldyBpbnN0YW5jZW9mIE1hcmtkb3duVmlldykge1xyXG5cdFx0Y29uc3QgZmlsZSA9IGxlYWYudmlldy5maWxlO1xyXG5cdFx0aWYgKCFmaWxlKSByZXR1cm4gZmFsc2U7XHJcblx0XHRcclxuXHRcdC8vIENoZWNrIGlmIGZpbGUgZXh0ZW5zaW9uIGlzIC5tZCBvciAubWR4XHJcblx0XHRjb25zdCBleHQgPSBmaWxlLmV4dGVuc2lvbi50b0xvd2VyQ2FzZSgpO1xyXG5cdFx0cmV0dXJuIGV4dCA9PT0gJ21kJyB8fCBleHQgPT09ICdtZHgnO1xyXG5cdH1cclxuXHRcclxuXHRyZXR1cm4gZmFsc2U7XHJcbn1cclxuXHJcbi8qKlxyXG4gKiBHZXQgZmlsZSBleHRlbnNpb24gZnJvbSBhIHdvcmtzcGFjZSBsZWFmXHJcbiAqL1xyXG5mdW5jdGlvbiBnZXRGaWxlRXh0ZW5zaW9uKGxlYWY6IFdvcmtzcGFjZUxlYWYgfCBudWxsKTogc3RyaW5nIHwgbnVsbCB7XHJcblx0aWYgKCFsZWFmPy52aWV3KSByZXR1cm4gbnVsbDtcclxuXHRcclxuXHQvLyBUcnkgdG8gZ2V0IGZpbGUgZnJvbSB2aWV3ICh3b3JrcyBmb3IgSXRlbVZpZXcgYW5kIE1hcmtkb3duVmlldylcclxuXHRjb25zdCB2aWV3ID0gbGVhZi52aWV3IGFzIHsgZmlsZT86IFRGaWxlIHwgbnVsbCB9O1xyXG5cdGNvbnN0IGZpbGUgPSB2aWV3LmZpbGU7XHJcblx0aWYgKCFmaWxlKSByZXR1cm4gbnVsbDtcclxuXHRcclxuXHRyZXR1cm4gZmlsZS5leHRlbnNpb24udG9Mb3dlckNhc2UoKTtcclxufVxyXG5cclxuLyoqXHJcbiAqIEdldCB2aWV3IHR5cGUgZnJvbSBhIHdvcmtzcGFjZSBsZWFmXHJcbiAqIFJldHVybnMgdGhlIHZpZXcgdHlwZSAoZS5nLiwgXCJtYXJrZG93blwiLCBcImNhbnZhc1wiLCBcImdyYXBoXCIsIFwiZW1wdHlcIikgb3IgbnVsbFxyXG4gKi9cclxuZnVuY3Rpb24gZ2V0Vmlld1R5cGUobGVhZjogV29ya3NwYWNlTGVhZiB8IG51bGwpOiBzdHJpbmcgfCBudWxsIHtcclxuXHRpZiAoIWxlYWY/LnZpZXcpIHJldHVybiBudWxsO1xyXG5cdFxyXG5cdC8vIFRyeSB0byBnZXQgdmlldyB0eXBlIGZyb20gdmlldyAoSXRlbVZpZXcgaGFzIGdldFZpZXdUeXBlIG1ldGhvZClcclxuXHRjb25zdCB2aWV3ID0gbGVhZi52aWV3IGFzIHsgZ2V0Vmlld1R5cGU/OiAoKSA9PiBzdHJpbmcgfTtcclxuXHRpZiAodmlldy5nZXRWaWV3VHlwZSAmJiB0eXBlb2Ygdmlldy5nZXRWaWV3VHlwZSA9PT0gJ2Z1bmN0aW9uJykge1xyXG5cdFx0cmV0dXJuIHZpZXcuZ2V0Vmlld1R5cGUoKS50b0xvd2VyQ2FzZSgpO1xyXG5cdH1cclxuXHRcclxuXHQvLyBGYWxsYmFjazogY2hlY2sgaWYgaXQncyBhIG1hcmtkb3duIHZpZXdcclxuXHRpZiAobGVhZi52aWV3IGluc3RhbmNlb2YgTWFya2Rvd25WaWV3KSB7XHJcblx0XHRyZXR1cm4gJ21hcmtkb3duJztcclxuXHR9XHJcblx0XHJcblx0Ly8gSWYgbm8gZmlsZSBhbmQgbm8gdmlldyB0eXBlLCBpdCdzIGxpa2VseSBhbiBlbXB0eSB0YWJcclxuXHRjb25zdCBmaWxlRXh0ID0gZ2V0RmlsZUV4dGVuc2lvbihsZWFmKTtcclxuXHRpZiAoIWZpbGVFeHQpIHtcclxuXHRcdHJldHVybiAnZW1wdHknOyAvLyBFbXB0eSB0YWIgKG5ldyB0YWIpXHJcblx0fVxyXG5cdFxyXG5cdHJldHVybiBudWxsO1xyXG59XHJcblxyXG4vKipcclxuICogUGFyc2UgY29tbWEtc2VwYXJhdGVkIGZpbGUgZXh0ZW5zaW9ucyBhbmQgdmlldyB0eXBlcyBpbnRvIGFycmF5c1xyXG4gKiBTdXBwb3J0cyBib3RoIGZpbGUgZXh0ZW5zaW9ucyAoZS5nLiwgXCJtZCxtZHhcIikgYW5kIHZpZXcgdHlwZXMgKGUuZy4sIFwie3tncmFwaH19LHt7Y2FudmFzfX1cIilcclxuICogUmV0dXJucyBhbiBvYmplY3Qgd2l0aCBmaWxlVHlwZXMgYW5kIHZpZXdUeXBlcyBhcnJheXNcclxuICovXHJcbmZ1bmN0aW9uIHBhcnNlRmlsZUFuZFZpZXdUeXBlcyh0eXBlczogc3RyaW5nIHwgdW5kZWZpbmVkKTogeyBmaWxlVHlwZXM6IHN0cmluZ1tdOyB2aWV3VHlwZXM6IHN0cmluZ1tdIH0ge1xyXG5cdGNvbnN0IHJlc3VsdCA9IHsgZmlsZVR5cGVzOiBbXSBhcyBzdHJpbmdbXSwgdmlld1R5cGVzOiBbXSBhcyBzdHJpbmdbXSB9O1xyXG5cdFxyXG5cdGlmICghdHlwZXMgfHwgIXR5cGVzLnRyaW0oKSkgcmV0dXJuIHJlc3VsdDtcclxuXHRcclxuXHRjb25zdCBwYXJ0cyA9IHR5cGVzLnNwbGl0KCcsJykubWFwKHAgPT4gcC50cmltKCkpLmZpbHRlcihwID0+IHApO1xyXG5cdFxyXG5cdGZvciAoY29uc3QgcGFydCBvZiBwYXJ0cykge1xyXG5cdFx0Ly8gQ2hlY2sgaWYgaXQncyBhIHZpZXcgdHlwZSAod3JhcHBlZCBpbiB7e319KVxyXG5cdFx0Y29uc3Qgdmlld1R5cGVNYXRjaCA9IHBhcnQubWF0Y2goL15cXHtcXHsoXFx3KylcXH1cXH0kLyk7XHJcblx0XHRpZiAodmlld1R5cGVNYXRjaCkge1xyXG5cdFx0XHRyZXN1bHQudmlld1R5cGVzLnB1c2godmlld1R5cGVNYXRjaFsxXS50b0xvd2VyQ2FzZSgpKTtcclxuXHRcdH0gZWxzZSB7XHJcblx0XHRcdC8vIEl0J3MgYSBmaWxlIGV4dGVuc2lvblxyXG5cdFx0XHRjb25zdCBleHQgPSBwYXJ0LnJlcGxhY2UoL15cXC4vLCAnJykudG9Mb3dlckNhc2UoKTtcclxuXHRcdFx0aWYgKGV4dCkge1xyXG5cdFx0XHRcdHJlc3VsdC5maWxlVHlwZXMucHVzaChleHQpO1xyXG5cdFx0XHR9XHJcblx0XHR9XHJcblx0fVxyXG5cdFxyXG5cdHJldHVybiByZXN1bHQ7XHJcbn1cclxuXHJcbi8qKlxyXG4gKiBDaGVjayBpZiBhIGZpbGUgb3IgdmlldyBtYXRjaGVzIHRoZSBmaWxlIHR5cGUgYW5kIHZpZXcgdHlwZSBmaWx0ZXJzXHJcbiAqIHNob3dPbkZpbGVUeXBlczogU2hvdyBvbmx5IG9uIHRoZXNlIGZpbGUgdHlwZXMgKGUuZy4sIFwibWQsY2FudmFzXCIpIG9yIHZpZXcgdHlwZXMgZm9yIHZpZXdzIHdpdGhvdXQgZmlsZXMgKGUuZy4sIFwie3tncmFwaH19LHt7dGFifX1cIilcclxuICogaGlkZU9uRmlsZVR5cGVzOiBOZXZlciBzaG93IG9uIHRoZXNlIGZpbGUgdHlwZXMgKGUuZy4sIFwianBnLHBuZ1wiKSBvciB2aWV3IHR5cGVzIGZvciB2aWV3cyB3aXRob3V0IGZpbGVzIChlLmcuLCBcInt7Z3JhcGh9fVwiKVxyXG4gKiBcclxuICogVmlldyB0eXBlcyAoZm9yIHZpZXdzIHdpdGhvdXQgZmlsZXMpOlxyXG4gKiAtIHt7Z3JhcGh9fSAtIEdyYXBoIHZpZXcgKG5vIGZpbGUpXHJcbiAqIC0ge3tlbXB0eX19IC0gRW1wdHkgdGFiIC8gbmV3IHRhYiAobm8gZmlsZSlcclxuICogXHJcbiAqIE5vdGU6IEZpbGUtYmFzZWQgdmlld3MgKGNhbnZhcywgbWFya2Rvd24sIGV0Yy4pIHNob3VsZCB1c2UgdGhlaXIgZmlsZSBleHRlbnNpb25zIChjYW52YXMsIG1kLCBtZHgpIGluc3RlYWQgb2YgdmlldyB0eXBlIGlkZW50aWZpZXJzLlxyXG4gKi9cclxuZXhwb3J0IGZ1bmN0aW9uIG1hdGNoZXNGaWxlVHlwZUZpbHRlcihcclxuXHRsZWFmOiBXb3Jrc3BhY2VMZWFmIHwgbnVsbCxcclxuXHRzaG93T25GaWxlVHlwZXM6IHN0cmluZyB8IHVuZGVmaW5lZCxcclxuXHRoaWRlT25GaWxlVHlwZXM6IHN0cmluZyB8IHVuZGVmaW5lZFxyXG4pOiBib29sZWFuIHtcclxuXHRpZiAoIWxlYWY/LnZpZXcpIHJldHVybiBmYWxzZTtcclxuXHRcclxuXHQvLyBQYXJzZSB0aGUgZmlsdGVyIHN0cmluZ3MgKHN1cHBvcnRzIGJvdGggZmlsZSB0eXBlcyBhbmQgdmlldyB0eXBlcylcclxuXHRjb25zdCBzaG93RmlsdGVycyA9IHBhcnNlRmlsZUFuZFZpZXdUeXBlcyhzaG93T25GaWxlVHlwZXMpO1xyXG5cdGNvbnN0IGhpZGVGaWx0ZXJzID0gcGFyc2VGaWxlQW5kVmlld1R5cGVzKGhpZGVPbkZpbGVUeXBlcyk7XHJcblx0XHJcblx0Ly8gR2V0IGN1cnJlbnQgZmlsZSBleHRlbnNpb24gYW5kIHZpZXcgdHlwZVxyXG5cdGNvbnN0IGZpbGVFeHQgPSBnZXRGaWxlRXh0ZW5zaW9uKGxlYWYpO1xyXG5cdGNvbnN0IHZpZXdUeXBlID0gZ2V0Vmlld1R5cGUobGVhZik7XHJcblx0XHJcblx0Ly8gQ2hlY2sgaGlkZSBmaWx0ZXJzIGZpcnN0XHJcblx0aWYgKGhpZGVGaWx0ZXJzLmZpbGVUeXBlcy5sZW5ndGggPiAwICYmIGZpbGVFeHQgJiYgaGlkZUZpbHRlcnMuZmlsZVR5cGVzLmluY2x1ZGVzKGZpbGVFeHQpKSB7XHJcblx0XHRyZXR1cm4gZmFsc2U7XHJcblx0fVxyXG5cdGlmIChoaWRlRmlsdGVycy52aWV3VHlwZXMubGVuZ3RoID4gMCAmJiB2aWV3VHlwZSAmJiBoaWRlRmlsdGVycy52aWV3VHlwZXMuaW5jbHVkZXModmlld1R5cGUpKSB7XHJcblx0XHRyZXR1cm4gZmFsc2U7XHJcblx0fVxyXG5cdFxyXG5cdC8vIENoZWNrIHNob3cgZmlsdGVyc1xyXG5cdGlmIChzaG93RmlsdGVycy5maWxlVHlwZXMubGVuZ3RoID4gMCB8fCBzaG93RmlsdGVycy52aWV3VHlwZXMubGVuZ3RoID4gMCkge1xyXG5cdFx0Ly8gTXVzdCBtYXRjaCBlaXRoZXIgYSBmaWxlIHR5cGUgb3IgYSB2aWV3IHR5cGVcclxuXHRcdGNvbnN0IG1hdGNoZXNGaWxlVHlwZSA9IGZpbGVFeHQgPyBzaG93RmlsdGVycy5maWxlVHlwZXMuaW5jbHVkZXMoZmlsZUV4dCkgOiBmYWxzZTtcclxuXHRcdGNvbnN0IG1hdGNoZXNWaWV3VHlwZSA9IHZpZXdUeXBlID8gc2hvd0ZpbHRlcnMudmlld1R5cGVzLmluY2x1ZGVzKHZpZXdUeXBlKSA6IGZhbHNlO1xyXG5cdFx0cmV0dXJuIG1hdGNoZXNGaWxlVHlwZSB8fCBtYXRjaGVzVmlld1R5cGU7XHJcblx0fVxyXG5cdFxyXG5cdC8vIE5vIGZpbHRlcnMgPSBzaG93IG9uIGFsbCBmaWxlcy92aWV3cyAodW5sZXNzIGhpZGRlbilcclxuXHRyZXR1cm4gdHJ1ZTtcclxufVxyXG5cclxuLyoqXHJcbiAqIENoZWNrIGlmIG1vZGUgaXMgYWN0aXZlIChkZXNrdG9wL21vYmlsZS9hbnkvdGhpcyBkZXZpY2UpXHJcbiAqL1xyXG5leHBvcnQgZnVuY3Rpb24gaXNNb2RlQWN0aXZlKG1vZGU6IE1vZGUsIHBsdWdpbjogVUlUd2Vha2VyUGx1Z2luKTogYm9vbGVhbiB7XHJcblx0Y29uc3QgYXBwID0gcGx1Z2luLmFwcCBhcyB7IGlzTW9iaWxlPzogYm9vbGVhbjsgYXBwSWQ/OiBzdHJpbmcgfTtcclxuXHRjb25zdCBpc01vYmlsZSA9IGFwcC5pc01vYmlsZSA/PyBmYWxzZTtcclxuXHRjb25zdCBhcHBJZCA9IGFwcC5hcHBJZDtcclxuXHRcclxuXHQvLyBIYW5kbGUgXCJ0aGlzIGRldmljZVwiIG1vZGUgKGFwcC5hcHBJZClcclxuXHRpZiAobW9kZSAhPT0gJ2FueScgJiYgbW9kZSAhPT0gJ2Rlc2t0b3AnICYmIG1vZGUgIT09ICdtb2JpbGUnKSB7XHJcblx0XHRyZXR1cm4gbW9kZSA9PT0gYXBwSWQ7XHJcblx0fVxyXG5cdFxyXG5cdHJldHVybiAoXHJcblx0XHRtb2RlID09PSAnYW55JyB8fFxyXG5cdFx0KG1vZGUgPT09ICdtb2JpbGUnICYmIGlzTW9iaWxlKSB8fFxyXG5cdFx0KG1vZGUgPT09ICdkZXNrdG9wJyAmJiAhaXNNb2JpbGUpXHJcblx0KTtcclxufVxyXG5cclxuLyoqXHJcbiAqIEdldCBjb21tYW5kIGZyb20gSURcclxuICovXHJcbmV4cG9ydCBmdW5jdGlvbiBnZXRDb21tYW5kRnJvbUlkKGlkOiBzdHJpbmcsIHBsdWdpbjogVUlUd2Vha2VyUGx1Z2luKTogQ29tbWFuZCB8IG51bGwge1xyXG5cdGNvbnN0IGNvbW1hbmRzID0gKHBsdWdpbi5hcHAgYXMgeyBjb21tYW5kcz86IHsgY29tbWFuZHM/OiB7IFtpZDogc3RyaW5nXTogQ29tbWFuZCB9IH0gfSkuY29tbWFuZHM7XHJcblx0cmV0dXJuIGNvbW1hbmRzPy5jb21tYW5kcz8uW2lkXSA/PyBudWxsO1xyXG59XHJcblxyXG4vKipcclxuICogQ29tbWFuZCB0b2dnbGUgc3RhdGUgdHJhY2tlclxyXG4gKiBUcmFja3MgdG9nZ2xlIHN0YXRlIGZvciBjb21tYW5kcyB0aGF0IGRvbid0IGhhdmUgY2hlY2tDYWxsYmFja1xyXG4gKiBBbHNvIHRyYWNrcyBwcmV2aW91cyBzdGF0ZXMgdG8gZGV0ZWN0IGNoYW5nZXNcclxuICovXHJcbmNsYXNzIENvbW1hbmRUb2dnbGVUcmFja2VyIHtcclxuXHRwcml2YXRlIHRvZ2dsZVN0YXRlcyA9IG5ldyBNYXA8c3RyaW5nLCBib29sZWFuPigpO1xyXG5cdHByaXZhdGUgcHJldmlvdXNTdGF0ZXMgPSBuZXcgTWFwPHN0cmluZywgYm9vbGVhbj4oKTtcclxuXHRwcml2YXRlIGV4ZWN1dGlvbkNvdW50cyA9IG5ldyBNYXA8c3RyaW5nLCBudW1iZXI+KCk7XHJcblxyXG5cdC8qKlxyXG5cdCAqIFJlY29yZCB0aGF0IGEgY29tbWFuZCB3YXMgZXhlY3V0ZWRcclxuXHQgKi9cclxuXHRyZWNvcmRFeGVjdXRpb24oaWQ6IHN0cmluZyk6IHZvaWQge1xyXG5cdFx0Y29uc3QgY3VycmVudENvdW50ID0gdGhpcy5leGVjdXRpb25Db3VudHMuZ2V0KGlkKSB8fCAwO1xyXG5cdFx0dGhpcy5leGVjdXRpb25Db3VudHMuc2V0KGlkLCBjdXJyZW50Q291bnQgKyAxKTtcclxuXHRcdFxyXG5cdFx0Ly8gVG9nZ2xlIHN0YXRlIGJhc2VkIG9uIGV4ZWN1dGlvbiBjb3VudCAob2RkID0gb24sIGV2ZW4gPSBvZmYpXHJcblx0XHQvLyBUaGlzIGlzIGEgZmFsbGJhY2sgZm9yIGNvbW1hbmRzIHdpdGhvdXQgY2hlY2tDYWxsYmFja1xyXG5cdFx0dGhpcy50b2dnbGVTdGF0ZXMuc2V0KGlkLCAoY3VycmVudENvdW50ICsgMSkgJSAyID09PSAxKTtcclxuXHR9XHJcblxyXG5cdC8qKlxyXG5cdCAqIEdldCB0cmFja2VkIHRvZ2dsZSBzdGF0ZSAoZm9yIGNvbW1hbmRzIHdpdGhvdXQgY2hlY2tDYWxsYmFjaylcclxuXHQgKi9cclxuXHRnZXRUcmFja2VkU3RhdGUoaWQ6IHN0cmluZyk6IGJvb2xlYW4gfCBudWxsIHtcclxuXHRcdHJldHVybiB0aGlzLnRvZ2dsZVN0YXRlcy5nZXQoaWQpID8/IG51bGw7XHJcblx0fVxyXG5cclxuXHQvKipcclxuXHQgKiBHZXQgcHJldmlvdXMgdG9nZ2xlIHN0YXRlIChmb3IgY2hhbmdlIGRldGVjdGlvbilcclxuXHQgKi9cclxuXHRnZXRQcmV2aW91c1N0YXRlKGlkOiBzdHJpbmcpOiBib29sZWFuIHwgbnVsbCB7XHJcblx0XHRyZXR1cm4gdGhpcy5wcmV2aW91c1N0YXRlcy5nZXQoaWQpID8/IG51bGw7XHJcblx0fVxyXG5cclxuXHQvKipcclxuXHQgKiBSZXNldCB0cmFja2VkIHN0YXRlIGZvciBhIGNvbW1hbmRcclxuXHQgKi9cclxuXHRyZXNldFN0YXRlKGlkOiBzdHJpbmcpOiB2b2lkIHtcclxuXHRcdHRoaXMudG9nZ2xlU3RhdGVzLmRlbGV0ZShpZCk7XHJcblx0XHR0aGlzLnByZXZpb3VzU3RhdGVzLmRlbGV0ZShpZCk7XHJcblx0XHR0aGlzLmV4ZWN1dGlvbkNvdW50cy5kZWxldGUoaWQpO1xyXG5cdH1cclxuXHJcblx0LyoqXHJcblx0ICogU3luYyB0cmFja2VkIHN0YXRlIHdpdGggYWN0dWFsIGNvbW1hbmQgc3RhdGVcclxuXHQgKiBVc2VkIHdoZW4gY2hlY2tDYWxsYmFjayByZXBvcnRzIGEgZGlmZmVyZW50IHN0YXRlIHRoYW4gdHJhY2tlZFxyXG5cdCAqIFJldHVybnMgdHJ1ZSBpZiBzdGF0ZSBjaGFuZ2VkLCBmYWxzZSBvdGhlcndpc2VcclxuXHQgKi9cclxuXHRzeW5jU3RhdGUoaWQ6IHN0cmluZywgYWN0dWFsU3RhdGU6IGJvb2xlYW4pOiBib29sZWFuIHtcclxuXHRcdGNvbnN0IGN1cnJlbnRUcmFja2VkU3RhdGUgPSB0aGlzLnRvZ2dsZVN0YXRlcy5nZXQoaWQpO1xyXG5cdFx0XHJcblx0XHQvLyBTdG9yZSBjdXJyZW50IHN0YXRlIGFzIHByZXZpb3VzIGJlZm9yZSB1cGRhdGluZ1xyXG5cdFx0aWYgKGN1cnJlbnRUcmFja2VkU3RhdGUgIT09IHVuZGVmaW5lZCkge1xyXG5cdFx0XHR0aGlzLnByZXZpb3VzU3RhdGVzLnNldChpZCwgY3VycmVudFRyYWNrZWRTdGF0ZSk7XHJcblx0XHR9XHJcblx0XHRcclxuXHRcdGlmIChjdXJyZW50VHJhY2tlZFN0YXRlICE9PSBhY3R1YWxTdGF0ZSkge1xyXG5cdFx0XHQvLyBTdGF0ZSBjaGFuZ2VkIC0gdXBkYXRlIHRyYWNrZWQgc3RhdGUgdG8gbWF0Y2hcclxuXHRcdFx0Ly8gQWRqdXN0IGV4ZWN1dGlvbiBjb3VudCB0byByZWZsZWN0IHRoZSBjaGFuZ2VcclxuXHRcdFx0Y29uc3QgY3VycmVudENvdW50ID0gdGhpcy5leGVjdXRpb25Db3VudHMuZ2V0KGlkKSB8fCAwO1xyXG5cdFx0XHR0aGlzLmV4ZWN1dGlvbkNvdW50cy5zZXQoaWQsIGN1cnJlbnRDb3VudCArIDEpO1xyXG5cdFx0XHR0aGlzLnRvZ2dsZVN0YXRlcy5zZXQoaWQsIGFjdHVhbFN0YXRlKTtcclxuXHRcdFx0cmV0dXJuIHRydWU7IC8vIFN0YXRlIGNoYW5nZWRcclxuXHRcdH1cclxuXHRcdFxyXG5cdFx0cmV0dXJuIGZhbHNlOyAvLyBObyBjaGFuZ2VcclxuXHR9XHJcblxyXG5cdC8qKlxyXG5cdCAqIENoZWNrIGlmIHN0YXRlIGhhcyBjaGFuZ2VkIHNpbmNlIGxhc3QgY2hlY2tcclxuXHQgKi9cclxuXHRoYXNTdGF0ZUNoYW5nZWQoaWQ6IHN0cmluZywgY3VycmVudFN0YXRlOiBib29sZWFuKTogYm9vbGVhbiB7XHJcblx0XHRjb25zdCBwcmV2aW91c1N0YXRlID0gdGhpcy5wcmV2aW91c1N0YXRlcy5nZXQoaWQpO1xyXG5cdFx0cmV0dXJuIHByZXZpb3VzU3RhdGUgIT09IHVuZGVmaW5lZCAmJiBwcmV2aW91c1N0YXRlICE9PSBjdXJyZW50U3RhdGU7XHJcblx0fVxyXG59XHJcblxyXG4vLyBHbG9iYWwgdHJhY2tlciBpbnN0YW5jZVxyXG5jb25zdCBjb21tYW5kVG9nZ2xlVHJhY2tlciA9IG5ldyBDb21tYW5kVG9nZ2xlVHJhY2tlcigpO1xyXG5cclxuLyoqXHJcbiAqIENoZWNrIGlmIGEgY29tbWFuZCBpcyBjdXJyZW50bHkgY2hlY2tlZC90b2dnbGVkIG9uXHJcbiAqIEZpcnN0IHRyaWVzIGNoZWNrQ2FsbGJhY2sgaWYgYXZhaWxhYmxlLCBvdGhlcndpc2UgdXNlcyB0cmFja2VkIHN0YXRlXHJcbiAqIEZvciBzcGVjaWZpYyBjb21tYW5kcyAobGlrZSB0aGVtZSB0b2dnbGUpLCBjaGVja3MgYWN0dWFsIHN0YXRlIGRpcmVjdGx5XHJcbiAqIFxyXG4gKiBUaGlzIGZ1bmN0aW9uIGFsd2F5cyBjaGVja3MgdGhlIGFjdHVhbCBzdGF0ZSAodmlhIGNoZWNrQ2FsbGJhY2sgb3IgZGlyZWN0IGRldGVjdGlvbilcclxuICogYW5kIHN5bmNzIGl0IHdpdGggdHJhY2tlZCBzdGF0ZSwgZW5zdXJpbmcgYnV0dG9ucyBzdGF5IGluIHN5bmMgZXZlbiB3aGVuIGNvbW1hbmRzXHJcbiAqIGFyZSBleGVjdXRlZCBleHRlcm5hbGx5IChrZXlib2FyZCBzaG9ydGN1dHMsIGNvbW1hbmQgcGFsZXR0ZSwgZXRjLilcclxuICovXHJcbmV4cG9ydCBmdW5jdGlvbiBpc0NvbW1hbmRDaGVja2VkKGlkOiBzdHJpbmcsIHBsdWdpbjogVUlUd2Vha2VyUGx1Z2luKTogYm9vbGVhbiB7XHJcblx0Ly8gU3BlY2lhbCBoYW5kbGluZyBmb3IgY29tbWFuZHMgdGhhdCBuZWVkIGRpcmVjdCBzdGF0ZSBkZXRlY3Rpb25cclxuXHQvLyBUaGVzZSBjb21tYW5kcyBkb24ndCBoYXZlIHJlbGlhYmxlIGNoZWNrQ2FsbGJhY2ssIHNvIHdlIGNoZWNrIERPTS9hcHAgc3RhdGUgZGlyZWN0bHlcclxuXHRcclxuXHQvLyBUaGVtZSB0b2dnbGUgLSBjaGVjayBET00gY2xhc3NcclxuXHRpZiAoaWQgPT09ICd0aGVtZTp0b2dnbGUtbGlnaHQtZGFyaycpIHtcclxuXHRcdC8vIENoZWNrIHRoZW1lIHN0YXRlIGRpcmVjdGx5IGZyb20gRE9NXHJcblx0XHQvLyBPYnNpZGlhbiB1c2VzICd0aGVtZS1kYXJrJyBjbGFzcyBvbiBib2R5IGZvciBkYXJrIG1vZGVcclxuXHRcdGNvbnN0IGlzRGFyayA9IGRvY3VtZW50LmJvZHkuY2xhc3NMaXN0LmNvbnRhaW5zKCd0aGVtZS1kYXJrJyk7XHJcblx0XHQvLyBTeW5jIHRyYWNrZWQgc3RhdGUgd2l0aCBhY3R1YWwgc3RhdGVcclxuXHRcdGNvbW1hbmRUb2dnbGVUcmFja2VyLnN5bmNTdGF0ZShpZCwgaXNEYXJrKTtcclxuXHRcdHJldHVybiBpc0Rhcms7XHJcblx0fVxyXG5cclxuXHQvLyBFZGl0aW5nIFRvb2xiYXIgaGlkZS9zaG93IC0gY2hlY2sgcGx1Z2luIHNldHRpbmdzXHJcblx0Ly8gVGhlIGNvbW1hbmQgSUQgaXMgJ2hpZGUtc2hvdy1tZW51JyBidXQgaXQncyByZWdpc3RlcmVkIHVuZGVyICdlZGl0aW5nLXRvb2xiYXI6aGlkZS1zaG93LW1lbnUnXHJcblx0aWYgKGlkID09PSAnZWRpdGluZy10b29sYmFyOmhpZGUtc2hvdy1tZW51JyB8fCBpZCA9PT0gJ2hpZGUtc2hvdy1tZW51Jykge1xyXG5cdFx0Ly8gVHJ5IHRvIGFjY2VzcyB0aGUgZWRpdGluZyB0b29sYmFyIHBsdWdpbidzIHNldHRpbmdzXHJcblx0XHRjb25zdCBwbHVnaW5zID0gKHBsdWdpbi5hcHAgYXMgeyBwbHVnaW5zPzogeyBwbHVnaW5zPzogeyBbaWQ6IHN0cmluZ106IHsgc2V0dGluZ3M/OiB7IGNNZW51VmlzaWJpbGl0eT86IGJvb2xlYW4gfSB9IH0gfSB9KS5wbHVnaW5zO1xyXG5cdFx0Y29uc3QgZWRpdGluZ1Rvb2xiYXJQbHVnaW4gPSBwbHVnaW5zPy5wbHVnaW5zPy5bJ2VkaXRpbmctdG9vbGJhciddO1xyXG5cdFx0aWYgKGVkaXRpbmdUb29sYmFyUGx1Z2luPy5zZXR0aW5ncz8uY01lbnVWaXNpYmlsaXR5ICE9PSB1bmRlZmluZWQpIHtcclxuXHRcdFx0Y29uc3QgaXNWaXNpYmxlID0gZWRpdGluZ1Rvb2xiYXJQbHVnaW4uc2V0dGluZ3MuY01lbnVWaXNpYmlsaXR5O1xyXG5cdFx0XHQvLyBTeW5jIHRyYWNrZWQgc3RhdGUgd2l0aCBhY3R1YWwgc3RhdGVcclxuXHRcdFx0Y29tbWFuZFRvZ2dsZVRyYWNrZXIuc3luY1N0YXRlKGlkLCBpc1Zpc2libGUpO1xyXG5cdFx0XHRyZXR1cm4gaXNWaXNpYmxlO1xyXG5cdFx0fVxyXG5cdFx0Ly8gRmFsbGJhY2sgdG8gdHJhY2tlZCBzdGF0ZSBpZiBwbHVnaW4gbm90IGZvdW5kXHJcblx0XHRyZXR1cm4gY29tbWFuZFRvZ2dsZVRyYWNrZXIuZ2V0VHJhY2tlZFN0YXRlKGlkKSA/PyBmYWxzZTtcclxuXHR9XHJcblxyXG5cdGNvbnN0IGNvbW1hbmQgPSBnZXRDb21tYW5kRnJvbUlkKGlkLCBwbHVnaW4pO1xyXG5cdGlmICghY29tbWFuZCkge1xyXG5cdFx0Ly8gQ29tbWFuZCBub3QgZm91bmQgLSBmYWxsYmFjayB0byB0cmFja2VkIHN0YXRlXHJcblx0XHQvLyBUaGlzIGNhbiBoYXBwZW4gd2l0aCBjdXN0b20gcGx1Z2luIGNvbW1hbmRzIHRoYXQgaGF2ZW4ndCByZWdpc3RlcmVkIHlldFxyXG5cdFx0cmV0dXJuIGNvbW1hbmRUb2dnbGVUcmFja2VyLmdldFRyYWNrZWRTdGF0ZShpZCkgPz8gZmFsc2U7XHJcblx0fVxyXG5cdFxyXG5cdC8vIENoZWNrIGlmIGNvbW1hbmQgaGFzIGEgY2hlY2tDYWxsYmFjayAocHJlZmVycmVkIG1ldGhvZCBmb3IgYWxsIGNvbW1hbmRzKVxyXG5cdGlmICh0eXBlb2YgY29tbWFuZC5jaGVja0NhbGxiYWNrID09PSAnZnVuY3Rpb24nKSB7XHJcblx0XHR0cnkge1xyXG5cdFx0XHQvLyBDYWxsIGNoZWNrQ2FsbGJhY2sgd2l0aCBjaGVja2luZz10cnVlIHRvIHNlZSBpZiBpdCByZXR1cm5zIHRydWUgKGNoZWNrZWQgc3RhdGUpXHJcblx0XHRcdC8vIE5vdGU6IGNoZWNrQ2FsbGJhY2sgc2hvdWxkIHJldHVybiB0cnVlIGlmIGNoZWNrZWQsIGZhbHNlIGlmIHVuY2hlY2tlZFxyXG5cdFx0XHRjb25zdCByZXN1bHQgPSBjb21tYW5kLmNoZWNrQ2FsbGJhY2sodHJ1ZSk7XHJcblx0XHRcdGNvbnN0IGlzQ2hlY2tlZCA9IHJlc3VsdCA9PT0gdHJ1ZTtcclxuXHRcdFx0XHJcblx0XHRcdC8vIEFsd2F5cyBzeW5jIHRyYWNrZWQgc3RhdGUgd2l0aCBjaGVja0NhbGxiYWNrIHJlc3VsdFxyXG5cdFx0XHQvLyBUaGlzIGVuc3VyZXMgYnV0dG9ucyBzdGF5IGluIHN5bmMgZXZlbiB3aGVuIGNvbW1hbmRzIGFyZSBleGVjdXRlZCBleHRlcm5hbGx5XHJcblx0XHRcdC8vIChrZXlib2FyZCBzaG9ydGN1dHMsIGNvbW1hbmQgcGFsZXR0ZSwgb3RoZXIgcGx1Z2lucywgZXRjLilcclxuXHRcdFx0Y29tbWFuZFRvZ2dsZVRyYWNrZXIuc3luY1N0YXRlKGlkLCBpc0NoZWNrZWQpO1xyXG5cdFx0XHRcclxuXHRcdFx0Ly8gQWx3YXlzIHRydXN0IGNoZWNrQ2FsbGJhY2sgb3ZlciB0cmFja2VkIHN0YXRlIHdoZW4gYXZhaWxhYmxlXHJcblx0XHRcdHJldHVybiBpc0NoZWNrZWQ7XHJcblx0XHR9IGNhdGNoIHtcclxuXHRcdFx0Ly8gSWYgY2hlY2tDYWxsYmFjayB0aHJvd3MsIGZhbGwgYmFjayB0byB0cmFja2VkIHN0YXRlXHJcblx0XHRcdC8vIFRoaXMgY2FuIGhhcHBlbiBpZiB0aGUgY29tbWFuZCdzIGNoZWNrQ2FsbGJhY2sgaGFzIGJ1Z3Mgb3IgaXNuJ3QgcmVhZHkgeWV0XHJcblx0XHRcdHJldHVybiBjb21tYW5kVG9nZ2xlVHJhY2tlci5nZXRUcmFja2VkU3RhdGUoaWQpID8/IGZhbHNlO1xyXG5cdFx0fVxyXG5cdH1cclxuXHRcclxuXHQvLyBObyBjaGVja0NhbGxiYWNrIC0gdXNlIHRyYWNrZWQgc3RhdGVcclxuXHQvLyBUaGlzIGlzIGEgZmFsbGJhY2sgZm9yIGNvbW1hbmRzIHRoYXQgZG9uJ3QgcHJvdmlkZSBjaGVja0NhbGxiYWNrXHJcblx0Ly8gVGhlIHBlcmlvZGljIHJlZnJlc2ggd2lsbCBrZWVwIHRyeWluZyB0byBkZXRlY3Qgc3RhdGUgY2hhbmdlc1xyXG5cdHJldHVybiBjb21tYW5kVG9nZ2xlVHJhY2tlci5nZXRUcmFja2VkU3RhdGUoaWQpID8/IGZhbHNlO1xyXG59XHJcblxyXG4vKipcclxuICogUmVjb3JkIHRoYXQgYSBjb21tYW5kIHdhcyBleGVjdXRlZCAoZm9yIHRvZ2dsZSB0cmFja2luZylcclxuICovXHJcbmV4cG9ydCBmdW5jdGlvbiByZWNvcmRDb21tYW5kRXhlY3V0aW9uKGlkOiBzdHJpbmcpOiB2b2lkIHtcclxuXHRjb21tYW5kVG9nZ2xlVHJhY2tlci5yZWNvcmRFeGVjdXRpb24oaWQpO1xyXG59XHJcblxyXG4vKipcclxuICogUmVzZXQgdHJhY2tlZCBzdGF0ZSBmb3IgYSBjb21tYW5kXHJcbiAqL1xyXG5leHBvcnQgZnVuY3Rpb24gcmVzZXRDb21tYW5kU3RhdGUoaWQ6IHN0cmluZyk6IHZvaWQge1xyXG5cdGNvbW1hbmRUb2dnbGVUcmFja2VyLnJlc2V0U3RhdGUoaWQpO1xyXG59IiwgIi8qKlxuICogU3RhdHVzIEJhciBNYW5hZ2VyIC0gVW5pZmllZCBtYW5hZ2VyIGZvciBleGlzdGluZyArIGN1c3RvbSBzdGF0dXMgYmFyIGl0ZW1zXG4gKiBDb21iaW5lcyBmdW5jdGlvbmFsaXR5IGZyb20gU3RhdHVzIEJhciBPcmdhbml6ZXIgKHJlb3JkZXJpbmcvaGlkaW5nIGV4aXN0aW5nIGl0ZW1zKVxuICogYW5kIENvbW1hbmRlciAoYWRkaW5nIGN1c3RvbSBjb21tYW5kcylcbiAqL1xuXG5pbXBvcnQgeyBNZW51LCBzZXRJY29uIH0gZnJvbSAnb2JzaWRpYW4nO1xuaW1wb3J0IFVJVHdlYWtlclBsdWdpbiBmcm9tICcuLi9tYWluJztcbmltcG9ydCB7IFN0YXR1c0Jhckl0ZW0sIENvbW1hbmRJY29uUGFpciB9IGZyb20gJy4uL3R5cGVzJztcbmltcG9ydCB7IGlzTWFya2Rvd25WaWV3LCBpc01vZGVBY3RpdmUgfSBmcm9tICcuLi91dGlscy9jb21tYW5kVXRpbHMnO1xuaW1wb3J0IHsgSWNvblBpY2tlck1vZGFsIH0gZnJvbSAnLi4vbW9kYWxzL0ljb25QaWNrZXJNb2RhbCc7XG5pbXBvcnQgeyBzZXRDc3NQcm9wcyB9IGZyb20gJy4uL3VpTWFuYWdlcic7XG5cbmV4cG9ydCBjbGFzcyBTdGF0dXNCYXJNYW5hZ2VyIHtcblx0cHJpdmF0ZSBwbHVnaW46IFVJVHdlYWtlclBsdWdpbjtcblx0cHJpdmF0ZSBjdXN0b21BY3Rpb25zID0gbmV3IE1hcDxTdGF0dXNCYXJJdGVtLCBIVE1MRWxlbWVudD4oKTtcblx0cHJpdmF0ZSBjb250YWluZXI6IEhUTUxFbGVtZW50IHwgbnVsbCA9IG51bGw7XG5cdHByaXZhdGUgb2JzZXJ2ZXI/OiBNdXRhdGlvbk9ic2VydmVyO1xuXHRwcml2YXRlIGlzUmVvcmRlcmluZyA9IGZhbHNlOyAvLyBGbGFnIHRvIHByZXZlbnQgb2JzZXJ2ZXIgZnJvbSB0cmlnZ2VyaW5nIGR1cmluZyByZW9yZGVyXG5cblx0cHJpdmF0ZSBnZXQgaXRlbXMoKTogU3RhdHVzQmFySXRlbVtdIHtcblx0XHRyZXR1cm4gdGhpcy5wbHVnaW4uc2V0dGluZ3Muc3RhdHVzQmFySXRlbXMgfHwgW107XG5cdH1cblxuXHRjb25zdHJ1Y3RvcihwbHVnaW46IFVJVHdlYWtlclBsdWdpbikge1xuXHRcdHRoaXMucGx1Z2luID0gcGx1Z2luO1xuXHRcdHRoaXMuaW5pdCgpO1xuXHR9XG5cblx0cHJpdmF0ZSBpbml0KCk6IHZvaWQge1xuXHRcdHRoaXMucGx1Z2luLmFwcC53b3Jrc3BhY2Uub25MYXlvdXRSZWFkeSgoKSA9PiB7XG5cdFx0XHR0aGlzLmNvbnRhaW5lciA9ICh0aGlzLnBsdWdpbi5hcHAgYXMgeyBzdGF0dXNCYXI/OiB7IGNvbnRhaW5lckVsPzogSFRNTEVsZW1lbnQgfSB9KS5zdGF0dXNCYXI/LmNvbnRhaW5lckVsID8/IG51bGw7XG5cdFx0XHRpZiAoIXRoaXMuY29udGFpbmVyKSB7XG5cdFx0XHRcdHJldHVybjtcblx0XHRcdH1cblxuXHRcdFx0Ly8gSW5pdGlhbGl6ZSBpdGVtcyBhcnJheSBpZiBuZWVkZWRcblx0XHRcdGlmICghdGhpcy5wbHVnaW4uc2V0dGluZ3Muc3RhdHVzQmFySXRlbXMpIHtcblx0XHRcdFx0dGhpcy5wbHVnaW4uc2V0dGluZ3Muc3RhdHVzQmFySXRlbXMgPSBbXTtcblx0XHRcdH1cblxuXHRcdFx0Ly8gQ29uc29saWRhdGUgc2V0dGluZ3MgYW5kIGVsZW1lbnRzIChsaWtlIFN0YXR1cyBCYXIgT3JnYW5pemVyKVxuXHRcdFx0Ly8gVGhpcyBtZXJnZXMgc2F2ZWQgaXRlbXMgd2l0aCBjdXJyZW50IERPTSBlbGVtZW50cyBhbmQgc2F2ZXMgaW1tZWRpYXRlbHlcblx0XHRcdHRoaXMuY29uc29saWRhdGVTZXR0aW5nc0FuZEVsZW1lbnRzKCk7XG5cblx0XHRcdC8vIEFwcGx5IG9yZGVyaW5nIGFuZCB2aXNpYmlsaXR5XG5cdFx0XHR0aGlzLnJlb3JkZXIoKTtcblxuXHRcdFx0Ly8gV2F0Y2ggZm9yIG5ldyBzdGF0dXMgYmFyIGl0ZW1zIChsaWtlIFN0YXR1cyBCYXIgT3JnYW5pemVyIGRvZXMpXG5cdFx0XHQvLyBVc2UgYSBkZWJvdW5jZSB0byBwcmV2ZW50IGV4Y2Vzc2l2ZSByZS1yZW5kZXJzIGR1cmluZyBzZXR0aW5ncyBjaGFuZ2VzXG5cdFx0XHRsZXQgb2JzZXJ2ZXJUaW1lb3V0OiBSZXR1cm5UeXBlPHR5cGVvZiBzZXRUaW1lb3V0PiB8IG51bGwgPSBudWxsO1xuXHRcdFx0dGhpcy5vYnNlcnZlciA9IG5ldyBNdXRhdGlvbk9ic2VydmVyKCgpID0+IHtcblx0XHRcdFx0Ly8gRG9uJ3QgdHJpZ2dlciBpZiB3ZSdyZSBjdXJyZW50bHkgcmVvcmRlcmluZyAocHJldmVudHMgaW5maW5pdGUgbG9vcHMpXG5cdFx0XHRcdGlmICh0aGlzLmlzUmVvcmRlcmluZykge1xuXHRcdFx0XHRcdHJldHVybjtcblx0XHRcdFx0fVxuXHRcdFx0XHRcblx0XHRcdFx0Ly8gRGVib3VuY2Ugb2JzZXJ2ZXIgY2FsbGJhY2tzIHRvIHByZXZlbnQgZXhjZXNzaXZlIHVwZGF0ZXNcblx0XHRcdFx0aWYgKG9ic2VydmVyVGltZW91dCkge1xuXHRcdFx0XHRcdGNsZWFyVGltZW91dChvYnNlcnZlclRpbWVvdXQpO1xuXHRcdFx0XHR9XG5cdFx0XHRcdG9ic2VydmVyVGltZW91dCA9IHNldFRpbWVvdXQoKCkgPT4ge1xuXHRcdFx0XHRcdC8vIE9ubHkgZGV0ZWN0IGFuZCByZW9yZGVyIGlmIHdlJ3JlIG5vdCBpbiB0aGUgbWlkZGxlIG9mIGEgcmVvcmRlciBvcGVyYXRpb25cblx0XHRcdFx0XHRpZiAoIXRoaXMuaXNSZW9yZGVyaW5nKSB7XG5cdFx0XHRcdFx0XHR0aGlzLmNvbnNvbGlkYXRlU2V0dGluZ3NBbmRFbGVtZW50cygpO1xuXHRcdFx0XHRcdFx0dGhpcy5yZW9yZGVyKCk7XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHR9LCAyMDApO1xuXHRcdFx0fSk7XG5cdFx0XHR0aGlzLm9ic2VydmVyLm9ic2VydmUodGhpcy5jb250YWluZXIsIHsgY2hpbGRMaXN0OiB0cnVlLCBzdWJ0cmVlOiBmYWxzZSB9KTtcblxuXHRcdFx0Ly8gUmVnaXN0ZXIgY2xlYW51cFxuXHRcdFx0dGhpcy5wbHVnaW4ucmVnaXN0ZXIoKCkgPT4ge1xuXHRcdFx0XHRpZiAodGhpcy5vYnNlcnZlcikge1xuXHRcdFx0XHRcdHRoaXMub2JzZXJ2ZXIuZGlzY29ubmVjdCgpO1xuXHRcdFx0XHR9XG5cdFx0XHRcdHRoaXMuY3VzdG9tQWN0aW9ucy5mb3JFYWNoKChhY3Rpb24pID0+IGFjdGlvbi5yZW1vdmUoKSk7XG5cdFx0XHRcdHRoaXMuY3VzdG9tQWN0aW9ucy5jbGVhcigpO1xuXHRcdFx0fSk7XG5cdFx0fSk7XG5cdH1cblxuXHQvKipcblx0ICogQ2hlY2sgaWYgYSBjbGFzcyBpcyBhIGR5bmFtaWMgc3RhdGUgY2xhc3MgdGhhdCBzaG91bGQgYmUgZmlsdGVyZWQgb3V0XG5cdCAqIER5bmFtaWMgc3RhdGUgY2xhc3NlcyBjaGFuZ2UgYmFzZWQgb24gcGx1Z2luIHN0YXRlIChlLmcuLCBvYnNpZGlhbi1naXQgc3RhdHVzYmFyIHN0YXRlcylcblx0ICovXG5cdHByaXZhdGUgaXNEeW5hbWljU3RhdGVDbGFzcyhjbGFzc05hbWU6IHN0cmluZyk6IGJvb2xlYW4ge1xuXHRcdC8vIEZpbHRlciBvdXQga25vd24gZHluYW1pYyBzdGF0ZSBjbGFzcyBwYXR0ZXJuc1xuXHRcdGNvbnN0IGR5bmFtaWNQYXR0ZXJucyA9IFtcblx0XHRcdC8tc3RhdHVzYmFyLShpZGxlfHB1bGx8cHVzaHxjb21taXR8bWVzc2FnZXxzdGF0dXN8YWRkfGNvbmZsaWN0fHBhdXNlZHxmYWlsZWQtaW5pdCkkLyxcblx0XHRcdC8vIEFkZCBtb3JlIHBhdHRlcm5zIGFzIG5lZWRlZCBmb3Igb3RoZXIgcGx1Z2luc1xuXHRcdF07XG5cdFx0cmV0dXJuIGR5bmFtaWNQYXR0ZXJucy5zb21lKHBhdHRlcm4gPT4gcGF0dGVybi50ZXN0KGNsYXNzTmFtZSkpO1xuXHR9XG5cblx0LyoqXG5cdCAqIEdlbmVyYXRlIGEgY2Fub25pY2FsIG5hbWUgZnJvbSBhbiBlbGVtZW50J3MgY2xhc3Nlc1xuXHQgKiBGaWx0ZXJzIG91dCBkeW5hbWljIHN0YXRlIGNsYXNzZXMgYW5kIHVzZXMgb25seSBzdGFibGUgcGx1Z2luIGlkZW50aWZpZXJzXG5cdCAqL1xuXHRwcml2YXRlIGdlbmVyYXRlQ2Fub25pY2FsTmFtZShlbGVtZW50OiBIVE1MRWxlbWVudCwgYWxsQ2xhc3Nlczogc3RyaW5nW10pOiBzdHJpbmcge1xuXHRcdGNvbnN0IGlnbm9yZWRDbGFzc2VzID0gWydtb2QtY2xpY2thYmxlJywgJ3N0YXR1cy1iYXItaXRlbScsICd1aS10d2Vha2VyLXN0YXR1cy1iYXItaXRlbScsICd1aS10d2Vha2VyLXN0YXR1cy1iYXItaGlkZGVuJ107XG5cblx0XHQvLyBFeHRyYWN0IHBsdWdpbiBpZGVudGlmaWVyIChzdGFibGUpXG5cdFx0Y29uc3QgcGx1Z2luQ2xhc3MgPSBhbGxDbGFzc2VzLmZpbmQoY2xzID0+IFxuXHRcdFx0Y2xzLmluY2x1ZGVzKCdwbHVnaW4tJykgfHwgXG5cdFx0XHRjbHMuaW5jbHVkZXMoJ29ic2lkaWFuLWdpdCcpIHx8XG5cdFx0XHRjbHMuaW5jbHVkZXMoJy1naXQnKSB8fFxuXHRcdFx0KGNscy5zdGFydHNXaXRoKCdnaXQtJykgJiYgY2xzICE9PSAnZ2l0LWNoYW5nZXMtc3RhdHVzLWJhcicpXG5cdFx0KTtcblxuXHRcdGlmIChwbHVnaW5DbGFzcykge1xuXHRcdFx0Ly8gRmlsdGVyIG91dCBkeW5hbWljIHN0YXRlIGNsYXNzZXMgYW5kIGlnbm9yZWQgY2xhc3Nlc1xuXHRcdFx0Ly8gS2VlcCBvbmx5IHN0YWJsZSBjbGFzc2VzIHRoYXQgaGVscCBpZGVudGlmeSB0aGUgZWxlbWVudFxuXHRcdFx0Y29uc3Qgc3RhYmxlQ2xhc3NlcyA9IGFsbENsYXNzZXMuZmlsdGVyKGNscyA9PiBcblx0XHRcdFx0IXRoaXMuaXNEeW5hbWljU3RhdGVDbGFzcyhjbHMpICYmIFxuXHRcdFx0XHQhaWdub3JlZENsYXNzZXMuaW5jbHVkZXMoY2xzKSAmJlxuXHRcdFx0XHRjbHMgIT09IHBsdWdpbkNsYXNzIC8vIERvbid0IGR1cGxpY2F0ZSB0aGUgcGx1Z2luIGNsYXNzXG5cdFx0XHQpO1xuXG5cdFx0XHQvLyBVc2UgcGx1Z2luIGlkZW50aWZpZXIgYXMgYmFzZVxuXHRcdFx0Ly8gT25seSBhZGQgb3RoZXIgc3RhYmxlIGNsYXNzZXMgaWYgdGhleSBwcm92aWRlIG1lYW5pbmdmdWwgZGlzdGluY3Rpb25cblx0XHRcdC8vIEZvciBvYnNpZGlhbi1naXQsIHdlIHdhbnQganVzdCBcInBsdWdpbi1vYnNpZGlhbi1naXRcIiBvciBcIm9ic2lkaWFuLWdpdFwiXG5cdFx0XHRpZiAoc3RhYmxlQ2xhc3Nlcy5sZW5ndGggPiAwICYmICFwbHVnaW5DbGFzcy5pbmNsdWRlcygnb2JzaWRpYW4tZ2l0JykpIHtcblx0XHRcdFx0Ly8gRm9yIG90aGVyIHBsdWdpbnMsIGluY2x1ZGUgc3RhYmxlIGNsYXNzZXMgaWYgdGhleSBleGlzdFxuXHRcdFx0XHRyZXR1cm4gYCR7cGx1Z2luQ2xhc3N9LSR7c3RhYmxlQ2xhc3Nlcy5qb2luKCctJyl9YDtcblx0XHRcdH1cblx0XHRcdHJldHVybiBwbHVnaW5DbGFzcztcblx0XHR9XG5cblx0XHQvLyBObyBwbHVnaW4gaWRlbnRpZmllciBmb3VuZCAtIHVzZSBmYWxsYmFjayBsb2dpY1xuXHRcdC8vIEZpbHRlciBvdXQgZHluYW1pYyBhbmQgaWdub3JlZCBjbGFzc2VzXG5cdFx0Y29uc3Qgc3RhYmxlQ2xhc3NlcyA9IGFsbENsYXNzZXMuZmlsdGVyKGNscyA9PiBcblx0XHRcdCF0aGlzLmlzRHluYW1pY1N0YXRlQ2xhc3MoY2xzKSAmJiBcblx0XHRcdCFpZ25vcmVkQ2xhc3Nlcy5pbmNsdWRlcyhjbHMpXG5cdFx0KTtcblxuXHRcdGlmIChzdGFibGVDbGFzc2VzLmxlbmd0aCA+IDApIHtcblx0XHRcdHJldHVybiBzdGFibGVDbGFzc2VzLmpvaW4oJy0nKTtcblx0XHR9XG5cblx0XHQvLyBGYWxsYmFjazogY2hlY2sgdGV4dCBjb250ZW50XG5cdFx0Y29uc3QgdGV4dENvbnRlbnQgPSBlbGVtZW50LnRleHRDb250ZW50Py50cmltKCk7XG5cdFx0aWYgKHRleHRDb250ZW50ICYmIHRleHRDb250ZW50Lmxlbmd0aCA+IDAgJiYgdGV4dENvbnRlbnQubGVuZ3RoIDwgNTAgJiYgIXRleHRDb250ZW50LmluY2x1ZGVzKCc6JykpIHtcblx0XHRcdGNvbnN0IGxvb2tzTGlrZUJyYW5jaCA9IC9eW2EtejAtOV1bYS16MC05Xy1dKiQvaS50ZXN0KHRleHRDb250ZW50KSAmJiB0ZXh0Q29udGVudC5sZW5ndGggPCAzMDtcblx0XHRcdGlmIChsb29rc0xpa2VCcmFuY2gpIHtcblx0XHRcdFx0cmV0dXJuICdwbHVnaW4tb2JzaWRpYW4tZ2l0Jztcblx0XHRcdH1cblx0XHRcdGNvbnN0IHNhbml0aXplZCA9IHRleHRDb250ZW50XG5cdFx0XHRcdC50b0xvd2VyQ2FzZSgpXG5cdFx0XHRcdC5yZXBsYWNlKC9bXmEtejAtOV0rL2csICctJylcblx0XHRcdFx0LnJlcGxhY2UoL14tK3wtKyQvZywgJycpO1xuXHRcdFx0aWYgKHNhbml0aXplZCkge1xuXHRcdFx0XHRyZXR1cm4gYHN0YXR1cy1iYXItaXRlbS0ke3Nhbml0aXplZH1gO1xuXHRcdFx0fVxuXHRcdH1cblxuXHRcdHJldHVybiAnc3RhdHVzLWJhci1pdGVtJztcblx0fVxuXG5cdC8qKlxuXHQgKiBFeHRyYWN0IGNhbm9uaWNhbCBuYW1lIGZyb20gYSBzYXZlZCBJRFxuXHQgKiBSZW1vdmVzIHRoZSBpbmRleCBzdWZmaXggYW5kIGZpbHRlcnMgb3V0IGR5bmFtaWMgc3RhdGUgY2xhc3Nlc1xuXHQgKiBUaGlzIGhhbmRsZXMgbGVnYWN5IElEcyB0aGF0IG1pZ2h0IGhhdmUgYmVlbiBjcmVhdGVkIHdpdGggZHluYW1pYyBjbGFzc2VzXG5cdCAqL1xuXHRwcml2YXRlIGdldENhbm9uaWNhbE5hbWVGcm9tSWQoaWQ6IHN0cmluZyk6IHN0cmluZyB7XG5cdFx0Y29uc3QgcGFydHMgPSBpZC5zcGxpdCgnOycpO1xuXHRcdHBhcnRzLnBvcCgpOyAvLyBSZW1vdmUgaW5kZXhcblx0XHRjb25zdCBmdWxsTmFtZSA9IHBhcnRzLmpvaW4oJzsnKTtcblx0XHRcblx0XHQvLyBGb3Igb2JzaWRpYW4tZ2l0LCBleHRyYWN0IGp1c3QgdGhlIHBsdWdpbiBpZGVudGlmaWVyXG5cdFx0Ly8gSGFuZGxlIElEcyBsaWtlIFwicGx1Z2luLW9ic2lkaWFuLWdpdC1vYnNpZGlhbi1naXQtc3RhdHVzYmFyLWlkbGUtLi4uXCJcblx0XHRpZiAoZnVsbE5hbWUuc3RhcnRzV2l0aCgncGx1Z2luLW9ic2lkaWFuLWdpdCcpKSB7XG5cdFx0XHRyZXR1cm4gJ3BsdWdpbi1vYnNpZGlhbi1naXQnO1xuXHRcdH1cblx0XHRpZiAoZnVsbE5hbWUuc3RhcnRzV2l0aCgnb2JzaWRpYW4tZ2l0JykpIHtcblx0XHRcdHJldHVybiAnb2JzaWRpYW4tZ2l0Jztcblx0XHR9XG5cdFx0XG5cdFx0Ly8gRm9yIG90aGVyIGNhc2VzLCB0cnkgdG8gZmluZCBwbHVnaW4gaWRlbnRpZmllciBpbiB0aGUgbmFtZVxuXHRcdC8vIExvb2sgZm9yIFwicGx1Z2luLSpcIiBwYXR0ZXJuXG5cdFx0Y29uc3QgcGx1Z2luTWF0Y2ggPSBmdWxsTmFtZS5tYXRjaCgvXihwbHVnaW4tW2EtejAtOS1dKykvaSk7XG5cdFx0aWYgKHBsdWdpbk1hdGNoKSB7XG5cdFx0XHRyZXR1cm4gcGx1Z2luTWF0Y2hbMV07XG5cdFx0fVxuXHRcdFxuXHRcdC8vIElmIG5vIHBsdWdpbiBpZGVudGlmaWVyIGZvdW5kLCBmaWx0ZXIgb3V0IGR5bmFtaWMgc3RhdGUgY2xhc3Nlc1xuXHRcdC8vIFRoaXMgaXMgYSBmYWxsYmFjayBmb3IgZWRnZSBjYXNlc1xuXHRcdGNvbnN0IG5hbWVQYXJ0cyA9IGZ1bGxOYW1lLnNwbGl0KCctJyk7XG5cdFx0Y29uc3QgZmlsdGVyZWRQYXJ0czogc3RyaW5nW10gPSBbXTtcblx0XHRsZXQgc2tpcE5leHQgPSBmYWxzZTtcblx0XHRcblx0XHRmb3IgKGxldCBpID0gMDsgaSA8IG5hbWVQYXJ0cy5sZW5ndGg7IGkrKykge1xuXHRcdFx0aWYgKHNraXBOZXh0KSB7XG5cdFx0XHRcdHNraXBOZXh0ID0gZmFsc2U7XG5cdFx0XHRcdGNvbnRpbnVlO1xuXHRcdFx0fVxuXHRcdFx0XG5cdFx0XHQvLyBDaGVjayBpZiB0aGlzIGlzIHBhcnQgb2YgYSBzdGF0dXNiYXItKiBkeW5hbWljIHN0YXRlIGNsYXNzXG5cdFx0XHRpZiAobmFtZVBhcnRzW2ldID09PSAnc3RhdHVzYmFyJyAmJiBpIDwgbmFtZVBhcnRzLmxlbmd0aCAtIDEpIHtcblx0XHRcdFx0Y29uc3QgbmV4dFBhcnQgPSBuYW1lUGFydHNbaSArIDFdO1xuXHRcdFx0XHRpZiAoWydpZGxlJywgJ3B1bGwnLCAncHVzaCcsICdjb21taXQnLCAnbWVzc2FnZScsICdzdGF0dXMnLCAnYWRkJywgJ2NvbmZsaWN0JywgJ3BhdXNlZCddLmluY2x1ZGVzKG5leHRQYXJ0KSkge1xuXHRcdFx0XHRcdHNraXBOZXh0ID0gdHJ1ZTtcblx0XHRcdFx0XHRjb250aW51ZTtcblx0XHRcdFx0fVxuXHRcdFx0XHRpZiAobmV4dFBhcnQgPT09ICdmYWlsZWQnICYmIGkgPCBuYW1lUGFydHMubGVuZ3RoIC0gMiAmJiBuYW1lUGFydHNbaSArIDJdID09PSAnaW5pdCcpIHtcblx0XHRcdFx0XHRpICs9IDI7IC8vIFNraXAgXCJmYWlsZWQtaW5pdFwiXG5cdFx0XHRcdFx0Y29udGludWU7XG5cdFx0XHRcdH1cblx0XHRcdH1cblx0XHRcdFxuXHRcdFx0ZmlsdGVyZWRQYXJ0cy5wdXNoKG5hbWVQYXJ0c1tpXSk7XG5cdFx0fVxuXHRcdFxuXHRcdC8vIFJldHVybiBmaWx0ZXJlZCBuYW1lIG9yIG9yaWdpbmFsIGlmIGZpbHRlcmluZyByZW1vdmVkIGV2ZXJ5dGhpbmdcblx0XHRyZXR1cm4gZmlsdGVyZWRQYXJ0cy5sZW5ndGggPiAwID8gZmlsdGVyZWRQYXJ0cy5qb2luKCctJykgOiBmdWxsTmFtZTtcblx0fVxuXG5cdC8qKlxuXHQgKiBDb25zb2xpZGF0ZSBzZXR0aW5ncyBhbmQgZWxlbWVudHMgKEVYQUNUTFkgbGlrZSBTdGF0dXMgQmFyIE9yZ2FuaXplcilcblx0ICogTWVyZ2VzIHNhdmVkIGl0ZW1zIHdpdGggY3VycmVudCBET00gZWxlbWVudHMsIHByZXNlcnZlcyBvcmRlciBhbmQgc2V0dGluZ3Ncblx0ICogU2F2ZXMgaW1tZWRpYXRlbHkgdG8gcHJldmVudCBkdXBsaWNhdGVzXG5cdCAqL1xuXHRwcml2YXRlIGNvbnNvbGlkYXRlU2V0dGluZ3NBbmRFbGVtZW50cygpOiB2b2lkIHtcblx0XHRpZiAoIXRoaXMuY29udGFpbmVyKSByZXR1cm47XG5cblx0XHQvLyBHZXQgYWxsIGV4aXN0aW5nIHN0YXR1cyBiYXIgZWxlbWVudHMgZnJvbSBET00gKGluIERPTSBvcmRlcilcblx0XHRjb25zdCBleGlzdGluZ0VsZW1lbnRzID0gQXJyYXkuZnJvbSh0aGlzLmNvbnRhaW5lci5jaGlsZHJlbikuZmlsdGVyKFxuXHRcdFx0ZWwgPT4gZWwuY2xhc3NMaXN0LmNvbnRhaW5zKCdzdGF0dXMtYmFyLWl0ZW0nKSAmJiAhZWwuY2xhc3NMaXN0LmNvbnRhaW5zKCd1aS10d2Vha2VyLXN0YXR1cy1iYXItaXRlbScpXG5cdFx0KSBhcyBIVE1MRWxlbWVudFtdO1xuXG5cdFx0Ly8gR2V0IHNhdmVkIGl0ZW1zIGZyb20gc2V0dGluZ3MgKHByZXNlcnZlIEFMTCBzYXZlZCBpdGVtcywgZXZlbiBpZiBub3QgY3VycmVudGx5IHZpc2libGUpXG5cdFx0Y29uc3Qgc2F2ZWRJdGVtcyA9IHRoaXMuaXRlbXMuZmlsdGVyKGl0ZW0gPT4gaXRlbS50eXBlID09PSAnZXhpc3RpbmcnKTtcblx0XHRcblx0XHQvLyBDcmVhdGUgYSBtYXAgb2Ygc2F2ZWQgaXRlbXMgYnkgSUQgZm9yIHF1aWNrIGxvb2t1cFxuXHRcdGNvbnN0IHNhdmVkSXRlbXNNYXAgPSBuZXcgTWFwKHNhdmVkSXRlbXMubWFwKGl0ZW0gPT4gW2l0ZW0uaWQsIGl0ZW1dKSk7XG5cblx0XHQvLyBUcmFjayBlbGVtZW50IGNvdW50cyBwZXIgbmFtZSBwYXR0ZXJuIChsaWtlIFN0YXR1cyBCYXIgT3JnYW5pemVyIGRvZXMpXG5cdFx0Y29uc3QgcGx1Z2luRWxlbWVudENvdW50OiB7IFtrZXk6IHN0cmluZ106IG51bWJlciB9ID0ge307XG5cdFx0XG5cdFx0Ly8gVHJhY2sgd2hpY2ggc2F2ZWQgaXRlbXMgd2UndmUgbWF0Y2hlZCB0byBET00gZWxlbWVudHNcblx0XHRjb25zdCBtYXRjaGVkU2F2ZWRJZHMgPSBuZXcgU2V0PHN0cmluZz4oKTtcblx0XHRjb25zdCBuZXdJdGVtczogU3RhdHVzQmFySXRlbVtdID0gW107XG5cblx0XHQvLyBUcmFjayBwb3NpdGlvbiBmb3IgZWFjaCBjYW5vbmljYWwgbmFtZSAoZm9yIG1hdGNoaW5nIGJ5IERPTSBvcmRlcilcblx0XHQvLyBOb3RlOiBXZSBjYWxjdWxhdGUgYWN0dWFsRG9tUG9zaXRpb24gYnkgY291bnRpbmcgcHJlY2VkaW5nIGVsZW1lbnRzLCBub3QgdXNpbmcgYSBjb3VudGVyXG5cdFx0Ly8gVGhpcyBlbnN1cmVzIGNvcnJlY3QgcG9zaXRpb25pbmcgZXZlbiB3aGVuIGNvbnNvbGlkYXRlU2V0dGluZ3NBbmRFbGVtZW50cyBpcyBjYWxsZWQgbXVsdGlwbGUgdGltZXNcblxuXHRcdC8vIFByb2Nlc3MgZWxlbWVudHMgaW4gRE9NIG9yZGVyIChzaW5nbGUgcGFzcywgbGlrZSBTdGF0dXMgQmFyIE9yZ2FuaXplcilcblx0XHRleGlzdGluZ0VsZW1lbnRzLmZvckVhY2goKGVsZW1lbnQsIGVsZW1lbnRJbmRleCkgPT4ge1xuXHRcdFx0Ly8gQ2hlY2sgaWYgZWxlbWVudCBhbHJlYWR5IGhhcyBhbiBJRFxuXHRcdFx0bGV0IGlkID0gZWxlbWVudC5nZXRBdHRyaWJ1dGUoJ2RhdGEtdWktdHdlYWtlci1zdGF0dXMtYmFyLWlkJyk7XG5cdFx0XHRsZXQgbmFtZTogc3RyaW5nO1xuXHRcdFx0bGV0IGluZGV4OiBudW1iZXI7XG5cblx0XHRcdC8vIFByZXNlcnZlIGV4aXN0aW5nIElEIGlmIGl0IGV4aXN0cyBhbmQgaXMgdmFsaWQgKG1hdGNoZXMgU3RhdHVzIEJhciBPcmdhbml6ZXIgYmVoYXZpb3IpXG5cdFx0XHQvLyBUaGlzIGVuc3VyZXMgZWxlbWVudHMga2VlcCB0aGVpciBJRHMgZXZlbiB3aGVuIGNsYXNzZXMgY2hhbmdlIGR5bmFtaWNhbGx5XG5cdFx0XHRpZiAoaWQpIHtcblx0XHRcdFx0Ly8gVmFsaWRhdGUgSUQgZm9ybWF0IChzaG91bGQgaGF2ZSBuYW1lO2luZGV4IHBhdHRlcm4pXG5cdFx0XHRcdGNvbnN0IHBhcnRzID0gaWQuc3BsaXQoJzsnKTtcblx0XHRcdFx0aWYgKHBhcnRzLmxlbmd0aCA+PSAyKSB7XG5cdFx0XHRcdFx0Y29uc3QgaW5kZXhTdHIgPSBwYXJ0c1twYXJ0cy5sZW5ndGggLSAxXTtcblx0XHRcdFx0XHRpZiAoaW5kZXhTdHIgJiYgIWlzTmFOKHBhcnNlSW50KGluZGV4U3RyLCAxMCkpKSB7XG5cdFx0XHRcdFx0XHQvLyBWYWxpZCBJRCBmb3JtYXQgLSBwcmVzZXJ2ZSBpdFxuXHRcdFx0XHRcdFx0aWYgKHNhdmVkSXRlbXNNYXAuaGFzKGlkKSkge1xuXHRcdFx0XHRcdFx0XHQvLyBFbGVtZW50IGhhcyBJRCBhbmQgaXQncyBpbiBzYXZlZCBpdGVtcyAtIGFscmVhZHkgbWF0Y2hlZCFcblx0XHRcdFx0XHRcdFx0bWF0Y2hlZFNhdmVkSWRzLmFkZChpZCk7XG5cdFx0XHRcdFx0XHRcdGluZGV4ID0gcGFyc2VJbnQoaW5kZXhTdHIsIDEwKTtcblx0XHRcdFx0XHRcdFx0bmFtZSA9IHBhcnRzLnNsaWNlKDAsIC0xKS5qb2luKCc7Jyk7XG5cdFx0XHRcdFx0XHRcdC8vIFVwZGF0ZSBlbGVtZW50IGNvdW50IHRyYWNraW5nXG5cdFx0XHRcdFx0XHRcdHBsdWdpbkVsZW1lbnRDb3VudFtuYW1lXSA9IE1hdGgubWF4KFxuXHRcdFx0XHRcdFx0XHRcdGluZGV4LFxuXHRcdFx0XHRcdFx0XHRcdG5hbWUgaW4gcGx1Z2luRWxlbWVudENvdW50ID8gcGx1Z2luRWxlbWVudENvdW50W25hbWVdIDogMFxuXHRcdFx0XHRcdFx0XHQpO1xuXHRcdFx0XHRcdFx0XHRyZXR1cm47XG5cdFx0XHRcdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRcdFx0XHQvLyBJRCBleGlzdHMgYnV0IG5vdCBpbiBzYXZlZCBpdGVtcyB5ZXQgLSBzdGlsbCBwcmVzZXJ2ZSBpdFxuXHRcdFx0XHRcdFx0XHQvLyBUaGlzIGhhbmRsZXMgY2FzZXMgd2hlcmUgSUQgd2FzIHNldCBwcmV2aW91c2x5IGJ1dCBpdGVtIGhhc24ndCBiZWVuIHNhdmVkXG5cdFx0XHRcdFx0XHRcdGluZGV4ID0gcGFyc2VJbnQoaW5kZXhTdHIsIDEwKTtcblx0XHRcdFx0XHRcdFx0bmFtZSA9IHBhcnRzLnNsaWNlKDAsIC0xKS5qb2luKCc7Jyk7XG5cdFx0XHRcdFx0XHRcdC8vIFVwZGF0ZSBlbGVtZW50IGNvdW50IHRyYWNraW5nXG5cdFx0XHRcdFx0XHRcdHBsdWdpbkVsZW1lbnRDb3VudFtuYW1lXSA9IE1hdGgubWF4KFxuXHRcdFx0XHRcdFx0XHRcdGluZGV4LFxuXHRcdFx0XHRcdFx0XHRcdG5hbWUgaW4gcGx1Z2luRWxlbWVudENvdW50ID8gcGx1Z2luRWxlbWVudENvdW50W25hbWVdIDogMFxuXHRcdFx0XHRcdFx0XHQpO1xuXHRcdFx0XHRcdFx0XHQvLyBDb250aW51ZSB0byBtYXRjaGluZyBsb2dpYyBiZWxvdyB0byBwb3RlbnRpYWxseSBhZGQgdG8gc2F2ZWQgaXRlbXNcblx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRcdFx0Ly8gSW52YWxpZCBJRCBmb3JtYXQgLSByZWdlbmVyYXRlXG5cdFx0XHRcdFx0XHRpZCA9IG51bGw7XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRcdC8vIEludmFsaWQgSUQgZm9ybWF0IC0gcmVnZW5lcmF0ZVxuXHRcdFx0XHRcdGlkID0gbnVsbDtcblx0XHRcdFx0fVxuXHRcdFx0fVxuXG5cdFx0XHQvLyBFbGVtZW50IGRvZXNuJ3QgaGF2ZSBhIHZhbGlkIHNhdmVkIElEIC0gZ2VuZXJhdGUgb25lXG5cdFx0XHQvLyBHZW5lcmF0ZSBjYW5vbmljYWwgbmFtZSBmcm9tIGNsYXNzIG5hbWVzIChmaWx0ZXJpbmcgb3V0IGR5bmFtaWMgc3RhdGUgY2xhc3Nlcylcblx0XHRcdGNvbnN0IGFsbENsYXNzZXMgPSBBcnJheS5mcm9tKGVsZW1lbnQuY2xhc3NMaXN0KTtcblx0XHRcdGNvbnN0IGNhbm9uaWNhbE5hbWUgPSB0aGlzLmdlbmVyYXRlQ2Fub25pY2FsTmFtZShlbGVtZW50LCBhbGxDbGFzc2VzKTtcblx0XHRcdG5hbWUgPSBjYW5vbmljYWxOYW1lO1xuXG5cdFx0XHQvLyBHZXQgZWxlbWVudCBjaGFyYWN0ZXJpc3RpY3MgZm9yIGxvZ2dpbmdcblx0XHRcdGNvbnN0IGVsZW1lbnRUZXh0ID0gZWxlbWVudC50ZXh0Q29udGVudD8udHJpbSgpIHx8ICcnO1xuXHRcdFx0Y29uc3QgZWxlbWVudEFyaWFMYWJlbCA9IGVsZW1lbnQuZ2V0QXR0cmlidXRlKCdhcmlhLWxhYmVsJykgfHwgJyc7XG5cdFx0XHRjb25zdCBlbGVtZW50VGl0bGUgPSBlbGVtZW50LmdldEF0dHJpYnV0ZSgndGl0bGUnKSB8fCAnJztcblxuXHRcdFx0Ly8gRW5oYW5jZWQgbWF0Y2hpbmcgYWxnb3JpdGhtOlxuXHRcdFx0Ly8gMS4gTWF0Y2ggYnkgY2Fub25pY2FsIG5hbWUgKGlnbm9yaW5nIGR5bmFtaWMgc3RhdGUgY2xhc3MgZGlmZmVyZW5jZXMpXG5cdFx0XHQvLyAyLiBXaGVuIG11bHRpcGxlIGl0ZW1zIGhhdmUgc2FtZSBjYW5vbmljYWwgbmFtZSwgbWF0Y2ggYnkgRE9NIHBvc2l0aW9uIChpbmRleCBpbiBJRClcblx0XHRcdGxldCBtYXRjaGluZ1NhdmVkSXRlbXMgPSBzYXZlZEl0ZW1zLmZpbHRlcihpdGVtID0+IHtcblx0XHRcdFx0aWYgKG1hdGNoZWRTYXZlZElkcy5oYXMoaXRlbS5pZCkpIHJldHVybiBmYWxzZTtcblx0XHRcdFx0Y29uc3QgaXRlbUNhbm9uaWNhbE5hbWUgPSB0aGlzLmdldENhbm9uaWNhbE5hbWVGcm9tSWQoaXRlbS5pZCk7XG5cdFx0XHRcdHJldHVybiBpdGVtQ2Fub25pY2FsTmFtZSA9PT0gY2Fub25pY2FsTmFtZTtcblx0XHRcdH0pO1xuXG5cdFx0XHQvLyBDYWxjdWxhdGUgcG9zaXRpb24gYmFzZWQgb24gaG93IG1hbnkgZWxlbWVudHMgd2l0aCBzYW1lIGNhbm9uaWNhbCBuYW1lIGFwcGVhciBiZWZvcmUgdGhpcyBvbmVcblx0XHRcdC8vIFRoaXMgZW5zdXJlcyBjb25zaXN0ZW50IHBvc2l0aW9uaW5nIGV2ZW4gaWYgY29uc29saWRhdGVTZXR0aW5nc0FuZEVsZW1lbnRzIGlzIGNhbGxlZCBtdWx0aXBsZSB0aW1lc1xuXHRcdFx0bGV0IGFjdHVhbERvbVBvc2l0aW9uID0gMTtcblx0XHRcdGZvciAobGV0IGkgPSAwOyBpIDwgZWxlbWVudEluZGV4OyBpKyspIHtcblx0XHRcdFx0Y29uc3QgcHJldkVsZW1lbnQgPSBleGlzdGluZ0VsZW1lbnRzW2ldO1xuXHRcdFx0XHRjb25zdCBwcmV2Q2xhc3NlcyA9IEFycmF5LmZyb20ocHJldkVsZW1lbnQuY2xhc3NMaXN0KTtcblx0XHRcdFx0Y29uc3QgcHJldkNhbm9uaWNhbE5hbWUgPSB0aGlzLmdlbmVyYXRlQ2Fub25pY2FsTmFtZShwcmV2RWxlbWVudCwgcHJldkNsYXNzZXMpO1xuXHRcdFx0XHRpZiAocHJldkNhbm9uaWNhbE5hbWUgPT09IGNhbm9uaWNhbE5hbWUpIHtcblx0XHRcdFx0XHRhY3R1YWxEb21Qb3NpdGlvbisrO1xuXHRcdFx0XHR9XG5cdFx0XHR9XG5cblxuXHRcdFx0Ly8gSWYgbXVsdGlwbGUgaXRlbXMgbWF0Y2ggYnkgY2Fub25pY2FsIG5hbWUsIG1hdGNoIGJ5IERPTSBwb3NpdGlvbiBmaXJzdFxuXHRcdFx0Ly8gVGhlIE50aCBlbGVtZW50IGluIERPTSBvcmRlciBzaG91bGQgbWF0Y2ggdGhlIHNhdmVkIGl0ZW0gd2l0aCBpbmRleCBOXG5cdFx0XHRpZiAobWF0Y2hpbmdTYXZlZEl0ZW1zLmxlbmd0aCA+IDEpIHtcblx0XHRcdFx0Ly8gRmlyc3QsIHRyeSB0byBtYXRjaCBieSBleGFjdCBpbmRleCBwb3NpdGlvbiB1c2luZyBhY3R1YWxEb21Qb3NpdGlvblxuXHRcdFx0XHRjb25zdCBwb3NpdGlvbk1hdGNoID0gbWF0Y2hpbmdTYXZlZEl0ZW1zLmZpbmQoaXRlbSA9PiB7XG5cdFx0XHRcdFx0Y29uc3QgcGFydHMgPSBpdGVtLmlkLnNwbGl0KCc7Jyk7XG5cdFx0XHRcdFx0Y29uc3QgaXRlbUluZGV4ID0gcGFyc2VJbnQocGFydHNbcGFydHMubGVuZ3RoIC0gMV0gfHwgJzAnLCAxMCk7XG5cdFx0XHRcdFx0cmV0dXJuIGl0ZW1JbmRleCA9PT0gYWN0dWFsRG9tUG9zaXRpb247XG5cdFx0XHRcdH0pO1xuXG5cdFx0XHRcdGlmIChwb3NpdGlvbk1hdGNoKSB7XG5cdFx0XHRcdFx0bWF0Y2hpbmdTYXZlZEl0ZW1zID0gW3Bvc2l0aW9uTWF0Y2hdO1xuXHRcdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRcdC8vIElmIG5vIGV4YWN0IHBvc2l0aW9uIG1hdGNoLCB1c2Ugc21hcnRlciBtYXRjaGluZyBieSBjaGFyYWN0ZXJpc3RpY3Ncblx0XHRcdFx0XG5cdFx0XHRcdC8vIERldGVybWluZSBlbGVtZW50IHR5cGU6IGJyYW5jaCAoc2hvcnQgc2ltcGxlIHRleHQpIHZzIG1haW4gc3RhdHVzIGJhciAoYXJpYS1sYWJlbCwgbG9uZ2VyIHRleHQsIG9yIGR5bmFtaWMpXG5cdFx0XHRcdGNvbnN0IGlzQnJhbmNoTGlrZSA9IGVsZW1lbnRUZXh0ICYmIFxuXHRcdFx0XHRcdGVsZW1lbnRUZXh0Lmxlbmd0aCA8IDMwICYmIFxuXHRcdFx0XHRcdCFlbGVtZW50VGV4dC5pbmNsdWRlcygnOicpICYmIFxuXHRcdFx0XHRcdCEvXlswLTldLy50ZXN0KGVsZW1lbnRUZXh0KSAmJiAvLyBOb3Qgc3RhcnRpbmcgd2l0aCBudW1iZXJzIChsaWtlIFwiMCB3b3Jkc1wiKVxuXHRcdFx0XHRcdCFlbGVtZW50QXJpYUxhYmVsOyAvLyBCcmFuY2ggaXRlbXMgdHlwaWNhbGx5IGRvbid0IGhhdmUgYXJpYS1sYWJlbHNcblx0XHRcdFx0XG5cdFx0XHRcdGNvbnN0IGlzTWFpblN0YXR1c0JhciA9IGVsZW1lbnRBcmlhTGFiZWwgfHwgXG5cdFx0XHRcdFx0KGVsZW1lbnRUZXh0ICYmIChlbGVtZW50VGV4dC5pbmNsdWRlcygnOicpIHx8IGVsZW1lbnRUZXh0Lmxlbmd0aCA+IDMwKSk7XG5cdFx0XHRcdFxuXHRcdFx0XHQvLyBUcnkgdG8gbWF0Y2ggYnkgc2F2ZWQgaXRlbSBuYW1lL2NvbnRlbnQgc2ltaWxhcml0eVxuXHRcdFx0XHRjb25zdCBzY29yZWRNYXRjaGVzID0gbWF0Y2hpbmdTYXZlZEl0ZW1zLm1hcChpdGVtID0+IHtcblx0XHRcdFx0XHRsZXQgc2NvcmUgPSAwO1xuXHRcdFx0XHRcdGNvbnN0IHNhdmVkTmFtZSA9IGl0ZW0ubmFtZSB8fCAnJztcblx0XHRcdFx0XHRjb25zdCBpc1NhdmVkTmFtZUJyYW5jaExpa2UgPSBzYXZlZE5hbWUubGVuZ3RoIDwgMjAgJiYgXG5cdFx0XHRcdFx0XHQhc2F2ZWROYW1lLmluY2x1ZGVzKCdwbHVnaW4tJykgJiYgXG5cdFx0XHRcdFx0XHQhc2F2ZWROYW1lLmluY2x1ZGVzKCdzdGF0dXMtYmFyJykgJiZcblx0XHRcdFx0XHRcdHNhdmVkTmFtZSAhPT0gJ1N0YXR1cyBiYXIgaXRlbSc7XG5cdFx0XHRcdFx0Y29uc3QgaXNTYXZlZE5hbWVHZW5lcmljID0gc2F2ZWROYW1lLmluY2x1ZGVzKCdwbHVnaW4tJykgfHwgXG5cdFx0XHRcdFx0XHRzYXZlZE5hbWUuaW5jbHVkZXMoJ3N0YXR1cy1iYXInKSB8fFxuXHRcdFx0XHRcdFx0c2F2ZWROYW1lID09PSAnU3RhdHVzIGJhciBpdGVtJztcblx0XHRcdFx0XHRcblx0XHRcdFx0XHQvLyBTdHJvbmcgbWF0Y2g6IGJyYW5jaC1saWtlIGVsZW1lbnQgd2l0aCBicmFuY2gtbGlrZSBzYXZlZCBuYW1lXG5cdFx0XHRcdFx0aWYgKGlzQnJhbmNoTGlrZSAmJiBpc1NhdmVkTmFtZUJyYW5jaExpa2UpIHtcblx0XHRcdFx0XHRcdC8vIENoZWNrIGV4YWN0IG9yIGNsb3NlIG1hdGNoXG5cdFx0XHRcdFx0XHRpZiAoZWxlbWVudFRleHQudG9Mb3dlckNhc2UoKSA9PT0gc2F2ZWROYW1lLnRvTG93ZXJDYXNlKCkpIHtcblx0XHRcdFx0XHRcdFx0c2NvcmUgKz0gNTA7IC8vIFZlcnkgc3Ryb25nIG1hdGNoXG5cdFx0XHRcdFx0XHR9IGVsc2UgaWYgKGVsZW1lbnRUZXh0LnRvTG93ZXJDYXNlKCkuaW5jbHVkZXMoc2F2ZWROYW1lLnRvTG93ZXJDYXNlKCkpIHx8IFxuXHRcdFx0XHRcdFx0ICAgICAgICAgICBzYXZlZE5hbWUudG9Mb3dlckNhc2UoKS5pbmNsdWRlcyhlbGVtZW50VGV4dC50b0xvd2VyQ2FzZSgpKSkge1xuXHRcdFx0XHRcdFx0XHRzY29yZSArPSAzMDsgLy8gU3Ryb25nIG1hdGNoXG5cdFx0XHRcdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRcdFx0XHRzY29yZSArPSAxMDsgLy8gU3RpbGwgcHJlZmVyIGJyYW5jaC1saWtlIG5hbWVzIGZvciBicmFuY2gtbGlrZSBlbGVtZW50c1xuXHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdH1cblx0XHRcdFx0XHRcblx0XHRcdFx0XHQvLyBTdHJvbmcgbWF0Y2g6IG1haW4gc3RhdHVzIGJhciB3aXRoIGdlbmVyaWMgc2F2ZWQgbmFtZVxuXHRcdFx0XHRcdGlmIChpc01haW5TdGF0dXNCYXIgJiYgaXNTYXZlZE5hbWVHZW5lcmljKSB7XG5cdFx0XHRcdFx0XHRzY29yZSArPSA0MDsgLy8gVmVyeSBzdHJvbmcgbWF0Y2hcblx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0XG5cdFx0XHRcdFx0Ly8gUGVuYWxpemUgbWlzbWF0Y2hlc1xuXHRcdFx0XHRcdGlmIChpc0JyYW5jaExpa2UgJiYgaXNTYXZlZE5hbWVHZW5lcmljKSB7XG5cdFx0XHRcdFx0XHRzY29yZSAtPSAyMDsgLy8gQnJhbmNoIGVsZW1lbnQgc2hvdWxkbid0IG1hdGNoIGdlbmVyaWMgbmFtZVxuXHRcdFx0XHRcdH1cblx0XHRcdFx0XHRpZiAoaXNNYWluU3RhdHVzQmFyICYmIGlzU2F2ZWROYW1lQnJhbmNoTGlrZSkge1xuXHRcdFx0XHRcdFx0c2NvcmUgLT0gMjA7IC8vIE1haW4gc3RhdHVzIGJhciBzaG91bGRuJ3QgbWF0Y2ggYnJhbmNoIG5hbWVcblx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0XG5cdFx0XHRcdFx0Ly8gQ2hlY2sgaWYgc2F2ZWQgbmFtZSBtYXRjaGVzIGVsZW1lbnQgdGV4dC9hcmlhLWxhYmVsXG5cdFx0XHRcdFx0aWYgKGVsZW1lbnRUZXh0ICYmIHNhdmVkTmFtZSAmJiBlbGVtZW50VGV4dC50b0xvd2VyQ2FzZSgpLmluY2x1ZGVzKHNhdmVkTmFtZS50b0xvd2VyQ2FzZSgpKSkge1xuXHRcdFx0XHRcdFx0c2NvcmUgKz0gMTA7XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHRcdGlmIChlbGVtZW50QXJpYUxhYmVsICYmIHNhdmVkTmFtZSAmJiBlbGVtZW50QXJpYUxhYmVsLnRvTG93ZXJDYXNlKCkuaW5jbHVkZXMoc2F2ZWROYW1lLnRvTG93ZXJDYXNlKCkpKSB7XG5cdFx0XHRcdFx0XHRzY29yZSArPSAxMDtcblx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0aWYgKGVsZW1lbnRUaXRsZSAmJiBzYXZlZE5hbWUgJiYgZWxlbWVudFRpdGxlLnRvTG93ZXJDYXNlKCkuaW5jbHVkZXMoc2F2ZWROYW1lLnRvTG93ZXJDYXNlKCkpKSB7XG5cdFx0XHRcdFx0XHRzY29yZSArPSA1O1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0XHRcblx0XHRcdFx0XHRyZXR1cm4geyBpdGVtLCBzY29yZSB9O1xuXHRcdFx0XHR9KTtcblx0XHRcdFx0XG5cdFx0XHRcdC8vIFNvcnQgYnkgc2NvcmUgKGhpZ2hlc3QgZmlyc3QpLCB0aGVuIGJ5IHBvc2l0aW9uIGluIHNldHRpbmdzXG5cdFx0XHRcdHNjb3JlZE1hdGNoZXMuc29ydCgoYSwgYikgPT4ge1xuXHRcdFx0XHRcdGlmIChiLnNjb3JlICE9PSBhLnNjb3JlKSB7XG5cdFx0XHRcdFx0XHRyZXR1cm4gYi5zY29yZSAtIGEuc2NvcmU7XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHRcdC8vIElmIHNjb3JlcyBhcmUgZXF1YWwsIHByZWZlciBpdGVtcyB0aGF0IGFwcGVhciBlYXJsaWVyIGluIHNldHRpbmdzIChtYWludGFpbiBvcmRlcilcblx0XHRcdFx0XHRjb25zdCBpbmRleEEgPSB0aGlzLml0ZW1zLmluZGV4T2YoYS5pdGVtKTtcblx0XHRcdFx0XHRjb25zdCBpbmRleEIgPSB0aGlzLml0ZW1zLmluZGV4T2YoYi5pdGVtKTtcblx0XHRcdFx0XHRyZXR1cm4gaW5kZXhBIC0gaW5kZXhCO1xuXHRcdFx0XHR9KTtcblx0XHRcdFx0XG5cdFx0XHRcdFx0bWF0Y2hpbmdTYXZlZEl0ZW1zID0gW3Njb3JlZE1hdGNoZXNbMF0uaXRlbV07XG5cdFx0XHRcdH1cblx0XHRcdH0gZWxzZSBpZiAobWF0Y2hpbmdTYXZlZEl0ZW1zLmxlbmd0aCA9PT0gMSkge1xuXHRcdFx0XHQvLyBTaW5nbGUgbWF0Y2ggLSB2ZXJpZnkgaXQncyB0aGUgcmlnaHQgcG9zaXRpb24gaWYgcG9zc2libGVcblx0XHRcdFx0Y29uc3QgcGFydHMgPSBtYXRjaGluZ1NhdmVkSXRlbXNbMF0uaWQuc3BsaXQoJzsnKTtcblx0XHRcdFx0Y29uc3QgaXRlbUluZGV4ID0gcGFyc2VJbnQocGFydHNbcGFydHMubGVuZ3RoIC0gMV0gfHwgJzAnLCAxMCk7XG5cdFx0XHRcdC8vIElmIHRoZSBpbmRleCBkb2Vzbid0IG1hdGNoIERPTSBwb3NpdGlvbiwgd2UgbWlnaHQgbmVlZCB0byBhZGp1c3Rcblx0XHRcdFx0Ly8gQnV0IG9ubHkgaWYgdGhlcmUgYXJlIG90aGVyIHVubWF0Y2hlZCBpdGVtcyB3aXRoIHNhbWUgY2Fub25pY2FsIG5hbWVcblx0XHRcdFx0Y29uc3QgYWxsVW5tYXRjaGVkU2FtZUNhbm9uaWNhbCA9IHNhdmVkSXRlbXMuZmlsdGVyKGl0ZW0gPT4ge1xuXHRcdFx0XHRcdGlmIChtYXRjaGVkU2F2ZWRJZHMuaGFzKGl0ZW0uaWQpKSByZXR1cm4gZmFsc2U7XG5cdFx0XHRcdFx0Y29uc3QgaXRlbUNhbm9uaWNhbE5hbWUgPSB0aGlzLmdldENhbm9uaWNhbE5hbWVGcm9tSWQoaXRlbS5pZCk7XG5cdFx0XHRcdFx0cmV0dXJuIGl0ZW1DYW5vbmljYWxOYW1lID09PSBjYW5vbmljYWxOYW1lO1xuXHRcdFx0XHR9KTtcblx0XHRcdFx0aWYgKGFsbFVubWF0Y2hlZFNhbWVDYW5vbmljYWwubGVuZ3RoID4gMSAmJiBpdGVtSW5kZXggIT09IGFjdHVhbERvbVBvc2l0aW9uKSB7XG5cdFx0XHRcdFx0Ly8gVGhlcmUgYXJlIG90aGVyIGl0ZW1zLCB0cnkgdG8gZmluZCBiZXR0ZXIgbWF0Y2ggYnkgcG9zaXRpb25cblx0XHRcdFx0XHRjb25zdCBiZXR0ZXJNYXRjaCA9IGFsbFVubWF0Y2hlZFNhbWVDYW5vbmljYWwuZmluZChpdGVtID0+IHtcblx0XHRcdFx0XHRcdGNvbnN0IGl0ZW1QYXJ0cyA9IGl0ZW0uaWQuc3BsaXQoJzsnKTtcblx0XHRcdFx0XHRcdGNvbnN0IGl0ZW1JZHggPSBwYXJzZUludChpdGVtUGFydHNbaXRlbVBhcnRzLmxlbmd0aCAtIDFdIHx8ICcwJywgMTApO1xuXHRcdFx0XHRcdFx0cmV0dXJuIGl0ZW1JZHggPT09IGFjdHVhbERvbVBvc2l0aW9uO1xuXHRcdFx0XHRcdH0pO1xuXHRcdFx0XHRcdGlmIChiZXR0ZXJNYXRjaCkge1xuXHRcdFx0XHRcdFx0bWF0Y2hpbmdTYXZlZEl0ZW1zID0gW2JldHRlck1hdGNoXTtcblx0XHRcdFx0XHR9XG5cdFx0XHRcdH1cblx0XHRcdH1cblxuXHRcdFx0Ly8gSWYgbm8gbWF0Y2ggYnkgY2Fub25pY2FsIG5hbWUsIHRyeSBtYXRjaGluZyBieSBwbHVnaW4gaWRlbnRpZmllciArIHBvc2l0aW9uXG5cdFx0XHQvLyBUaGlzIGhhbmRsZXMgY2FzZXMgd2hlcmUgdGhlIHNhbWUgcGx1Z2luIGVsZW1lbnQgbWlnaHQgaGF2ZSBzbGlnaHRseSBkaWZmZXJlbnQgY2xhc3MgY29tYmluYXRpb25zXG5cdFx0XHRpZiAobWF0Y2hpbmdTYXZlZEl0ZW1zLmxlbmd0aCA9PT0gMCkge1xuXHRcdFx0XHRjb25zdCBwbHVnaW5DbGFzcyA9IGFsbENsYXNzZXMuZmluZChjbHMgPT4gXG5cdFx0XHRcdFx0Y2xzLmluY2x1ZGVzKCdwbHVnaW4tJykgfHwgXG5cdFx0XHRcdFx0Y2xzLmluY2x1ZGVzKCdvYnNpZGlhbi1naXQnKSB8fFxuXHRcdFx0XHRcdGNscy5pbmNsdWRlcygnLWdpdCcpXG5cdFx0XHRcdCk7XG5cdFx0XHRcdFxuXHRcdFx0XHRpZiAocGx1Z2luQ2xhc3MpIHtcblx0XHRcdFx0XHQvLyBGaW5kIHNhdmVkIGl0ZW1zIGZyb20gdGhlIHNhbWUgcGx1Z2luIHRoYXQgaGF2ZW4ndCBiZWVuIG1hdGNoZWRcblx0XHRcdFx0XHRjb25zdCBzYW1lUGx1Z2luSXRlbXMgPSBzYXZlZEl0ZW1zLmZpbHRlcihpdGVtID0+IHtcblx0XHRcdFx0XHRcdGlmIChtYXRjaGVkU2F2ZWRJZHMuaGFzKGl0ZW0uaWQpKSByZXR1cm4gZmFsc2U7XG5cdFx0XHRcdFx0XHRjb25zdCBpdGVtQ2Fub25pY2FsTmFtZSA9IHRoaXMuZ2V0Q2Fub25pY2FsTmFtZUZyb21JZChpdGVtLmlkKTtcblx0XHRcdFx0XHRcdHJldHVybiBpdGVtQ2Fub25pY2FsTmFtZS5pbmNsdWRlcyhwbHVnaW5DbGFzcykgfHwgXG5cdFx0XHRcdFx0XHQgICAgICAgaXRlbUNhbm9uaWNhbE5hbWUuaW5jbHVkZXMoJ29ic2lkaWFuLWdpdCcpIHx8XG5cdFx0XHRcdFx0XHQgICAgICAgaXRlbUNhbm9uaWNhbE5hbWUuaW5jbHVkZXMoJ3BsdWdpbi1vYnNpZGlhbi1naXQnKTtcblx0XHRcdFx0XHR9KTtcblxuXHRcdFx0XHRcdC8vIE1hdGNoIGJ5IERPTSBwb3NpdGlvbiAob3JkZXIpIC0gZmlyc3QgdW5tYXRjaGVkIGl0ZW0gZnJvbSBzYW1lIHBsdWdpblxuXHRcdFx0XHRcdGlmIChzYW1lUGx1Z2luSXRlbXMubGVuZ3RoID4gMCkge1xuXHRcdFx0XHRcdFx0Ly8gU29ydCBieSB0aGVpciBjdXJyZW50IHBvc2l0aW9uIGluIHNldHRpbmdzIHRvIG1haW50YWluIG9yZGVyXG5cdFx0XHRcdFx0XHRzYW1lUGx1Z2luSXRlbXMuc29ydCgoYSwgYikgPT4ge1xuXHRcdFx0XHRcdFx0XHRjb25zdCBpbmRleEEgPSB0aGlzLml0ZW1zLmluZGV4T2YoYSk7XG5cdFx0XHRcdFx0XHRcdGNvbnN0IGluZGV4QiA9IHRoaXMuaXRlbXMuaW5kZXhPZihiKTtcblx0XHRcdFx0XHRcdFx0cmV0dXJuIGluZGV4QSAtIGluZGV4Qjtcblx0XHRcdFx0XHRcdH0pO1xuXHRcdFx0XHRcdFx0bWF0Y2hpbmdTYXZlZEl0ZW1zID0gW3NhbWVQbHVnaW5JdGVtc1swXV07XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHR9XG5cdFx0XHR9XG5cblx0XHRcdGlmIChtYXRjaGluZ1NhdmVkSXRlbXMubGVuZ3RoID4gMCkge1xuXHRcdFx0XHQvLyBNYXRjaCB0byB0aGUgYmVzdCBtYXRjaGluZyBzYXZlZCBpdGVtXG5cdFx0XHRcdC8vIFVzZSB0aGUgc2F2ZWQgaXRlbSdzIElEIHRvIHByZXNlcnZlIGl0cyBpbmRleCBhbmQgYWxsIHByb3BlcnRpZXMgKHN0aWNreSwgaGlkZGVuLCBldGMuKVxuXHRcdFx0XHRjb25zdCBzYXZlZEl0ZW0gPSBtYXRjaGluZ1NhdmVkSXRlbXNbMF07XG5cdFx0XHRcdGlkID0gc2F2ZWRJdGVtLmlkO1xuXHRcdFx0XHRtYXRjaGVkU2F2ZWRJZHMuYWRkKGlkKTtcblx0XHRcdFx0XG5cdFx0XHRcdC8vIFVwZGF0ZSB0aGUgc2F2ZWQgaXRlbSdzIG5hbWUgZnJvbSBET00gaWYgaXQgaGFzIGNoYW5nZWQgKGJ1dCBwcmVzZXJ2ZSBhbGwgb3RoZXIgcHJvcGVydGllcyBsaWtlIHN0aWNreSlcblx0XHRcdFx0Ly8gR2V0IGVsZW1lbnQgbmFtZSBmb3IgZGlzcGxheSAodXNlIHRleHQgY29udGVudCBvciBhcmlhLWxhYmVsIGZvciBiZXR0ZXIgbmFtZXMpXG5cdFx0XHRcdGxldCBlbGVtZW50TmFtZSA9IGVsZW1lbnQuZ2V0QXR0cmlidXRlKCdhcmlhLWxhYmVsJykgfHwgXG5cdFx0XHRcdFx0ZWxlbWVudC5nZXRBdHRyaWJ1dGUoJ3RpdGxlJykgfHxcblx0XHRcdFx0XHRlbGVtZW50LnRleHRDb250ZW50Py50cmltKCkgfHwgXG5cdFx0XHRcdFx0bnVsbDtcblxuXHRcdFx0XHQvLyBPbmx5IHVwZGF0ZSBzYXZlZCBpdGVtJ3MgbmFtZSBpZjpcblx0XHRcdFx0Ly8gMS4gVGhlIHNhdmVkIGl0ZW0gaGFzIGEgZ2VuZXJpYyBuYW1lIChsaWtlIGNhbm9uaWNhbCBuYW1lIG9yIFwiU3RhdHVzIGJhciBpdGVtXCIpXG5cdFx0XHRcdC8vIDIuIE9SIHRoZSBlbGVtZW50IG5hbWUgbWF0Y2hlcyB0aGUgc2F2ZWQgbmFtZSAoY29uZmlybWluZyBpdCdzIHRoZSByaWdodCBtYXRjaClcblx0XHRcdFx0Ly8gVGhpcyBwcmV2ZW50cyBuYW1lIHN3YXBwaW5nIHdoZW4gd3JvbmcgaXRlbXMgYXJlIG1hdGNoZWRcblx0XHRcdFx0Y29uc3QgY2Fub25pY2FsTmFtZUZyb21JZCA9IHRoaXMuZ2V0Q2Fub25pY2FsTmFtZUZyb21JZChpZCk7XG5cdFx0XHRcdGNvbnN0IGhhc0dlbmVyaWNOYW1lID0gIXNhdmVkSXRlbS5uYW1lIHx8IFxuXHRcdFx0XHRcdHNhdmVkSXRlbS5uYW1lID09PSBjYW5vbmljYWxOYW1lRnJvbUlkIHx8IFxuXHRcdFx0XHRcdHNhdmVkSXRlbS5uYW1lID09PSAnU3RhdHVzIGJhciBpdGVtJyB8fFxuXHRcdFx0XHRcdHNhdmVkSXRlbS5uYW1lLnN0YXJ0c1dpdGgoJ3BsdWdpbi0nKSB8fFxuXHRcdFx0XHRcdHNhdmVkSXRlbS5uYW1lLnN0YXJ0c1dpdGgoJ3N0YXR1cy1iYXItaXRlbScpO1xuXG5cdFx0XHRcdGlmIChlbGVtZW50TmFtZSAmJiBlbGVtZW50TmFtZS5sZW5ndGggPiAwICYmIGVsZW1lbnROYW1lLmxlbmd0aCA8IDEwMCkge1xuXHRcdFx0XHRcdC8vIEZvciBkeW5hbWljIGNvbnRlbnQgbGlrZSBcIkxhc3QgQ29tbWl0OiBYIG1pbnV0ZXMgYWdvXCIsIGRvbid0IHVwZGF0ZSB0aGUgbmFtZVxuXHRcdFx0XHRcdGlmICghZWxlbWVudE5hbWUuaW5jbHVkZXMoJzonKSB8fCBlbGVtZW50TmFtZS5sZW5ndGggPCAzMCkge1xuXHRcdFx0XHRcdFx0Ly8gT25seSB1cGRhdGUgaWY6XG5cdFx0XHRcdFx0XHQvLyAtIFNhdmVkIGl0ZW0gaGFzIGdlbmVyaWMgbmFtZSAoc2FmZSB0byB1cGRhdGUpXG5cdFx0XHRcdFx0XHQvLyAtIE9SIGVsZW1lbnQgbmFtZSBtYXRjaGVzIHNhdmVkIG5hbWUgKGNvbmZpcm1pbmcgY29ycmVjdCBtYXRjaClcblx0XHRcdFx0XHRcdGlmIChoYXNHZW5lcmljTmFtZSB8fCBlbGVtZW50TmFtZSA9PT0gc2F2ZWRJdGVtLm5hbWUpIHtcblx0XHRcdFx0XHRcdFx0Ly8gRm9yIGJyYW5jaCBuYW1lcyAoc2hvcnQsIG5vIGNvbG9ucyksIHVwZGF0ZSB0aGUgbmFtZVxuXHRcdFx0XHRcdFx0XHQvLyBGb3IgbWFpbiBzdGF0dXMgYmFyIChoYXMgY29sb25zIG9yIGxvbmdlciksIGtlZXAgc2F2ZWQgbmFtZVxuXHRcdFx0XHRcdFx0XHRpZiAoZWxlbWVudE5hbWUubGVuZ3RoIDwgMzAgJiYgIWVsZW1lbnROYW1lLmluY2x1ZGVzKCc6JykpIHtcblx0XHRcdFx0XHRcdFx0XHRzYXZlZEl0ZW0ubmFtZSA9IGVsZW1lbnROYW1lO1xuXHRcdFx0XHRcdFx0XHR9IGVsc2UgaWYgKGhhc0dlbmVyaWNOYW1lICYmIGVsZW1lbnROYW1lLmxlbmd0aCA+PSAzMCkge1xuXHRcdFx0XHRcdFx0XHRcdC8vIEZvciBsb25nZXIgbmFtZXMsIHVzZSBhIHBvcnRpb24gb3Iga2VlcCBnZW5lcmljXG5cdFx0XHRcdFx0XHRcdFx0c2F2ZWRJdGVtLm5hbWUgPSBlbGVtZW50TmFtZS5zdWJzdHJpbmcoMCwgNTApO1xuXHRcdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHR9IGVsc2UgaWYgKGhhc0dlbmVyaWNOYW1lKSB7XG5cdFx0XHRcdFx0Ly8gRmFsbCBiYWNrIHRvIElELWJhc2VkIG5hbWUgaWYgbm8gbWVhbmluZ2Z1bCBjb250ZW50IGFuZCBzYXZlZCBuYW1lIGlzIGdlbmVyaWNcblx0XHRcdFx0XHRjb25zdCBmYWxsYmFja05hbWUgPSBjYW5vbmljYWxOYW1lRnJvbUlkIHx8ICdTdGF0dXMgYmFyIGl0ZW0nO1xuXHRcdFx0XHRcdGlmICghc2F2ZWRJdGVtLm5hbWUgfHwgc2F2ZWRJdGVtLm5hbWUgPT09IGZhbGxiYWNrTmFtZSkge1xuXHRcdFx0XHRcdFx0c2F2ZWRJdGVtLm5hbWUgPSBmYWxsYmFja05hbWU7XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHR9XG5cdFx0XHRcdFxuXHRcdFx0XHQvLyBQYXJzZSB0aGUgSUQgdG8gdXBkYXRlIGVsZW1lbnQgY291bnQgdHJhY2tpbmdcblx0XHRcdFx0Y29uc3QgcGFydHMgPSBpZC5zcGxpdCgnOycpO1xuXHRcdFx0XHRjb25zdCBpbmRleFN0ciA9IHBhcnRzLnBvcCgpO1xuXHRcdFx0XHRpZiAoaW5kZXhTdHIpIHtcblx0XHRcdFx0XHRpbmRleCA9IHBhcnNlSW50KGluZGV4U3RyLCAxMCk7XG5cdFx0XHRcdFx0Ly8gVXBkYXRlIGVsZW1lbnQgY291bnQgdHJhY2tpbmcgdXNpbmcgY2Fub25pY2FsIG5hbWVcblx0XHRcdFx0XHRwbHVnaW5FbGVtZW50Q291bnRbY2Fub25pY2FsTmFtZV0gPSBNYXRoLm1heChcblx0XHRcdFx0XHRcdGluZGV4LFxuXHRcdFx0XHRcdFx0Y2Fub25pY2FsTmFtZSBpbiBwbHVnaW5FbGVtZW50Q291bnQgPyBwbHVnaW5FbGVtZW50Q291bnRbY2Fub25pY2FsTmFtZV0gOiAwXG5cdFx0XHRcdFx0KTtcblx0XHRcdFx0fVxuXHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0Ly8gTm8gbWF0Y2ggZm91bmQgLSB0aGlzIGlzIGEgdHJ1bHkgbmV3IGVsZW1lbnQgT1IgZWxlbWVudCBoYXMgZXhpc3RpbmcgSUQgYnV0IG5vIHNhdmVkIG1hdGNoXG5cdFx0XHRcdGlmICghaWQpIHtcblx0XHRcdFx0XHQvLyBHZW5lcmF0ZSBuZXcgSUQgdXNpbmcgY2Fub25pY2FsIG5hbWVcblx0XHRcdFx0XHRpbmRleCA9IChjYW5vbmljYWxOYW1lIGluIHBsdWdpbkVsZW1lbnRDb3VudCkgPyBwbHVnaW5FbGVtZW50Q291bnRbY2Fub25pY2FsTmFtZV0gKyAxIDogMTtcblx0XHRcdFx0XHRpZCA9IGAke2Nhbm9uaWNhbE5hbWV9OyR7aW5kZXh9YDtcblx0XHRcdFx0XHRwbHVnaW5FbGVtZW50Q291bnRbY2Fub25pY2FsTmFtZV0gPSBpbmRleDtcblx0XHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0XHQvLyBFbGVtZW50IGhhcyBleGlzdGluZyBJRCBidXQgbm8gc2F2ZWQgbWF0Y2hcblx0XHRcdFx0XHQvLyBOb3JtYWxpemUgdGhlIElEIHRvIHVzZSBjYW5vbmljYWwgbmFtZSAocmVtb3ZlcyBkeW5hbWljIGNsYXNzZXMgZnJvbSBJRClcblx0XHRcdFx0XHQvLyBUaGlzIGVuc3VyZXMgY29uc2lzdGVuY3kgYW5kIHByZXZlbnRzIGR1cGxpY2F0ZXNcblx0XHRcdFx0XHRjb25zdCBleGlzdGluZ0Nhbm9uaWNhbE5hbWUgPSB0aGlzLmdldENhbm9uaWNhbE5hbWVGcm9tSWQoaWQpO1xuXHRcdFx0XHRcdGlmIChleGlzdGluZ0Nhbm9uaWNhbE5hbWUgIT09IGNhbm9uaWNhbE5hbWUpIHtcblx0XHRcdFx0XHRcdC8vIElEIGhhcyBkaWZmZXJlbnQgY2Fub25pY2FsIG5hbWUgLSB1cGRhdGUgdG8gdXNlIGN1cnJlbnQgY2Fub25pY2FsIG5hbWVcblx0XHRcdFx0XHRcdC8vIFByZXNlcnZlIHRoZSBpbmRleCBpZiBpdCBtYWtlcyBzZW5zZSwgb3RoZXJ3aXNlIGdlbmVyYXRlIG5ldyBvbmVcblx0XHRcdFx0XHRcdGNvbnN0IGV4aXN0aW5nSW5kZXggPSBwYXJzZUludChpZC5zcGxpdCgnOycpLnBvcCgpIHx8ICcxJywgMTApO1xuXHRcdFx0XHRcdFx0aW5kZXggPSAoY2Fub25pY2FsTmFtZSBpbiBwbHVnaW5FbGVtZW50Q291bnQpID8gXG5cdFx0XHRcdFx0XHRcdE1hdGgubWF4KHBsdWdpbkVsZW1lbnRDb3VudFtjYW5vbmljYWxOYW1lXSArIDEsIGV4aXN0aW5nSW5kZXgpIDogXG5cdFx0XHRcdFx0XHRcdGV4aXN0aW5nSW5kZXg7XG5cdFx0XHRcdFx0XHRpZCA9IGAke2Nhbm9uaWNhbE5hbWV9OyR7aW5kZXh9YDtcblx0XHRcdFx0XHRcdHBsdWdpbkVsZW1lbnRDb3VudFtjYW5vbmljYWxOYW1lXSA9IGluZGV4O1xuXHRcdFx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdFx0XHQvLyBJRCBhbHJlYWR5IHVzZXMgY2Fub25pY2FsIG5hbWUgLSBwcmVzZXJ2ZSBpdFxuXHRcdFx0XHRcdFx0Ly8gVGhlIGluZGV4IGFuZCBuYW1lIHdlcmUgYWxyZWFkeSBzZXQgYWJvdmUgd2hlbiB3ZSBwYXJzZWQgdGhlIGV4aXN0aW5nIElEXG5cdFx0XHRcdFx0fVxuXHRcdFx0XHR9XG5cdFx0XHR9XG5cblx0XHRcdC8vIFNldCB0aGUgSUQgb24gdGhlIGVsZW1lbnRcblx0XHRcdGVsZW1lbnQuc2V0QXR0cmlidXRlKCdkYXRhLXVpLXR3ZWFrZXItc3RhdHVzLWJhci1pZCcsIGlkKTtcblxuXHRcdFx0Ly8gR2V0IGVsZW1lbnQgbmFtZSBmb3IgZGlzcGxheSAodXNlIHRleHQgY29udGVudCBvciBhcmlhLWxhYmVsIGZvciBiZXR0ZXIgbmFtZXMpXG5cdFx0XHRsZXQgZWxlbWVudE5hbWUgPSBlbGVtZW50LmdldEF0dHJpYnV0ZSgnYXJpYS1sYWJlbCcpIHx8IFxuXHRcdFx0XHRlbGVtZW50LmdldEF0dHJpYnV0ZSgndGl0bGUnKSB8fFxuXHRcdFx0XHRlbGVtZW50LnRleHRDb250ZW50Py50cmltKCkgfHwgXG5cdFx0XHRcdG51bGw7XG5cblx0XHRcdC8vIElmIHdlIGhhdmUgYSBtZWFuaW5nZnVsIG5hbWUgZnJvbSBjb250ZW50LCBlbmhhbmNlIGl0XG5cdFx0XHRpZiAoZWxlbWVudE5hbWUgJiYgZWxlbWVudE5hbWUubGVuZ3RoID4gMCAmJiBlbGVtZW50TmFtZS5sZW5ndGggPCAxMDApIHtcblx0XHRcdFx0Ly8gVXNlIHRoZSBjb250ZW50IGFzIHRoZSBuYW1lIChlLmcuLCBcIm1hc3RlclwiIGZvciBicmFuY2ggZGlzcGxheSlcblx0XHRcdFx0Ly8gRG9uJ3Qgb3ZlcnJpZGUgaWYgaXQncyB0b28gbG9uZyAobWlnaHQgYmUgZHluYW1pYyBjb250ZW50KVxuXHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0Ly8gRmFsbCBiYWNrIHRvIElELWJhc2VkIG5hbWVcblx0XHRcdFx0ZWxlbWVudE5hbWUgPSBpZC5zcGxpdCgnOycpWzBdIHx8ICdTdGF0dXMgYmFyIGl0ZW0nO1xuXHRcdFx0fVxuXG5cdFx0XHQvLyBJZiB0aGlzIGlzIGEgbmV3IGl0ZW0gKG5vdCBpbiBzYXZlZCBpdGVtcyksIGFkZCBpdCB0byBzZXR0aW5nc1xuXHRcdFx0aWYgKCFzYXZlZEl0ZW1zTWFwLmhhcyhpZCkpIHtcblx0XHRcdFx0bmV3SXRlbXMucHVzaCh7XG5cdFx0XHRcdFx0aWQ6IGlkLFxuXHRcdFx0XHRcdG5hbWU6IGVsZW1lbnROYW1lLFxuXHRcdFx0XHRcdHR5cGU6ICdleGlzdGluZycsXG5cdFx0XHRcdFx0aGlkZGVuOiBmYWxzZSxcblx0XHRcdFx0XHRtZE9ubHk6IGZhbHNlLFxuXHRcdFx0XHR9KTtcblx0XHRcdH1cblx0XHR9KTtcblxuXHRcdC8vIEFkZCBuZXcgaXRlbXMgdG8gc2V0dGluZ3MgKHByZXNlcnZlIGV4aXN0aW5nIGl0ZW1zIHRoYXQgYXJlbid0IGN1cnJlbnRseSB2aXNpYmxlKVxuXHRcdGlmIChuZXdJdGVtcy5sZW5ndGggPiAwKSB7XG5cdFx0XHR0aGlzLnBsdWdpbi5zZXR0aW5ncy5zdGF0dXNCYXJJdGVtcy5wdXNoKC4uLm5ld0l0ZW1zKTtcblx0XHRcdC8vIFNhdmUgaW1tZWRpYXRlbHkgdG8gcHJldmVudCBkdXBsaWNhdGVzXG5cdFx0XHR2b2lkIHRoaXMucGx1Z2luLnNhdmVTZXR0aW5ncygpO1xuXHRcdH1cblxuXHRcdC8vIEl0ZW1zIGluIHNldHRpbmdzIGJ1dCBub3QgY3VycmVudGx5IHZpc2libGUgYXJlIGtlcHQgKGxpa2UgU3RhdHVzIEJhciBPcmdhbml6ZXIpXG5cdFx0Ly8gVGhleSdsbCBzaG93IHVwIGluIHRoZSBVSSBidXQgbWFya2VkIGFzIFwibm90IGN1cnJlbnRseSB2aXNpYmxlXCJcblx0fVxuXG5cdC8qKlxuXHQgKiBSZW9yZGVyIGFuZCBhcHBseSB2aXNpYmlsaXR5IHRvIGFsbCBzdGF0dXMgYmFyIGl0ZW1zIChsaWtlIFN0YXR1cyBCYXIgT3JnYW5pemVyKVxuXHQgKiBIYW5kbGVzIHN0aWNreSBpdGVtcyAobGVmdC9yaWdodCkgYW5kIGl0ZW1zIHRoYXQgYXJlbid0IGN1cnJlbnRseSB2aXNpYmxlXG5cdCAqIFxuXHQgKiBOb3RlOiBJdGVtcyB3aXRoIHRoZSBzYW1lIHN0aWNreSBwb3NpdGlvbiBtYWludGFpbiB0aGVpciByZWxhdGl2ZSBvcmRlclxuXHQgKiAoZS5nLiwgaWYgMyBpdGVtcyBhcmUgc3RpY2t5LWxlZnQsIHRoZXkgYXBwZWFyIGluIHRoZSBvcmRlciB0aGV5J3JlIGluIHNldHRpbmdzKVxuXHQgKi9cblx0cHVibGljIHJlb3JkZXIoKTogdm9pZCB7XG5cdFx0aWYgKCF0aGlzLmNvbnRhaW5lcikgcmV0dXJuO1xuXHRcdFxuXHRcdC8vIFNldCBmbGFnIHRvIHByZXZlbnQgb2JzZXJ2ZXIgZnJvbSB0cmlnZ2VyaW5nIGR1cmluZyByZW9yZGVyXG5cdFx0dGhpcy5pc1Jlb3JkZXJpbmcgPSB0cnVlO1xuXG5cdFx0Ly8gUmVtb3ZlIGFsbCBjdXN0b20gYWN0aW9ucyBmaXJzdFxuXHRcdHRoaXMuY3VzdG9tQWN0aW9ucy5mb3JFYWNoKChhY3Rpb24pID0+IGFjdGlvbi5yZW1vdmUoKSk7XG5cdFx0dGhpcy5jdXN0b21BY3Rpb25zLmNsZWFyKCk7XG5cblx0XHQvLyBHZXQgYWxsIGV4aXN0aW5nIHN0YXR1cyBiYXIgaXRlbXMgKGV4Y2x1ZGluZyBvdXIgY3VzdG9tIG9uZXMpXG5cdFx0Y29uc3QgYWxsRXhpc3RpbmdFbGVtZW50cyA9IEFycmF5LmZyb20odGhpcy5jb250YWluZXIuY2hpbGRyZW4pLmZpbHRlcihcblx0XHRcdGVsID0+IGVsLmNsYXNzTGlzdC5jb250YWlucygnc3RhdHVzLWJhci1pdGVtJykgJiYgIWVsLmNsYXNzTGlzdC5jb250YWlucygndWktdHdlYWtlci1zdGF0dXMtYmFyLWl0ZW0nKVxuXHRcdCkgYXMgSFRNTEVsZW1lbnRbXTtcblxuXHRcdC8vIFNlcGFyYXRlIGl0ZW1zIGJ5IHN0aWNreSBwb3NpdGlvblxuXHRcdGNvbnN0IGxlZnRTdGlja3k6IEhUTUxFbGVtZW50W10gPSBbXTtcblx0XHRjb25zdCByaWdodFN0aWNreTogSFRNTEVsZW1lbnRbXSA9IFtdO1xuXHRcdGNvbnN0IHJlZ3VsYXI6IEhUTUxFbGVtZW50W10gPSBbXTtcblx0XHRjb25zdCBhY3RpdmVMZWFmID0gdGhpcy5wbHVnaW4uYXBwLndvcmtzcGFjZS5nZXRNb3N0UmVjZW50TGVhZigpO1xuXG5cdFx0Ly8gUHJvY2VzcyBpdGVtcyBpbiBvcmRlciBmcm9tIHNldHRpbmdzXG5cdFx0Zm9yIChjb25zdCBpdGVtIG9mIHRoaXMuaXRlbXMpIHtcblx0XHRcdC8vIENoZWNrIHZpc2liaWxpdHlcblx0XHRcdGlmIChpdGVtLmhpZGRlbikge1xuXHRcdFx0XHQvLyBIaWRlIGV4aXN0aW5nIGl0ZW1zXG5cdFx0XHRcdGlmIChpdGVtLnR5cGUgPT09ICdleGlzdGluZycpIHtcblx0XHRcdFx0XHRjb25zdCBlbGVtZW50ID0gYWxsRXhpc3RpbmdFbGVtZW50cy5maW5kKChlbCkgPT4gXG5cdFx0XHRcdFx0XHRlbC5nZXRBdHRyaWJ1dGUoJ2RhdGEtdWktdHdlYWtlci1zdGF0dXMtYmFyLWlkJykgPT09IGl0ZW0uaWRcblx0XHRcdFx0XHQpO1xuXHRcdFx0XHRcdGlmIChlbGVtZW50KSB7XG5cdFx0XHRcdFx0XHRlbGVtZW50LmFkZENsYXNzKCd1aS10d2Vha2VyLXN0YXR1cy1iYXItaGlkZGVuJyk7XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHR9XG5cdFx0XHRcdGNvbnRpbnVlO1xuXHRcdFx0fVxuXG5cdFx0XHQvLyBDaGVjayBtZC9tZHgtb25seSBmaWx0ZXJcblx0XHRcdGlmIChpdGVtLm1kT25seSAmJiAhaXNNYXJrZG93blZpZXcoYWN0aXZlTGVhZikpIHtcblx0XHRcdFx0Ly8gSGlkZSBpZiBub3QgbWFya2Rvd24gdmlld1xuXHRcdFx0XHRpZiAoaXRlbS50eXBlID09PSAnZXhpc3RpbmcnKSB7XG5cdFx0XHRcdFx0Y29uc3QgZWxlbWVudCA9IGFsbEV4aXN0aW5nRWxlbWVudHMuZmluZCgoZWwpID0+IFxuXHRcdFx0XHRcdFx0ZWwuZ2V0QXR0cmlidXRlKCdkYXRhLXVpLXR3ZWFrZXItc3RhdHVzLWJhci1pZCcpID09PSBpdGVtLmlkXG5cdFx0XHRcdFx0KTtcblx0XHRcdFx0XHRpZiAoZWxlbWVudCkge1xuXHRcdFx0XHRcdFx0ZWxlbWVudC5hZGRDbGFzcygndWktdHdlYWtlci1zdGF0dXMtYmFyLWhpZGRlbicpO1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0fVxuXHRcdFx0XHRjb250aW51ZTtcblx0XHRcdH1cblxuXHRcdFx0aWYgKGl0ZW0udHlwZSA9PT0gJ2N1c3RvbScpIHtcblx0XHRcdFx0Ly8gQ2hlY2sgaWYgY29tbWFuZCBleGlzdHMgYW5kIG1vZGUgaXMgYWN0aXZlXG5cdFx0XHRcdGNvbnN0IGNvbW1hbmRzID0gKHRoaXMucGx1Z2luLmFwcCBhcyB7IGNvbW1hbmRzPzogeyBjb21tYW5kcz86IHsgW2lkOiBzdHJpbmddOiB7IGlkOiBzdHJpbmcgfSB9IH0gfSkuY29tbWFuZHM7XG5cdFx0XHRcdGNvbnN0IGNvbW1hbmQgPSBjb21tYW5kcz8uY29tbWFuZHM/LltpdGVtLmNvbW1hbmRJZCB8fCAnJ107XG5cdFx0XHRcdGNvbnN0IG1vZGUgPSBpdGVtLm1vZGUgfHwgJ2FueSc7XG5cdFx0XHRcdGlmIChjb21tYW5kICYmIGlzTW9kZUFjdGl2ZShtb2RlLCB0aGlzLnBsdWdpbikpIHtcblx0XHRcdFx0XHR0aGlzLmFkZEN1c3RvbUFjdGlvbihpdGVtKTtcblx0XHRcdFx0XHRjb25zdCBhY3Rpb24gPSB0aGlzLmN1c3RvbUFjdGlvbnMuZ2V0KGl0ZW0pO1xuXHRcdFx0XHRcdGlmIChhY3Rpb24pIHtcblx0XHRcdFx0XHRcdC8vIEFkZCB0byBhcHByb3ByaWF0ZSBsaXN0IGJhc2VkIG9uIHN0aWNreSBwb3NpdGlvblxuXHRcdFx0XHRcdFx0aWYgKGl0ZW0uc3RpY2t5ID09PSAnbGVmdCcpIHtcblx0XHRcdFx0XHRcdFx0bGVmdFN0aWNreS5wdXNoKGFjdGlvbik7XG5cdFx0XHRcdFx0XHR9IGVsc2UgaWYgKGl0ZW0uc3RpY2t5ID09PSAncmlnaHQnKSB7XG5cdFx0XHRcdFx0XHRcdHJpZ2h0U3RpY2t5LnB1c2goYWN0aW9uKTtcblx0XHRcdFx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdFx0XHRcdHJlZ3VsYXIucHVzaChhY3Rpb24pO1xuXHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdH1cblx0XHRcdFx0fVxuXHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0Ly8gRmluZCBleGlzdGluZyBlbGVtZW50IChtYXkgbm90IGV4aXN0IGlmIHBsdWdpbiBpc24ndCBsb2FkZWQpXG5cdFx0XHRcdGNvbnN0IGVsZW1lbnQgPSBhbGxFeGlzdGluZ0VsZW1lbnRzLmZpbmQoKGVsKSA9PiBcblx0XHRcdFx0XHRlbC5nZXRBdHRyaWJ1dGUoJ2RhdGEtdWktdHdlYWtlci1zdGF0dXMtYmFyLWlkJykgPT09IGl0ZW0uaWRcblx0XHRcdFx0KTtcblxuXHRcdFx0XHRpZiAoZWxlbWVudCkge1xuXHRcdFx0XHRcdGVsZW1lbnQucmVtb3ZlQ2xhc3MoJ3VpLXR3ZWFrZXItc3RhdHVzLWJhci1oaWRkZW4nKTtcblx0XHRcdFx0XHQvLyBBZGQgdG8gYXBwcm9wcmlhdGUgbGlzdCBiYXNlZCBvbiBzdGlja3kgcG9zaXRpb25cblx0XHRcdFx0XHRpZiAoaXRlbS5zdGlja3kgPT09ICdsZWZ0Jykge1xuXHRcdFx0XHRcdFx0bGVmdFN0aWNreS5wdXNoKGVsZW1lbnQpO1xuXHRcdFx0XHRcdH0gZWxzZSBpZiAoaXRlbS5zdGlja3kgPT09ICdyaWdodCcpIHtcblx0XHRcdFx0XHRcdHJpZ2h0U3RpY2t5LnB1c2goZWxlbWVudCk7XG5cdFx0XHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0XHRcdHJlZ3VsYXIucHVzaChlbGVtZW50KTtcblx0XHRcdFx0XHR9XG5cdFx0XHRcdH1cblx0XHRcdFx0Ly8gSWYgZWxlbWVudCBkb2Vzbid0IGV4aXN0LCBpdGVtIGlzIGtlcHQgaW4gc2V0dGluZ3MgYnV0IG5vdCBkaXNwbGF5ZWQgKGxpa2UgU3RhdHVzIEJhciBPcmdhbml6ZXIpXG5cdFx0XHR9XG5cdFx0fVxuXG5cdFx0Ly8gQ29tYmluZTogbGVmdCBzdGlja3kgaXRlbXMgZmlyc3QsIHRoZW4gcmVndWxhciBpdGVtcywgdGhlbiByaWdodCBzdGlja3kgaXRlbXNcblx0XHRjb25zdCBvcmRlcmVkRWxlbWVudHMgPSBbLi4ubGVmdFN0aWNreSwgLi4ucmVndWxhciwgLi4ucmlnaHRTdGlja3ldO1xuXG5cdFx0Ly8gUGh5c2ljYWxseSByZW9yZGVyIERPTSBlbGVtZW50cyAobGlrZSBTdGF0dXMgQmFyIE9yZ2FuaXplciBkb2VzKVxuXHRcdC8vIFRoaXMgaXMgbW9yZSByZWxpYWJsZSB0aGFuIENTUyBvcmRlciBwcm9wZXJ0eVxuXHRcdG9yZGVyZWRFbGVtZW50cy5mb3JFYWNoKChlbGVtZW50KSA9PiB7XG5cdFx0XHRpZiAodGhpcy5jb250YWluZXIgJiYgZWxlbWVudC5wYXJlbnRFbGVtZW50ID09PSB0aGlzLmNvbnRhaW5lcikge1xuXHRcdFx0XHR0aGlzLmNvbnRhaW5lci5hcHBlbmRDaGlsZChlbGVtZW50KTtcblx0XHRcdH1cblx0XHR9KTtcblxuXHRcdC8vIEFsc28gc2V0IENTUyBvcmRlciBhcyBiYWNrdXAgKGluIGNhc2UgY29udGFpbmVyIHVzZXMgZmxleGJveClcblx0XHRvcmRlcmVkRWxlbWVudHMuZm9yRWFjaCgoZWxlbWVudCwgaW5kZXgpID0+IHtcblx0XHRcdHNldENzc1Byb3BzKGVsZW1lbnQsIHsgb3JkZXI6IChpbmRleCArIDEpLnRvU3RyaW5nKCkgfSk7XG5cdFx0fSk7XG5cdFx0XG5cdFx0Ly8gQ2xlYXIgZmxhZyBhZnRlciBhIHNob3J0IGRlbGF5IHRvIGFsbG93IERPTSB0byBzZXR0bGVcblx0XHRzZXRUaW1lb3V0KCgpID0+IHtcblx0XHRcdHRoaXMuaXNSZW9yZGVyaW5nID0gZmFsc2U7XG5cdFx0fSwgNTApO1xuXHR9XG5cblx0LyoqXG5cdCAqIEFkZCBhIGN1c3RvbSBjb21tYW5kIGFjdGlvbiB0byB0aGUgc3RhdHVzIGJhciAobGlrZSBDb21tYW5kZXIpXG5cdCAqL1xuXHRwcml2YXRlIGFkZEN1c3RvbUFjdGlvbihpdGVtOiBTdGF0dXNCYXJJdGVtKTogdm9pZCB7XG5cdFx0aWYgKCF0aGlzLmNvbnRhaW5lciB8fCAhaXRlbS5jb21tYW5kSWQpIHJldHVybjtcblxuXHRcdC8vIERvbid0IGNyZWF0ZSBkdXBsaWNhdGUgaWYgYWxyZWFkeSBleGlzdHNcblx0XHRpZiAodGhpcy5jdXN0b21BY3Rpb25zLmhhcyhpdGVtKSkgcmV0dXJuO1xuXG5cdFx0Y29uc3QgYnRuID0gdGhpcy5jb250YWluZXIuY3JlYXRlRGl2KHtcblx0XHRcdGNsczogJ3VpLXR3ZWFrZXItc3RhdHVzLWJhci1pdGVtIHN0YXR1cy1iYXItaXRlbSBjbGlja2FibGUtaWNvbicsXG5cdFx0XHRhdHRyOiB7IFxuXHRcdFx0XHQnYXJpYS1sYWJlbCc6IGl0ZW0ubmFtZSxcblx0XHRcdFx0J2RhdGEtdG9vbHRpcC1wb3NpdGlvbic6ICd0b3AnLFxuXHRcdFx0XHQnZGF0YS11aS10d2Vha2VyLXN0YXR1cy1iYXItaWQnOiBpdGVtLmlkLFxuXHRcdFx0fSxcblx0XHR9KTtcblxuXHRcdGlmIChpdGVtLmljb24pIHtcblx0XHRcdHNldEljb24oYnRuLCBpdGVtLmljb24pO1xuXHRcdH1cblxuXHRcdC8vIEFwcGx5IGNvbG9yIGlmIHNldFxuXHRcdGlmIChpdGVtLmNvbG9yICYmIGl0ZW0uY29sb3IgIT09ICcjMDAwMDAwJykge1xuXHRcdFx0c2V0Q3NzUHJvcHMoYnRuLCB7IGNvbG9yOiBpdGVtLmNvbG9yIH0pO1xuXHRcdH1cblxuXHRcdGJ0bi5vbmNsaWNrID0gKCk6IHZvaWQgPT4ge1xuXHRcdFx0Y29uc3QgY29tbWFuZHMgPSAodGhpcy5wbHVnaW4uYXBwIGFzIHsgY29tbWFuZHM/OiB7IGV4ZWN1dGVDb21tYW5kQnlJZD86IChpZDogc3RyaW5nKSA9PiBQcm9taXNlPHZvaWQ+IH0gfSkuY29tbWFuZHM7XG5cdFx0XHRpZiAoY29tbWFuZHM/LmV4ZWN1dGVDb21tYW5kQnlJZCAmJiBpdGVtLmNvbW1hbmRJZCkge1xuXHRcdFx0XHR2b2lkIGNvbW1hbmRzLmV4ZWN1dGVDb21tYW5kQnlJZChpdGVtLmNvbW1hbmRJZCk7XG5cdFx0XHR9XG5cdFx0fTtcblxuXHRcdGJ0bi5hZGRFdmVudExpc3RlbmVyKCdjb250ZXh0bWVudScsIChldmVudCkgPT4ge1xuXHRcdFx0ZXZlbnQuc3RvcEltbWVkaWF0ZVByb3BhZ2F0aW9uKCk7XG5cdFx0XHRuZXcgTWVudSgpXG5cdFx0XHRcdC5hZGRJdGVtKChtZW51SXRlbSkgPT4ge1xuXHRcdFx0XHRcdG1lbnVJdGVtLnNldFRpdGxlKCdDaGFuZ2UgaWNvbicpXG5cdFx0XHRcdFx0XHQuc2V0SWNvbignbHVjaWRlLWltYWdlLXBsdXMnKVxuXHRcdFx0XHRcdFx0Lm9uQ2xpY2soKCkgPT4ge1xuXHRcdFx0XHRcdFx0XHRjb25zdCBtb2RhbCA9IG5ldyBJY29uUGlja2VyTW9kYWwodGhpcy5wbHVnaW4uYXBwLCAoaWNvbklkKSA9PiB7XG5cdFx0XHRcdFx0XHRcdFx0aWYgKGljb25JZCAmJiBpY29uSWQgIT09IGl0ZW0uaWNvbikge1xuXHRcdFx0XHRcdFx0XHRcdFx0aXRlbS5pY29uID0gaWNvbklkO1xuXHRcdFx0XHRcdFx0XHRcdFx0dm9pZCB0aGlzLnBsdWdpbi5zYXZlU2V0dGluZ3MoKTtcblx0XHRcdFx0XHRcdFx0XHRcdHRoaXMucmVvcmRlcigpO1xuXHRcdFx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHRcdFx0fSk7XG5cdFx0XHRcdFx0XHRcdG1vZGFsLm9wZW4oKTtcblx0XHRcdFx0XHRcdH0pO1xuXHRcdFx0XHR9KVxuXHRcdFx0XHQuYWRkSXRlbSgobWVudUl0ZW0pID0+IHtcblx0XHRcdFx0XHRtZW51SXRlbS5zZXRUaXRsZSgnRGVsZXRlJylcblx0XHRcdFx0XHRcdC5zZXRJY29uKCdsdWNpZGUtdHJhc2gnKVxuXHRcdFx0XHRcdFx0Lm9uQ2xpY2soKCkgPT4ge1xuXHRcdFx0XHRcdFx0XHR2b2lkIHRoaXMucmVtb3ZlSXRlbShpdGVtKTtcblx0XHRcdFx0XHRcdH0pO1xuXHRcdFx0XHRcdC8vIEFkZCB3YXJuaW5nIGNsYXNzIHRvIG1ha2UgdGV4dCBhbmQgaWNvbiByZWRcblx0XHRcdFx0XHQvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L25vLXVuc2FmZS1tZW1iZXItYWNjZXNzLCBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tZXhwbGljaXQtYW55LCBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tdW5zYWZlLWFzc2lnbm1lbnRcblx0XHRcdFx0XHRjb25zdCBkb20gPSAobWVudUl0ZW0gYXMgYW55KS5kb207XG5cdFx0XHRcdFx0aWYgKGRvbSkge1xuXHRcdFx0XHRcdFx0Ly8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9uby11bnNhZmUtY2FsbCwgQHR5cGVzY3JpcHQtZXNsaW50L25vLXVuc2FmZS1tZW1iZXItYWNjZXNzXG5cdFx0XHRcdFx0XHRkb20uY2xhc3NMaXN0LmFkZCgnbW9kLXdhcm5pbmcnKTtcblx0XHRcdFx0XHRcdC8vIEFsc28gbWFrZSB0aGUgaWNvbiByZWRcblx0XHRcdFx0XHRcdC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tdW5zYWZlLWFzc2lnbm1lbnQsIEB0eXBlc2NyaXB0LWVzbGludC9uby11bnNhZmUtY2FsbCwgQHR5cGVzY3JpcHQtZXNsaW50L25vLXVuc2FmZS1tZW1iZXItYWNjZXNzXG5cdFx0XHRcdFx0XHRjb25zdCBpY29uRWwgPSBkb20ucXVlcnlTZWxlY3RvcignLm1lbnUtaXRlbS1pY29uIHN2ZycpO1xuXHRcdFx0XHRcdFx0aWYgKGljb25FbCkge1xuXHRcdFx0XHRcdFx0XHQvLyBVc2Ugc2V0Q3NzUHJvcHMgdG8gc2V0IGNvbG9yIChhbHJlYWR5IGltcG9ydGVkIGZyb20gdWlNYW5hZ2VyKVxuXHRcdFx0XHRcdFx0XHRzZXRDc3NQcm9wcyhpY29uRWwgYXMgSFRNTEVsZW1lbnQsIHsgY29sb3I6ICd2YXIoLS10ZXh0LWVycm9yKScgfSk7XG5cdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHR9KVxuXHRcdFx0XHQuc2hvd0F0TW91c2VFdmVudChldmVudCk7XG5cdFx0fSk7XG5cblx0XHR0aGlzLmN1c3RvbUFjdGlvbnMuc2V0KGl0ZW0sIGJ0bik7XG5cdH1cblxuXHQvKipcblx0ICogQWRkIGEgbmV3IGN1c3RvbSBjb21tYW5kIGl0ZW1cblx0ICovXG5cdHB1YmxpYyBhc3luYyBhZGRDdXN0b21Db21tYW5kKHBhaXI6IENvbW1hbmRJY29uUGFpcik6IFByb21pc2U8dm9pZD4ge1xuXHRcdGlmICghdGhpcy5wbHVnaW4uc2V0dGluZ3Muc3RhdHVzQmFySXRlbXMpIHtcblx0XHRcdHRoaXMucGx1Z2luLnNldHRpbmdzLnN0YXR1c0Jhckl0ZW1zID0gW107XG5cdFx0fVxuXG5cdFx0Ly8gQ29udmVydCBzaG93T25GaWxlVHlwZXMgdG8gbWRPbmx5IGZvciBTdGF0dXNCYXJJdGVtIChTdGF0dXNCYXJJdGVtIHN0aWxsIHVzZXMgbWRPbmx5KVxuXHRcdC8vIElmIHNob3dPbkZpbGVUeXBlcyBpbmNsdWRlcyBcIm1kXCIgb3IgXCJtZHhcIiwgc2V0IG1kT25seSB0byB0cnVlXG5cdFx0Y29uc3QgaGFzTWFya2Rvd25GaWx0ZXIgPSBwYWlyLnNob3dPbkZpbGVUeXBlcyAmJiBcblx0XHRcdChwYWlyLnNob3dPbkZpbGVUeXBlcy5pbmNsdWRlcygnbWQnKSB8fCBwYWlyLnNob3dPbkZpbGVUeXBlcy5pbmNsdWRlcygnbWR4JykpO1xuXHRcdGNvbnN0IG1kT25seSA9IGhhc01hcmtkb3duRmlsdGVyID8gdHJ1ZSA6IGZhbHNlO1xuXG5cdFx0Y29uc3QgaXRlbTogU3RhdHVzQmFySXRlbSA9IHtcblx0XHRcdGlkOiBgY3VzdG9tLSR7cGFpci5pZH1gLFxuXHRcdFx0bmFtZTogcGFpci5uYW1lLFxuXHRcdFx0ZGlzcGxheU5hbWU6IHBhaXIuZGlzcGxheU5hbWUsXG5cdFx0XHRpY29uOiBwYWlyLmljb24sXG5cdFx0XHR0eXBlOiAnY3VzdG9tJyxcblx0XHRcdGhpZGRlbjogZmFsc2UsXG5cdFx0XHRtZE9ubHk6IG1kT25seSxcblx0XHRcdGNvbW1hbmRJZDogcGFpci5pZCxcblx0XHRcdGNvbG9yOiBwYWlyLmNvbG9yLFxuXHRcdFx0bW9kZTogcGFpci5tb2RlLFxuXHRcdH07XG5cblx0XHR0aGlzLnBsdWdpbi5zZXR0aW5ncy5zdGF0dXNCYXJJdGVtcy5wdXNoKGl0ZW0pO1xuXHRcdHRoaXMucmVvcmRlcigpO1xuXHRcdGF3YWl0IHRoaXMucGx1Z2luLnNhdmVTZXR0aW5ncygpO1xuXHR9XG5cblx0LyoqXG5cdCAqIFJlbW92ZSBhbiBpdGVtXG5cdCAqL1xuXHRwdWJsaWMgYXN5bmMgcmVtb3ZlSXRlbShpdGVtOiBTdGF0dXNCYXJJdGVtKTogUHJvbWlzZTx2b2lkPiB7XG5cdFx0aWYgKCF0aGlzLnBsdWdpbi5zZXR0aW5ncy5zdGF0dXNCYXJJdGVtcykgcmV0dXJuO1xuXHRcdGNvbnN0IGluZGV4ID0gdGhpcy5wbHVnaW4uc2V0dGluZ3Muc3RhdHVzQmFySXRlbXMuaW5kZXhPZihpdGVtKTtcblx0XHRpZiAoaW5kZXggPiAtMSkge1xuXHRcdFx0dGhpcy5wbHVnaW4uc2V0dGluZ3Muc3RhdHVzQmFySXRlbXMuc3BsaWNlKGluZGV4LCAxKTtcblx0XHR9XG5cdFx0dGhpcy5yZW9yZGVyKCk7XG5cdFx0YXdhaXQgdGhpcy5wbHVnaW4uc2F2ZVNldHRpbmdzKCk7XG5cdH1cblxuXHQvKipcblx0ICogVXBkYXRlIGl0ZW0gdmlzaWJpbGl0eVxuXHQgKi9cblx0cHVibGljIGFzeW5jIHVwZGF0ZUl0ZW1WaXNpYmlsaXR5KGl0ZW06IFN0YXR1c0Jhckl0ZW0sIGhpZGRlbjogYm9vbGVhbik6IFByb21pc2U8dm9pZD4ge1xuXHRcdGl0ZW0uaGlkZGVuID0gaGlkZGVuO1xuXHRcdHRoaXMucmVvcmRlcigpO1xuXHRcdGF3YWl0IHRoaXMucGx1Z2luLnNhdmVTZXR0aW5ncygpO1xuXHR9XG5cblx0LyoqXG5cdCAqIFVwZGF0ZSBpdGVtIG1kL21keC1vbmx5IHNldHRpbmdcblx0ICovXG5cdHB1YmxpYyBhc3luYyB1cGRhdGVJdGVtTWRPbmx5KGl0ZW06IFN0YXR1c0Jhckl0ZW0sIG1kT25seTogYm9vbGVhbik6IFByb21pc2U8dm9pZD4ge1xuXHRcdGl0ZW0ubWRPbmx5ID0gbWRPbmx5O1xuXHRcdHRoaXMucmVvcmRlcigpO1xuXHRcdGF3YWl0IHRoaXMucGx1Z2luLnNhdmVTZXR0aW5ncygpO1xuXHR9XG5cblx0LyoqXG5cdCAqIFVwZGF0ZSBidXR0b24gbmFtZXMvdG9vbHRpcHMgZm9yIGFsbCBleGlzdGluZyBjdXN0b20gYnV0dG9uc1xuXHQgKi9cblx0cHVibGljIHVwZGF0ZUJ1dHRvbk5hbWVzKCk6IHZvaWQge1xuXHRcdHRoaXMuY3VzdG9tQWN0aW9ucy5mb3JFYWNoKChidXR0b24sIGl0ZW0pID0+IHtcblx0XHRcdGJ1dHRvbi5zZXRBdHRyaWJ1dGUoJ2FyaWEtbGFiZWwnLCBpdGVtLm5hbWUpO1xuXHRcdFx0Ly8gVXBkYXRlIGNvbG9yIGlmIG5lZWRlZFxuXHRcdFx0aWYgKGl0ZW0uY29sb3IgJiYgaXRlbS5jb2xvciAhPT0gJyMwMDAwMDAnKSB7XG5cdFx0XHRcdHNldENzc1Byb3BzKGJ1dHRvbiwgeyBjb2xvcjogaXRlbS5jb2xvciB9KTtcblx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdGJ1dHRvbi5zdHlsZS5yZW1vdmVQcm9wZXJ0eSgnY29sb3InKTtcblx0XHRcdH1cblx0XHR9KTtcblx0fVxufVxuIiwgIi8qKlxyXG4gKiBFeHBsb3JlciBNYW5hZ2VyIC0gTWFuYWdlcyBjdXN0b20gY29tbWFuZCBidXR0b25zIGluIHRoZSBmaWxlIGV4cGxvcmVyIG5hdmlnYXRpb24gYXJlYVxyXG4gKiBCYXNlZCBvbiBDb21tYW5kZXIncyBFeHBsb3Jlck1hbmFnZXIsIGJ1dCB3aXRoIG5hdGl2ZSBDU1MgY2xhc3Nlc1xyXG4gKi9cclxuXHJcbmltcG9ydCB7IFdvcmtzcGFjZUxlYWYsIHNldEljb24sIE1lbnUgfSBmcm9tICdvYnNpZGlhbic7XHJcbmltcG9ydCBVSVR3ZWFrZXJQbHVnaW4gZnJvbSAnLi4vbWFpbic7XHJcbmltcG9ydCB7IENvbW1hbmRJY29uUGFpciwgRXhwbG9yZXJCdXR0b25JdGVtIH0gZnJvbSAnLi4vdHlwZXMnO1xyXG5pbXBvcnQgeyBpc01vZGVBY3RpdmUsIGlzQ29tbWFuZENoZWNrZWQgfSBmcm9tICcuLi91dGlscy9jb21tYW5kVXRpbHMnO1xyXG5pbXBvcnQgeyBJY29uUGlja2VyTW9kYWwgfSBmcm9tICcuLi9tb2RhbHMvSWNvblBpY2tlck1vZGFsJztcclxuaW1wb3J0IHsgc2V0Q3NzUHJvcHMgfSBmcm9tICcuLi91aU1hbmFnZXInO1xyXG5cclxuZXhwb3J0IGNsYXNzIEV4cGxvcmVyTWFuYWdlciB7XHJcblx0cHJpdmF0ZSBwbHVnaW46IFVJVHdlYWtlclBsdWdpbjtcclxuXHRwcml2YXRlIGJ1dHRvbnM6IE1hcDxzdHJpbmcsIEhUTUxFbGVtZW50PiA9IG5ldyBNYXAoKTtcclxuXHRwcml2YXRlIG9ic2VydmVyczogTXV0YXRpb25PYnNlcnZlcltdID0gW107XHJcblx0cHJpdmF0ZSBpc1Jlb3JkZXJpbmcgPSBmYWxzZTsgLy8gRmxhZyB0byBwcmV2ZW50IG9ic2VydmVyIGZyb20gdHJpZ2dlcmluZyBkdXJpbmcgcmVvcmRlclxyXG5cclxuXHRjb25zdHJ1Y3RvcihwbHVnaW46IFVJVHdlYWtlclBsdWdpbikge1xyXG5cdFx0dGhpcy5wbHVnaW4gPSBwbHVnaW47XHJcblx0XHR0aGlzLmluaXQoKTtcclxuXHR9XHJcblxyXG5cdHByaXZhdGUgaW5pdCgpOiB2b2lkIHtcclxuXHRcdC8vIFdhaXQgZm9yIHdvcmtzcGFjZSB0byBiZSByZWFkeVxyXG5cdFx0dGhpcy5wbHVnaW4uYXBwLndvcmtzcGFjZS5vbkxheW91dFJlYWR5KCgpID0+IHtcclxuXHRcdFx0Ly8gSW5pdGlhbGl6ZSBpdGVtcyBhcnJheSBpZiBuZWVkZWRcclxuXHRcdFx0aWYgKCF0aGlzLnBsdWdpbi5zZXR0aW5ncy5leHBsb3JlckJ1dHRvbkl0ZW1zKSB7XHJcblx0XHRcdFx0dGhpcy5wbHVnaW4uc2V0dGluZ3MuZXhwbG9yZXJCdXR0b25JdGVtcyA9IFtdO1xyXG5cdFx0XHR9XHJcblxyXG5cdFx0XHQvLyBNaWdyYXRlIGV4aXN0aW5nIGV4cGxvcmVyQ29tbWFuZHMgaWYgbmVlZGVkXHJcblx0XHRcdHRoaXMubWlncmF0ZUV4cGxvcmVyQ29tbWFuZHMoKTtcclxuXHJcblx0XHRcdC8vIENvbnNvbGlkYXRlIHNldHRpbmdzIGFuZCBlbGVtZW50cyAoZGV0ZWN0IGFsbCBidXR0b25zKVxyXG5cdFx0XHR0aGlzLmNvbnNvbGlkYXRlU2V0dGluZ3NBbmRFbGVtZW50cygpO1xyXG5cclxuXHRcdFx0Ly8gU2V0IHVwIGxheW91dCBjaGFuZ2UgbGlzdGVuZXIgb25jZSAobGlrZSBDb21tYW5kZXIgZG9lcylcclxuXHRcdFx0dGhpcy5wbHVnaW4ucmVnaXN0ZXJFdmVudChcclxuXHRcdFx0XHR0aGlzLnBsdWdpbi5hcHAud29ya3NwYWNlLm9uKCdsYXlvdXQtY2hhbmdlJywgKCkgPT4ge1xyXG5cdFx0XHRcdFx0dGhpcy5jb25zb2xpZGF0ZVNldHRpbmdzQW5kRWxlbWVudHMoKTtcclxuXHRcdFx0XHRcdHRoaXMucmVvcmRlcigpO1xyXG5cdFx0XHRcdFx0Ly8gQXBwbHkgbmF0aXZlIGljb24gb3ZlcnJpZGVzIGFmdGVyIGxheW91dCBjaGFuZ2VzXHJcblx0XHRcdFx0XHR0aGlzLmFwcGx5TmF0aXZlSWNvbk92ZXJyaWRlcygpO1xyXG5cdFx0XHRcdH0pXHJcblx0XHRcdCk7XHJcblx0XHRcdFxyXG5cdFx0XHQvLyBBZGQgYnV0dG9ucyB0byBhbGwgZXhpc3RpbmcgZXhwbG9yZXJzXHJcblx0XHRcdHRoaXMuYWRkQnV0dG9uc1RvQWxsTGVhdmVzKCk7XHJcblx0XHRcdFxyXG5cdFx0XHQvLyBTZXQgdXAgbXV0YXRpb24gb2JzZXJ2ZXIgZm9yIGV4dGVybmFsIGJ1dHRvbiBkZXRlY3Rpb24gKGFmdGVyIGV4cGxvcmVycyBhcmUgcmVhZHkpXHJcblx0XHRcdHNldFRpbWVvdXQoKCkgPT4ge1xyXG5cdFx0XHRcdHRoaXMuc2V0dXBNdXRhdGlvbk9ic2VydmVyKCk7XHJcblx0XHRcdH0sIDEwMCk7XHJcblxyXG5cdFx0XHQvLyBSZWdpc3RlciBjbGVhbnVwXHJcblx0XHRcdHRoaXMucGx1Z2luLnJlZ2lzdGVyKCgpID0+IHtcclxuXHRcdFx0XHR0aGlzLm9ic2VydmVycy5mb3JFYWNoKG9ic2VydmVyID0+IG9ic2VydmVyLmRpc2Nvbm5lY3QoKSk7XHJcblx0XHRcdFx0dGhpcy5vYnNlcnZlcnMgPSBbXTtcclxuXHRcdFx0fSk7XHJcblx0XHR9KTtcclxuXHR9XHJcblxyXG5cdHByaXZhdGUgYWRkQnV0dG9uc1RvQWxsTGVhdmVzKCk6IHZvaWQge1xyXG5cdFx0Y29uc3QgZXhwbG9yZXJzID0gdGhpcy5wbHVnaW4uYXBwLndvcmtzcGFjZS5nZXRMZWF2ZXNPZlR5cGUoJ2ZpbGUtZXhwbG9yZXInKTtcclxuXHRcdGV4cGxvcmVycy5mb3JFYWNoKChsZWFmKSA9PiB7XHJcblx0XHRcdHRoaXMuYWRkQnV0dG9uc1RvRXhwbG9yZXIobGVhZik7XHJcblx0XHR9KTtcclxuXHR9XHJcblxyXG5cdHByaXZhdGUgYWRkQnV0dG9uc1RvRXhwbG9yZXIobGVhZjogV29ya3NwYWNlTGVhZik6IHZvaWQge1xyXG5cdFx0Ly8gRmluZCB0aGUgbmF2LWJ1dHRvbnMtY29udGFpbmVyIChsaWtlIENvbW1hbmRlciBkb2VzKVxyXG5cdFx0Y29uc3QgbmF2QnV0dG9uc0NvbnRhaW5lciA9IGxlYWYudmlldz8uY29udGFpbmVyRWw/LnF1ZXJ5U2VsZWN0b3IoJ2Rpdi5uYXYtYnV0dG9ucy1jb250YWluZXInKSBhcyBIVE1MRWxlbWVudDtcclxuXHRcdGlmICghbmF2QnV0dG9uc0NvbnRhaW5lcikge1xyXG5cdFx0XHRyZXR1cm47XHJcblx0XHR9XHJcblxyXG5cdFx0Ly8gQWRkIGJ1dHRvbnMgZm9yIGVhY2ggY3VzdG9tIGNvbW1hbmRcclxuXHRcdGZvciAoY29uc3QgcGFpciBvZiB0aGlzLnBsdWdpbi5zZXR0aW5ncy5leHBsb3JlckNvbW1hbmRzKSB7XHJcblx0XHRcdHRoaXMuYWRkRXhwbG9yZXJCdXR0b24obmF2QnV0dG9uc0NvbnRhaW5lciwgcGFpciwgbGVhZik7XHJcblx0XHR9XHJcblx0fVxyXG5cclxuXHQvKipcclxuXHQgKiBNaWdyYXRlIGV4aXN0aW5nIGV4cGxvcmVyQ29tbWFuZHMgdG8gZXhwbG9yZXJCdXR0b25JdGVtc1xyXG5cdCAqL1xyXG5cdHB1YmxpYyBtaWdyYXRlRXhwbG9yZXJDb21tYW5kcygpOiB2b2lkIHtcclxuXHRcdC8vIE9ubHkgbWlncmF0ZSBpZiBleHBsb3JlckJ1dHRvbkl0ZW1zIGlzIGVtcHR5IGFuZCBleHBsb3JlckNvbW1hbmRzIGhhcyBpdGVtc1xyXG5cdFx0aWYgKHRoaXMucGx1Z2luLnNldHRpbmdzLmV4cGxvcmVyQnV0dG9uSXRlbXMubGVuZ3RoID09PSAwICYmIFxyXG5cdFx0XHR0aGlzLnBsdWdpbi5zZXR0aW5ncy5leHBsb3JlckNvbW1hbmRzLmxlbmd0aCA+IDApIHtcclxuXHRcdFx0XHJcblx0XHRcdC8vIENvbnZlcnQgY3VzdG9tIGNvbW1hbmRzXHJcblx0XHRcdGZvciAoY29uc3QgY29tbWFuZCBvZiB0aGlzLnBsdWdpbi5zZXR0aW5ncy5leHBsb3JlckNvbW1hbmRzKSB7XHJcblx0XHRcdFx0Y29uc3QgaXRlbTogRXhwbG9yZXJCdXR0b25JdGVtID0ge1xyXG5cdFx0XHRcdFx0aWQ6IGBjdXN0b20tJHtjb21tYW5kLmlkfWAsXHJcblx0XHRcdFx0XHRuYW1lOiBjb21tYW5kLm5hbWUsXHJcblx0XHRcdFx0XHRhcmlhTGFiZWw6IGNvbW1hbmQubmFtZSxcclxuXHRcdFx0XHRcdHR5cGU6ICdjdXN0b20nLFxyXG5cdFx0XHRcdFx0Y29tbWFuZElkOiBjb21tYW5kLmlkLFxyXG5cdFx0XHRcdFx0aWNvbjogY29tbWFuZC5pY29uLFxyXG5cdFx0XHRcdFx0ZGlzcGxheU5hbWU6IGNvbW1hbmQuZGlzcGxheU5hbWUsXHJcblx0XHRcdFx0XHRtb2RlOiBjb21tYW5kLm1vZGUsXHJcblx0XHRcdFx0XHRjb2xvcjogY29tbWFuZC5jb2xvcixcclxuXHRcdFx0XHRcdHNob3dPbkZpbGVUeXBlczogY29tbWFuZC5zaG93T25GaWxlVHlwZXMsXHJcblx0XHRcdFx0XHRoaWRlT25GaWxlVHlwZXM6IGNvbW1hbmQuaGlkZU9uRmlsZVR5cGVzLFxyXG5cdFx0XHRcdFx0dG9nZ2xlSWNvbjogY29tbWFuZC50b2dnbGVJY29uLFxyXG5cdFx0XHRcdFx0dXNlQWN0aXZlQ2xhc3M6IGNvbW1hbmQudXNlQWN0aXZlQ2xhc3MsXHJcblx0XHRcdFx0XHRoaWRkZW46IGZhbHNlLFxyXG5cdFx0XHRcdH07XHJcblx0XHRcdFx0dGhpcy5wbHVnaW4uc2V0dGluZ3MuZXhwbG9yZXJCdXR0b25JdGVtcy5wdXNoKGl0ZW0pO1xyXG5cdFx0XHR9XHJcblxyXG5cdFx0XHQvLyBEZXRlY3QgbmF0aXZlIGJ1dHRvbnMgYW5kIGFkZCB0aGVtXHJcblx0XHRcdHRoaXMuY29uc29saWRhdGVTZXR0aW5nc0FuZEVsZW1lbnRzKCk7XHJcblxyXG5cdFx0XHR2b2lkIHRoaXMucGx1Z2luLnNhdmVTZXR0aW5ncygpO1xyXG5cdFx0fVxyXG5cdH1cclxuXHJcblx0cHJpdmF0ZSBhZGRFeHBsb3JlckJ1dHRvbihjb250YWluZXI6IEhUTUxFbGVtZW50LCBwYWlyOiBDb21tYW5kSWNvblBhaXIsIGxlYWY6IFdvcmtzcGFjZUxlYWYpOiB2b2lkIHtcclxuXHRcdC8vIENoZWNrIGlmIGJ1dHRvbiBhbHJlYWR5IGV4aXN0cyAobGlrZSBDb21tYW5kZXIpXHJcblx0XHRjb25zdCBleGlzdGluZ0J1dHRvbiA9IGNvbnRhaW5lci5xdWVyeVNlbGVjdG9yKGBbZGF0YS1leHBsb3Jlci1jb21tYW5kLWlkPVwiJHtwYWlyLmlkfVwiXWApIGFzIEhUTUxFbGVtZW50O1xyXG5cdFx0aWYgKGV4aXN0aW5nQnV0dG9uKSB7XHJcblx0XHRcdC8vIFVwZGF0ZSBleGlzdGluZyBidXR0b25cclxuXHRcdFx0ZXhpc3RpbmdCdXR0b24uc2V0QXR0cmlidXRlKCdhcmlhLWxhYmVsJywgcGFpci5uYW1lKTtcclxuXHRcdFx0Ly8gQXBwbHkgY29sb3Igb25seSBpZiBjdXN0b20gY29sb3IgaXMgc2V0IChub3QgYmxhY2svZGVmYXVsdClcclxuXHRcdFx0aWYgKHBhaXIuY29sb3IgJiYgcGFpci5jb2xvciAhPT0gJyMwMDAwMDAnKSB7XHJcblx0XHRcdFx0ZXhpc3RpbmdCdXR0b24uc3R5bGUuY29sb3IgPSBwYWlyLmNvbG9yO1xyXG5cdFx0XHR9IGVsc2Uge1xyXG5cdFx0XHRcdGV4aXN0aW5nQnV0dG9uLnN0eWxlLnJlbW92ZVByb3BlcnR5KCdjb2xvcicpO1xyXG5cdFx0XHR9XHJcblx0XHRcdC8vIFVwZGF0ZSB0b2dnbGUgc3RhdGVcclxuXHRcdFx0dGhpcy51cGRhdGVCdXR0b25Ub2dnbGVTdGF0ZShleGlzdGluZ0J1dHRvbiwgcGFpcik7XHJcblx0XHRcdHJldHVybjtcclxuXHRcdH1cclxuXHJcblx0XHQvLyBDaGVjayBkZXZpY2UgbW9kZVxyXG5cdFx0aWYgKCFpc01vZGVBY3RpdmUocGFpci5tb2RlLCB0aGlzLnBsdWdpbikpIHtcclxuXHRcdFx0cmV0dXJuO1xyXG5cdFx0fVxyXG5cclxuXHRcdC8vIENyZWF0ZSBidXR0b24gd2l0aCBuYXRpdmUgQ1NTIGNsYXNzZXMgKGV4YWN0bHkgbGlrZSBDb21tYW5kZXIpXHJcblx0XHRjb25zdCBidXR0b24gPSBjcmVhdGVEaXYoe1xyXG5cdFx0XHRjbHM6ICdjbGlja2FibGUtaWNvbiBuYXYtYWN0aW9uLWJ1dHRvbicsXHJcblx0XHRcdGF0dHI6IHtcclxuXHRcdFx0XHQnZGF0YS1leHBsb3Jlci1jb21tYW5kLWlkJzogcGFpci5pZCxcclxuXHRcdFx0XHQnYXJpYS1sYWJlbCc6IHBhaXIubmFtZSxcclxuXHRcdFx0XHQnYXJpYS1sYWJlbC1wb3NpdGlvbic6ICd0b3AnLFxyXG5cdFx0XHR9LFxyXG5cdFx0fSk7XHJcblxyXG5cdFx0Ly8gQ2hlY2sgdG9nZ2xlIHN0YXRlIGFuZCBhcHBseSBpY29uL2NsYXNzXHJcblx0XHR0aGlzLnVwZGF0ZUJ1dHRvblRvZ2dsZVN0YXRlKGJ1dHRvbiwgcGFpcik7XHJcblxyXG5cdFx0Ly8gQ2xpY2sgaGFuZGxlclxyXG5cdFx0YnV0dG9uLm9uY2xpY2sgPSAoKTogdm9pZCA9PiB7XHJcblx0XHRcdGNvbnN0IGNvbW1hbmRzID0gKHRoaXMucGx1Z2luLmFwcCBhcyB7IGNvbW1hbmRzPzogeyBleGVjdXRlQ29tbWFuZEJ5SWQ/OiAoaWQ6IHN0cmluZykgPT4gUHJvbWlzZTx2b2lkPiB9IH0pLmNvbW1hbmRzO1xyXG5cdFx0XHRpZiAoY29tbWFuZHM/LmV4ZWN1dGVDb21tYW5kQnlJZCkge1xyXG5cdFx0XHRcdC8vIENvbW1hbmQgZXhlY3V0aW9uIGlzIHRyYWNrZWQgYnkgdGhlIGludGVyY2VwdG9yIGluIG1haW4udHNcclxuXHRcdFx0XHQvLyBKdXN0IGV4ZWN1dGUgdGhlIGNvbW1hbmQgLSB0aGUgaW50ZXJjZXB0b3Igd2lsbCBoYW5kbGUgdG9nZ2xlIHRyYWNraW5nXHJcblx0XHRcdFx0dm9pZCBjb21tYW5kcy5leGVjdXRlQ29tbWFuZEJ5SWQocGFpci5pZCk7XHJcblx0XHRcdFx0Ly8gVXBkYXRlIHRvZ2dsZSBzdGF0ZSBhZnRlciBjb21tYW5kIGV4ZWN1dGlvblxyXG5cdFx0XHRcdC8vIFRoZSBpbnRlcmNlcHRvciB3aWxsIGFsc28gcmVmcmVzaCwgYnV0IHdlIHVwZGF0ZSB0aGlzIGJ1dHRvbiBpbW1lZGlhdGVseSBmb3IgcmVzcG9uc2l2ZW5lc3NcclxuXHRcdFx0XHRzZXRUaW1lb3V0KCgpID0+IHtcclxuXHRcdFx0XHRcdHRoaXMudXBkYXRlQnV0dG9uVG9nZ2xlU3RhdGUoYnV0dG9uLCBwYWlyKTtcclxuXHRcdFx0XHRcdC8vIEFsc28gdXBkYXRlIGFsbCBvdGhlciBidXR0b25zIGZvciB0aGlzIGNvbW1hbmRcclxuXHRcdFx0XHRcdHRoaXMudXBkYXRlQWxsQnV0dG9uc0ZvckNvbW1hbmQocGFpci5pZCk7XHJcblx0XHRcdFx0fSwgMTAwKTtcclxuXHRcdFx0fVxyXG5cdFx0fTtcclxuXHJcblx0XHR0aGlzLmJ1dHRvbnMuc2V0KHBhaXIuaWQsIGJ1dHRvbik7XHJcblxyXG5cdFx0Ly8gQWRkIGNvbnRleHQgbWVudSAocmlnaHQtY2xpY2spXHJcblx0XHRidXR0b24uYWRkRXZlbnRMaXN0ZW5lcignY29udGV4dG1lbnUnLCAoZXZlbnQpID0+IHtcclxuXHRcdFx0ZXZlbnQuc3RvcEltbWVkaWF0ZVByb3BhZ2F0aW9uKCk7XHJcblx0XHRcdG5ldyBNZW51KClcclxuXHRcdFx0XHQuYWRkSXRlbSgoaXRlbSkgPT4ge1xyXG5cdFx0XHRcdFx0aXRlbS5zZXRUaXRsZSgnQ2hhbmdlIGljb24nKVxyXG5cdFx0XHRcdFx0XHQuc2V0SWNvbignbHVjaWRlLWltYWdlLXBsdXMnKVxyXG5cdFx0XHRcdFx0XHQub25DbGljaygoKSA9PiB7XHJcblx0XHRcdFx0XHRcdFx0Y29uc3QgbW9kYWwgPSBuZXcgSWNvblBpY2tlck1vZGFsKHRoaXMucGx1Z2luLmFwcCwgKGljb25JZCkgPT4ge1xyXG5cdFx0XHRcdFx0XHRcdFx0aWYgKGljb25JZCAmJiBpY29uSWQgIT09IHBhaXIuaWNvbikge1xyXG5cdFx0XHRcdFx0XHRcdFx0XHRwYWlyLmljb24gPSBpY29uSWQ7XHJcblx0XHRcdFx0XHRcdFx0XHRcdHZvaWQgdGhpcy5wbHVnaW4uc2F2ZVNldHRpbmdzKCk7XHJcblx0XHRcdFx0XHRcdFx0XHRcdHRoaXMucmVvcmRlcigpO1xyXG5cdFx0XHRcdFx0XHRcdFx0fVxyXG5cdFx0XHRcdFx0XHRcdH0pO1xyXG5cdFx0XHRcdFx0XHRcdG1vZGFsLm9wZW4oKTtcclxuXHRcdFx0XHRcdFx0fSk7XHJcblx0XHRcdFx0fSlcclxuXHRcdFx0XHQuYWRkSXRlbSgoaXRlbSkgPT4ge1xyXG5cdFx0XHRcdFx0aXRlbS5zZXRUaXRsZSgnRGVsZXRlJylcclxuXHRcdFx0XHRcdFx0LnNldEljb24oJ2x1Y2lkZS10cmFzaCcpXHJcblx0XHRcdFx0XHRcdC5vbkNsaWNrKCgpID0+IHtcclxuXHRcdFx0XHRcdFx0XHR2b2lkIHRoaXMucmVtb3ZlQ29tbWFuZChwYWlyKTtcclxuXHRcdFx0XHRcdFx0fSk7XHJcblx0XHRcdFx0XHQvLyBBZGQgd2FybmluZyBjbGFzcyB0byBtYWtlIHRleHQgYW5kIGljb24gcmVkXHJcblx0XHRcdFx0XHQvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L25vLXVuc2FmZS1tZW1iZXItYWNjZXNzLCBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tZXhwbGljaXQtYW55LCBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tdW5zYWZlLWFzc2lnbm1lbnRcclxuXHRcdFx0XHRcdGNvbnN0IGRvbSA9IChpdGVtIGFzIGFueSkuZG9tO1xyXG5cdFx0XHRcdFx0aWYgKGRvbSkge1xyXG5cdFx0XHRcdFx0XHQvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L25vLXVuc2FmZS1jYWxsLCBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tdW5zYWZlLW1lbWJlci1hY2Nlc3NcclxuXHRcdFx0XHRcdFx0ZG9tLmNsYXNzTGlzdC5hZGQoJ21vZC13YXJuaW5nJyk7XHJcblx0XHRcdFx0XHRcdC8vIEFsc28gbWFrZSB0aGUgaWNvbiByZWRcclxuXHRcdFx0XHRcdFx0Ly8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9uby11bnNhZmUtYXNzaWdubWVudCwgQHR5cGVzY3JpcHQtZXNsaW50L25vLXVuc2FmZS1jYWxsLCBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tdW5zYWZlLW1lbWJlci1hY2Nlc3NcclxuXHRcdFx0XHRcdFx0Y29uc3QgaWNvbkVsID0gZG9tLnF1ZXJ5U2VsZWN0b3IoJy5tZW51LWl0ZW0taWNvbiBzdmcnKTtcclxuXHRcdFx0XHRcdFx0aWYgKGljb25FbCkge1xyXG5cdFx0XHRcdFx0XHRcdC8vIFVzZSBzZXRDc3NQcm9wcyB0byBzZXQgY29sb3IgKGFscmVhZHkgaW1wb3J0ZWQgZnJvbSB1aU1hbmFnZXIpXHJcblx0XHRcdFx0XHRcdFx0c2V0Q3NzUHJvcHMoaWNvbkVsIGFzIEhUTUxFbGVtZW50LCB7IGNvbG9yOiAndmFyKC0tdGV4dC1lcnJvciknIH0pO1xyXG5cdFx0XHRcdFx0XHR9XHJcblx0XHRcdFx0XHR9XHJcblx0XHRcdFx0fSlcclxuXHRcdFx0XHQuc2hvd0F0TW91c2VFdmVudChldmVudCk7XHJcblx0XHR9KTtcclxuXHJcblx0XHQvLyBBcHBlbmQgYnV0dG9uIHRvIGNvbnRhaW5lciAoZXhhY3RseSBsaWtlIENvbW1hbmRlcilcclxuXHRcdGNvbnRhaW5lci5hcHBlbmRDaGlsZChidXR0b24pO1xyXG5cdH1cclxuXHJcblx0LyoqXHJcblx0ICogR2VuZXJhdGUgY2Fub25pY2FsIG5hbWUgZnJvbSBidXR0b24gZWxlbWVudFxyXG5cdCAqL1xyXG5cdHByaXZhdGUgZ2VuZXJhdGVDYW5vbmljYWxOYW1lKGVsZW1lbnQ6IEhUTUxFbGVtZW50LCBhcmlhTGFiZWw6IHN0cmluZyk6IHN0cmluZyB7XHJcblx0XHQvLyBGb3IgbmF0aXZlIGJ1dHRvbnMsIHVzZSB0aGUgYXJpYS1sYWJlbCBkaXJlY3RseVxyXG5cdFx0Y29uc3QgbmF0aXZlQnV0dG9uTWFwOiBSZWNvcmQ8c3RyaW5nLCBzdHJpbmc+ID0ge1xyXG5cdFx0XHQnTmV3IG5vdGUnOiAnbmV3Tm90ZScsXHJcblx0XHRcdCdOZXcgZm9sZGVyJzogJ25ld0ZvbGRlcicsXHJcblx0XHRcdCdDaGFuZ2Ugc29ydCBvcmRlcic6ICdzb3J0T3JkZXInLFxyXG5cdFx0XHQnQXV0by1yZXZlYWwgY3VycmVudCBmaWxlJzogJ2F1dG9SZXZlYWwnLFxyXG5cdFx0XHQnQ29sbGFwc2UgYWxsJzogJ2NvbGxhcHNlQWxsJyxcclxuXHRcdFx0J0V4cGFuZCBhbGwnOiAnY29sbGFwc2VBbGwnLCAvLyBCb3RoIG1hcCB0byBzYW1lIGtleVxyXG5cdFx0fTtcclxuXHRcdFxyXG5cdFx0aWYgKG5hdGl2ZUJ1dHRvbk1hcFthcmlhTGFiZWxdKSB7XHJcblx0XHRcdHJldHVybiBgbmF0aXZlLSR7bmF0aXZlQnV0dG9uTWFwW2FyaWFMYWJlbF19YDtcclxuXHRcdH1cclxuXHJcblx0XHQvLyBGb3IgY3VzdG9tIGNvbW1hbmRzLCB1c2UgY29tbWFuZCBJRFxyXG5cdFx0Y29uc3QgY29tbWFuZElkID0gZWxlbWVudC5nZXRBdHRyaWJ1dGUoJ2RhdGEtZXhwbG9yZXItY29tbWFuZC1pZCcpO1xyXG5cdFx0aWYgKGNvbW1hbmRJZCkge1xyXG5cdFx0XHRyZXR1cm4gYGN1c3RvbS0ke2NvbW1hbmRJZH1gO1xyXG5cdFx0fVxyXG5cclxuXHRcdC8vIEZvciBleHRlcm5hbCBidXR0b25zLCB1c2UgYXJpYS1sYWJlbCArIGNsYXNzIG5hbWVzIHRvIGdlbmVyYXRlIHN0YWJsZSBJRFxyXG5cdFx0Y29uc3QgYWxsQ2xhc3NlcyA9IEFycmF5LmZyb20oZWxlbWVudC5jbGFzc0xpc3QpO1xyXG5cdFx0Y29uc3QgaWdub3JlZENsYXNzZXMgPSBbJ2NsaWNrYWJsZS1pY29uJywgJ25hdi1hY3Rpb24tYnV0dG9uJ107XHJcblx0XHRjb25zdCBzdGFibGVDbGFzc2VzID0gYWxsQ2xhc3Nlcy5maWx0ZXIoY2xzID0+ICFpZ25vcmVkQ2xhc3Nlcy5pbmNsdWRlcyhjbHMpKTtcclxuXHRcdFxyXG5cdFx0Ly8gVHJ5IHRvIGZpbmQgcGx1Z2luIGlkZW50aWZpZXIgaW4gY2xhc3Nlc1xyXG5cdFx0Y29uc3QgcGx1Z2luQ2xhc3MgPSBzdGFibGVDbGFzc2VzLmZpbmQoY2xzID0+IFxyXG5cdFx0XHRjbHMuaW5jbHVkZXMoJ3BsdWdpbi0nKSB8fCBcclxuXHRcdFx0Y2xzLmluY2x1ZGVzKCdjb21tYW5kZXInKSB8fFxyXG5cdFx0XHRjbHMuaW5jbHVkZXMoJ2V4cGxvcmVyLWZvY3VzJylcclxuXHRcdCk7XHJcblxyXG5cdFx0aWYgKHBsdWdpbkNsYXNzKSB7XHJcblx0XHRcdC8vIFVzZSBwbHVnaW4gY2xhc3MgYXMgYmFzZVxyXG5cdFx0XHRjb25zdCBzYW5pdGl6ZWRBcmlhTGFiZWwgPSBhcmlhTGFiZWwudG9Mb3dlckNhc2UoKS5yZXBsYWNlKC9bXmEtejAtOV0rL2csICctJyk7XHJcblx0XHRcdHJldHVybiBgZXh0ZXJuYWwtJHtwbHVnaW5DbGFzc30tJHtzYW5pdGl6ZWRBcmlhTGFiZWx9YDtcclxuXHRcdH1cclxuXHJcblx0XHQvLyBGYWxsYmFjazogdXNlIGFyaWEtbGFiZWxcclxuXHRcdGNvbnN0IHNhbml0aXplZCA9IGFyaWFMYWJlbC50b0xvd2VyQ2FzZSgpLnJlcGxhY2UoL1teYS16MC05XSsvZywgJy0nKTtcclxuXHRcdHJldHVybiBgZXh0ZXJuYWwtJHtzYW5pdGl6ZWR9YDtcclxuXHR9XHJcblxyXG5cdC8qKlxyXG5cdCAqIENvbnNvbGlkYXRlIHNldHRpbmdzIGFuZCBlbGVtZW50cyAtIGRldGVjdCBhbGwgYnV0dG9ucyBhbmQgbWVyZ2Ugd2l0aCBzYXZlZCBpdGVtc1xyXG5cdCAqL1xyXG5cdHB1YmxpYyBjb25zb2xpZGF0ZVNldHRpbmdzQW5kRWxlbWVudHMoKTogdm9pZCB7XHJcblx0XHRjb25zdCBleHBsb3JlcnMgPSB0aGlzLnBsdWdpbi5hcHAud29ya3NwYWNlLmdldExlYXZlc09mVHlwZSgnZmlsZS1leHBsb3JlcicpO1xyXG5cdFx0aWYgKGV4cGxvcmVycy5sZW5ndGggPT09IDApIHJldHVybjtcclxuXHJcblx0XHQvLyBVc2UgZmlyc3QgZXhwbG9yZXIgYXMgcmVmZXJlbmNlIChhbGwgZXhwbG9yZXJzIHNob3VsZCBoYXZlIHNhbWUgYnV0dG9ucylcclxuXHRcdGNvbnN0IGZpcnN0RXhwbG9yZXIgPSBleHBsb3JlcnNbMF07XHJcblx0XHRjb25zdCBuYXZCdXR0b25zQ29udGFpbmVyID0gZmlyc3RFeHBsb3Jlci52aWV3Py5jb250YWluZXJFbD8ucXVlcnlTZWxlY3RvcignZGl2Lm5hdi1idXR0b25zLWNvbnRhaW5lcicpIGFzIEhUTUxFbGVtZW50O1xyXG5cdFx0aWYgKCFuYXZCdXR0b25zQ29udGFpbmVyKSByZXR1cm47XHJcblxyXG5cdFx0Ly8gR2V0IGFsbCBidXR0b25zIGZyb20gRE9NIChpbiBET00gb3JkZXIpXHJcblx0XHRjb25zdCBleGlzdGluZ0J1dHRvbnMgPSBBcnJheS5mcm9tKG5hdkJ1dHRvbnNDb250YWluZXIucXVlcnlTZWxlY3RvckFsbDxIVE1MRWxlbWVudD4oJy5uYXYtYWN0aW9uLWJ1dHRvbicpKTtcclxuXHJcblx0XHQvLyBHZXQgc2F2ZWQgaXRlbXMgZnJvbSBzZXR0aW5nc1xyXG5cdFx0Y29uc3Qgc2F2ZWRJdGVtcyA9IHRoaXMucGx1Z2luLnNldHRpbmdzLmV4cGxvcmVyQnV0dG9uSXRlbXMgfHwgW107XHJcblx0XHRjb25zdCBzYXZlZEl0ZW1zTWFwID0gbmV3IE1hcChzYXZlZEl0ZW1zLm1hcChpdGVtID0+IFtpdGVtLmlkLCBpdGVtXSkpO1xyXG5cdFx0Y29uc3QgbWF0Y2hlZFNhdmVkSWRzID0gbmV3IFNldDxzdHJpbmc+KCk7XHJcblx0XHRjb25zdCBuZXdJdGVtczogRXhwbG9yZXJCdXR0b25JdGVtW10gPSBbXTtcclxuXHJcblx0XHQvLyBUcmFjayBlbGVtZW50IGNvdW50cyBwZXIgbmFtZSBwYXR0ZXJuXHJcblx0XHRjb25zdCBlbGVtZW50Q291bnQ6IHsgW2tleTogc3RyaW5nXTogbnVtYmVyIH0gPSB7fTtcclxuXHJcblx0XHQvLyBQcm9jZXNzIGVsZW1lbnRzIGluIERPTSBvcmRlclxyXG5cdFx0ZXhpc3RpbmdCdXR0b25zLmZvckVhY2goKGVsZW1lbnQpID0+IHtcclxuXHRcdFx0Y29uc3QgYXJpYUxhYmVsID0gZWxlbWVudC5nZXRBdHRyaWJ1dGUoJ2FyaWEtbGFiZWwnKSB8fCAnJztcclxuXHRcdFx0Y29uc3QgY29tbWFuZElkID0gZWxlbWVudC5nZXRBdHRyaWJ1dGUoJ2RhdGEtZXhwbG9yZXItY29tbWFuZC1pZCcpO1xyXG5cdFx0XHRcclxuXHRcdFx0Ly8gR2VuZXJhdGUgY2Fub25pY2FsIG5hbWUgYW5kIElEXHJcblx0XHRcdGNvbnN0IGNhbm9uaWNhbE5hbWUgPSB0aGlzLmdlbmVyYXRlQ2Fub25pY2FsTmFtZShlbGVtZW50LCBhcmlhTGFiZWwpO1xyXG5cdFx0XHRsZXQgaWQgPSBjYW5vbmljYWxOYW1lO1xyXG5cclxuXHRcdFx0Ly8gQ2hlY2sgaWYgdGhpcyBpcyBhIG5hdGl2ZSBidXR0b24gKHRoZXkgZG9uJ3QgaGF2ZSBpbmRpY2VzKVxyXG5cdFx0XHRpZiAoY2Fub25pY2FsTmFtZS5zdGFydHNXaXRoKCduYXRpdmUtJykpIHtcclxuXHRcdFx0XHQvLyBOYXRpdmUgYnV0dG9ucyBoYXZlIGZpeGVkIElEc1xyXG5cdFx0XHRcdGlkID0gY2Fub25pY2FsTmFtZTtcclxuXHRcdFx0fSBlbHNlIGlmIChjYW5vbmljYWxOYW1lLnN0YXJ0c1dpdGgoJ2N1c3RvbS0nKSkge1xyXG5cdFx0XHRcdC8vIEN1c3RvbSBjb21tYW5kcyBoYXZlIGZpeGVkIElEcyBiYXNlZCBvbiBjb21tYW5kIElEXHJcblx0XHRcdFx0aWQgPSBjYW5vbmljYWxOYW1lO1xyXG5cdFx0XHR9IGVsc2Uge1xyXG5cdFx0XHRcdC8vIEV4dGVybmFsIGJ1dHRvbnMgbWlnaHQgaGF2ZSBtdWx0aXBsZSBpbnN0YW5jZXMgLSBhZGQgaW5kZXhcclxuXHRcdFx0XHRjb25zdCBiYXNlTmFtZSA9IGNhbm9uaWNhbE5hbWU7XHJcblx0XHRcdFx0Y29uc3QgY291bnQgPSAoYmFzZU5hbWUgaW4gZWxlbWVudENvdW50KSA/IGVsZW1lbnRDb3VudFtiYXNlTmFtZV0gKyAxIDogMTtcclxuXHRcdFx0XHRlbGVtZW50Q291bnRbYmFzZU5hbWVdID0gY291bnQ7XHJcblx0XHRcdFx0aWQgPSBjb3VudCA+IDEgPyBgJHtiYXNlTmFtZX07JHtjb3VudH1gIDogYmFzZU5hbWU7XHJcblx0XHRcdH1cclxuXHJcblx0XHRcdC8vIENoZWNrIGlmIHdlIGhhdmUgYSBzYXZlZCBpdGVtIGZvciB0aGlzIElEXHJcblx0XHRcdGlmIChzYXZlZEl0ZW1zTWFwLmhhcyhpZCkpIHtcclxuXHRcdFx0XHRtYXRjaGVkU2F2ZWRJZHMuYWRkKGlkKTtcclxuXHRcdFx0XHRjb25zdCBzYXZlZEl0ZW0gPSBzYXZlZEl0ZW1zTWFwLmdldChpZCkhO1xyXG5cdFx0XHRcdC8vIFVwZGF0ZSBuYW1lIGZyb20gRE9NIGlmIGl0J3MgZ2VuZXJpY1xyXG5cdFx0XHRcdGlmICghc2F2ZWRJdGVtLm5hbWUgfHwgc2F2ZWRJdGVtLm5hbWUgPT09IGlkIHx8IHNhdmVkSXRlbS5uYW1lLnN0YXJ0c1dpdGgoJ2V4dGVybmFsLScpKSB7XHJcblx0XHRcdFx0XHRzYXZlZEl0ZW0ubmFtZSA9IGFyaWFMYWJlbCB8fCBzYXZlZEl0ZW0ubmFtZSB8fCBpZDtcclxuXHRcdFx0XHR9XHJcblx0XHRcdFx0Ly8gVXBkYXRlIGFyaWFMYWJlbCBpZiBpdCBjaGFuZ2VkXHJcblx0XHRcdFx0aWYgKGFyaWFMYWJlbCkge1xyXG5cdFx0XHRcdFx0c2F2ZWRJdGVtLmFyaWFMYWJlbCA9IGFyaWFMYWJlbDtcclxuXHRcdFx0XHR9XHJcblx0XHRcdH0gZWxzZSB7XHJcblx0XHRcdFx0Ly8gTmV3IGl0ZW0gLSBkZXRlcm1pbmUgdHlwZVxyXG5cdFx0XHRcdGxldCB0eXBlOiAnbmF0aXZlJyB8ICdleHRlcm5hbCcgfCAnY3VzdG9tJztcclxuXHRcdFx0XHRpZiAoY2Fub25pY2FsTmFtZS5zdGFydHNXaXRoKCduYXRpdmUtJykpIHtcclxuXHRcdFx0XHRcdHR5cGUgPSAnbmF0aXZlJztcclxuXHRcdFx0XHR9IGVsc2UgaWYgKGNhbm9uaWNhbE5hbWUuc3RhcnRzV2l0aCgnY3VzdG9tLScpKSB7XHJcblx0XHRcdFx0XHR0eXBlID0gJ2N1c3RvbSc7XHJcblx0XHRcdFx0fSBlbHNlIHtcclxuXHRcdFx0XHRcdHR5cGUgPSAnZXh0ZXJuYWwnO1xyXG5cdFx0XHRcdH1cclxuXHJcblx0XHRcdFx0Ly8gQ3JlYXRlIG5ldyBpdGVtXHJcblx0XHRcdFx0Y29uc3QgbmV3SXRlbTogRXhwbG9yZXJCdXR0b25JdGVtID0ge1xyXG5cdFx0XHRcdFx0aWQ6IGlkLFxyXG5cdFx0XHRcdFx0bmFtZTogYXJpYUxhYmVsIHx8IGlkLFxyXG5cdFx0XHRcdFx0YXJpYUxhYmVsOiBhcmlhTGFiZWwsXHJcblx0XHRcdFx0XHR0eXBlOiB0eXBlLFxyXG5cdFx0XHRcdFx0Y29tbWFuZElkOiBjb21tYW5kSWQgfHwgdW5kZWZpbmVkLFxyXG5cdFx0XHRcdFx0aGlkZGVuOiBmYWxzZSxcclxuXHRcdFx0XHR9O1xyXG5cclxuXHRcdFx0XHQvLyBGb3IgY3VzdG9tIGNvbW1hbmRzLCBjb3B5IHByb3BlcnRpZXMgZnJvbSBleHBsb3JlckNvbW1hbmRzXHJcblx0XHRcdFx0aWYgKHR5cGUgPT09ICdjdXN0b20nICYmIGNvbW1hbmRJZCkge1xyXG5cdFx0XHRcdFx0Y29uc3QgZXhpc3RpbmdDb21tYW5kID0gdGhpcy5wbHVnaW4uc2V0dGluZ3MuZXhwbG9yZXJDb21tYW5kcy5maW5kKGMgPT4gYy5pZCA9PT0gY29tbWFuZElkKTtcclxuXHRcdFx0XHRcdGlmIChleGlzdGluZ0NvbW1hbmQpIHtcclxuXHRcdFx0XHRcdFx0bmV3SXRlbS5pY29uID0gZXhpc3RpbmdDb21tYW5kLmljb247XHJcblx0XHRcdFx0XHRcdG5ld0l0ZW0uZGlzcGxheU5hbWUgPSBleGlzdGluZ0NvbW1hbmQuZGlzcGxheU5hbWU7XHJcblx0XHRcdFx0XHRcdG5ld0l0ZW0ubW9kZSA9IGV4aXN0aW5nQ29tbWFuZC5tb2RlO1xyXG5cdFx0XHRcdFx0XHRuZXdJdGVtLmNvbG9yID0gZXhpc3RpbmdDb21tYW5kLmNvbG9yO1xyXG5cdFx0XHRcdFx0XHRuZXdJdGVtLnNob3dPbkZpbGVUeXBlcyA9IGV4aXN0aW5nQ29tbWFuZC5zaG93T25GaWxlVHlwZXM7XHJcblx0XHRcdFx0XHRcdG5ld0l0ZW0uaGlkZU9uRmlsZVR5cGVzID0gZXhpc3RpbmdDb21tYW5kLmhpZGVPbkZpbGVUeXBlcztcclxuXHRcdFx0XHRcdFx0bmV3SXRlbS50b2dnbGVJY29uID0gZXhpc3RpbmdDb21tYW5kLnRvZ2dsZUljb247XHJcblx0XHRcdFx0XHRcdG5ld0l0ZW0udXNlQWN0aXZlQ2xhc3MgPSBleGlzdGluZ0NvbW1hbmQudXNlQWN0aXZlQ2xhc3M7XHJcblx0XHRcdFx0XHR9XHJcblx0XHRcdFx0fVxyXG5cclxuXHRcdFx0XHRuZXdJdGVtcy5wdXNoKG5ld0l0ZW0pO1xyXG5cdFx0XHR9XHJcblx0XHR9KTtcclxuXHJcblx0XHQvLyBBZGQgbmV3IGl0ZW1zIHRvIHNldHRpbmdzXHJcblx0XHRpZiAobmV3SXRlbXMubGVuZ3RoID4gMCkge1xyXG5cdFx0XHR0aGlzLnBsdWdpbi5zZXR0aW5ncy5leHBsb3JlckJ1dHRvbkl0ZW1zLnB1c2goLi4ubmV3SXRlbXMpO1xyXG5cdFx0XHR2b2lkIHRoaXMucGx1Z2luLnNhdmVTZXR0aW5ncygpO1xyXG5cdFx0fVxyXG5cdH1cclxuXHJcblx0LyoqXHJcblx0ICogU2V0IHVwIG11dGF0aW9uIG9ic2VydmVyIHRvIGRldGVjdCBuZXcgZXh0ZXJuYWwgYnV0dG9uc1xyXG5cdCAqL1xyXG5cdHByaXZhdGUgc2V0dXBNdXRhdGlvbk9ic2VydmVyKCk6IHZvaWQge1xyXG5cdFx0Y29uc3QgZXhwbG9yZXJzID0gdGhpcy5wbHVnaW4uYXBwLndvcmtzcGFjZS5nZXRMZWF2ZXNPZlR5cGUoJ2ZpbGUtZXhwbG9yZXInKTtcclxuXHRcdGlmIChleHBsb3JlcnMubGVuZ3RoID09PSAwKSByZXR1cm47XHJcblxyXG5cdFx0Ly8gU2V0IHVwIG9ic2VydmVyIGZvciBlYWNoIGV4cGxvcmVyXHJcblx0XHRleHBsb3JlcnMuZm9yRWFjaCgoZXhwbG9yZXIpID0+IHtcclxuXHRcdFx0Y29uc3QgbmF2QnV0dG9uc0NvbnRhaW5lciA9IGV4cGxvcmVyLnZpZXc/LmNvbnRhaW5lckVsPy5xdWVyeVNlbGVjdG9yKCdkaXYubmF2LWJ1dHRvbnMtY29udGFpbmVyJykgYXMgSFRNTEVsZW1lbnQ7XHJcblx0XHRcdGlmICghbmF2QnV0dG9uc0NvbnRhaW5lcikgcmV0dXJuO1xyXG5cclxuXHRcdFx0bGV0IG9ic2VydmVyVGltZW91dDogUmV0dXJuVHlwZTx0eXBlb2Ygc2V0VGltZW91dD4gfCBudWxsID0gbnVsbDtcclxuXHRcdFx0Y29uc3Qgb2JzZXJ2ZXIgPSBuZXcgTXV0YXRpb25PYnNlcnZlcigobXV0YXRpb25zKSA9PiB7XHJcblx0XHRcdFx0aWYgKHRoaXMuaXNSZW9yZGVyaW5nKSByZXR1cm47XHJcblxyXG5cdFx0XHRcdC8vIE9ubHkgdHJpZ2dlciBpZiB0aGVyZSBhcmUgYWN0dWFsbHkgbmV3IG5vZGVzIGFkZGVkIChub3QganVzdCByZW9yZGVyZWQpXHJcblx0XHRcdFx0Y29uc3QgaGFzTmV3Tm9kZXMgPSBtdXRhdGlvbnMuc29tZShtdXRhdGlvbiA9PiBcclxuXHRcdFx0XHRcdG11dGF0aW9uLmFkZGVkTm9kZXMubGVuZ3RoID4gMCAmJiBcclxuXHRcdFx0XHRcdEFycmF5LmZyb20obXV0YXRpb24uYWRkZWROb2Rlcykuc29tZShub2RlID0+IFxyXG5cdFx0XHRcdFx0XHRub2RlIGluc3RhbmNlb2YgSFRNTEVsZW1lbnQgJiYgXHJcblx0XHRcdFx0XHRcdG5vZGUuY2xhc3NMaXN0LmNvbnRhaW5zKCduYXYtYWN0aW9uLWJ1dHRvbicpICYmXHJcblx0XHRcdFx0XHRcdCFub2RlLmhhc0F0dHJpYnV0ZSgnZGF0YS1leHBsb3Jlci1jb21tYW5kLWlkJykgLy8gT25seSBleHRlcm5hbCBidXR0b25zIChub3Qgb3VyIGN1c3RvbSBvbmVzKVxyXG5cdFx0XHRcdFx0KVxyXG5cdFx0XHRcdCk7XHJcblxyXG5cdFx0XHRcdGlmICghaGFzTmV3Tm9kZXMpIHJldHVybjsgLy8gU2tpcCBpZiBubyBuZXcgZXh0ZXJuYWwgYnV0dG9uc1xyXG5cclxuXHRcdFx0XHRpZiAob2JzZXJ2ZXJUaW1lb3V0KSB7XHJcblx0XHRcdFx0XHRjbGVhclRpbWVvdXQob2JzZXJ2ZXJUaW1lb3V0KTtcclxuXHRcdFx0XHR9XHJcblx0XHRcdFx0b2JzZXJ2ZXJUaW1lb3V0ID0gc2V0VGltZW91dCgoKSA9PiB7XHJcblx0XHRcdFx0XHRpZiAoIXRoaXMuaXNSZW9yZGVyaW5nKSB7XHJcblx0XHRcdFx0XHRcdHRoaXMuY29uc29saWRhdGVTZXR0aW5nc0FuZEVsZW1lbnRzKCk7XHJcblx0XHRcdFx0XHRcdHRoaXMucmVvcmRlcigpO1xyXG5cdFx0XHRcdFx0fVxyXG5cdFx0XHRcdH0sIDEwMDApOyAvLyBMb25nZXIgZGVib3VuY2UgdG8gcHJldmVudCBmbGlja2VyaW5nXHJcblx0XHRcdH0pO1xyXG5cclxuXHRcdFx0b2JzZXJ2ZXIub2JzZXJ2ZShuYXZCdXR0b25zQ29udGFpbmVyLCB7IGNoaWxkTGlzdDogdHJ1ZSwgc3VidHJlZTogZmFsc2UgfSk7XHJcblx0XHRcdHRoaXMub2JzZXJ2ZXJzLnB1c2gob2JzZXJ2ZXIpO1xyXG5cdFx0fSk7XHJcblx0fVxyXG5cclxuXHQvKipcclxuXHQgKiBSZW9yZGVyIGJ1dHRvbnMgYmFzZWQgb24gc2V0dGluZ3Mgb3JkZXJcclxuXHQgKi9cclxuXHRwdWJsaWMgcmVvcmRlcigpOiB2b2lkIHtcclxuXHRcdHRoaXMuaXNSZW9yZGVyaW5nID0gdHJ1ZTtcclxuXHRcdFxyXG5cdFx0Ly8gRGlzY29ubmVjdCBvYnNlcnZlcnMgdGVtcG9yYXJpbHkgdG8gcHJldmVudCBmbGlja2VyaW5nXHJcblx0XHR0aGlzLm9ic2VydmVycy5mb3JFYWNoKG9ic2VydmVyID0+IG9ic2VydmVyLmRpc2Nvbm5lY3QoKSk7XHJcblx0XHRcclxuXHRcdGNvbnN0IGV4cGxvcmVycyA9IHRoaXMucGx1Z2luLmFwcC53b3Jrc3BhY2UuZ2V0TGVhdmVzT2ZUeXBlKCdmaWxlLWV4cGxvcmVyJyk7XHJcblx0XHRleHBsb3JlcnMuZm9yRWFjaCgobGVhZikgPT4ge1xyXG5cdFx0XHRjb25zdCBuYXZCdXR0b25zQ29udGFpbmVyID0gbGVhZi52aWV3Py5jb250YWluZXJFbD8ucXVlcnlTZWxlY3RvcignZGl2Lm5hdi1idXR0b25zLWNvbnRhaW5lcicpIGFzIEhUTUxFbGVtZW50O1xyXG5cdFx0XHRpZiAoIW5hdkJ1dHRvbnNDb250YWluZXIpIHJldHVybjtcclxuXHJcblx0XHRcdC8vIEdldCBhbGwgYnV0dG9uc1xyXG5cdFx0XHRjb25zdCBhbGxCdXR0b25zID0gQXJyYXkuZnJvbShuYXZCdXR0b25zQ29udGFpbmVyLnF1ZXJ5U2VsZWN0b3JBbGw8SFRNTEVsZW1lbnQ+KCcubmF2LWFjdGlvbi1idXR0b24nKSk7XHJcblx0XHRcdGNvbnN0IGJ1dHRvbk1hcCA9IG5ldyBNYXA8c3RyaW5nLCBIVE1MRWxlbWVudD4oKTtcclxuXHJcblx0XHRcdC8vIE1hcCBidXR0b25zIGJ5IElEXHJcblx0XHRcdGFsbEJ1dHRvbnMuZm9yRWFjaCgoYnV0dG9uKSA9PiB7XHJcblx0XHRcdFx0Y29uc3QgYXJpYUxhYmVsID0gYnV0dG9uLmdldEF0dHJpYnV0ZSgnYXJpYS1sYWJlbCcpIHx8ICcnO1xyXG5cdFx0XHRcdGNvbnN0IGNhbm9uaWNhbE5hbWUgPSB0aGlzLmdlbmVyYXRlQ2Fub25pY2FsTmFtZShidXR0b24sIGFyaWFMYWJlbCk7XHJcblx0XHRcdFx0XHJcblx0XHRcdFx0Ly8gRm9yIG5hdGl2ZSBidXR0b25zLCB1c2UgY2Fub25pY2FsIG5hbWUgZGlyZWN0bHlcclxuXHRcdFx0XHRpZiAoY2Fub25pY2FsTmFtZS5zdGFydHNXaXRoKCduYXRpdmUtJykpIHtcclxuXHRcdFx0XHRcdGJ1dHRvbk1hcC5zZXQoY2Fub25pY2FsTmFtZSwgYnV0dG9uKTtcclxuXHRcdFx0XHR9IGVsc2UgaWYgKGNhbm9uaWNhbE5hbWUuc3RhcnRzV2l0aCgnY3VzdG9tLScpKSB7XHJcblx0XHRcdFx0XHRidXR0b25NYXAuc2V0KGNhbm9uaWNhbE5hbWUsIGJ1dHRvbik7XHJcblx0XHRcdFx0fSBlbHNlIHtcclxuXHRcdFx0XHRcdC8vIEZvciBleHRlcm5hbCBidXR0b25zLCB0cnkgdG8gbWF0Y2ggYnkgSURcclxuXHRcdFx0XHRcdGNvbnN0IHNhdmVkSXRlbXMgPSB0aGlzLnBsdWdpbi5zZXR0aW5ncy5leHBsb3JlckJ1dHRvbkl0ZW1zIHx8IFtdO1xyXG5cdFx0XHRcdFx0Y29uc3QgbWF0Y2hpbmdJdGVtID0gc2F2ZWRJdGVtcy5maW5kKGl0ZW0gPT4ge1xyXG5cdFx0XHRcdFx0XHRpZiAoaXRlbS5pZCA9PT0gY2Fub25pY2FsTmFtZSkgcmV0dXJuIHRydWU7XHJcblx0XHRcdFx0XHRcdGlmIChpdGVtLmlkLnN0YXJ0c1dpdGgoY2Fub25pY2FsTmFtZSArICc7JykpIHJldHVybiB0cnVlO1xyXG5cdFx0XHRcdFx0XHQvLyBNYXRjaCBieSBhcmlhLWxhYmVsIGlmIElEIGRvZXNuJ3QgbWF0Y2hcclxuXHRcdFx0XHRcdFx0cmV0dXJuIGl0ZW0uYXJpYUxhYmVsID09PSBhcmlhTGFiZWwgJiYgaXRlbS50eXBlID09PSAnZXh0ZXJuYWwnO1xyXG5cdFx0XHRcdFx0fSk7XHJcblx0XHRcdFx0XHRpZiAobWF0Y2hpbmdJdGVtKSB7XHJcblx0XHRcdFx0XHRcdGJ1dHRvbk1hcC5zZXQobWF0Y2hpbmdJdGVtLmlkLCBidXR0b24pO1xyXG5cdFx0XHRcdFx0fVxyXG5cdFx0XHRcdH1cclxuXHRcdFx0fSk7XHJcblxyXG5cdFx0XHQvLyBSZW9yZGVyIGJhc2VkIG9uIHNldHRpbmdzXHJcblx0XHRcdGNvbnN0IG9yZGVyZWRCdXR0b25zOiBIVE1MRWxlbWVudFtdID0gW107XHJcblx0XHRcdGNvbnN0IGl0ZW1zID0gdGhpcy5wbHVnaW4uc2V0dGluZ3MuZXhwbG9yZXJCdXR0b25JdGVtcyB8fCBbXTtcclxuXHJcblx0XHRcdC8vIEZpcnN0LCBoYW5kbGUgaGlkZGVuIGJ1dHRvbnMgKGhpZGUgdGhlbSB3aXRoIENTUylcclxuXHRcdFx0aXRlbXMuZm9yRWFjaCgoaXRlbSkgPT4ge1xyXG5cdFx0XHRcdGlmIChpdGVtLmhpZGRlbikge1xyXG5cdFx0XHRcdFx0Y29uc3QgYnV0dG9uID0gYnV0dG9uTWFwLmdldChpdGVtLmlkKTtcclxuXHRcdFx0XHRcdGlmIChidXR0b24pIHtcclxuXHRcdFx0XHRcdFx0YnV0dG9uLmNsYXNzTGlzdC5hZGQoJ3VpLXR3ZWFrZXItZXhwbG9yZXItYnV0dG9uLWhpZGRlbicpO1xyXG5cdFx0XHRcdFx0XHRidXR0b25NYXAuZGVsZXRlKGl0ZW0uaWQpO1xyXG5cdFx0XHRcdFx0fVxyXG5cdFx0XHRcdH1cclxuXHRcdFx0fSk7XHJcblxyXG5cdFx0XHQvLyBUaGVuIGhhbmRsZSB2aXNpYmxlIGJ1dHRvbnNcclxuXHRcdFx0Zm9yIChjb25zdCBpdGVtIG9mIGl0ZW1zKSB7XHJcblx0XHRcdFx0aWYgKGl0ZW0uaGlkZGVuKSBjb250aW51ZTtcclxuXHJcblx0XHRcdFx0Y29uc3QgYnV0dG9uID0gYnV0dG9uTWFwLmdldChpdGVtLmlkKTtcclxuXHRcdFx0XHRpZiAoYnV0dG9uKSB7XHJcblx0XHRcdFx0XHQvLyBSZW1vdmUgaGlkZGVuIGNsYXNzIGlmIGl0IHdhcyBwcmV2aW91c2x5IGhpZGRlblxyXG5cdFx0XHRcdFx0YnV0dG9uLmNsYXNzTGlzdC5yZW1vdmUoJ3VpLXR3ZWFrZXItZXhwbG9yZXItYnV0dG9uLWhpZGRlbicpO1xyXG5cdFx0XHRcdFx0b3JkZXJlZEJ1dHRvbnMucHVzaChidXR0b24pO1xyXG5cdFx0XHRcdFx0YnV0dG9uTWFwLmRlbGV0ZShpdGVtLmlkKTtcclxuXHRcdFx0XHR9IGVsc2UgaWYgKGl0ZW0udHlwZSA9PT0gJ2N1c3RvbScpIHtcclxuXHRcdFx0XHRcdC8vIFJlY3JlYXRlIGN1c3RvbSBjb21tYW5kIGJ1dHRvblxyXG5cdFx0XHRcdFx0Y29uc3QgY29tbWFuZFBhaXIgPSB0aGlzLnBsdWdpbi5zZXR0aW5ncy5leHBsb3JlckNvbW1hbmRzLmZpbmQoYyA9PiBjLmlkID09PSBpdGVtLmNvbW1hbmRJZCk7XHJcblx0XHRcdFx0XHRpZiAoY29tbWFuZFBhaXIpIHtcclxuXHRcdFx0XHRcdFx0dGhpcy5hZGRFeHBsb3JlckJ1dHRvbihuYXZCdXR0b25zQ29udGFpbmVyLCBjb21tYW5kUGFpciwgbGVhZik7XHJcblx0XHRcdFx0XHR9XHJcblx0XHRcdFx0fVxyXG5cdFx0XHR9XHJcblxyXG5cdFx0XHQvLyBSZW1vdmUgYnV0dG9ucyB0aGF0IGFyZSBubyBsb25nZXIgaW4gc2V0dGluZ3MgKGV4Y2VwdCBuYXRpdmUgYW5kIGV4dGVybmFsKVxyXG5cdFx0XHRidXR0b25NYXAuZm9yRWFjaCgoYnV0dG9uLCBpZCkgPT4ge1xyXG5cdFx0XHRcdGNvbnN0IGl0ZW0gPSBpdGVtcy5maW5kKGkgPT4gaS5pZCA9PT0gaWQpO1xyXG5cdFx0XHRcdGlmICghaXRlbSAmJiAhaWQuc3RhcnRzV2l0aCgnbmF0aXZlLScpICYmICFpZC5zdGFydHNXaXRoKCdleHRlcm5hbC0nKSkge1xyXG5cdFx0XHRcdFx0YnV0dG9uLnJlbW92ZSgpO1xyXG5cdFx0XHRcdH1cclxuXHRcdFx0fSk7XHJcblxyXG5cdFx0XHQvLyBQaHlzaWNhbGx5IHJlb3JkZXIgRE9NIGVsZW1lbnRzXHJcblx0XHRcdG9yZGVyZWRCdXR0b25zLmZvckVhY2goKGJ1dHRvbikgPT4ge1xyXG5cdFx0XHRcdGlmIChidXR0b24ucGFyZW50RWxlbWVudCA9PT0gbmF2QnV0dG9uc0NvbnRhaW5lcikge1xyXG5cdFx0XHRcdFx0bmF2QnV0dG9uc0NvbnRhaW5lci5hcHBlbmRDaGlsZChidXR0b24pO1xyXG5cdFx0XHRcdH1cclxuXHRcdFx0fSk7XHJcblxyXG5cdFx0XHQvLyBBcHBseSBuYXRpdmUgaWNvbiBvdmVycmlkZXNcclxuXHRcdFx0dGhpcy5hcHBseU5hdGl2ZUljb25PdmVycmlkZXMoKTtcclxuXHRcdH0pO1xyXG5cclxuXHRcdC8vIFJlY29ubmVjdCBvYnNlcnZlcnMgYWZ0ZXIgYSBkZWxheSB0byBhbGxvdyBET00gdG8gc2V0dGxlXHJcblx0XHRzZXRUaW1lb3V0KCgpID0+IHtcclxuXHRcdFx0dGhpcy5pc1Jlb3JkZXJpbmcgPSBmYWxzZTtcclxuXHRcdFx0Ly8gQ2xlYXIgb2xkIG9ic2VydmVycyBhcnJheSAodGhleSdyZSBhbHJlYWR5IGRpc2Nvbm5lY3RlZClcclxuXHRcdFx0dGhpcy5vYnNlcnZlcnMgPSBbXTtcclxuXHRcdFx0Ly8gUmVjb25uZWN0IG9ic2VydmVyc1xyXG5cdFx0XHR0aGlzLnNldHVwTXV0YXRpb25PYnNlcnZlcigpO1xyXG5cdFx0fSwgMjAwKTtcclxuXHR9XHJcblxyXG5cdC8qKlxyXG5cdCAqIFVwZGF0ZSBidXR0b24gdG9nZ2xlIHN0YXRlIChpY29uIG9yIGlzLWFjdGl2ZSBjbGFzcylcclxuXHQgKi9cclxuXHRwcml2YXRlIHVwZGF0ZUJ1dHRvblRvZ2dsZVN0YXRlKGJ1dHRvbjogSFRNTEVsZW1lbnQsIHBhaXI6IENvbW1hbmRJY29uUGFpcik6IHZvaWQge1xyXG5cdFx0Ly8gQ2hlY2sgaWYgdG9nZ2xlIGlzIGNvbmZpZ3VyZWRcclxuXHRcdC8vIElmIHVzZUFjdGl2ZUNsYXNzIGlzIHRydWUsIHdlIHN0aWxsIG5lZWQgdG8gY2hlY2sgdG9nZ2xlIHN0YXRlIGV2ZW4gd2l0aG91dCB0b2dnbGVJY29uXHJcblx0XHRpZiAoIXBhaXIudG9nZ2xlSWNvbiAmJiAhcGFpci51c2VBY3RpdmVDbGFzcykge1xyXG5cdFx0XHQvLyBObyB0b2dnbGUgY29uZmlndXJlZCAtIHVzZSBkZWZhdWx0IGljb25cclxuXHRcdFx0YnV0dG9uLmVtcHR5KCk7XHJcblx0XHRcdHNldEljb24oYnV0dG9uLCBwYWlyLmljb24pO1xyXG5cdFx0XHRidXR0b24uY2xhc3NMaXN0LnJlbW92ZSgnaXMtYWN0aXZlJyk7XHJcblx0XHRcdC8vIEFwcGx5IGNvbG9yIG9ubHkgaWYgY3VzdG9tIGNvbG9yIGlzIHNldCAobm90IGJsYWNrL2RlZmF1bHQpXHJcblx0XHRcdGlmIChwYWlyLmNvbG9yICYmIHBhaXIuY29sb3IgIT09ICcjMDAwMDAwJykge1xyXG5cdFx0XHRcdGJ1dHRvbi5zdHlsZS5jb2xvciA9IHBhaXIuY29sb3I7XHJcblx0XHRcdH0gZWxzZSB7XHJcblx0XHRcdFx0YnV0dG9uLnN0eWxlLnJlbW92ZVByb3BlcnR5KCdjb2xvcicpO1xyXG5cdFx0XHR9XHJcblx0XHRcdHJldHVybjtcclxuXHRcdH1cclxuXHJcblx0XHQvLyBDaGVjayBpZiBjb21tYW5kIGlzIGN1cnJlbnRseSB0b2dnbGVkIG9uXHJcblx0XHRjb25zdCBpc0NoZWNrZWQgPSBpc0NvbW1hbmRDaGVja2VkKHBhaXIuaWQsIHRoaXMucGx1Z2luKTtcclxuXHJcblx0XHRpZiAocGFpci51c2VBY3RpdmVDbGFzcykge1xyXG5cdFx0XHQvLyBVc2UgaXMtYWN0aXZlIGNsYXNzIGluc3RlYWQgb2YgaWNvbiBzd2FwXHJcblx0XHRcdC8vIE9ubHkgdXBkYXRlIGljb24gaWYgaXQncyBkaWZmZXJlbnQgKHRvIGF2b2lkIHVubmVjZXNzYXJ5IERPTSBtYW5pcHVsYXRpb24pXHJcblx0XHRcdGNvbnN0IGN1cnJlbnRJY29uID0gYnV0dG9uLnF1ZXJ5U2VsZWN0b3IoJy5zdmctaWNvbicpO1xyXG5cdFx0XHRjb25zdCBpY29uTmFtZSA9IHBhaXIuaWNvbi5yZXBsYWNlKCdsdWNpZGUtJywgJycpO1xyXG5cdFx0XHRpZiAoIWN1cnJlbnRJY29uIHx8ICFjdXJyZW50SWNvbi5jbGFzc0xpc3QuY29udGFpbnMoaWNvbk5hbWUpKSB7XHJcblx0XHRcdFx0YnV0dG9uLmVtcHR5KCk7XHJcblx0XHRcdFx0c2V0SWNvbihidXR0b24sIHBhaXIuaWNvbik7XHJcblx0XHRcdH1cclxuXHRcdFx0Ly8gQWx3YXlzIHVwZGF0ZSBpcy1hY3RpdmUgY2xhc3MgYmFzZWQgb24gdG9nZ2xlIHN0YXRlXHJcblx0XHRcdGlmIChpc0NoZWNrZWQpIHtcclxuXHRcdFx0XHRidXR0b24uY2xhc3NMaXN0LmFkZCgnaXMtYWN0aXZlJyk7XHJcblx0XHRcdH0gZWxzZSB7XHJcblx0XHRcdFx0YnV0dG9uLmNsYXNzTGlzdC5yZW1vdmUoJ2lzLWFjdGl2ZScpO1xyXG5cdFx0XHR9XHJcblx0XHR9IGVsc2UgaWYgKHBhaXIudG9nZ2xlSWNvbikge1xyXG5cdFx0XHQvLyBTd2FwIGljb24gYmFzZWQgb24gdG9nZ2xlIHN0YXRlIChvbmx5IGlmIHRvZ2dsZUljb24gaXMgc2V0KVxyXG5cdFx0XHRidXR0b24uZW1wdHkoKTtcclxuXHRcdFx0c2V0SWNvbihidXR0b24sIGlzQ2hlY2tlZCA/IHBhaXIudG9nZ2xlSWNvbiA6IHBhaXIuaWNvbik7XHJcblx0XHRcdGJ1dHRvbi5jbGFzc0xpc3QucmVtb3ZlKCdpcy1hY3RpdmUnKTtcclxuXHRcdH1cclxuXHJcblx0XHQvLyBBcHBseSBjb2xvciBvbmx5IGlmIGN1c3RvbSBjb2xvciBpcyBzZXQgKG5vdCBibGFjay9kZWZhdWx0KVxyXG5cdFx0aWYgKHBhaXIuY29sb3IgJiYgcGFpci5jb2xvciAhPT0gJyMwMDAwMDAnKSB7XHJcblx0XHRcdGJ1dHRvbi5zdHlsZS5jb2xvciA9IHBhaXIuY29sb3I7XHJcblx0XHR9IGVsc2Uge1xyXG5cdFx0XHRidXR0b24uc3R5bGUucmVtb3ZlUHJvcGVydHkoJ2NvbG9yJyk7XHJcblx0XHR9XHJcblx0fVxyXG5cclxuXHQvKipcclxuXHQgKiBVcGRhdGUgYnV0dG9uIG5hbWVzL3Rvb2x0aXBzIGZvciBhbGwgZXhpc3RpbmcgYnV0dG9uc1xyXG5cdCAqL1xyXG5cdHB1YmxpYyB1cGRhdGVCdXR0b25OYW1lcygpOiB2b2lkIHtcclxuXHRcdGNvbnN0IGV4cGxvcmVycyA9IHRoaXMucGx1Z2luLmFwcC53b3Jrc3BhY2UuZ2V0TGVhdmVzT2ZUeXBlKCdmaWxlLWV4cGxvcmVyJyk7XHJcblx0XHRleHBsb3JlcnMuZm9yRWFjaCgobGVhZikgPT4ge1xyXG5cdFx0XHRjb25zdCBuYXZCdXR0b25zQ29udGFpbmVyID0gbGVhZi52aWV3Py5jb250YWluZXJFbD8ucXVlcnlTZWxlY3RvcignZGl2Lm5hdi1idXR0b25zLWNvbnRhaW5lcicpIGFzIEhUTUxFbGVtZW50O1xyXG5cdFx0XHRpZiAoIW5hdkJ1dHRvbnNDb250YWluZXIpIHJldHVybjtcclxuXHJcblx0XHRcdGZvciAoY29uc3QgcGFpciBvZiB0aGlzLnBsdWdpbi5zZXR0aW5ncy5leHBsb3JlckNvbW1hbmRzKSB7XHJcblx0XHRcdFx0Y29uc3QgYnV0dG9uID0gbmF2QnV0dG9uc0NvbnRhaW5lci5xdWVyeVNlbGVjdG9yKGBbZGF0YS1leHBsb3Jlci1jb21tYW5kLWlkPVwiJHtwYWlyLmlkfVwiXWApIGFzIEhUTUxFbGVtZW50O1xyXG5cdFx0XHRcdGlmIChidXR0b24pIHtcclxuXHRcdFx0XHRcdGJ1dHRvbi5zZXRBdHRyaWJ1dGUoJ2FyaWEtbGFiZWwnLCBwYWlyLm5hbWUpO1xyXG5cdFx0XHRcdFx0Ly8gVXBkYXRlIHRvZ2dsZSBzdGF0ZSBhcyB3ZWxsXHJcblx0XHRcdFx0XHR0aGlzLnVwZGF0ZUJ1dHRvblRvZ2dsZVN0YXRlKGJ1dHRvbiwgcGFpcik7XHJcblx0XHRcdFx0fVxyXG5cdFx0XHR9XHJcblx0XHR9KTtcclxuXHR9XHJcblxyXG5cdC8qKlxyXG5cdCAqIFVwZGF0ZSBhbGwgYnV0dG9ucyBmb3IgYSBzcGVjaWZpYyBjb21tYW5kIElEIGFjcm9zcyBhbGwgZXhwbG9yZXJzXHJcblx0ICovXHJcblx0cHJpdmF0ZSB1cGRhdGVBbGxCdXR0b25zRm9yQ29tbWFuZChjb21tYW5kSWQ6IHN0cmluZyk6IHZvaWQge1xyXG5cdFx0Y29uc3QgcGFpciA9IHRoaXMucGx1Z2luLnNldHRpbmdzLmV4cGxvcmVyQ29tbWFuZHMuZmluZChwID0+IHAuaWQgPT09IGNvbW1hbmRJZCk7XHJcblx0XHRpZiAoIXBhaXIpIHJldHVybjtcclxuXHJcblx0XHRjb25zdCBleHBsb3JlcnMgPSB0aGlzLnBsdWdpbi5hcHAud29ya3NwYWNlLmdldExlYXZlc09mVHlwZSgnZmlsZS1leHBsb3JlcicpO1xyXG5cdFx0ZXhwbG9yZXJzLmZvckVhY2goKGxlYWYpID0+IHtcclxuXHRcdFx0Y29uc3QgbmF2QnV0dG9uc0NvbnRhaW5lciA9IGxlYWYudmlldz8uY29udGFpbmVyRWw/LnF1ZXJ5U2VsZWN0b3IoJ2Rpdi5uYXYtYnV0dG9ucy1jb250YWluZXInKSBhcyBIVE1MRWxlbWVudDtcclxuXHRcdFx0aWYgKCFuYXZCdXR0b25zQ29udGFpbmVyKSByZXR1cm47XHJcblxyXG5cdFx0XHRjb25zdCBidXR0b24gPSBuYXZCdXR0b25zQ29udGFpbmVyLnF1ZXJ5U2VsZWN0b3IoYFtkYXRhLWV4cGxvcmVyLWNvbW1hbmQtaWQ9XCIke2NvbW1hbmRJZH1cIl1gKSBhcyBIVE1MRWxlbWVudDtcclxuXHRcdFx0aWYgKGJ1dHRvbikge1xyXG5cdFx0XHRcdHRoaXMudXBkYXRlQnV0dG9uVG9nZ2xlU3RhdGUoYnV0dG9uLCBwYWlyKTtcclxuXHRcdFx0fVxyXG5cdFx0fSk7XHJcblx0fVxyXG5cclxuXHQvKipcclxuXHQgKiBSZWZyZXNoIHRvZ2dsZSBzdGF0ZXMgZm9yIGFsbCBidXR0b25zXHJcblx0ICovXHJcblx0cHVibGljIHJlZnJlc2hUb2dnbGVTdGF0ZXMoKTogdm9pZCB7XHJcblx0XHRjb25zdCBleHBsb3JlcnMgPSB0aGlzLnBsdWdpbi5hcHAud29ya3NwYWNlLmdldExlYXZlc09mVHlwZSgnZmlsZS1leHBsb3JlcicpO1xyXG5cdFx0ZXhwbG9yZXJzLmZvckVhY2goKGxlYWYpID0+IHtcclxuXHRcdFx0Y29uc3QgbmF2QnV0dG9uc0NvbnRhaW5lciA9IGxlYWYudmlldz8uY29udGFpbmVyRWw/LnF1ZXJ5U2VsZWN0b3IoJ2Rpdi5uYXYtYnV0dG9ucy1jb250YWluZXInKSBhcyBIVE1MRWxlbWVudDtcclxuXHRcdFx0aWYgKCFuYXZCdXR0b25zQ29udGFpbmVyKSByZXR1cm47XHJcblxyXG5cdFx0XHRmb3IgKGNvbnN0IHBhaXIgb2YgdGhpcy5wbHVnaW4uc2V0dGluZ3MuZXhwbG9yZXJDb21tYW5kcykge1xyXG5cdFx0XHRcdGNvbnN0IGJ1dHRvbiA9IG5hdkJ1dHRvbnNDb250YWluZXIucXVlcnlTZWxlY3RvcihgW2RhdGEtZXhwbG9yZXItY29tbWFuZC1pZD1cIiR7cGFpci5pZH1cIl1gKSBhcyBIVE1MRWxlbWVudDtcclxuXHRcdFx0XHQvLyBSZWZyZXNoIGlmIHRvZ2dsZUljb24gaXMgc2V0IE9SIGlmIHVzZUFjdGl2ZUNsYXNzIGlzIHRydWUgKGJvdGggbmVlZCBzdGF0ZSB1cGRhdGVzKVxyXG5cdFx0XHRcdGlmIChidXR0b24gJiYgKHBhaXIudG9nZ2xlSWNvbiB8fCBwYWlyLnVzZUFjdGl2ZUNsYXNzKSkge1xyXG5cdFx0XHRcdFx0Ly8gQWx3YXlzIHVwZGF0ZSBidXR0b24gc3RhdGUgLSB0aGlzIHdpbGwgY2hlY2sgdGhlIGFjdHVhbCBjb21tYW5kIHN0YXRlXHJcblx0XHRcdFx0XHR0aGlzLnVwZGF0ZUJ1dHRvblRvZ2dsZVN0YXRlKGJ1dHRvbiwgcGFpcik7XHJcblx0XHRcdFx0fVxyXG5cdFx0XHR9XHJcblx0XHR9KTtcclxuXHR9XHJcblxyXG5cdC8qKlxyXG5cdCAqIEFwcGx5IGljb24gb3ZlcnJpZGVzIHRvIG5hdGl2ZSBleHBsb3JlciBidXR0b25zXHJcblx0ICovXHJcblx0cHVibGljIGFwcGx5TmF0aXZlSWNvbk92ZXJyaWRlcygpOiB2b2lkIHtcclxuXHRcdC8vIE9ic2VydmVycyBhcmUgYWxyZWFkeSBkaXNjb25uZWN0ZWQgZHVyaW5nIHJlb3JkZXIsIHNvIG5vIG5lZWQgdG8gc2V0IGZsYWcgaGVyZVxyXG5cdFx0XHJcblx0XHRjb25zdCBleHBsb3JlcnMgPSB0aGlzLnBsdWdpbi5hcHAud29ya3NwYWNlLmdldExlYXZlc09mVHlwZSgnZmlsZS1leHBsb3JlcicpO1xyXG5cdFx0Y29uc3QgaWNvbk92ZXJyaWRlcyA9IHRoaXMucGx1Z2luLnNldHRpbmdzLm5hdGl2ZUV4cGxvcmVyQnV0dG9uSWNvbnM7XHJcblx0XHRcclxuXHRcdC8vIE1hcCBvZiBhcmlhLWxhYmVscyB0byBkZWZhdWx0IGljb25zIGFuZCBpY29uIGtleXNcclxuXHRcdGNvbnN0IGRlZmF1bHRJY29uczogUmVjb3JkPHN0cmluZywgeyBpY29uOiBzdHJpbmcsIGtleTogJ25ld05vdGUnIHwgJ25ld0ZvbGRlcicgfCAnc29ydE9yZGVyJyB8ICdhdXRvUmV2ZWFsJyB8ICdjb2xsYXBzZUFsbCcgfT4gPSB7XHJcblx0XHRcdCdOZXcgbm90ZSc6IHsgaWNvbjogJ2x1Y2lkZS1lZGl0Jywga2V5OiAnbmV3Tm90ZScgfSxcclxuXHRcdFx0J05ldyBmb2xkZXInOiB7IGljb246ICdsdWNpZGUtZm9sZGVyLXBsdXMnLCBrZXk6ICduZXdGb2xkZXInIH0sXHJcblx0XHRcdCdDaGFuZ2Ugc29ydCBvcmRlcic6IHsgaWNvbjogJ2x1Y2lkZS1zb3J0LWFzYycsIGtleTogJ3NvcnRPcmRlcicgfSxcclxuXHRcdFx0J0F1dG8tcmV2ZWFsIGN1cnJlbnQgZmlsZSc6IHsgaWNvbjogJ2x1Y2lkZS1nYWxsZXJ5LXZlcnRpY2FsJywga2V5OiAnYXV0b1JldmVhbCcgfSxcclxuXHRcdFx0J0NvbGxhcHNlIGFsbCc6IHsgaWNvbjogJ2x1Y2lkZS1jaGV2cm9ucy11cC1kb3duJywga2V5OiAnY29sbGFwc2VBbGwnIH0sXHJcblx0XHR9O1xyXG5cclxuXHRcdGV4cGxvcmVycy5mb3JFYWNoKChsZWFmKSA9PiB7XHJcblx0XHRcdGNvbnN0IG5hdkJ1dHRvbnNDb250YWluZXIgPSBsZWFmLnZpZXc/LmNvbnRhaW5lckVsPy5xdWVyeVNlbGVjdG9yKCdkaXYubmF2LWJ1dHRvbnMtY29udGFpbmVyJykgYXMgSFRNTEVsZW1lbnQ7XHJcblx0XHRcdGlmICghbmF2QnV0dG9uc0NvbnRhaW5lcikgcmV0dXJuO1xyXG5cclxuXHRcdFx0Ly8gRmluZCBhbGwgbmF0aXZlIGJ1dHRvbnMgKHRob3NlIHdpdGhvdXQgZGF0YS1leHBsb3Jlci1jb21tYW5kLWlkKVxyXG5cdFx0XHRjb25zdCBuYXRpdmVCdXR0b25zID0gbmF2QnV0dG9uc0NvbnRhaW5lci5xdWVyeVNlbGVjdG9yQWxsKCcubmF2LWFjdGlvbi1idXR0b246bm90KFtkYXRhLWV4cGxvcmVyLWNvbW1hbmQtaWRdKScpO1xyXG5cdFx0XHRuYXRpdmVCdXR0b25zLmZvckVhY2goKGJ1dHRvbikgPT4ge1xyXG5cdFx0XHRcdGNvbnN0IGFyaWFMYWJlbCA9IGJ1dHRvbi5nZXRBdHRyaWJ1dGUoJ2FyaWEtbGFiZWwnKTtcclxuXHRcdFx0XHRpZiAoIWFyaWFMYWJlbCkgcmV0dXJuO1xyXG5cclxuXHRcdFx0XHRjb25zdCBidXR0b25JbmZvID0gZGVmYXVsdEljb25zW2FyaWFMYWJlbF07XHJcblx0XHRcdFx0aWYgKCFidXR0b25JbmZvKSByZXR1cm47XHJcblxyXG5cdFx0XHRcdGNvbnN0IGljb25LZXkgPSBidXR0b25JbmZvLmtleTtcclxuXHRcdFx0XHRjb25zdCBpY29uT3ZlcnJpZGUgPSBpY29uT3ZlcnJpZGVzPy5baWNvbktleV07XHJcblx0XHRcdFx0Y29uc3QgY29sb3JPdmVycmlkZXMgPSB0aGlzLnBsdWdpbi5zZXR0aW5ncy5uYXRpdmVFeHBsb3JlckJ1dHRvbkNvbG9ycztcclxuXHRcdFx0XHRjb25zdCBjb2xvciA9IGNvbG9yT3ZlcnJpZGVzPy5baWNvbktleV07XHJcblx0XHRcdFx0XHJcblx0XHRcdFx0Ly8gQWx3YXlzIHVwZGF0ZSB0aGUgaWNvbiAoZWl0aGVyIG92ZXJyaWRlIG9yIGRlZmF1bHQpXHJcblx0XHRcdFx0YnV0dG9uLmVtcHR5KCk7XHJcblx0XHRcdFx0aWYgKGljb25PdmVycmlkZSkge1xyXG5cdFx0XHRcdFx0Ly8gQXBwbHkgaWNvbiBvdmVycmlkZVxyXG5cdFx0XHRcdFx0c2V0SWNvbihidXR0b24gYXMgSFRNTEVsZW1lbnQsIGljb25PdmVycmlkZSk7XHJcblx0XHRcdFx0fSBlbHNlIHtcclxuXHRcdFx0XHRcdC8vIE5vIGljb24gb3ZlcnJpZGUgLSByZXN0b3JlIGRlZmF1bHQgaWNvblxyXG5cdFx0XHRcdFx0c2V0SWNvbihidXR0b24gYXMgSFRNTEVsZW1lbnQsIGJ1dHRvbkluZm8uaWNvbik7XHJcblx0XHRcdFx0fVxyXG5cdFx0XHRcdFxyXG5cdFx0XHRcdC8vIEFwcGx5IGNvbG9yIGlmIHNldFxyXG5cdFx0XHRcdGlmIChjb2xvcikge1xyXG5cdFx0XHRcdFx0KGJ1dHRvbiBhcyBIVE1MRWxlbWVudCkuc3R5bGUuY29sb3IgPSBjb2xvcjtcclxuXHRcdFx0XHR9IGVsc2Uge1xyXG5cdFx0XHRcdFx0Ly8gUmVtb3ZlIGlubGluZSBjb2xvciAtIGxldCBkZWZhdWx0IENTUyBoYW5kbGUgaXRcclxuXHRcdFx0XHRcdChidXR0b24gYXMgSFRNTEVsZW1lbnQpLnN0eWxlLnJlbW92ZVByb3BlcnR5KCdjb2xvcicpO1xyXG5cdFx0XHRcdH1cclxuXHRcdFx0fSk7XHJcblx0XHR9KTtcclxuXHR9XHJcblxyXG5cdC8qKlxyXG5cdCAqIFJlbW92ZSBhIGNvbW1hbmQgZnJvbSBleHBsb3JlclxyXG5cdCAqL1xyXG5cdHB1YmxpYyBhc3luYyByZW1vdmVDb21tYW5kKHBhaXI6IENvbW1hbmRJY29uUGFpcik6IFByb21pc2U8dm9pZD4ge1xyXG5cdFx0aWYgKCF0aGlzLnBsdWdpbi5zZXR0aW5ncy5leHBsb3JlckNvbW1hbmRzKSByZXR1cm47XHJcblx0XHRjb25zdCBpbmRleCA9IHRoaXMucGx1Z2luLnNldHRpbmdzLmV4cGxvcmVyQ29tbWFuZHMuaW5kZXhPZihwYWlyKTtcclxuXHRcdGlmIChpbmRleCA+IC0xKSB7XHJcblx0XHRcdHRoaXMucGx1Z2luLnNldHRpbmdzLmV4cGxvcmVyQ29tbWFuZHMuc3BsaWNlKGluZGV4LCAxKTtcclxuXHRcdH1cclxuXHRcdHRoaXMucmVvcmRlcigpO1xyXG5cdFx0YXdhaXQgdGhpcy5wbHVnaW4uc2F2ZVNldHRpbmdzKCk7XHJcblx0fVxyXG59XHJcbiJdLAogICJtYXBwaW5ncyI6ICI7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBSUEsSUFBQUEsb0JBQWtEOzs7QUN1RzNDLElBQU0sbUJBQStCO0FBQUE7QUFBQSxFQUUzQyxVQUFVO0FBQUEsRUFDVix1QkFBdUI7QUFBQSxFQUN2QixpQkFBaUI7QUFBQSxFQUNqQixnQkFBZ0I7QUFBQSxFQUNoQixpQkFBaUI7QUFBQSxFQUNqQixxQkFBcUI7QUFBQSxFQUNyQixlQUFlO0FBQUEsRUFDZixZQUFZ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QSxXQUFLLG1CQUFtQjtBQUd4QixVQUFJLEtBQUssc0JBQXNCLFNBQVMsS0FBSyxTQUFTLEtBQUssa0JBQWtCLEdBQUc7QUFDL0UsYUFBSyxtQkFBbUIsTUFBTSxlQUFlLFNBQVM7QUFBQSxNQUN2RDtBQUNBLFdBQUsscUJBQXFCO0FBQUEsSUFDM0I7QUFBQSxFQUNEO0FBQ0Q7IiwKICAibmFtZXMiOiBbImltcG9ydF9vYnNpZGlhbiIsICJpbXBvcnRfb2JzaWRpYW4iLCAiaW1wb3J0X29ic2lkaWFuIiwgInZhbHVlIiwgImltcG9ydF9vYnNpZGlhbiIsICJpbXBvcnRfb2JzaWRpYW4iLCAiaW1wb3J0X29ic2lkaWFuIiwgImltcG9ydF9vYnNpZGlhbiIsICJpbXBvcnRfb2JzaWRpYW4iLCAiX2EiLCAiaW1wb3J0X29ic2lkaWFuIiwgImFycmF5TW92ZU11dGFibGUiLCAiX2EiLCAiaW1wb3J0X29ic2lkaWFuIiwgImFycmF5TW92ZU11dGFibGUiLCAiX2EiLCAiY29udHJvbEVsIiwgImljb25CdXR0b24iLCAiaW1wb3J0X29ic2lkaWFuIiwgImltcG9ydF9vYnNpZGlhbiIsICJpbXBvcnRfb2JzaWRpYW4iLCAic3RhYmxlQ2xhc3NlcyIsICJlbGVtZW50TmFtZSIsICJpbXBvcnRfb2JzaWRpYW4iLCAiX2EiLCAidmF1bHRBY3Rpb25zIiwgIl9iIiwgIl9jIiwgIl9kIiwgInJpZ2h0RHJhd2VyIl0KfQo=
